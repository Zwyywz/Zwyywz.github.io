<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>ã€YOLOv5ã€‘åˆä½“éªŒ</title>
      <link href="/2021/06/15/YOLOv5%E5%88%9D%E4%BD%93%E9%AA%8C/"/>
      <url>/2021/06/15/YOLOv5%E5%88%9D%E4%BD%93%E9%AA%8C/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€YOLOv5ã€‘åˆä½“éªŒ"><a href="#ã€YOLOv5ã€‘åˆä½“éªŒ" class="headerlink" title="ã€YOLOv5ã€‘åˆä½“éªŒ"></a>ã€YOLOv5ã€‘åˆä½“éªŒ</h1><h2 id="1ã€-Yolov5ç®€ä»‹"><a href="#1ã€-Yolov5ç®€ä»‹" class="headerlink" title="1ã€ Yolov5ç®€ä»‹"></a>1ã€ Yolov5ç®€ä»‹</h2><p>Yolov5å®˜æ–¹ä»£ç ä¸­ï¼Œç»™å‡ºçš„ç›®æ ‡æ£€æµ‹ç½‘ç»œä¸­ä¸€å…±æœ‰4ä¸ªç‰ˆæœ¬ï¼Œåˆ†åˆ«æ˜¯<strong>Yolov5sã€Yolov5mã€Yolov5lã€Yolov5x</strong>å››ä¸ªæ¨¡å‹ã€‚</p><p>Yolov5çš„ç»“æ„å’ŒYolov4å¾ˆç›¸ä¼¼ï¼Œä½†ä¹Ÿæœ‰ä¸€äº›ä¸åŒã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/v2-770a51ddf78b084affff948bb522b6c0_720w.jpg"></p><p>ä¸Šå›¾å³<strong>Yolov5</strong>çš„ç½‘ç»œç»“æ„å›¾ï¼Œå¯ä»¥çœ‹å‡ºï¼Œè¿˜æ˜¯åˆ†ä¸º<strong>è¾“å…¥ç«¯ã€Backboneã€Neckã€Prediction</strong>å››ä¸ªéƒ¨åˆ†ã€‚</p><p>å¤§å®¶å¯èƒ½å¯¹<strong>Yolov3</strong>æ¯”è¾ƒç†Ÿæ‚‰ï¼Œå› æ­¤å¤§ç™½åˆ—ä¸¾å®ƒå’ŒYolov3çš„ä¸€äº›ä¸»è¦çš„ä¸åŒç‚¹ï¼Œå¹¶å’ŒYolov4è¿›è¡Œæ¯”è¾ƒã€‚</p><p>â€‹    <strong>ï¼ˆ1ï¼‰è¾“å…¥ç«¯ï¼š</strong>Mosaicæ•°æ®å¢å¼ºã€è‡ªé€‚åº”é”šæ¡†è®¡ç®—ã€è‡ªé€‚åº”å›¾ç‰‡ç¼©æ”¾<br>â€‹            <strong>ï¼ˆ2ï¼‰Backboneï¼š</strong>Focusç»“æ„ï¼ŒCSPç»“æ„<br>â€‹            <strong>ï¼ˆ3ï¼‰Neckï¼š</strong>FPN+PANç»“æ„<br>â€‹            <strong>ï¼ˆ4ï¼‰Predictionï¼š</strong>GIOU_Loss</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210618092709617.png"></p><p>Yolov5ä½œè€…ä¹Ÿæ˜¯åœ¨COCOæ•°æ®é›†ä¸Šè¿›è¡Œçš„æµ‹è¯•ï¼ŒCOCOæ•°æ®é›†çš„å°ç›®æ ‡å æ¯”ï¼Œå› æ­¤æœ€ç»ˆçš„å››ç§ç½‘ç»œç»“æ„ï¼Œæ€§èƒ½ä¸Šæ¥è¯´å„æœ‰åƒç§‹ã€‚Yolov5sç½‘ç»œæœ€å°ï¼Œé€Ÿåº¦æœ€å°‘ï¼ŒAPç²¾åº¦ä¹Ÿæœ€ä½ã€‚ä½†å¦‚æœæ£€æµ‹çš„ä»¥å¤§ç›®æ ‡ä¸ºä¸»ï¼Œè¿½æ±‚é€Ÿåº¦ï¼Œå€’ä¹Ÿæ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚å…¶ä»–çš„ä¸‰ç§ç½‘ç»œï¼Œåœ¨æ­¤åŸºç¡€ä¸Šï¼Œä¸æ–­åŠ æ·±åŠ å®½ç½‘ç»œï¼ŒAPç²¾åº¦ä¹Ÿä¸æ–­æå‡ï¼Œä½†é€Ÿåº¦çš„æ¶ˆè€—ä¹Ÿåœ¨ä¸æ–­å¢åŠ ã€‚</p><p><strong>æ€»ç»“ï¼šåœ¨ç›®æ ‡æ£€æµ‹é¢†åŸŸï¼Œé€Ÿåº¦æ¯”YOLOå¿«çš„ï¼Œç²¾åº¦åŸºæœ¬æ²¡æœ‰YOLOé«˜ã€‚ç²¾åº¦æ¯”YOLOé«˜çš„ï¼Œé€Ÿåº¦åŸºæœ¬æ²¡æœ‰YOLOå¿«ã€‚</strong></p><h2 id="2ã€ç¯å¢ƒä¾èµ–"><a href="#2ã€ç¯å¢ƒä¾èµ–" class="headerlink" title="2ã€ç¯å¢ƒä¾èµ–"></a>2ã€ç¯å¢ƒä¾èµ–</h2><p><strong>æœ¬äººç¯å¢ƒå£°æ˜ï¼š</strong></p><p><strong>ä¸»æœºï¼š</strong><code>æé“¾AIäº‘GPUæœåŠ¡å™¨ï¼ŒGPUä¸ºTITAN Xp 24ã€‚é…ç½®å¦‚ä¸‹ã€‚</code></p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210618093419130.png"></p><p><strong>ç³»ç»Ÿï¼š</strong><code>ubuntu 18.04</code></p><p><strong>å¼€å‘å·¥å…·ï¼š</strong><code>vscode+ssh</code></p><p><strong>step1ã€å…‹éš†é¡¹ç›®</strong></p><p>YOLOv5æºç æ‰˜ç®¡åœ¨githubä¸Šï¼š</p><pre class=" language-shell"><code class="language-shell">git clone https://github.com/ultralytics/yolov5.git</code></pre><p><strong>step2ã€å®‰è£…å¿…è¦çš„ç¯å¢ƒ</strong></p><ol><li>ä¸‹è½½[<a href="https://www.anaconda.com/products/individual#linux">Anaconda</a>]ï¼Œæ‰§è¡Œå®‰è£…æŒ‡ä»¤ï¼š<pre class=" language-shell"><code class="language-shell">bash /your_dir/Anaconda3-2021.05-Linux-x86_64.sh</code></pre></li></ol><p>å¦‚è‹¥ä¸æ›´æ”¹å®‰è£…è·¯å¾„ï¼Œä¸€ç›´å›è½¦æˆ–è€…è¾“å…¥yeså³å¯å®Œæˆå®‰è£…</p><p>æ¥ä¸‹æ¥åˆ›å»ºYOLOv5çš„è™šæ‹Ÿç¯å¢ƒï¼Œä»¥ä¾¿äºéš”ç¦»ä¸åŒPythonç‰ˆæœ¬ä¹‹é—´çš„å½±å“ï¼š</p><pre class=" language-shell"><code class="language-shell">conda create --name YOLOv5 python=3.8#åˆ›å»ºè™šæ‹Ÿç¯å¢ƒconda activate YOLOv5#æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</code></pre><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210618094815452.png"></p><ol start="2"><li><p>å®‰è£…Pytorch,åœ¨å®˜ç½‘å¯ä»¥æ‰¾åˆ°å®‰è£…æŒ‡ä»¤ï¼Œé€‰æ‹©Stable(1.9.0)ç‰ˆæœ¬ï¼ŒLinuxæ“ä½œç³»ç»Ÿï¼ŒCondaå¼€å‘ç¯å¢ƒï¼ŒPythonå¼€å‘è¯­è¨€ï¼ŒCUDA 11.1ã€‚ä¾¿èƒ½å¾—åˆ°å®‰è£…æŒ‡ä»¤ï¼š</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210618100100769.png"></p></li></ol><pre class=" language-shell"><code class="language-shell">conda install pytorch torchvision torchaudio cudatoolkit=11.1 -c pytorch -c nvidia</code></pre><ol start="3"><li>å®‰è£…å…¶ä»–å¿…å¤‡ç¯å¢ƒï¼ŒYOLOv5å…¶ä»–å¿…å¤‡ç¯å¢ƒéƒ½å†™åœ¨ä»£ç åŒ…é‡Œé¢ï¼Œæœ‰ä¸ªrequirements.txtæ–‡ä»¶ï¼Œå…¶ä¸­åŒ…æ‹¬äº†ä¸€äº›åŸºæœ¬çš„å¿…å¤‡ç¯å¢ƒã€‚åªéœ€æ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤å³å¯å®‰è£…ã€‚</li></ol><pre class=" language-shell"><code class="language-shell">pip install -U -r requirements.txt</code></pre><h2 id="3-ã€è®¾ç½®æ ·æœ¬æ•°æ®å’Œæ ‡ç­¾"><a href="#3-ã€è®¾ç½®æ ·æœ¬æ•°æ®å’Œæ ‡ç­¾" class="headerlink" title="3 ã€è®¾ç½®æ ·æœ¬æ•°æ®å’Œæ ‡ç­¾"></a>3 ã€è®¾ç½®æ ·æœ¬æ•°æ®å’Œæ ‡ç­¾</h2><p>æ­¤æ¬¡æ ·æœ¬æ•°æ®æ¥è‡ªæŸç”µå‚çš„ä»ªå™¨ä»ªè¡¨æ•°æ®ï¼Œä¸»è¦æ˜¯è¯†åˆ«ç…§ç‰‡ä¸­çš„ä»ªå™¨ä»ªè¡¨ä½ç½®ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210618104902350.png"></p><p>  é¦–å…ˆï¼Œé€šè¿‡ä¸€ä¸ªç®€å•çš„è„šæœ¬rename.pyä¸ºè¿™äº›ç…§ç‰‡è¿›è¡Œé‡å‘½å:</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true">#rename.py</span><span class="token comment" spellcheck="true">#coding:UTF-8</span><span class="token keyword">import</span> osfolder_path <span class="token operator">=</span> <span class="token string">"/æ ·æœ¬æ•°æ®çš„è·¯å¾„/"</span>file_list <span class="token operator">=</span> os<span class="token punctuation">.</span>listdir<span class="token punctuation">(</span>folder_path<span class="token punctuation">)</span>os<span class="token punctuation">.</span>chdir<span class="token punctuation">(</span>folder_path<span class="token punctuation">)</span>   n<span class="token operator">=</span><span class="token number">0</span><span class="token keyword">for</span> old_name <span class="token keyword">in</span> file_list<span class="token punctuation">:</span>    new_name <span class="token operator">=</span> <span class="token string">"image"</span> <span class="token operator">+</span> str<span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token operator">+</span><span class="token string">".JPG"</span>    os<span class="token punctuation">.</span>rename<span class="token punctuation">(</span>old_name<span class="token punctuation">,</span> new_name<span class="token punctuation">)</span>    n<span class="token operator">=</span>n<span class="token operator">+</span><span class="token number">1</span></code></pre><p>å¯ä»¥å¾—åˆ°å¦‚ä¸‹ç»“æœï¼š</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210618105318363.png"></p><p>æ¥ä¸‹æ¥ï¼Œä¸ºæ ·æœ¬æ•°æ®è®¾ç½®æ ‡ç­¾ï¼ˆlabelsï¼‰ã€‚è¿™é‡Œä½¿ç”¨çš„labelImgå·¥å…·ã€‚å¯ä»¥ç›´æ¥ä½¿pipå®‰è£…</p><pre class=" language-shell"><code class="language-shell">pip isntall labelImg#å®‰è£…labelImg</code></pre><p><code>labelImg</code>æ˜¯ä¸€æ¬¾æ˜¯ç”¨äºåˆ¶ä½œæ•°æ®é›†æ—¶ï¼Œå¯¹æ•°æ®é›†è¿›è¡Œæ ‡æ³¨çš„å·¥å…·ï¼ŒlabelImgæ˜¯æ·±åº¦å­¦ä¹ æœ€å¸¸ç”¨çš„æ ‡æ³¨å·¥å…·ä¹‹ä¸€ã€‚</p><p><strong>æ³¨æ„ï¼šlabelsæ–‡ä»¶å¤¹åº”å’Œimagesæ–‡ä»¶åœ¨åŒä¸€è·¯å¾„ä¸‹ã€‚ä¸”labelsæ–‡ä»¶å¤¹ä¸‹åº”æœ‰ä¸€ä¸ªåä¸ºclasses.txtæ–‡ä»¶ï¼Œé‡Œé¢å†™ç€åˆ†ç±»ç±»åˆ«ã€‚</strong></p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/llll.png"></p><p>è¿è¡Œæ–¹æ³•ä¸ºåœ¨å‘½ä»¤è¡Œå·¥å…·ï¼ˆWindowsä¸‹å¯ä»¥æ˜¯CMD ã€Powershellç­‰ï¼‰ï¼ŒæŒ‡å®šimageè·¯å¾„å’Œåˆ†ç±»æ ‡ç­¾è·¯å¾„ã€‚</p><pre class=" language-shell"><code class="language-shell">label /imageè·¯å¾„/   /labelæ ‡ç­¾ä¿å­˜è·¯å¾„/classs.txt</code></pre><p>ä¹‹åä¼šå¼¹å‡ºlabelImgçš„UIé¡µé¢ï¼šå°†æ•°æ®æ ¼å¼è®¾ç½®ä¸ºYOLOæ‰èƒ½ç”Ÿæˆtxtæ ¼å¼çš„æ ‡ç­¾ï¼ŒæŒ‰Wå¿«é€Ÿé€‰æ‹©ç›®æ ‡åŒºåŸŸï¼ŒæŒ‰A/Dä¸ºä¸Šä¸€å¼ /ä¸‹ä¸€å¼ ã€‚ </p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210619142519252.png"></p><p>æ ‡è®°å®Œæ‰€æœ‰å›¾ç‰‡åä¼šå¾—åˆ°å¦‚å›¾æ‰€ç¤ºçš„æ–‡ä»¶ç»“æ„ï¼š</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210619151051478.png"></p><p>è‡³æ­¤ï¼Œæ ·æœ¬æ•°æ®å°±å‡†å¤‡å®Œæ¯•ã€‚</p><h2 id="4ã€æ­£å¼è®­ç»ƒæ¨¡å‹"><a href="#4ã€æ­£å¼è®­ç»ƒæ¨¡å‹" class="headerlink" title="4ã€æ­£å¼è®­ç»ƒæ¨¡å‹"></a>4ã€æ­£å¼è®­ç»ƒæ¨¡å‹</h2><p>åœ¨YOLOv5é¡¹ç›®çš„<code>./models</code>æ–‡ä»¶å¤¹ä¸‹é€‰æ‹©ä¸€ä¸ªéœ€è¦è®­ç»ƒçš„æ¨¡å‹ï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹©yolov5s.yaml,æœ€å°çš„ä¸€ä¸ªæ¨¡å‹è¿›è¡Œè®­ç»ƒï¼Œå‚è€ƒå®˜æ–¹READMEä¸­çš„<a href="https://github.com/ultralytics/yolov5#pretrained-checkpoints">table</a>,äº†è§£ä¸åŒæ¨¡å‹çš„å¤§å°å’Œæ¨æ–­é€Ÿåº¦ã€‚å¦‚æœä½ é€‰å®šäº†ä¸€ä¸ªæ¨¡å‹ï¼Œé‚£ä¹ˆéœ€è¦ä¿®æ”¹æ¨¡å‹å¯¹åº”çš„<code>yaml</code>æ–‡ä»¶</p><pre class=" language-yaml"><code class="language-yaml"><span class="token comment" spellcheck="true"># parameters</span><span class="token key atrule">nc</span><span class="token punctuation">:</span> <span class="token number">3  </span><span class="token comment" spellcheck="true"># number of classes     &lt;------------> è®¾ç½®ä¸ºè‡ªå·±æ•°æ®é›†çš„ç±»åˆ«ä¸ªæ•°</span><span class="token key atrule">depth_multiple</span><span class="token punctuation">:</span> <span class="token number">0.33  </span><span class="token comment" spellcheck="true"># model depth multiple</span><span class="token key atrule">width_multiple</span><span class="token punctuation">:</span> <span class="token number">0.50  </span><span class="token comment" spellcheck="true"># layer channel multiple</span><span class="token comment" spellcheck="true"># anchors</span><span class="token key atrule">anchors</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">]</span>  <span class="token comment" spellcheck="true"># P3/8</span>  <span class="token punctuation">-</span> <span class="token punctuation">[</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">61</span><span class="token punctuation">,</span> <span class="token number">62</span><span class="token punctuation">,</span><span class="token number">45</span><span class="token punctuation">,</span> <span class="token number">59</span><span class="token punctuation">,</span><span class="token number">119</span><span class="token punctuation">]</span>  <span class="token comment" spellcheck="true"># P4/16</span>  <span class="token punctuation">-</span> <span class="token punctuation">[</span><span class="token number">116</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">156</span><span class="token punctuation">,</span><span class="token number">198</span><span class="token punctuation">,</span> <span class="token number">373</span><span class="token punctuation">,</span><span class="token number">326</span><span class="token punctuation">]</span>  <span class="token comment" spellcheck="true"># P5/32</span><span class="token comment" spellcheck="true"># YOLOv5 backbone</span><span class="token key atrule">backbone</span><span class="token punctuation">:</span>  <span class="token comment" spellcheck="true"># [from, number, module, args]</span>  <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Focus<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true"># 0-P1/2</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">128</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true"># 1-P2/4</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> C3<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">128</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true"># 3-P3/8</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> C3<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">256</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true"># 5-P4/16</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> C3<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">512</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true"># 7-P5/32</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> SPP<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> C3<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">,</span> <span class="token boolean important">False</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true"># 9</span>  <span class="token punctuation">]</span><span class="token comment" spellcheck="true"># YOLOv5 head</span><span class="token key atrule">head</span><span class="token punctuation">:</span>  <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> nn.Upsample<span class="token punctuation">,</span> <span class="token punctuation">[</span>None<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'nearest'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>   <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Concat<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true"># cat backbone P4</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> C3<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">512</span><span class="token punctuation">,</span> <span class="token boolean important">False</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true"># 13</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> nn.Upsample<span class="token punctuation">,</span> <span class="token punctuation">[</span>None<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'nearest'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>   <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Concat<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true"># cat backbone P3</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> C3<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">256</span><span class="token punctuation">,</span> <span class="token boolean important">False</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true"># 17 (P3/8-small)</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>   <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Concat<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true"># cat head P4</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> C3<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">512</span><span class="token punctuation">,</span> <span class="token boolean important">False</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true"># 20 (P4/16-medium)</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>   <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Concat<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true"># cat head P5</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> C3<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">,</span> <span class="token boolean important">False</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true"># 23 (P5/32-large)</span>   <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">17</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Detect<span class="token punctuation">,</span> <span class="token punctuation">[</span>nc<span class="token punctuation">,</span> anchors<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true"># Detect(P3, P4, P5)</span>  <span class="token punctuation">]</span></code></pre><p>å‚è€ƒå®˜æ–¹çš„æ•°æ®é›†æ ¼å¼ï¼Œéœ€è¦é€šè¿‡ä¸€ä¸ªyamlæ–‡ä»¶æŒ‡å®šæ•°æ®é›†çš„æ¥æºã€‚æ•…è€Œæ–°å»ºä¸€ä¸ªdata.yamlæ–‡ä»¶æ”¾åœ¨dataæ–‡ä»¶ä¸‹ï¼Œå®¹å¦‚ä¸‹ï¼š</p><pre class=" language-yaml"><code class="language-yaml"><span class="token comment" spellcheck="true"># train and val data as 1) directory: path/images/, 2) file: path/images.txt, or 3) list: [path1/images/, path2/images/]</span><span class="token key atrule">train</span><span class="token punctuation">:</span> /root/yolov51/mydata/images/  <span class="token comment" spellcheck="true"># è®­ç»ƒæ•°æ®é›†</span><span class="token key atrule">val</span><span class="token punctuation">:</span> /root/yolov51/mydata/images/  <span class="token comment" spellcheck="true"># æµ‹è¯•æ•°æ®é›†</span><span class="token comment" spellcheck="true"># number of classes</span><span class="token key atrule">nc</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token comment" spellcheck="true"># class names</span><span class="token key atrule">names</span><span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token string">'Pointer-instrument'</span><span class="token punctuation">,</span><span class="token string">'Digital-display-instrument'</span><span class="token punctuation">,</span><span class="token string">'Indicator-light'</span> <span class="token punctuation">]</span></code></pre><p>åšå¥½ä»¥ä¸Šå‡†å¤‡å·¥ä½œåï¼Œå°±å¯ä»¥å¼€å§‹è®­ç»ƒï¼ŒYOLOv5çš„è®­ç»ƒæ–‡ä»¶ä¸ºï¼štrain.pyã€‚åœ¨é˜…è¯»æºç åï¼Œå‘ç°è‡³å°‘éœ€è¦æŒ‡å®šå¦‚ä¸‹å‚æ•°æ‰èƒ½æ­£å¸¸è®­ç»ƒï¼š</p><pre class=" language-shell"><code class="language-shell"># Train yolov5x on score for 300 epochspython train.py --img-size 640  --epochs 300 --data ./data/mydata.yaml --cfg ./models/yolov5s.yaml --weights ./yolov5s.pt</code></pre><ul><li><code> --img-size</code>ï¼šè¾“å…¥å›¾ç‰‡çš„å¤§å°</li><li><code>--epochs</code>ï¼šè®­ç»ƒæ­¥é•¿</li><li><code>--data </code>:æ•°æ®é›†é…ç½®æ–‡ä»¶</li><li><code>--cfg </code>ï¼šæ¨¡å‹é…ç½®æ–‡ä»¶</li><li><code>--weights</code>ï¼šæƒé‡é…ç½®æ–‡ä»¶</li></ul><p>å¼€å§‹è®­ç»ƒåä¼šå‡ºç°å¦‚ä¸‹ç»“æœï¼Œåˆ™è¡¨ç¤ºè®­ç»ƒæ­£å¸¸ï¼š</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210619125153656.png"></p><p>è®­ç»ƒä¹‹åç”Ÿæˆçš„ç»“æœä¼šé€šè¿‡<code>tensorboard </code>åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼Œæƒé‡æ–‡ä»¶ä¼šä¿å­˜åœ¨./runs/train/expN/weights/ä¸­ï¼Œé‡Œé¢ä¼šæœ‰best.ptå’Œlast.ptä¸¤ä¸ªæ–‡ä»¶ã€‚</p><p>å¯ä»¥çœ‹åˆ°éšè®­ç»ƒç”Ÿæˆçš„åˆ†æç»Ÿè®¡ï¼š</p><p>æ¯”å¦‚ï¼Œä¸‰ç±»ä»ªè¡¨çš„ä¸ªæ•°å’Œåœ¨å›¾ç‰‡ä¸­çš„ä½ç½®ç»Ÿè®¡å¦‚ä¸‹ï¼š</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/labels.jpg"></p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/labels_correlogram.jpg"></p><p>æœ€åï¼šå¯¹äºéªŒè¯æ•°æ®é›†æµ‹è¯•æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/test_batch0_pred.jpg"></p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/test_batch1_pred.jpg"></p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/test_batch2_pred.jpg"></p><h2 id="5ã€æ£€æµ‹ä»ªè¡¨ä½ç½®"><a href="#5ã€æ£€æµ‹ä»ªè¡¨ä½ç½®" class="headerlink" title="5ã€æ£€æµ‹ä»ªè¡¨ä½ç½®"></a>5ã€æ£€æµ‹ä»ªè¡¨ä½ç½®</h2><p>YOLOv5ä¸­æä¾›äº†detect.pyè„šæœ¬ï¼Œå¯ä»¥æ£€æµ‹å•å¼ å›¾ç‰‡ï¼Œå¤šå¼ å›¾ç‰‡ï¼Œä»¥åŠè§†é¢‘ã€‚</p><p>å•å¼ å›¾ç‰‡æµ‹è¯•å‘½ä»¤ï¼š</p><pre class=" language-python"><code class="language-python">python detect<span class="token punctuation">.</span>py <span class="token operator">-</span><span class="token operator">-</span>source inference<span class="token operator">/</span>image0<span class="token punctuation">.</span>jpg <span class="token operator">-</span><span class="token operator">-</span>weights <span class="token punctuation">.</span><span class="token operator">/</span>runs<span class="token operator">/</span>train<span class="token operator">/</span>expN<span class="token operator">/</span>weights<span class="token operator">/</span>best<span class="token punctuation">.</span>pt </code></pre><p>é¢„æµ‹ç»“æ„ä¼šä¿å­˜åœ¨./runs/detect/ä¸­</p><p>è¿™é‡Œä»¥ä¸€æ®µè§†é¢‘ä¸ºä¾‹ï¼š</p><pre class=" language-shell"><code class="language-shell">python detect.py --source /YourMP4dir/test.mp4 --weights ./runs/train/expN/weights/best.pt </code></pre><p>ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image261.MP4"></p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image263.MP4"></p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¯å¢ƒé…ç½® </tag>
            
            <tag> opencv </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ±½è½¦æ²¹è€—é¢„æµ‹å®æˆ˜</title>
      <link href="/2021/05/21/%E6%B2%B9%E8%80%97%E9%A2%84%E6%B5%8B/"/>
      <url>/2021/05/21/%E6%B2%B9%E8%80%97%E9%A2%84%E6%B5%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="æ±½è½¦æ²¹è€—é¢„æµ‹å®æˆ˜"><a href="#æ±½è½¦æ²¹è€—é¢„æµ‹å®æˆ˜" class="headerlink" title="æ±½è½¦æ²¹è€—é¢„æµ‹å®æˆ˜"></a>æ±½è½¦æ²¹è€—é¢„æµ‹å®æˆ˜</h1><p>å°†åˆ©ç”¨å…¨è¿æ¥ç½‘ç»œæ¨¡å‹æ¥å®Œæˆæ±½è½¦çš„æ•ˆèƒ½æŒ‡æ ‡MPG(Mile Per Gallonï¼Œæ¯åŠ ä»‘ç‡ƒæ²¹è‹±é‡Œæ•°)çš„é¢„æµ‹é—®é¢˜å®æˆ˜</p><h2 id="1-ã€æ•°æ®é›†"><a href="#1-ã€æ•°æ®é›†" class="headerlink" title="1 ã€æ•°æ®é›†"></a>1 ã€æ•°æ®é›†</h2><p>é‡‡ç”¨<a href="http://archive.ics.uci.edu/ml/machine-learning-databases/">http://archive.ics.uci.edu/ml/machine-learning-databases/</a> ä¸Šçš„Auto-MPG æ•°æ®é›†ï¼Œå®ƒè®°å½•äº†å„ç§æ±½è½¦æ•ˆèƒ½æŒ‡æ ‡ä¸æ°”ç¼¸æ•°ã€é‡é‡ã€é©¬åŠ›ç­‰å…¶å®ƒå› å­çš„çœŸå®æ•°æ®ï¼ŒæŸ¥çœ‹æ•°æ®é›†çš„å‰5 é¡¹ï¼Œã€‚é™¤äº†äº§åœ°çš„æ•°å­—å­—æ®µè¡¨ç¤ºç±»åˆ«å¤–ï¼Œå…¶ä»–å­—æ®µéƒ½æ˜¯æ•°å€¼ç±»å‹ã€‚å¯¹äºäº§åœ°åœ°æ®µï¼Œ1 è¡¨ç¤ºç¾å›½ï¼Œ2 è¡¨ç¤ºæ¬§æ´²ï¼Œ3 è¡¨ç¤ºæ—¥æœ¬ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210520124026048.png"></p><table><thead><tr><th>MPG</th><th>Cylinders</th><th>Displacement</th><th>Horsepower</th><th>Weight</th><th>Acceleration</th><th>Model Year</th><th>Origin</th></tr></thead><tbody><tr><td>æ¯åŠ <br/>ä»‘ç‡ƒ<br/>æ²¹è‹±<br/>é‡Œ</td><td>æ°”ç¼¸æ•°</td><td>æ’é‡</td><td>é©¬åŠ›</td><td>é‡é‡</td><td>åŠ é€Ÿåº¦</td><td>å‹å·</td><td>å¹´ä»½</td></tr></tbody></table><p>Auto MPG æ•°æ®é›†ä¸€å…±è®°å½•äº†398 é¡¹æ•°æ®ï¼ŒUCI æœåŠ¡å™¨ä¸‹è½½å¹¶è¯»å–æ•°æ®é›†åˆ°DataFrame å¯¹è±¡ä¸­ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><pre class=" language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">load_data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>      dataset_path <span class="token operator">=</span> keras<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>get_file<span class="token punctuation">(</span><span class="token string">"auto-mpg.data"</span><span class="token punctuation">,</span><span class="token string">"http://archive.ics.uci.edu/ml/machine-learning-databases/auto-mpg/auto-mpg.data"</span><span class="token punctuation">)</span>      <span class="token comment" spellcheck="true"># æ•ˆèƒ½ï¼ˆå…¬é‡Œæ•°æ¯åŠ ä»‘ï¼‰ï¼Œæ°”ç¼¸æ•°ï¼Œæ’é‡ï¼Œé©¬åŠ›ï¼Œé‡é‡</span>      <span class="token comment" spellcheck="true"># åŠ é€Ÿåº¦ï¼Œå‹å·å¹´ä»½ï¼Œäº§åœ°</span>      column_names <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'MPG'</span><span class="token punctuation">,</span> <span class="token string">'Cylinders'</span><span class="token punctuation">,</span> <span class="token string">'Displacement'</span><span class="token punctuation">,</span> <span class="token string">'Horsepower'</span><span class="token punctuation">,</span> <span class="token string">'Weight'</span><span class="token punctuation">,</span>                      <span class="token string">'Acceleration'</span><span class="token punctuation">,</span> <span class="token string">'Model Year'</span><span class="token punctuation">,</span> <span class="token string">'Origin'</span><span class="token punctuation">]</span>      raw_dataset <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span>dataset_path<span class="token punctuation">,</span> names<span class="token operator">=</span>column_names<span class="token punctuation">,</span>                                na_values<span class="token operator">=</span><span class="token string">"?"</span><span class="token punctuation">,</span> comment<span class="token operator">=</span><span class="token string">'\t'</span><span class="token punctuation">,</span>                                sep<span class="token operator">=</span><span class="token string">" "</span><span class="token punctuation">,</span> skipinitialspace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>      dataset <span class="token operator">=</span> raw_dataset<span class="token punctuation">.</span>copy<span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token keyword">return</span> dataset<span class="token comment" spellcheck="true"># æŸ¥çœ‹éƒ¨åˆ†æ•°æ®</span>dataset<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>è¾“å‡ºå¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210520124255726.png"></p><p>åŸå§‹è¡¨æ ¼ä¸­çš„æ•°æ®å¯èƒ½å«æœ‰ç©ºå­—æ®µ(ç¼ºå¤±å€¼)çš„æ•°æ®é¡¹ï¼Œéœ€è¦æ¸…é™¤è¿™äº›è®°å½•é¡¹ã€‚å¹¶ä¸”ç”±äº Origin å­—æ®µä¸ºç±»åˆ«ç±»å‹æ•°æ®ï¼Œæˆ‘ä»¬å°†å…¶ç§»é™¤ï¼Œå¹¶è½¬æ¢ä¸ºæ–°çš„3 ä¸ªå­—æ®µï¼šUSAã€Europe å’ŒJapanï¼Œåˆ†åˆ«ä»£è¡¨æ˜¯å¦æ¥è‡ªæ­¤äº§åœ°ã€‚æŒ‰ç€8:2 çš„æ¯”ä¾‹åˆ‡åˆ†æ•°æ®é›†ä¸ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†ã€‚</p><pre class=" language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">preprocess_dataset</span><span class="token punctuation">(</span>dataset<span class="token punctuation">)</span><span class="token punctuation">:</span>    dataset <span class="token operator">=</span> dataset<span class="token punctuation">.</span>copy<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># ç»Ÿè®¡ç©ºç™½æ•°æ®,å¹¶æ¸…é™¤</span>    dataset <span class="token operator">=</span> dataset<span class="token punctuation">.</span>dropna<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># å¤„ç†ç±»åˆ«å‹æ•°æ®ï¼Œå…¶ä¸­originåˆ—ä»£è¡¨äº†ç±»åˆ«1,2,3,åˆ†å¸ƒä»£è¡¨äº§åœ°ï¼šç¾å›½ã€æ¬§æ´²ã€æ—¥æœ¬</span>    <span class="token comment" spellcheck="true"># å…¶å¼¹å‡ºè¿™ä¸€åˆ—</span>    origin <span class="token operator">=</span> dataset<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token string">'Origin'</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># æ ¹æ®originåˆ—æ¥å†™å…¥æ–°åˆ—</span>    dataset<span class="token punctuation">[</span><span class="token string">'USA'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>origin <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1.0</span>    dataset<span class="token punctuation">[</span><span class="token string">'Europe'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>origin <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1.0</span>    dataset<span class="token punctuation">[</span><span class="token string">'Japan'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>origin <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1.0</span>    <span class="token comment" spellcheck="true"># åˆ‡åˆ†ä¸ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†</span>    train_dataset <span class="token operator">=</span> dataset<span class="token punctuation">.</span>sample<span class="token punctuation">(</span>frac<span class="token operator">=</span><span class="token number">0.8</span><span class="token punctuation">,</span> random_state<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>    test_dataset <span class="token operator">=</span> dataset<span class="token punctuation">.</span>drop<span class="token punctuation">(</span>train_dataset<span class="token punctuation">.</span>index<span class="token punctuation">)</span>    <span class="token keyword">return</span> train_dataset<span class="token punctuation">,</span> test_dataset</code></pre><p>ç»Ÿè®¡å¾—åˆ°çš„è®­ç»ƒé›†å’Œæµ‹è¯•é›†æ•°æ®ï¼š</p><pre class=" language-python"><code class="language-python">train_dataset<span class="token punctuation">,</span> test_dataset <span class="token operator">=</span> preprocess_dataset<span class="token punctuation">(</span>dataset<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># ç»Ÿè®¡æ•°æ®</span>sns_plot <span class="token operator">=</span> sns<span class="token punctuation">.</span>pairplot<span class="token punctuation">(</span>train_dataset<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">"Cylinders"</span><span class="token punctuation">,</span> <span class="token string">"Displacement"</span><span class="token punctuation">,</span> <span class="token string">"Weight"</span><span class="token punctuation">,</span> <span class="token string">"MPG"</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> diag_kind<span class="token operator">=</span><span class="token string">"kde"</span><span class="token punctuation">)</span></code></pre><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/%E4%B8%8B%E8%BD%BD.png"></p><p>ç»Ÿè®¡è®­ç»ƒé›†çš„å„ä¸ªå­—æ®µæ•°å€¼çš„å‡å€¼å’Œæ ‡å‡†å·®ï¼Œå¹¶å®Œæˆæ•°æ®çš„æ ‡å‡†åŒ–ï¼Œé€šè¿‡norm()å‡½æ•°å®ç°ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># æŸ¥çœ‹è®­ç»ƒé›†çš„è¾“å…¥Xçš„ç»Ÿè®¡æ•°æ®</span>train_stats <span class="token operator">=</span> train_dataset<span class="token punctuation">.</span>describe<span class="token punctuation">(</span><span class="token punctuation">)</span>train_stats<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token string">"MPG"</span><span class="token punctuation">)</span>train_stats <span class="token operator">=</span> train_stats<span class="token punctuation">.</span>transpose<span class="token punctuation">(</span><span class="token punctuation">)</span>train_stats<span class="token keyword">def</span> <span class="token function">norm</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> train_stats<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    æ ‡å‡†åŒ–æ•°æ®    :param x:    :param train_stats: get_train_stats(train_dataset)    :return:    """</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>x <span class="token operator">-</span> train_stats<span class="token punctuation">[</span><span class="token string">'mean'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">/</span> train_stats<span class="token punctuation">[</span><span class="token string">'std'</span><span class="token punctuation">]</span></code></pre><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210520125501217.png"></p><p>æ‰“å°å‡ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†çš„å¤§å°ï¼š</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># ç§»åŠ¨MPGæ²¹è€—æ•ˆèƒ½è¿™ä¸€åˆ—ä¸ºçœŸå®æ ‡ç­¾Y</span>train_labels <span class="token operator">=</span> train_dataset<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token string">'MPG'</span><span class="token punctuation">)</span>test_labels <span class="token operator">=</span> test_dataset<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token string">'MPG'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># è¿›è¡Œæ ‡å‡†åŒ–</span>normed_train_data <span class="token operator">=</span> norm<span class="token punctuation">(</span>train_dataset<span class="token punctuation">,</span> train_stats<span class="token punctuation">)</span>normed_test_data <span class="token operator">=</span> norm<span class="token punctuation">(</span>test_dataset<span class="token punctuation">,</span> train_stats<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>normed_train_data<span class="token punctuation">.</span>shape<span class="token punctuation">,</span>train_labels<span class="token punctuation">.</span>shape<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>normed_test_data<span class="token punctuation">.</span>shape<span class="token punctuation">,</span> test_labels<span class="token punctuation">.</span>shape<span class="token punctuation">)</span></code></pre><p>å¾—åˆ°ç»“æœï¼š</p><p>(314, 9) (314,) # è®­ç»ƒé›†å…±314 è¡Œï¼Œè¾“å…¥ç‰¹å¾é•¿åº¦ä¸º9,æ ‡ç­¾ç”¨ä¸€ä¸ªæ ‡é‡è¡¨ç¤º</p><p>(78, 9) (78,) # æµ‹è¯•é›†å…±78 è¡Œï¼Œè¾“å…¥ç‰¹å¾é•¿åº¦ä¸º9,æ ‡ç­¾ç”¨ä¸€ä¸ªæ ‡é‡è¡¨ç¤º</p><p>å¯ä»¥é€šè¿‡ç®€å•åœ°ç»Ÿè®¡æ•°æ®é›†ä¸­å„å­—æ®µä¹‹é—´çš„ä¸¤ä¸¤åˆ†å¸ƒæ¥è§‚å¯Ÿå„ä¸ªå­—æ®µå¯¹MPG çš„å½±å“ã€‚å¯ä»¥å¤§è‡´è§‚å¯Ÿåˆ°ï¼Œå…¶ä¸­æ±½è½¦æ’é‡ã€é‡é‡ä¸MPG çš„å…³ç³»æ¯”è¾ƒç®€å•ï¼Œéšç€æ’é‡æˆ–é‡é‡çš„å¢å¤§ï¼Œæ±½è½¦çš„MPG é™ä½ï¼Œèƒ½è€—å¢åŠ ï¼›æ°”ç¼¸æ•°è¶Šå°ï¼Œæ±½è½¦èƒ½åšåˆ°çš„æœ€å¥½MPG ä¹Ÿè¶Šé«˜ï¼Œè¶Šå¯èƒ½æ›´èŠ‚èƒ½ï¼Œè¿™éƒ½æ˜¯æ˜¯ç¬¦åˆæˆ‘ä»¬çš„ç”Ÿæ´»ç»éªŒçš„ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/yuce.jpg"></p><h2 id="2-ã€åˆ›å»ºç½‘ç»œ"><a href="#2-ã€åˆ›å»ºç½‘ç»œ" class="headerlink" title="2 ã€åˆ›å»ºç½‘ç»œ"></a>2 ã€åˆ›å»ºç½‘ç»œ</h2><p>è€ƒè™‘åˆ° Auto-MPG æ•°æ®é›†è§„æ¨¡è¾ƒå°ï¼Œæˆ‘ä»¬åªåˆ›å»ºä¸€ä¸ª3 å±‚çš„å…¨è¿æ¥ç½‘ç»œæ¥å®ŒæˆMPGå€¼çš„é¢„æµ‹ä»»åŠ¡ã€‚è¾“å…¥ğ‘¿çš„ç‰¹å¾å…±æœ‰9 ç§ï¼Œå› æ­¤ç¬¬ä¸€å±‚çš„è¾“å…¥èŠ‚ç‚¹æ•°ä¸º9ã€‚ç¬¬ä¸€å±‚ã€ç¬¬äºŒå±‚çš„è¾“å‡ºèŠ‚ç‚¹æ•°è®¾è®¡ä¸º64å’Œ64ï¼Œç”±äºåªæœ‰ä¸€ç§é¢„æµ‹å€¼ï¼Œè¾“å‡ºå±‚è¾“å‡ºèŠ‚ç‚¹è®¾è®¡ä¸º1ã€‚è€ƒè™‘MPG âˆˆğ‘…+ï¼Œå› æ­¤è¾“å‡ºå±‚çš„æ¿€æ´»å‡½æ•°å¯ä»¥ä¸åŠ ï¼Œä¹Ÿå¯ä»¥æ·»åŠ ReLU æ¿€æ´»å‡½æ•°ã€‚</p><p>å°†ç½‘ç»œå®ç°ä¸ºä¸€ä¸ªè‡ªå®šä¹‰ç½‘ç»œç±»ï¼Œåªéœ€è¦åœ¨åˆå§‹åŒ–å‡½æ•°ä¸­åˆ›å»ºå„ä¸ªå­ç½‘ç»œå±‚ï¼Œå¹¶åœ¨å‰å‘è®¡ç®—å‡½æ•°call ä¸­å®ç°è‡ªå®šä¹‰ç½‘ç»œç±»çš„è®¡ç®—é€»è¾‘å³å¯ã€‚è‡ªå®šä¹‰ç½‘ç»œç±»ç»§æ‰¿è‡ªkeras.Model åŸºç±»ï¼Œè¿™ä¹Ÿæ˜¯è‡ªå®šä¹‰ç½‘ç»œç±»çš„æ ‡å‡†å†™æ³•ï¼Œä»¥æ–¹ä¾¿åœ°åˆ©ç”¨keras.Model åŸºç±»æä¾›çš„trainable_variablesã€save_weights ç­‰å„ç§ä¾¿æ·åŠŸèƒ½ã€‚ç½‘ç»œæ¨¡å‹ç±»å®ç°å¦‚ä¸‹ï¼š</p><pre class=" language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Network</span><span class="token punctuation">(</span>keras<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># å›å½’ç½‘ç»œ</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        super<span class="token punctuation">(</span>Network<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># åˆ›å»º3ä¸ªå…¨è¿æ¥å±‚</span>        self<span class="token punctuation">.</span>fc1 <span class="token operator">=</span> layers<span class="token punctuation">.</span>Dense<span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">,</span> activation<span class="token operator">=</span><span class="token string">'relu'</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>fc2 <span class="token operator">=</span> layers<span class="token punctuation">.</span>Dense<span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">,</span> activation<span class="token operator">=</span><span class="token string">'relu'</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>fc3 <span class="token operator">=</span> layers<span class="token punctuation">.</span>Dense<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">call</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> inputs<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># ä¾æ¬¡é€šè¿‡3ä¸ªå…¨è¿æ¥å±‚</span>        x <span class="token operator">=</span> self<span class="token punctuation">.</span>fc1<span class="token punctuation">(</span>inputs<span class="token punctuation">)</span>        x <span class="token operator">=</span> self<span class="token punctuation">.</span>fc2<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        x <span class="token operator">=</span> self<span class="token punctuation">.</span>fc3<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        <span class="token keyword">return</span> x</code></pre><h2 id="3ã€æµ‹è¯•å’Œè®­ç»ƒ"><a href="#3ã€æµ‹è¯•å’Œè®­ç»ƒ" class="headerlink" title="3ã€æµ‹è¯•å’Œè®­ç»ƒ"></a>3ã€æµ‹è¯•å’Œè®­ç»ƒ</h2><p>åœ¨å®Œæˆä¸»ç½‘ç»œæ¨¡å‹ç±»çš„åˆ›å»ºåï¼Œæˆ‘ä»¬æ¥å®ä¾‹åŒ–ç½‘ç»œå¯¹è±¡å’Œåˆ›å»ºä¼˜åŒ–å™¨ï¼Œä»£ç å¦‚ä¸‹:</p><pre class=" language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">build_model</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    model <span class="token operator">=</span> Network<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># åˆ›å»ºç½‘ç»œ</span>    model<span class="token punctuation">.</span>build<span class="token punctuation">(</span>input_shape<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># é€šè¿‡build å‡½æ•°å®Œæˆå†…éƒ¨å¼ é‡çš„åˆ›å»ºï¼Œå…¶ä¸­4 ä¸ºä»»æ„è®¾ç½®çš„batch æ•°é‡ï¼Œ9 ä¸ºè¾“å…¥ç‰¹å¾é•¿åº¦</span>    model<span class="token punctuation">.</span>summary<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># æ‰“å°ç½‘ç»œä¿¡æ¯</span>    <span class="token keyword">return</span> modelmodel <span class="token operator">=</span> build_model<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#åˆ›å»ºæ¨¡å‹</span>optimizer <span class="token operator">=</span> tf<span class="token punctuation">.</span>keras<span class="token punctuation">.</span>optimizers<span class="token punctuation">.</span>RMSprop<span class="token punctuation">(</span><span class="token number">0.001</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># åˆ›å»ºä¼˜åŒ–å™¨ï¼ŒæŒ‡å®šå­¦ä¹ ç‡</span>train_db <span class="token operator">=</span> tf<span class="token punctuation">.</span>data<span class="token punctuation">.</span>Dataset<span class="token punctuation">.</span>from_tensor_slices<span class="token punctuation">(</span><span class="token punctuation">(</span>normed_train_data<span class="token punctuation">.</span>values<span class="token punctuation">,</span> train_labels<span class="token punctuation">.</span>values<span class="token punctuation">)</span><span class="token punctuation">)</span>train_db <span class="token operator">=</span> train_db<span class="token punctuation">.</span>shuffle<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span>batch<span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span></code></pre><p>å¾—åˆ°ç½‘ç»œç»“æ„å¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210520131435918.png"></p><p>æ¥ä¸‹æ¥å®ç°ç½‘ç»œè®­ç»ƒéƒ¨åˆ†ã€‚é€šè¿‡Epoch å’ŒStep ç»„æˆçš„åŒå±‚å¾ªç¯è®­ç»ƒç½‘ç»œï¼Œå…±è®­ç»ƒ200ä¸ªEpochï¼Œä»£ç å¦‚ä¸‹:</p><pre class=" language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">train</span><span class="token punctuation">(</span>model<span class="token punctuation">,</span> train_db<span class="token punctuation">,</span> optimizer<span class="token punctuation">,</span> normed_test_data<span class="token punctuation">,</span> test_labels<span class="token punctuation">)</span><span class="token punctuation">:</span>    train_mae_losses <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    test_mae_losses <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">for</span> epoch <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token comment" spellcheck="true"># 200 ä¸ªEpoch</span>        <span class="token keyword">for</span> step<span class="token punctuation">,</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token keyword">in</span> enumerate<span class="token punctuation">(</span>train_db<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token comment" spellcheck="true"># éå†ä¸€æ¬¡è®­ç»ƒé›†</span>            <span class="token keyword">with</span> tf<span class="token punctuation">.</span>GradientTape<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> tape<span class="token punctuation">:</span><span class="token comment" spellcheck="true"># æ¢¯åº¦è®°å½•å™¨ï¼Œè®­ç»ƒæ—¶éœ€è¦ä½¿ç”¨å®ƒ</span>                out <span class="token operator">=</span> model<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token comment" spellcheck="true">#é€šè¿‡ç½‘ç»œå¾—åˆ°è¾“å‡º</span>                loss <span class="token operator">=</span> tf<span class="token punctuation">.</span>reduce_mean<span class="token punctuation">(</span>losses<span class="token punctuation">.</span>MSE<span class="token punctuation">(</span>y<span class="token punctuation">,</span> out<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># è®¡ç®—MSE</span>                mae_loss <span class="token operator">=</span> tf<span class="token punctuation">.</span>reduce_mean<span class="token punctuation">(</span>losses<span class="token punctuation">.</span>MAE<span class="token punctuation">(</span>y<span class="token punctuation">,</span> out<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># è®¡ç®—MAE</span>            <span class="token keyword">if</span> step <span class="token operator">%</span> <span class="token number">10</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span><span class="token comment" spellcheck="true"># é—´éš”æ€§åœ°æ‰“å°è®­ç»ƒè¯¯å·®</span>                <span class="token keyword">print</span><span class="token punctuation">(</span>epoch<span class="token punctuation">,</span> step<span class="token punctuation">,</span> float<span class="token punctuation">(</span>loss<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token comment" spellcheck="true"># è®¡ç®—æ¢¯åº¦ï¼Œå¹¶æ›´æ–°</span>            grads <span class="token operator">=</span> tape<span class="token punctuation">.</span>gradient<span class="token punctuation">(</span>loss<span class="token punctuation">,</span> model<span class="token punctuation">.</span>trainable_variables<span class="token punctuation">)</span>            optimizer<span class="token punctuation">.</span>apply_gradients<span class="token punctuation">(</span>zip<span class="token punctuation">(</span>grads<span class="token punctuation">,</span> model<span class="token punctuation">.</span>trainable_variables<span class="token punctuation">)</span><span class="token punctuation">)</span>        train_mae_losses<span class="token punctuation">.</span>append<span class="token punctuation">(</span>float<span class="token punctuation">(</span>mae_loss<span class="token punctuation">)</span><span class="token punctuation">)</span>        out <span class="token operator">=</span> model<span class="token punctuation">(</span>tf<span class="token punctuation">.</span>constant<span class="token punctuation">(</span>normed_test_data<span class="token punctuation">.</span>values<span class="token punctuation">)</span><span class="token punctuation">)</span>        test_mae_losses<span class="token punctuation">.</span>append<span class="token punctuation">(</span>tf<span class="token punctuation">.</span>reduce_mean<span class="token punctuation">(</span>losses<span class="token punctuation">.</span>MAE<span class="token punctuation">(</span>test_labels<span class="token punctuation">,</span> out<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> train_mae_losses<span class="token punctuation">,</span> test_mae_losses</code></pre><p>æ‰§è¡Œå¦‚ä¸‹ä»£ç å³å¯å®Œæˆæ•´ä¸ªæ¨¡å‹çš„è®­ç»ƒï¼š</p><pre class=" language-python"><code class="language-python">train_mae_losses<span class="token punctuation">,</span> test_mae_losses <span class="token operator">=</span> train<span class="token punctuation">(</span>model<span class="token punctuation">,</span> train_db<span class="token punctuation">,</span> optimizer<span class="token punctuation">,</span> normed_test_data<span class="token punctuation">,</span> test_labels<span class="token punctuation">)</span></code></pre><p>å¯¹äºå›å½’é—®é¢˜ï¼Œé™¤äº†MSE å‡æ–¹å·®å¯ä»¥ç”¨æ¥æ¨¡å‹çš„æµ‹è¯•æ€§èƒ½ï¼Œè¿˜å¯ä»¥ç”¨å¹³å‡ç»å¯¹è¯¯å·®(Mean Absolute Errorï¼Œç®€ç§°MAE)æ¥è¡¡é‡æ¨¡å‹çš„æ€§èƒ½ï¼Œå®ƒè¢«å®šä¹‰ä¸ºï¼š<br>$$<br>MAS = \frac{1}{d_{out}}\sum_{i}|y_i - o_i|<br>$$<br>ç¨‹åºè¿ç®—æ—¶è®°å½•æ¯ä¸ªEpoch ç»“æŸæ—¶çš„è®­ç»ƒå’Œæµ‹è¯•MAE æ•°æ®ï¼Œå¹¶ç»˜åˆ¶å˜åŒ–æ›²çº¿ï¼Œåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå¯ä»¥æ˜ç¡®çš„çœ‹åˆ°ï¼Œéšç€Epoch çš„å¢åŠ ï¼ŒMASæ˜æ˜¾å‡å°ã€‚</p><pre class=" language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">plot</span><span class="token punctuation">(</span>train_mae_losses<span class="token punctuation">,</span> test_mae_losses<span class="token punctuation">)</span><span class="token punctuation">:</span>    plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">'Epoch'</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">'MAE'</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>train_mae_losses<span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">'Train'</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>test_mae_losses<span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">'Test'</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># plt.ylim([0,10])</span>    plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>plot<span class="token punctuation">(</span>train_mae_losses<span class="token punctuation">,</span> test_mae_losses<span class="token punctuation">)</span></code></pre><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/finallyout.png"></p><p>å¯ä»¥è§‚å¯Ÿåˆ°ï¼Œåœ¨è®­ç»ƒåˆ°çº¦ç¬¬25 ä¸ªEpoch æ—¶ï¼ŒMAE çš„ä¸‹é™å˜å¾—è¾ƒç¼“æ…¢ï¼Œå…¶ä¸­è®­ç»ƒé›†çš„MAEè¿˜åœ¨ç»§ç»­ç¼“æ…¢ä¸‹é™ï¼Œä½†æ˜¯æµ‹è¯•é›†MAE å‡ ä¹ä¿æŒä¸å˜ï¼Œå› æ­¤å¯ä»¥åœ¨çº¦ç¬¬25 ä¸ªepoch æ—¶æå‰ç»“æŸè®­ç»ƒï¼Œå¹¶åˆ©ç”¨æ­¤æ—¶çš„ç½‘ç»œå‚æ•°æ¥é¢„æµ‹æ–°çš„è¾“å…¥æ ·æœ¬å³å¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ä¸ªäººé¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TensorFlow </tag>
            
            <tag> ç¥ç»ç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€æ ‘è“æ´¾ã€‘OpenCV3æºç æ–¹å¼å®‰è£…æ•™ç¨‹</title>
      <link href="/2021/03/31/opencv%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/"/>
      <url>/2021/03/31/opencv%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€æ ‘è“æ´¾ã€‘OpenCV3æºç æ–¹å¼å®‰è£…æ•™ç¨‹"><a href="#ã€æ ‘è“æ´¾ã€‘OpenCV3æºç æ–¹å¼å®‰è£…æ•™ç¨‹" class="headerlink" title="ã€æ ‘è“æ´¾ã€‘OpenCV3æºç æ–¹å¼å®‰è£…æ•™ç¨‹"></a>ã€æ ‘è“æ´¾ã€‘OpenCV3æºç æ–¹å¼å®‰è£…æ•™ç¨‹</h1><h2 id="ä¸€ã€é¦–å…ˆæˆ‘ä»¬è¦å®‰è£…OpenCVæ‰€ä¾èµ–çš„å„ç§å·¥å…·å’Œå›¾åƒè§†é¢‘åº“ï¼š"><a href="#ä¸€ã€é¦–å…ˆæˆ‘ä»¬è¦å®‰è£…OpenCVæ‰€ä¾èµ–çš„å„ç§å·¥å…·å’Œå›¾åƒè§†é¢‘åº“ï¼š" class="headerlink" title="ä¸€ã€é¦–å…ˆæˆ‘ä»¬è¦å®‰è£…OpenCVæ‰€ä¾èµ–çš„å„ç§å·¥å…·å’Œå›¾åƒè§†é¢‘åº“ï¼š"></a>ä¸€ã€é¦–å…ˆæˆ‘ä»¬è¦å®‰è£…OpenCVæ‰€ä¾èµ–çš„å„ç§å·¥å…·å’Œå›¾åƒè§†é¢‘åº“ï¼š</h2><p> è½¯ä»¶æºæ›´æ–°,å‡çº§æœ¬åœ°æ‰€æœ‰å®‰è£…åŒ…ï¼Œæœ€æ–°ç³»ç»Ÿå¯ä»¥ä¸å‡çº§ï¼Œç‰ˆæœ¬è¿‡é«˜åè€Œéœ€è¦é™çº§æ‰èƒ½å®‰è£…, å‡çº§æ ‘è“æ´¾å›ºä»¶ï¼Œå›ºä»¶æ¯”è¾ƒæ–°æˆ–è€…æ˜¯Ubuntuåˆ™ä¸ç”¨æ‰§è¡Œï¼š</p><pre class=" language-shell"><code class="language-shell">sudo apt-get update sudo apt-get upgradesudo rpi-update  </code></pre><p>ç„¶åå®‰è£…æ„å»ºOpenCVçš„ç›¸å…³å·¥å…·ï¼Œå®‰è£…build-essentialã€cmakeã€gitå’Œpkg-config</p><pre class=" language-shell"><code class="language-shell">sudo apt-get install build-essential cmake git pkg-config </code></pre><p>ä¹‹åå®‰è£…å¸¸ç”¨å›¾åƒå·¥å…·åŒ…ï¼šå®‰è£…jpegæ ¼å¼å›¾åƒå·¥å…·åŒ…ã€  å®‰è£…tifæ ¼å¼å›¾åƒå·¥å…·åŒ… ã€å®‰è£…JPEG-2000å›¾åƒå·¥å…·åŒ… ã€å®‰è£…pngå›¾åƒå·¥å…·åŒ…ï¼š</p><pre class=" language-shell"><code class="language-shell">sudo apt-get install libjpeg8-dev sudo apt-get install libtiff5-dev sudo apt-get install libjasper-dev sudo apt-get install libpng12-dev </code></pre><p>å†å®‰è£…è§†é¢‘I/OåŒ…ï¼š</p><pre class=" language-shell"><code class="language-shell">sudo apt-get install libavcodec-dev libavformat-dev libswscale-dev libv4l-dev</code></pre><p>ä¸‹é¢å®‰è£…gtk2.0ï¼ˆæ ‘è“æ´¾å¾ˆå¯èƒ½ä¸‹è½½é”™è¯¯ï¼Œæ›´æ¢ä¸­ç§‘å¤§æˆ–è€…æ¸…åæºå³å¯ï¼Œubuntuæœ‰å¯èƒ½å‡ºç°åŒ…ç‰ˆæœ¬è¿‡é«˜çš„æƒ…å†µï¼Œéœ€è¦å°†ä¾èµ–åŒ…é™çº§å®‰è£…ï¼‰:</p><pre class=" language-shell"><code class="language-shell">sudo apt-get install libgtk2.0-dev</code></pre><p>ä¼˜åŒ–å‡½æ•°åŒ…ï¼š</p><pre class=" language-shell"><code class="language-shell">sudo apt-get install libatlas-base-dev gfortran</code></pre><p>å¦‚æœä½ å¸Œæœ›åœ¨Pythonä¸­ä½¿ç”¨OpenCVï¼Œé‚£ä¹ˆä½ è¿˜éœ€è¦å®‰è£…Pythonçš„å¼€å‘åŒ…:</p><pre class=" language-shell"><code class="language-shell">sudo apt-get install python-dev python3-dev</code></pre><h2 id="äºŒã€ä¸‹è½½æºç å¹¶ä¸”Cmakeç¼–è¯‘"><a href="#äºŒã€ä¸‹è½½æºç å¹¶ä¸”Cmakeç¼–è¯‘" class="headerlink" title="äºŒã€ä¸‹è½½æºç å¹¶ä¸”Cmakeç¼–è¯‘"></a>äºŒã€ä¸‹è½½æºç å¹¶ä¸”Cmakeç¼–è¯‘</h2><p>åœ¨æ ‘è“æ´¾ä¸Šç›®å½•ï¼š</p><pre class=" language-shell"><code class="language-shell">wget -O opencv-3.4.3.zip https://github.com/Itseez/opencv/archive/3.4.3.zipwget -O opencv_contrib-3.4.3.zip https://github.com/Itseez/opencv_contrib/archive/3.4.3.zipunzip opencv-3.4.3.zipunzip opencv_contrib-3.4.3.zip</code></pre><p>æ‰“å¼€æºç æ–‡ä»¶å¤¹</p><pre class=" language-shell"><code class="language-shell">cd opencv-3.4.3mkdir releasecd release</code></pre><p>è®¾ç½®cmakeç¼–è¯‘å‚æ•°ï¼Œå®‰è£…ç›®å½•é»˜è®¤ä¸º/usr/local ï¼Œæ³¨æ„å‚æ•°åã€ç­‰å·å’Œå‚æ•°å€¼ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œä½†æ¯è¡Œæœ«å°¾â€œ\â€ä¹‹å‰æœ‰ç©ºæ ¼ï¼Œå‚æ•°å€¼æœ€åæ˜¯ä¸¤ä¸ªè‹±æ–‡çš„ç‚¹(æ³¨æ„ï¼å¦‚æœåœ¨rootç”¨æˆ·ä¸‹æ‰§è¡Œcmakeå‘½ä»¤ï¼Œè¯·å°†OPENCV_EXTRA_MODULES_PATHçš„å€¼æ”¹ä¸ºç»å¯¹è·¯å¾„ï¼Œå¦‚ï¼š/home/pi/opencv_contrib-3.4.3/modules)ï¼š</p><pre class=" language-shell"><code class="language-shell">/** CMAKE_BUILD_TYPEæ˜¯ç¼–è¯‘æ–¹å¼* CMAKE_INSTALL_PREFIXæ˜¯å®‰è£…ç›®å½•* OPENCV_EXTRA_MODULES_PATHæ˜¯åŠ è½½é¢å¤–æ¨¡å—* INSTALL_PYTHON_EXAMPLESæ˜¯å®‰è£…å®˜æ–¹pythonä¾‹ç¨‹* BUILD_EXAMPLESæ˜¯ç¼–è¯‘ä¾‹ç¨‹ï¼ˆè¿™ä¸¤ä¸ªå¯ä»¥ä¸åŠ ï¼Œä¸åŠ ç¼–è¯‘ç¨å¾®å¿«ä¸€ç‚¹ç‚¹ï¼Œæƒ³è¦Cè¯­è¨€çš„ä¾‹ç¨‹çš„è¯ï¼Œåœ¨æœ€åä¸€è¡Œå‰åŠ å‚æ•°INSTALL_C_EXAMPLES=ON \ï¼‰**/sudo cmake -D CMAKE_BUILD_TYPE=RELEASE \    -D CMAKE_INSTALL_PREFIX=/usr/local \    -D OPENCV_EXTRA_MODULES_PATH=/home/pi/opencv_contrib-3.4.3/modules \    -D INSTALL_PYTHON_EXAMPLES=ON \    -D BUILD_EXAMPLES=ON ..</code></pre><p>ä¹‹åå¼€å§‹æ­£å¼ç¼–è¯‘è¿‡ç¨‹ï¼ˆå¦‚æœä¹‹å‰ä¸€æ­¥å› ä¸ºç½‘ç»œé—®é¢˜å¯¼è‡´cmakeä¸‹è½½ç¼ºå¤±æ–‡ä»¶å¤±è´¥çš„è¯ï¼Œå¯ä»¥å°è¯•ä½¿ç”¨æ‰‹æœºçƒ­ç‚¹ï¼Œå¹¶å°†releaseæ–‡ä»¶å¤¹åˆ é™¤æ‰ï¼Œé‡æ–°åˆ›å»ºreleaseæ–‡ä»¶å¤¹å¹¶cmakeï¼‰ï¼š</p><p>ç¼–è¯‘ï¼Œä»¥ç®¡ç†å‘˜èº«ä»½ï¼Œå¦åˆ™å®¹æ˜“å‡ºé”™</p><p>makeå‘½ä»¤å‚æ•°-j4æŒ‡å…è®¸makeä½¿ç”¨æœ€å¤š4ä¸ªçº¿ç¨‹è¿›è¡Œç¼–è¯‘</p><pre class=" language-shell"><code class="language-shell">sudo make -j4</code></pre><p>å®‰è£…:</p><pre class=" language-shell"><code class="language-shell">sudo make install</code></pre><p>æ›´æ–°åŠ¨æ€é“¾æ¥åº“:</p><pre class=" language-shell"><code class="language-shell">sudo ldconfig</code></pre><h2 id="ä¸‰ã€æŠ¥é”™ä¸è§£å†³"><a href="#ä¸‰ã€æŠ¥é”™ä¸è§£å†³" class="headerlink" title="ä¸‰ã€æŠ¥é”™ä¸è§£å†³"></a>ä¸‰ã€æŠ¥é”™ä¸è§£å†³</h2><p>ä¸€èˆ¬æ¥è¯´ï¼Œä¼šé‡åˆ°ä¸¤ä¸ªé—®é¢˜ï¼š</p><p>ç¬¬ä¸€ï¼Œæ˜¯æŸä¸ªæ–‡ä»¶æ‰¾ä¸åˆ°ï¼Œè§£å†³æ–¹æ³•å°±æ˜¯ï¼Œå°†æ–‡ä»¶ä¸­çš„ç›¸å¯¹è·¯å¾„æ”¹æˆç»å¯¹è·¯å¾„ã€‚</p><p>ç¬¬äºŒï¼Œç”±äºConfigureå¯¼è‡´ä¸‹è½½ä¸å…¨çš„æ–‡ä»¶åˆ—è¡¨ï¼Œç¼ºå°‘boostdesc_bgm.i ç­‰æ–‡ä»¶ï¼›</p><p>é“¾æ¥ï¼š<a href="https://pan.baidu.com/s/1pmrPG2sa8Eg0XttldeoYcA">https://pan.baidu.com/s/1pmrPG2sa8Eg0XttldeoYcA</a><br>         æå–ç ï¼šsmmd<br>ä¸‹è½½å¥½æ–‡ä»¶ï¼Œæ”¾åˆ°å¯¹åº”æ–‡ä»¶å¤¹å³å¯ï¼Œé‡æ–°ç¼–è¯‘ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¯å¢ƒé…ç½® </tag>
            
            <tag> opencv </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®ç»“æ„ä¸ç®—æ³•(C/C++å®ç°)</title>
      <link href="/2021/03/26/DataStructAndAlgorithms/"/>
      <url>/2021/03/26/DataStructAndAlgorithms/</url>
      
        <content type="html"><![CDATA[<h1 id="æ•°æ®ç»“æ„ä¸ç®—æ³•-C-C-å®ç°"><a href="#æ•°æ®ç»“æ„ä¸ç®—æ³•-C-C-å®ç°" class="headerlink" title="æ•°æ®ç»“æ„ä¸ç®—æ³•(C/C++å®ç°)"></a>æ•°æ®ç»“æ„ä¸ç®—æ³•(C/C++å®ç°)</h1><p>â€‹                                                                                                                                å‚è€ƒä¹¦ç±ï¼šã€Šæ•°æ®ç»“æ„ã€ç®—æ³•ä¸åº”ç”¨ C++ è¯­è¨€æè¿°ã€‹ [ç¾]Sartaj Sahniè‘—ï¼›<a href="http://c.biancheng.net/cpp/biancheng/view/2971.html">Cè¯­è¨€ä¸­æ–‡ç½‘</a></p><h2 id="ç¬¬ä¸€ç« -C-å›é¡¾"><a href="#ç¬¬ä¸€ç« -C-å›é¡¾" class="headerlink" title="ç¬¬ä¸€ç«  C++å›é¡¾"></a>ç¬¬ä¸€ç«  C++å›é¡¾</h2><h3 id="1-1-C-åˆæ­¥"><a href="#1-1-C-åˆæ­¥" class="headerlink" title="1.1 C++åˆæ­¥"></a>1.1 C++åˆæ­¥</h3><h4 id="1ã€C-å‘½åç©ºé—´"><a href="#1ã€C-å‘½åç©ºé—´" class="headerlink" title="1ã€C++å‘½åç©ºé—´"></a>1ã€C++å‘½åç©ºé—´</h4><p>ä¾‹å¦‚å°æå’Œå°éŸ©éƒ½å‚ä¸äº†ä¸€ä¸ªæ–‡ä»¶ç®¡ç†ç³»ç»Ÿçš„å¼€å‘ï¼Œå®ƒä»¬éƒ½å®šä¹‰äº†ä¸€ä¸ªå…¨å±€å˜é‡ fpï¼Œç”¨æ¥æŒ‡æ˜å‰æ‰“å¼€çš„æ–‡ä»¶ï¼Œå°†ä»–ä»¬çš„ä»£ç æ•´åˆåœ¨ä¸€èµ·ç¼–è¯‘æ—¶ï¼Œå¾ˆæ˜æ˜¾ç¼–è¯‘å™¨ä¼šæç¤º fp é‡å¤å®šä¹‰ï¼ˆRedefinitionï¼‰é”™è¯¯ã€‚</p><p>ä¸ºäº†è§£å†³åˆä½œå¼€å‘æ—¶çš„å‘½åå†²çªé—®é¢˜ï¼ŒC++ å¼•å…¥äº†<code>å‘½åç©ºé—´ï¼ˆNamespaceï¼‰</code>çš„æ¦‚å¿µã€‚è¯·çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p><pre class=" language-c++"><code class="language-c++">namespace Li&#123;  //å°æçš„å˜é‡å®šä¹‰    FILE fp = NULL;&#125;namespace Han&#123;  //å°éŸ©çš„å˜é‡å®šä¹‰    FILE fp = NULL&#125;</code></pre><p>å°æä¸å°éŸ©å„è‡ªå®šä¹‰äº†ä»¥è‡ªå·±å§“æ°ä¸ºåçš„å‘½åç©ºé—´ï¼Œæ­¤æ—¶å†å°†ä»–ä»¬çš„ fp å˜é‡æ”¾åœ¨ä¸€èµ·ç¼–è¯‘å°±ä¸ä¼šæœ‰ä»»ä½•é—®é¢˜ã€‚</p><blockquote><p>å‘½åç©ºé—´æœ‰æ—¶ä¹Ÿè¢«ç§°ä¸ºåå­—ç©ºé—´ã€åç§°ç©ºé—´ã€‚namespace æ˜¯C++ä¸­çš„å…³é”®å­—ï¼Œç”¨æ¥å®šä¹‰ä¸€ä¸ªå‘½åç©ºé—´ï¼Œè¯­æ³•æ ¼å¼ä¸ºï¼š</p></blockquote><pre class=" language-c++"><code class="language-c++">namespace name&#123;    //variables, functions, classes&#125;</code></pre><p><code>name</code>æ˜¯å‘½åç©ºé—´çš„åå­—ï¼Œå®ƒé‡Œé¢å¯ä»¥åŒ…å«å˜é‡ã€å‡½æ•°ã€ç±»ã€typedefã€#define ç­‰ï¼Œæœ€åç”±<code>&#123; &#125;</code>åŒ…å›´ã€‚</p><p>ä½¿ç”¨å˜é‡ã€å‡½æ•°æ—¶è¦æŒ‡æ˜å®ƒä»¬æ‰€åœ¨çš„å‘½åç©ºé—´ã€‚ä»¥ä¸Šé¢çš„ fp å˜é‡ä¸ºä¾‹ï¼Œå¯ä»¥è¿™æ ·æ¥ä½¿ç”¨ï¼š</p><pre class=" language-c++"><code class="language-c++">Li :: fp = fopen("one.txt", "r");  //ä½¿ç”¨å°æå®šä¹‰çš„å˜é‡ fpHan :: fp = fopen("two.txt", "rb+");  //ä½¿ç”¨å°éŸ©å®šä¹‰çš„å˜é‡ fp</code></pre><p><code>::</code>æ˜¯ä¸€ä¸ªæ–°ç¬¦å·ï¼Œç§°ä¸ºåŸŸè§£ææ“ä½œç¬¦ï¼Œåœ¨C++ä¸­ç”¨æ¥æŒ‡æ˜è¦ä½¿ç”¨çš„å‘½åç©ºé—´ã€‚</p><p>é™¤äº†ç›´æ¥ä½¿ç”¨åŸŸè§£ææ“ä½œç¬¦ï¼Œè¿˜å¯ä»¥é‡‡ç”¨ using å£°æ˜ï¼Œä¾‹å¦‚ï¼š</p><pre class=" language-C++"><code class="language-C++">using Li :: fp;fp = fopen("one.txt", "r");  //ä½¿ç”¨å°æå®šä¹‰çš„å˜é‡ fpHan :: fp = fopen("two.txt", "rb+");  //ä½¿ç”¨å°éŸ©å®šä¹‰çš„å˜é‡ fp</code></pre><p>åœ¨ä»£ç çš„å¼€å¤´ç”¨<code>using</code>å£°æ˜äº†<code> Li::fp</code>ï¼Œå®ƒçš„æ„æ€æ˜¯ï¼Œ``using <code>å£°æ˜ä»¥åçš„ç¨‹åºä¸­å¦‚æœå‡ºç°äº†æœªæŒ‡æ˜å‘½åç©ºé—´çš„ </code>fp<code>ï¼Œå°±ä½¿ç”¨ </code>Li::fp<code>ï¼›ä½†æ˜¯è‹¥è¦ä½¿ç”¨å°éŸ©å®šä¹‰çš„</code> fp<code>ï¼Œä»ç„¶éœ€è¦ </code>Han::fp`ã€‚</p><p>using å£°æ˜ä¸ä»…å¯ä»¥é’ˆå¯¹å‘½åç©ºé—´ä¸­çš„ä¸€ä¸ªå˜é‡ï¼Œä¹Ÿå¯ä»¥ç”¨äºå£°æ˜æ•´ä¸ªå‘½åç©ºé—´ï¼Œä¾‹å¦‚ï¼š</p><pre class=" language-c++"><code class="language-c++">using namespace Li;fp = fopen("one.txt", "r");  //ä½¿ç”¨å°æå®šä¹‰çš„å˜é‡ fpHan :: fp = fopen("two.txt", "rb+");  //ä½¿ç”¨å°éŸ©å®šä¹‰çš„å˜é‡ fp</code></pre><p>å¦‚æœå‘½åç©ºé—´ Li ä¸­è¿˜å®šä¹‰äº†å…¶ä»–çš„å˜é‡ï¼Œé‚£ä¹ˆåŒæ ·å…·æœ‰ fp å˜é‡çš„æ•ˆæœã€‚åœ¨ using å£°æ˜åï¼Œå¦‚æœæœ‰æœªå…·ä½“æŒ‡å®šå‘½åç©ºé—´çš„å˜é‡äº§ç”Ÿäº†å‘½åå†²çªï¼Œé‚£ä¹ˆé»˜è®¤é‡‡ç”¨å‘½åç©ºé—´ Li ä¸­çš„å˜é‡ã€‚</p><p>å‘½åç©ºé—´å†…éƒ¨ä¸ä»…å¯ä»¥å£°æ˜æˆ–å®šä¹‰å˜é‡ï¼Œå¯¹äºå…¶å®ƒèƒ½åœ¨å‘½åç©ºé—´ä»¥å¤–å£°æ˜æˆ–å®šä¹‰çš„åç§°ï¼ŒåŒæ ·ä¹Ÿéƒ½èƒ½åœ¨å‘½åç©ºé—´å†…éƒ¨è¿›è¡Œå£°æ˜æˆ–å®šä¹‰ï¼Œä¾‹å¦‚ç±»ã€å‡½æ•°ã€typedefã€#define ç­‰éƒ½å¯ä»¥å‡ºç°åœ¨å‘½åç©ºé—´ä¸­ã€‚</p><h4 id="2ã€C-æ ‡å‡†åº“å’Œstdå‘½åç©ºé—´"><a href="#2ã€C-æ ‡å‡†åº“å’Œstdå‘½åç©ºé—´" class="headerlink" title="2ã€C++æ ‡å‡†åº“å’Œstdå‘½åç©ºé—´"></a>2ã€C++æ ‡å‡†åº“å’Œstdå‘½åç©ºé—´</h4><p>ä¸ºäº†é¿å…å¤´æ–‡ä»¶é‡åï¼Œæ–°ç‰ˆ C++ åº“ä¹Ÿå¯¹å¤´æ–‡ä»¶çš„å‘½ååšäº†è°ƒæ•´ï¼Œå»æ‰äº†åç¼€<code>.h</code>ï¼Œæ‰€ä»¥è€å¼ C++ çš„<code>iostream.h</code>å˜æˆäº†<code>iostream</code>ï¼Œ<code>fstream.h</code>å˜æˆäº†<code>fstream</code>ã€‚è€Œå¯¹äºåŸæ¥Cè¯­è¨€çš„å¤´æ–‡ä»¶ï¼Œä¹Ÿé‡‡ç”¨åŒæ ·çš„æ–¹æ³•ï¼Œä½†åœ¨æ¯ä¸ªåå­—å‰è¿˜è¦æ·»åŠ ä¸€ä¸ª<code>c</code>å­—æ¯ï¼Œæ‰€ä»¥Cè¯­è¨€çš„<code>stdio.h</code>å˜æˆäº†<code>cstdio</code>ï¼Œ<code>stdlib.h</code>å˜æˆäº†<code>cstdlib</code></p><blockquote><p>å¯ä»¥å‘ç°ï¼Œå¯¹äºä¸å¸¦<code>.h</code>çš„å¤´æ–‡ä»¶ï¼Œæ‰€æœ‰çš„ç¬¦å·éƒ½ä½äºå‘½åç©ºé—´ std ä¸­ï¼Œä½¿ç”¨æ—¶éœ€è¦å£°æ˜å‘½åç©ºé—´ stdï¼›å¯¹äºå¸¦<code>.h</code>çš„å¤´æ–‡ä»¶ï¼Œæ²¡æœ‰ä½¿ç”¨ä»»ä½•å‘½åç©ºé—´ï¼Œæ‰€æœ‰ç¬¦å·éƒ½ä½äºå…¨å±€ä½œç”¨åŸŸã€‚è¿™ä¹Ÿæ˜¯ C++ æ ‡å‡†æ‰€è§„å®šçš„</p></blockquote><p>åœ¨Cè¯­è¨€ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨ scanf å’Œ printf æ¥å¯¹æ•°æ®è¿›è¡Œè¾“å…¥è¾“å‡ºæ“ä½œã€‚åœ¨C++è¯­è¨€ä¸­ï¼ŒCè¯­è¨€çš„è¿™ä¸€å¥—è¾“å…¥è¾“å‡ºåº“æˆ‘ä»¬ä»ç„¶èƒ½ä½¿ç”¨ï¼Œä½†æ˜¯ C++ åˆå¢åŠ äº†ä¸€å¥—æ–°çš„ã€æ›´å®¹æ˜“ä½¿ç”¨çš„è¾“å…¥è¾“å‡ºåº“ã€‚</p><p>åœ¨C++ ä¸­çš„è¾“å…¥ä¸è¾“å‡ºå¯ä»¥çœ‹åšæ˜¯ä¸€è¿ä¸²çš„æ•°æ®æµï¼Œè¾“å…¥å³å¯è§†ä¸ºä»æ–‡ä»¶æˆ–é”®ç›˜ä¸­è¾“å…¥ç¨‹åºä¸­çš„ä¸€ä¸²æ•°æ®æµï¼Œè€Œè¾“å‡ºåˆ™å¯ä»¥è§†ä¸ºä»ç¨‹åºä¸­è¾“å‡ºä¸€è¿ä¸²çš„æ•°æ®æµåˆ°æ˜¾ç¤ºå±æˆ–æ–‡ä»¶ä¸­ã€‚åœ¨ç¼–å†™ C++ ç¨‹åºæ—¶ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨è¾“å…¥è¾“å‡ºæ—¶ï¼Œåˆ™éœ€è¦åŒ…å«å¤´æ–‡ä»¶iostream<code>ï¼ŒåŒ…å«äº†ç”¨äºè¾“å…¥è¾“å‡ºçš„å¯¹è±¡ï¼Œä¾‹å¦‚å¸¸è§çš„</code>cin<code>è¡¨ç¤ºæ ‡å‡†è¾“å…¥ã€</code>cout<code>è¡¨ç¤ºæ ‡å‡†è¾“å‡ºã€</code>cerr`è¡¨ç¤ºæ ‡å‡†é”™è¯¯ã€‚iostream æ˜¯ Input Output Stream çš„ç¼©å†™ï¼Œæ„æ€æ˜¯â€œè¾“å…¥è¾“å‡ºæµâ€ã€‚cout å’Œ cin éƒ½æ˜¯ C++ çš„å†…ç½®å¯¹è±¡ï¼Œè€Œä¸æ˜¯å…³é”®å­—ã€‚</p><h4 id="3ã€newå’Œdeleteæ“ä½œç¬¦"><a href="#3ã€newå’Œdeleteæ“ä½œç¬¦" class="headerlink" title="3ã€newå’Œdeleteæ“ä½œç¬¦"></a>3ã€newå’Œdeleteæ“ä½œç¬¦</h4><p>åœ¨Cè¯­è¨€ä¸­ï¼ŒåŠ¨æ€åˆ†é…å†…å­˜ç”¨ malloc() å‡½æ•°ï¼Œé‡Šæ”¾å†…å­˜ç”¨ free() å‡½æ•°ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre class=" language-C++"><code class="language-C++">int *p = (int*) malloc( sizeof(int) * 10 );  //åˆ†é…10ä¸ªintå‹çš„å†…å­˜ç©ºé—´free(p);  //é‡Šæ”¾å†…å­˜</code></pre><p>åœ¨C++ä¸­ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°ä»ç„¶å¯ä»¥ä½¿ç”¨ï¼Œä½†æ˜¯C++åˆæ–°å¢äº†ä¸¤ä¸ªå…³é”®å­—ï¼Œnew å’Œ deleteï¼šnew ç”¨æ¥åŠ¨æ€åˆ†é…å†…å­˜ï¼Œdelete ç”¨æ¥é‡Šæ”¾å†…å­˜ã€‚</p><pre class=" language-c++"><code class="language-c++">int *p = new int;  //åˆ†é…1ä¸ªintå‹çš„å†…å­˜ç©ºé—´delete p;  //é‡Šæ”¾å†…å­˜//new æ“ä½œç¬¦ä¼šæ ¹æ®åé¢çš„æ•°æ®ç±»å‹æ¥æ¨æ–­æ‰€éœ€ç©ºé—´çš„å¤§å°ã€‚//å¦‚æœå¸Œæœ›åˆ†é…ä¸€ç»„è¿ç»­çš„æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ new[]ï¼šint *p = new int[10];  //åˆ†é…10ä¸ªintå‹çš„å†…å­˜ç©ºé—´delete[] p;</code></pre><p>ç”¨ new[] åˆ†é…çš„å†…å­˜éœ€è¦ç”¨ delete[] é‡Šæ”¾ï¼Œå®ƒä»¬æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚</p><p>å’Œ malloc() ä¸€æ ·ï¼Œnew ä¹Ÿæ˜¯åœ¨å †åŒºåˆ†é…å†…å­˜ï¼Œå¿…é¡»æ‰‹åŠ¨é‡Šæ”¾ï¼Œå¦åˆ™åªèƒ½ç­‰åˆ°ç¨‹åºè¿è¡Œç»“æŸç”±æ“ä½œç³»ç»Ÿå›æ”¶ã€‚ä¸ºäº†é¿å…å†…å­˜æ³„éœ²ï¼Œé€šå¸¸ new å’Œ deleteã€new[] å’Œ delete[] æ“ä½œç¬¦åº”è¯¥æˆå¯¹å‡ºç°ï¼Œå¹¶ä¸”ä¸è¦å’ŒCè¯­è¨€ä¸­ malloc()ã€free() ä¸€èµ·æ··ç”¨ã€‚</p><h4 id="4ã€inline-å†…è”å‡½æ•°"><a href="#4ã€inline-å†…è”å‡½æ•°" class="headerlink" title="4ã€inline å†…è”å‡½æ•°"></a>4ã€inline å†…è”å‡½æ•°</h4><blockquote><p>ä¸€ä¸ª C/C++ ç¨‹åºçš„æ‰§è¡Œè¿‡ç¨‹å¯ä»¥è®¤ä¸ºæ˜¯å¤šä¸ªå‡½æ•°ä¹‹é—´çš„ç›¸äº’è°ƒç”¨è¿‡ç¨‹ï¼Œå®ƒä»¬å½¢æˆäº†ä¸€ä¸ªæˆ–ç®€å•æˆ–å¤æ‚çš„è°ƒç”¨é“¾æ¡ï¼Œè¿™ä¸ªé“¾æ¡çš„èµ·ç‚¹æ˜¯ main()ï¼Œç»ˆç‚¹ä¹Ÿæ˜¯ main()ã€‚å½“ main() è°ƒç”¨å®Œäº†æ‰€æœ‰çš„å‡½æ•°ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªå€¼ï¼ˆä¾‹å¦‚<code>return 0;</code>ï¼‰æ¥ç»“æŸè‡ªå·±çš„ç”Ÿå‘½ï¼Œä»è€Œç»“æŸæ•´ä¸ªç¨‹åºã€‚</p><p>å‡½æ•°è°ƒç”¨æ˜¯æœ‰æ—¶é—´å’Œç©ºé—´å¼€é”€çš„ã€‚ç¨‹åºåœ¨æ‰§è¡Œä¸€ä¸ªå‡½æ•°ä¹‹å‰éœ€è¦åšä¸€äº›å‡†å¤‡å·¥ä½œï¼Œè¦å°†å®å‚ã€å±€éƒ¨å˜é‡ã€è¿”å›åœ°å€ä»¥åŠè‹¥å¹²å¯„å­˜å™¨éƒ½å‹å…¥æ ˆä¸­ï¼Œç„¶åæ‰èƒ½æ‰§è¡Œå‡½æ•°ä½“ä¸­çš„ä»£ç ï¼›å‡½æ•°ä½“ä¸­çš„ä»£ç æ‰§è¡Œå®Œæ¯•åè¿˜è¦æ¸…ç†ç°åœºï¼Œå°†ä¹‹å‰å‹å…¥æ ˆä¸­çš„æ•°æ®éƒ½å‡ºæ ˆï¼Œæ‰èƒ½æ¥ç€æ‰§è¡Œå‡½æ•°è°ƒç”¨ä½ç½®ä»¥åçš„ä»£ç ã€‚</p><p>å¦‚æœå‡½æ•°ä½“ä»£ç æ¯”è¾ƒå¤šï¼Œéœ€è¦è¾ƒé•¿çš„æ‰§è¡Œæ—¶é—´ï¼Œé‚£ä¹ˆå‡½æ•°è°ƒç”¨æœºåˆ¶å ç”¨çš„æ—¶é—´å¯ä»¥å¿½ç•¥ï¼›å¦‚æœå‡½æ•°åªæœ‰ä¸€ä¸¤æ¡è¯­å¥ï¼Œé‚£ä¹ˆå¤§éƒ¨åˆ†çš„æ—¶é—´éƒ½ä¼šèŠ±è´¹åœ¨å‡½æ•°è°ƒç”¨æœºåˆ¶ä¸Šï¼Œè¿™ç§æ—¶é—´å¼€é”€å°±å°±ä¸å®¹å¿½è§†ã€‚</p><p>ä¸ºäº†æ¶ˆé™¤å‡½æ•°è°ƒç”¨çš„æ—¶ç©ºå¼€é”€ï¼ŒC++ æä¾›ä¸€ç§æé«˜æ•ˆç‡çš„æ–¹æ³•ï¼Œå³åœ¨ç¼–è¯‘æ—¶å°†å‡½æ•°è°ƒç”¨å¤„ç”¨å‡½æ•°ä½“æ›¿æ¢ï¼Œç±»ä¼¼äºCè¯­è¨€ä¸­çš„å®å±•å¼€ã€‚è¿™ç§åœ¨å‡½æ•°è°ƒç”¨å¤„ç›´æ¥åµŒå…¥å‡½æ•°ä½“çš„å‡½æ•°ç§°ä¸º``å†…è”å‡½æ•°ï¼ˆInline Functionï¼‰`ï¼Œåˆç§°å†…åµŒå‡½æ•°æˆ–è€…å†…ç½®å‡½æ•°ã€‚</p></blockquote><p>æ³¨æ„ï¼Œè¦åœ¨å‡½æ•°å®šä¹‰å¤„æ·»åŠ  inline å…³é”®å­—ï¼Œåœ¨å‡½æ•°å£°æ˜å¤„æ·»åŠ  inline å…³é”®å­—è™½ç„¶æ²¡æœ‰é”™ï¼Œä½†è¿™ç§åšæ³•æ˜¯æ— æ•ˆçš„ï¼Œç¼–è¯‘å™¨ä¼šå¿½ç•¥å‡½æ•°å£°æ˜å¤„çš„ inline å…³é”®å­—ã€‚</p><p><strong>ä½¿ç”¨å†…è”å‡½æ•°çš„ç¼ºç‚¹ä¹Ÿæ˜¯éå¸¸æ˜æ˜¾çš„ï¼Œç¼–è¯‘åçš„ç¨‹åºä¼šå­˜åœ¨å¤šä»½ç›¸åŒçš„å‡½æ•°æ‹·è´ï¼Œå¦‚æœè¢«å£°æ˜ä¸ºå†…è”å‡½æ•°çš„å‡½æ•°ä½“éå¸¸å¤§ï¼Œé‚£ä¹ˆç¼–è¯‘åçš„ç¨‹åºä½“ç§¯ä¹Ÿå°†ä¼šå˜å¾—å¾ˆå¤§ï¼Œæ‰€ä»¥å†æ¬¡å¼ºè°ƒï¼Œä¸€èˆ¬åªå°†é‚£äº›çŸ­å°çš„ã€é¢‘ç¹è°ƒç”¨çš„å‡½æ•°å£°æ˜ä¸ºå†…è”å‡½æ•°ã€‚</strong></p><h3 id="1-2-C-å‡½æ•°æé«˜"><a href="#1-2-C-å‡½æ•°æé«˜" class="headerlink" title="1.2 C++ å‡½æ•°æé«˜"></a>1.2 C++ å‡½æ•°æé«˜</h3><h4 id="1ã€å‡½æ•°å‚æ•°"><a href="#1ã€å‡½æ•°å‚æ•°" class="headerlink" title="1ã€å‡½æ•°å‚æ•°"></a>1ã€å‡½æ•°å‚æ•°</h4><p><strong>1ã€ä¼ å€¼å‚æ•°</strong></p><pre class=" language-c++"><code class="language-c++">int abc(int a ,int b,int)&#123;    return a+b+c;    &#125;</code></pre><p>a,b,cæ˜¯<code>å½¢å‚</code>ï¼Œæ¯ä¸€ä¸ªå½¢å‚éƒ½æ˜¯æ•´å½¢ï¼›å¯ä»¥ä½¿z=abc(2,x,y)è°ƒç”¨æ±‚å’Œå‡½æ•°ã€‚é‚£ä¹ˆ2,x,yåˆ†åˆ«å¯¹åº”a,b,cçš„å®å‚ã€‚å½¢å‚a,b,cå®é™…ä¸Šæ˜¯<code>ä¼ å€¼å‚æ•°</code>ï¼Œåœ¨è¿è¡Œæ—¶ï¼Œå‡½æ•°a,b,cæ‰§è¡Œå‰ï¼ŒæŠŠå®å‚å¤åˆ¶ç»™å½¢å‚ã€‚å¤åˆ¶è¿‡ç¨‹æ˜¯ç”±å½¢å‚ç±»å‹çš„<code>å¤åˆ¶æ„é€ å‡½æ•°</code></p><p><strong>2ã€é»˜è®¤å‚æ•°</strong></p><p>åœ¨C++ä¸­ï¼Œå‡½æ•°çš„å½¢å‚åˆ—è¡¨ä¸­çš„å½¢å‚æ˜¯å¯ä»¥æœ‰é»˜è®¤å€¼çš„</p><p>è¯­æ³•ï¼š<code>è¿”å›å€¼ç±»å‹ å‡½æ•°å(å‚æ•°A=é»˜è®¤å€¼1ï¼Œå‚æ•°B=é»˜è®¤å€¼2)</code></p><pre class=" language-c++"><code class="language-c++">int add(int a, int b = 10, int c = 20)&#123;    return a + b + c;&#125;//å¦‚æœæŸä¸ªä½ç½®æœ‰é»˜è®¤å‚æ•°ï¼Œé‚£ä¹ˆä»è¿™ä¸ªä½ç½®å¾€åï¼Œéƒ½å¿…é¡»æœ‰é»˜è®¤å€¼//å£°æ˜å’Œå®ç°åªèƒ½ä¸€ä¸ªæœ‰é»˜è®¤å‚æ•°/*é”™è¯¯ç¤ºä¾‹int add(int a, int b = 10, int c)&#123;    return a + b + c;&#125;*/</code></pre><h4 id="2ã€å‡½æ•°é‡è½½"><a href="#2ã€å‡½æ•°é‡è½½" class="headerlink" title="2ã€å‡½æ•°é‡è½½"></a>2ã€å‡½æ•°é‡è½½</h4><p><strong>ä½œç”¨ï¼š</strong>å‡½æ•°åç›¸åŒï¼Œæé«˜å¤ç”¨æ€§</p><p>å‡½æ•°é‡è½½æ»¡è¶³çš„æ¡ä»¶ï¼š</p><ul><li>åŒä¸€ä¸ªä½œç”¨åŸŸä¸‹</li><li>å‡½æ•°åç§°ç›¸åŒ</li><li>å‡½æ•°å‚æ•°ç±»å‹ä¸åŒï¼Œæˆ–è€…ä¸ªæ•°ä¸åŒï¼Œæˆ–è€…é¡ºåºä¸åŒ</li></ul><pre class=" language-c++"><code class="language-c++">int add(int a, int b)&#123;    return a + b;&#125;int add(int a, int b, int c)&#123;    return a + b + c;&#125;double add(double a, double b, double c)&#123;    return a + b + c;&#125;int main()&#123;    int m, n;    cout << " 1 : " << add(1, 2) << endl;    cout << " 2 : " << add(1, 2, 3) << endl;    cout << " 3 : " << add(1.1, 2.2, 3.3) << endl;    system("pause");    return 0;&#125;</code></pre><p>å‡½æ•°é‡è½½çš„æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>å¼•ç”¨ä½œä¸ºå‡½æ•°é‡è½½çš„æ¡ä»¶</li><li>å‡½æ•°é‡è½½ç¢°åˆ°é»˜è®¤å‚æ•°</li></ul><p>==æ³¨æ„ï¼šç¼–è¯‘å™¨çš„äºŒä¹‰æ€§==</p><h4 id="3ã€æ¨¡æ¿å‡½æ•°"><a href="#3ã€æ¨¡æ¿å‡½æ•°" class="headerlink" title="3ã€æ¨¡æ¿å‡½æ•°"></a>3ã€æ¨¡æ¿å‡½æ•°</h4><p>å‡å®šæˆ‘ä»¬å¸Œæœ›ç¼–å†™å¦å¤–ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®—ç›¸åŒçš„è¡¨è¾¾å¼ï¼Œä¸è¿‡è¿™æ¬¡aã€bå’Œcæ˜¯floatç±»å‹ï¼Œç»“æœä¹Ÿæ˜¯floatç±»å‹ã€‚ç¨‹åº1-2ä¸­ç»™å‡ºäº†å…·ä½“çš„ä»£ç ã€‚åŒºåˆ«ä»…åœ¨äºå½¢å‚ä»¥åŠå‡½æ•°è¿”å›å€¼çš„ç±»å‹ä¸åŒã€‚</p><pre class=" language-c++"><code class="language-c++">float abc(float a, float b, float c)&#123;    return a+b+c;&#125;</code></pre><p>ä¸å…¶å¯¹æ¯ä¸€ç§å¯èƒ½çš„å½¢å‚ç±»å‹éƒ½ç¼–å†™ä¸€ä¸ªç›¸åº”å‡½æ•°çš„æ–°ç‰ˆæœ¬ï¼Œä¸å¦‚ç¼–å†™ä¸€æ®µé€šç”¨ä»£ç ,å®ƒçš„å‚æ•°ç±»å‹æ˜¯ä¸€ä¸ªå˜é‡ï¼Œå®ƒçš„å€¼ç”±ç¼–è¯‘å™¨æ¥ç¡®å®šã€‚è¿™ç§é€šç”¨ä»£ç ä½¿ç”¨çš„æ˜¯æ¨¡æ¿è¯­å¥ã€‚</p><pre class=" language-c++"><code class="language-c++">template <class T>T abc(T a, T b, T c)&#123;    return a+b+c;&#125;</code></pre><p>ä»è¿™æ®µé€šç”¨ä»£ç ï¼Œç¼–è¯‘å™¨é€šè¿‡æ—¢å¯Tæ›¿æ¢ä¸ºint,ä¹Ÿå¯æŠŠTæ›¿æ¢ä¸ºfloat ã€‚äº‹å®ä¸Šï¼Œé€šè¿‡æŠŠTæ›¿æ¢ä¸ºdoubleæˆ–long,ç¼–è¯‘å™¨è¿˜å¯ä»¥æ„é€ å‡ºå‡½æ•°abcçš„åŒç²¾åº¦å‹ç‰ˆæœ¬å’Œé•¿æ•´å‹ç‰ˆæœ¬ã€‚æŠŠå‡½æ•°abcç¼–å†™æˆæ¨¡æ¿å‡½æ•°,æˆ‘ä»¬å°±ä¸å¿…äº†è§£å½¢å‚çš„ç±»å‹äº†ã€‚</p><h3 id="1-3-C-ç±»å’Œå¯¹è±¡"><a href="#1-3-C-ç±»å’Œå¯¹è±¡" class="headerlink" title="1.3 C++ç±»å’Œå¯¹è±¡"></a>1.3 C++ç±»å’Œå¯¹è±¡</h3><p>C++é¢å‘å¯¹è±¡çš„ä¸‰å¤§ç‰¹æ€§ï¼š==å°è£…ã€ç»§æ‰¿ã€å¤šæ€==ï¼ŒC++ä»»åŠ¡ä¸‡äº‹ä¸‡ç‰©çš†ä¸ºå¯¹è±¡ï¼Œå¯¹è±¡æœ‰å…¶å±æ€§å’Œè¡Œä¸ºã€‚</p><p>ç±»æ˜¯åˆ›å»ºå¯¹è±¡çš„æ¨¡æ¿ï¼Œä¸€ä¸ªç±»å¯ä»¥åˆ›å»ºå¤šä¸ªå¯¹è±¡ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æ˜¯ç±»ç±»å‹çš„ä¸€ä¸ªå˜é‡ï¼›åˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹ä¹Ÿå«ç±»çš„å®ä¾‹åŒ–ã€‚æ¯ä¸ªå¯¹è±¡éƒ½æ˜¯ç±»çš„ä¸€ä¸ªå…·ä½“å®ä¾‹ï¼Œæ‹¥æœ‰ç±»çš„æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°ã€‚</p><blockquote><p>æœ‰äº›æ•™ç¨‹å°†ç±»çš„æˆå‘˜å˜é‡ç§°ä¸ºç±»çš„å±æ€§ï¼ˆPropertyï¼‰ï¼Œå°†ç±»çš„æˆå‘˜å‡½æ•°ç§°ä¸ºç±»çš„æ–¹æ³•ï¼ˆMethodï¼‰ã€‚åœ¨é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œç»å¸¸æŠŠå‡½æ•°ï¼ˆFunctionï¼‰ç§°ä¸ºæ–¹æ³•ï¼ˆMethodï¼‰ã€‚</p></blockquote><pre class=" language-c++"><code class="language-c++">class Student&#123;public:    //å±æ€§ï¼ˆPropertyï¼‰    string name;    int old;    float score;    //æ–¹æ³•ï¼ˆMethodï¼‰    void StudentInformation()    &#123;        cout << "the old of " << name << "is " << old << ","             << "and his(her) score is " << score << endl;    &#125;&#125;;</code></pre><h4 id="1ã€å°è£…çš„æ„ä¹‰"><a href="#1ã€å°è£…çš„æ„ä¹‰" class="headerlink" title="1ã€å°è£…çš„æ„ä¹‰"></a>1ã€å°è£…çš„æ„ä¹‰</h4><p><strong>è®¿é—®çš„ä¸‰ç§æƒé™ï¼š</strong></p><p><code>å…¬å…±æƒé™ï¼ˆpublicï¼‰</code>ï¼šæˆå‘˜ ç±»å†…å¯ä»¥è®¿é—® ç±»å¤–å¯ä»¥è®¿é—®</p><p><code>ä¿æŠ¤æƒé™ï¼ˆprotectedï¼‰</code>ï¼šæˆå‘˜  ç±»å†…å¯ä»¥è®¿é—®  ç±»å¤–ä¸å¯ä»¥è®¿é—®  å­ç±»å¯ä»¥è®¿é—®çˆ¶ç±»</p><p><code>ç§æœ‰æƒé™ï¼ˆprivateï¼‰</code>ï¼šæˆå‘˜  ç±»å†…å¯ä»¥è®¿é—®  ç±»å¤–ä¸å¯ä»¥è®¿é—® å­ç±»ä¸å¯ä»¥è®¿é—®çˆ¶ç±»</p><pre class=" language-c++"><code class="language-c++">class Person&#123;public:    string m_name;protected:    int m_car;private:    int m_card_ID;public:    void func()    &#123;        m_name = "zwy";        m_car = 123;        m_card_ID = 123456;    &#125;&#125;;</code></pre><p><strong>æˆå‘˜å±æ€§è®¾ç½®ä¸ºç§æœ‰</strong></p><p>1ã€å¯ä»¥è‡ªå·±æ§åˆ¶è¯»å†™å±æ€§</p><p>2ã€å¯¹äºå†™å¯ä»¥æ£€æµ‹æ•°æ®æœ‰æ•ˆæ€§</p><h4 id="2ã€å¯¹è±¡çš„åˆå§‹åŒ–å’Œæ¸…ç†"><a href="#2ã€å¯¹è±¡çš„åˆå§‹åŒ–å’Œæ¸…ç†" class="headerlink" title="2ã€å¯¹è±¡çš„åˆå§‹åŒ–å’Œæ¸…ç†"></a>2ã€å¯¹è±¡çš„åˆå§‹åŒ–å’Œæ¸…ç†</h4><p><strong>1ã€æ„é€ å‡½æ•°å’Œææ„å‡½æ•°</strong></p><p> <strong>æ„é€ å‡½æ•°è¯­æ³•</strong>ï¼š<code>ç±»åï¼ˆï¼‰&#123;&#125;</code></p><ul><li>æ„é€ å‡½æ•°æ²¡æœ‰è¿”å›å€¼ï¼Œä¹Ÿä¸å†™void</li><li>å‡½æ•°åä¸ç±»åç›¸åŒ</li><li>æ„é€ å‡½æ•°ä¹Ÿå¯ä»¥æœ‰å‚æ•°ï¼Œå› æ­¤ä¹Ÿå¯ä»¥å‘ç”Ÿé‡è½½</li><li>ç¨‹åºåœ¨è°ƒç”¨å¯¹è±¡çš„æ—¶å€™è‡ªåŠ¨è°ƒç”¨æ„é€ ï¼Œæ— éœ€æ‰‹åŠ¨è°ƒç”¨ï¼Œè€Œä¸”åªä¼šè°ƒç”¨ä¸€æ¬¡</li></ul><p>ææ„å‡½æ•°è¯­æ³•ï¼š<code>~ç±»åï¼ˆï¼‰&#123;&#125;</code></p><ul><li>ææ„å‡½æ•°æ²¡æœ‰è¿”å›å€¼ï¼Œä¹Ÿä¸å†™void</li><li>å‡½æ•°åä¸ç±»åç›¸åŒï¼Œåœ¨åç§°å‰åŠ ä¸Šç¬¦å· ~</li><li>ææ„å‡½æ•°ä¸å¯ä»¥æœ‰å‚æ•°ï¼Œå› æ­¤ä¸å¯ä»¥å‘ç”Ÿé‡è½½</li><li>ç¨‹åºåœ¨å¯¹è±¡é”€æ¯çš„æ—¶å€™è‡ªåŠ¨è°ƒç”¨ææ„ï¼Œæ— éœ€æ‰‹åŠ¨è°ƒç”¨ï¼Œè€Œä¸”åªä¼šè°ƒç”¨ä¸€æ¬¡</li></ul><pre class=" language-c++"><code class="language-c++">class Person&#123;public:    Person()    &#123;        cout << "1" << endl;    &#125;    ~Person()    &#123;         cout << "2" << endl;    &#125;&#125;;</code></pre><p><strong>2ã€æ„é€ å‡½æ•°çš„åˆ†ç±»</strong></p><ul><li><p>æŒ‰ç…§å‚æ•°åˆ†ç±»ï¼šæ— å‚æ„é€ ï¼ˆé»˜è®¤æ„é€ ï¼‰å’Œæœ‰å‚æ„é€ </p></li><li><p>æŒ‰ç…§ç±»å‹åˆ†ç±»ï¼šæ‹·è´æ„é€  å’Œ æ™®é€šæ„é€ ï¼ˆé»˜è®¤æ„é€ ï¼‰</p><pre class=" language-C++"><code class="language-C++">//æœ‰å‚æ„é€   Person(int a)&#123;    cout << "1" << endl;&#125;//æ‹·è´æ„é€ Person(const Person &p)&#123;    //å°†ä¼ å…¥ç±»çš„æ‰€æœ‰å±æ€§æ‹·è´åˆ°æœ¬ä¸ªä¸Š&#125;</code></pre></li></ul><h4 id="3ã€å‡½æ•°æ¨¡æ¿"><a href="#3ã€å‡½æ•°æ¨¡æ¿" class="headerlink" title="3ã€å‡½æ•°æ¨¡æ¿"></a>3ã€å‡½æ•°æ¨¡æ¿</h4><ul><li><p>C++å¦ä¸€ç§ç¼–ç¨‹æ€æƒ³ç§°ä¸ºæ³›å‹ç¼–ç¨‹ã€‚ä¸»è¦åˆ©ç”¨çš„æŠ€æœ¯å°±æ˜¯æ¨¡æ¿</p></li><li><p>C++æä¾›ä¸¤ç§æ¨¡æ¿æœºåˆ¶:å‡½æ•°æ¨¡æ¿å’Œç±»æ¨¡æ¿</p></li></ul><p>  <strong>å‡½æ•°æ¨¡æ¿è¯­æ³•ï¼š</strong></p><pre class=" language-C++"><code class="language-C++">//å®šä¹‰template<typename T>void func(T &a,T &b)&#123;    &#125;//ä½¿ç”¨func<datatype>(a,b) ;</code></pre><p>  <strong>è§£é‡Šï¼š</strong></p><p>  â€‹    template â€”â€”â€”å£°æ˜æ¨¡æ¿</p><p>  â€‹    typename â€”â€”â€” è¡¨æ˜å…¶åé¢çš„æ˜¯ä¸€ç§æ•°æ®ç±»å‹ï¼Œå¯ç”¨classæ›¿æ¢</p><p>  â€‹    T â€”â€”â€” é€šç”¨æ•°æ®ç±»å‹ï¼Œåç§°å¯æ›¿æ¢ï¼Œé€šå¸¸ä¸ºå¤§å†™å­—æ¯</p><p>  <strong>å‡½æ•°æ¨¡æ¿ä½œç”¨:</strong>  å»ºç«‹-ä¸€ä¸ªé€šç”¨å‡½æ•°ï¼Œå…¶å‡½æ•°è¿”å›å€¼ç±»å‹å’Œå½¢å‚ç±»å‹å¯ä»¥ä¸å…·ä½“åˆ¶å®š,ç”¨-ä¸ªè™šæ‹Ÿçš„ç±»å‹æ¥ä»£è¡¨ã€‚</p><p>  <strong>å‡½æ•°æ¨¡æ¿çš„å±€é™æ€§</strong>ï¼šå‡è®¾æœ‰ä¸ªç±»â€”äººï¼Œå®ƒæœ‰ä¸¤ä¸ªå±æ€§â€”åå­—å’Œå¹´é¾„ã€‚èƒ½å¦é€šè¿‡å‡½æ•°æ¨¡æ¿ç›´æ¥åˆ¤æ–­æ˜¯å¦æ˜¯åŒä¸€ä¸ªäººï¼Ÿ</p><pre class=" language-C++"><code class="language-C++">class Person&#123;public:  string _name;  int _age;  Person(string name, int age) : _name(name), _age(age)&#123;&#125;;  ~Person()&#123;&#125;;&#125;;</code></pre><p>ä»¥ä¸‹ä¸ºé”™è¯¯ç¤ºä¾‹:</p><pre class=" language-C++"><code class="language-C++">/*template <typename T>bool func(T &a, T &b)&#123;    if (a == b)        return true;    else        return false;&#125;void test_1()&#123;    Person P1("Tom", 10);    Person P2("Tom", 10);    bool re = func(P1, P2);&#125;*/</code></pre><p><strong>è§£å†³æ–¹æ³•</strong>ï¼š</p><pre class=" language-c++"><code class="language-c++">template <typename T>bool func(T &a, T &b)&#123;    if (a == b)        return true;    else        return false;&#125;template <>bool func(Person &a, Person &b)&#123;    if (a._age == b._age && a._name == b._name)        return true;    else        return false;&#125;void test_2()&#123;    Person P1("Tom", 10);    Person P2("Tom", 10);    bool re = func<Person>(P1, P2);    cout << re << endl;&#125;</code></pre><h4 id="4ã€ç±»æ¨¡æ¿"><a href="#4ã€ç±»æ¨¡æ¿" class="headerlink" title="4ã€ç±»æ¨¡æ¿"></a>4ã€ç±»æ¨¡æ¿</h4><p>  <strong>ç±»æ¨¡æ¿è¯­æ³•ï¼š</strong></p><pre class=" language-C++"><code class="language-C++">template <class nameType, class ageType = int>class Person&#123;public:  nameType _name;  ageType _age;  Person(nameType name, ageType age) : _name(name), _age(age)&#123;&#125;;  ~Person()&#123;&#125;;&#125;;</code></pre><p>  <strong>è§£é‡Šï¼š</strong></p><p>  â€‹    template â€”â€”â€”å£°æ˜æ¨¡æ¿</p><p>  â€‹    typename â€”â€”â€” è¡¨æ˜å…¶åé¢çš„æ˜¯ä¸€ç§æ•°æ®ç±»å‹ï¼Œå¯ç”¨classæ›¿æ¢</p><p>  â€‹    T â€”â€”â€” é€šç”¨æ•°æ®ç±»å‹ï¼Œåç§°å¯æ›¿æ¢ï¼Œé€šå¸¸ä¸ºå¤§å†™å­—æ¯</p><h2 id="ç¬¬äºŒç« -ç¨‹åºæ€§èƒ½åˆ†æ"><a href="#ç¬¬äºŒç« -ç¨‹åºæ€§èƒ½åˆ†æ" class="headerlink" title="ç¬¬äºŒç«  ç¨‹åºæ€§èƒ½åˆ†æ"></a>ç¬¬äºŒç«  ç¨‹åºæ€§èƒ½åˆ†æ</h2><h3 id="2-1-ç©ºé—´å¤æ‚åº¦"><a href="#2-1-ç©ºé—´å¤æ‚åº¦" class="headerlink" title="2.1 ç©ºé—´å¤æ‚åº¦"></a>2.1 ç©ºé—´å¤æ‚åº¦</h3><p><strong>1 ã€ç©ºé—´å¤æ‚åº¦çš„ç»„æˆ</strong><br>    ç¨‹åºæ‰€éœ€è¦çš„ç©ºé—´ä¸»è¦ç”±ä»¥ä¸‹éƒ¨åˆ†æ„æˆ:<br>        (1)æŒ‡ä»¤ç©ºé—´( instruction space )ï¼šæŒ‡ä»¤ç©ºé—´æ˜¯æŒ‡ç¼–è¯‘ä¹‹åçš„ç¨‹åºæŒ‡ä»¤æ‰€éœ€è¦çš„å­˜å‚¨ç©ºé—´ã€‚</p><p>â€‹    æŒ‡ä»¤ç©ºé—´çš„æ•°é‡å–å†³äºå¦‚ä¸‹å› ç´ :<br>â€‹            â—æŠŠç¨‹åºè½¬æ¢æˆæœºå™¨ä»£ç çš„ç¼–è¯‘å™¨ã€‚<br>â€‹            â—åœ¨ç¼–è¯‘æ—¶çš„ç¼–è¯‘å™¨é€‰é¡¹ã€‚<br>â€‹            â—ç›®æ ‡è®¡ç®—æœºã€‚</p><p>(2)æ•°æ®ç©ºé—´( data space )ï¼šæ•°æ®ç©ºé—´æ˜¯æŒ‡æ‰€æœ‰å¸¸é‡å’Œå˜é‡å€¼æ‰€éœ€è¦çš„å­˜å‚¨ç©ºé—´ã€‚å®ƒç”±ä¸¤ä¸ªéƒ¨åˆ†æ„æˆ:</p><p>â€‹    â—å¸¸é‡å’Œç®€å•å˜é‡æ‰€éœ€è¦çš„å­˜å‚¨ç©ºé—´ã€‚<br>â€‹            â—åŠ¨æ€æ•°ç»„å’ŒåŠ¨æ€ç±»å®ä¾‹ç­‰åŠ¨æ€å¯¹è±¡æ‰€éœ€è¦çš„ç©ºé—´ã€‚</p><table><thead><tr><th align="center">ç±»å‹</th><th align="center">ç©ºé—´å¤§å°</th><th align="center">èŒƒå›´</th></tr></thead><tbody><tr><td align="center">bool</td><td align="center">1</td><td align="center">{true,flase}</td></tr><tr><td align="center">char</td><td align="center">1</td><td align="center">{-128,127}</td></tr><tr><td align="center">unsigned char</td><td align="center">1</td><td align="center">{0,255}</td></tr><tr><td align="center">short</td><td align="center">2</td><td align="center">{-32768,32767}</td></tr><tr><td align="center">unsigned short</td><td align="center">2</td><td align="center">{0,65535}</td></tr><tr><td align="center">long</td><td align="center">4</td><td align="center">{-2<sup>31</sup>,-2<sup>31</sup>-1}</td></tr><tr><td align="center">unsigned long</td><td align="center">4</td><td align="center">{0,2<sup>32</sup>-1}</td></tr><tr><td align="center">int</td><td align="center">4</td><td align="center">{-2<sup>31</sup>,-2<sup>31</sup>-1}</td></tr><tr><td align="center">unsigned int</td><td align="center">4</td><td align="center">{0,2<sup>32</sup>-1}</td></tr><tr><td align="center">float</td><td align="center">4</td><td align="center">+-3.4E+-38 (7ä½)</td></tr><tr><td align="center">double</td><td align="center">8</td><td align="center">+-1.7E+-308(15ä½)</td></tr><tr><td align="center">long double</td><td align="center">10</td><td align="center">+-1.2E+-4392(19ä½)</td></tr></tbody></table><p>(3)ç¯å¢ƒæ ˆç©ºé—´( environment stack space )ï¼šç¯å¢ƒæ ˆç”¨æ¥ä¿å­˜æš‚åœçš„é™‹æ•°å’Œæ–¹æ³•åœ¨æ¢å¤è¿è¡Œæ—¶æ‰€éœ€è¦çš„ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå‡½æ•°fooè°ƒç”¨äº†ä¸½æ•°goo,é‚£ä¹ˆæˆ‘ä»¬è‡³å°‘è¦ä¿å­˜åœ¨å‡½æ•°gooç»“æŸæ—¶å‡½æ•°fooç»§ç»­æ‰§è¡Œçš„æŒ‡ä»¤åœ°å€ã€‚</p><p>â—è¿”å›åœ°å€ã€‚<br>        â—æ­£åœ¨è°ƒç”¨çš„å‡½æ•°çš„æ‰€æœ‰å±€éƒ¨å˜é‡çš„å€¼ä»¥åŠå½¢å¼å‚æ•°çš„å€¼( ä»…å¯¹é€’å½’å‡½æ•°è€Œè¨€)ã€‚</p><h3 id="2-2-æ—¶é—´å¤æ‚åº¦"><a href="#2-2-æ—¶é—´å¤æ‚åº¦" class="headerlink" title="2.2 æ—¶é—´å¤æ‚åº¦"></a>2.2 æ—¶é—´å¤æ‚åº¦</h3><h3 id="2-3-æ“ä½œè®¡æ•°"><a href="#2-3-æ“ä½œè®¡æ•°" class="headerlink" title="2.3 æ“ä½œè®¡æ•°"></a>2.3 æ“ä½œè®¡æ•°</h3><h3 id="2-4-æ­¥æ•°"><a href="#2-4-æ­¥æ•°" class="headerlink" title="2.4 æ­¥æ•°"></a>2.4 æ­¥æ•°</h3><h2 id="ç¬¬ä¸‰ç« -çº¿æ€§è¡¨â€”â€”æ•°ç»„æè¿°"><a href="#ç¬¬ä¸‰ç« -çº¿æ€§è¡¨â€”â€”æ•°ç»„æè¿°" class="headerlink" title="ç¬¬ä¸‰ç«   çº¿æ€§è¡¨â€”â€”æ•°ç»„æè¿°"></a>ç¬¬ä¸‰ç«   çº¿æ€§è¡¨â€”â€”æ•°ç»„æè¿°</h2><h3 id="3-1-çº¿æ€§è¡¨çš„æ•°æ®ç»“æ„"><a href="#3-1-çº¿æ€§è¡¨çš„æ•°æ®ç»“æ„" class="headerlink" title="3.1 çº¿æ€§è¡¨çš„æ•°æ®ç»“æ„"></a>3.1 çº¿æ€§è¡¨çš„æ•°æ®ç»“æ„</h3><p><strong>çº¿æ€§è¡¨( linear list)<strong>ä¹Ÿç§°</strong>æœ‰åºè¡¨( ordered list)</strong>, å®ƒçš„æ¯ä¸€ä¸ªå®ä¾‹éƒ½æ˜¯å…ƒç´ çš„ä¸€ä¸€ä¸ªæœ‰åºé›†åˆã€‚æ¯ä¸€ä¸ªå®ä¾‹çš„å½¢å¼ä¸º(e<sub>0</sub>,e<sub>1</sub>,e<sub>2</sub>,e<sub>3</sub>â€¦e<sub>n</sub>)å…¶ä¸­næ˜¯æœ‰ç©·è‡ªç„¶æ•°ï¼Œe<sub>i</sub> æ˜¯çº¿æ€§è¡¨çš„å…ƒç´ ï¼Œiæ˜¯å…ƒç´ e<sub>i</sub> çš„ç´¢å¼•ï¼Œnæ˜¯çº¿æ€§è¡¨çš„é•¿åº¦æˆ–å¤§å°ã€‚å…ƒç´ å¯ä»¥è¢«çœ‹åšåŸå­ï¼Œå®ƒä»¬æœ¬èº«çš„ç»“æ„ä¸çº¿æ€§è¡¨çš„ç»“æ„æ— å…³ã€‚å½“n=0æ—¶ï¼Œçº¿æ€§è¡¨ä¸ºç©º;å½“n&gt;0æ—¶ï¼Œe<sub>0</sub>æ˜¯çº¿æ€§è¡¨çš„ç¬¬0ä¸ªå…ƒç´ æˆ–é¦–å…ƒç´ , e<sub>n-1</sub> æ˜¯çº¿æ€§è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ã€‚å¯ä»¥è®¤ä¸ºe<sub>0</sub>å…ˆäºe<sub>1</sub>ï¼Œe<sub>1</sub>å…ˆäºe<sub>2</sub>ç­‰ç­‰ã€‚é™¤äº†è¿™ç§å…ˆåå…³ç³»ä¹‹å¤–ï¼Œçº¿æ€§è¡¨ä¸å†æœ‰å…¶ä»–å…³ç³»ã€‚</p><p><strong>å¯¹çº¿æ€§è¡¨çš„æ“ä½œ</strong>ï¼š</p><ul><li>åˆ›å»ºçº¿æ€§è¡¨</li></ul><pre class=" language-c"><code class="language-c">ChaLenArray <span class="token operator">*</span><span class="token function">Init_Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//åˆå§‹åŒ–ä¸€ä¸ªåŠ¨æ€æ•°ç»„</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    ChaLenArray <span class="token operator">*</span>NewArray <span class="token operator">=</span> <span class="token punctuation">(</span>ChaLenArray <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>ChaLenArray<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    NewArray<span class="token operator">-></span>size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    NewArray<span class="token operator">-></span>cap <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>    NewArray<span class="token operator">-></span>pAddr <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token operator">*</span> NewArray<span class="token operator">-></span>cap<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> NewArray<span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><ul><li>æ’¤é”€ä¸€ä¸ªçº¿æ€§è¡¨ã€‚</li></ul><pre class=" language-c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">FreeSpace_Array</span><span class="token punctuation">(</span>ChaLenArray <span class="token operator">*</span>arr<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//é‡Šæ”¾ä¸€ä¸ªåŠ¨æ€æ•°ç»„å†…å­˜ç©ºé—´</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token operator">-></span>pAddr <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">/* code */</span>        <span class="token function">free</span><span class="token punctuation">(</span>arr<span class="token operator">-></span>pAddr<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token function">free</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><ul><li>ç¡®å®šçº¿æ€§è¡¨çš„é•¿åº¦ã€‚</li></ul><pre class=" language-c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">Size_Array</span><span class="token punctuation">(</span>ChaLenArray <span class="token operator">*</span>arr<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>arr <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">return</span> arr<span class="token operator">-></span>size<span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><ul><li>æŒ‰ä¸€ä¸ªç»™å®šçš„ç´¢å¼•æŸ¥æ‰¾ä¸€ä¸ªå…ƒç´ ã€‚</li></ul><pre class=" language-c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">At_Array</span><span class="token punctuation">(</span>ChaLenArray <span class="token operator">*</span>arr<span class="token punctuation">,</span> <span class="token keyword">int</span> pos<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> arr<span class="token operator">-></span>pAddr<span class="token punctuation">[</span>pos<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><ul><li>æŒ‰ä¸€ä¸ªç»™å®šçš„å…ƒç´ æŸ¥æ‰¾å…¶ç´¢å¼•ã€‚</li></ul><pre class=" language-c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">Find_Array</span><span class="token punctuation">(</span>ChaLenArray <span class="token operator">*</span>arr<span class="token punctuation">,</span> <span class="token keyword">int</span> value<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//æ‰¾åˆ°ä¸€ä¸ªå…ƒç´ </span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> pos <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token operator">-></span>size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token operator">-></span>pAddr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> value<span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            pos <span class="token operator">=</span> i<span class="token punctuation">;</span>            <span class="token keyword">break</span><span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> pos<span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><ul><li>æŒ‰ä¸€ä¸ªç»™å®šçš„ç´¢å¼•åˆ é™¤- -ä¸ªå…ƒç´ ã€‚</li></ul><pre class=" language-c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">RemoveByPos_Array</span><span class="token punctuation">(</span>ChaLenArray <span class="token operator">*</span>arr<span class="token punctuation">,</span> <span class="token keyword">int</span> pos<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//é€šè¿‡ä½ç½®åˆ é™¤ä¸€ä¸ªå…ƒç´ </span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>pos <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> pos <span class="token operator">>=</span> arr<span class="token operator">-></span>size<span class="token punctuation">)</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> pos<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token operator">-></span>size <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        arr<span class="token operator">-></span>pAddr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token operator">-></span>pAddr<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    arr<span class="token operator">-></span>size<span class="token operator">--</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><ul><li>æŒ‰ä¸€ä¸ªç»™å®šçš„ç´¢å¼•æ’å…¥-ä¸€ä¸ªå…ƒç´ ã€‚</li></ul><pre class=" language-c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">Push_Back_Array</span><span class="token punctuation">(</span>ChaLenArray <span class="token operator">*</span>arr<span class="token punctuation">,</span> <span class="token keyword">int</span> value<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//å°¾éƒ¨æ’å…¥ä¸€ä¸ªæ•°æ®</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token operator">-></span>size <span class="token operator">>=</span> arr<span class="token operator">-></span>cap<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> <span class="token operator">*</span>Newspce <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span>arr<span class="token operator">-></span>cap <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">memcpy</span><span class="token punctuation">(</span>Newspce<span class="token punctuation">,</span> arr<span class="token operator">-></span>pAddr<span class="token punctuation">,</span> arr<span class="token operator">-></span>cap <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">free</span><span class="token punctuation">(</span>arr<span class="token operator">-></span>pAddr<span class="token punctuation">)</span><span class="token punctuation">;</span>        arr<span class="token operator">-></span>cap <span class="token operator">=</span> arr<span class="token operator">-></span>cap <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>        arr<span class="token operator">-></span>pAddr <span class="token operator">=</span> Newspce<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    arr<span class="token operator">-></span>pAddr<span class="token punctuation">[</span>arr<span class="token operator">-></span>size<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>    arr<span class="token operator">-></span>size<span class="token operator">++</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><ul><li>ä»å·¦è‡³å³é¡ºåºè¾“å‡ºçº¿æ€§è¡¨å…ƒç´ ã€‚</li></ul><pre class=" language-c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">Printf_Array</span><span class="token punctuation">(</span>ChaLenArray <span class="token operator">*</span>arr<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//æ‰“å°</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token operator">-></span>size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">/* code */</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> arr<span class="token operator">-></span>pAddr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><h3 id="3-2-å˜é•¿ä¸€ç»´æ•°ç»„"><a href="#3-2-å˜é•¿ä¸€ç»´æ•°ç»„" class="headerlink" title="3.2 å˜é•¿ä¸€ç»´æ•°ç»„"></a>3.2 å˜é•¿ä¸€ç»´æ•°ç»„</h3><p>ä¸€ç»´æ•°ç»„array,çº¿æ€§è¡¨å…ƒç´ å­˜åœ¨array[0,n-1]ä¸­ï¼Œè¦å¢åŠ æˆ–å‡å°‘è¿™ä¸ªæ•°ç»„é•¿åº¦ï¼Œé¦–å…ˆè¦åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ï¼Œç„¶åæŠŠarrayå¤åˆ¶åˆ°è¿™ä¸ªæ•°ç»„ï¼Œæœ€åæ”¹å˜æ•°ç»„arrayçš„å€¼ï¼Œæ˜¯å®ƒèƒ½å¤Ÿå¼•ç”¨æ–°æ•°ç»„ã€‚</p><pre class=" language-c++"><code class="language-c++">//c++å®ç°template <class T>void ChangeLength1D(T *a, int OldLength, int NewLength)&#123;    //if (NewLength <= 0)    //    throw "new length must be >=0";    T *temp = new T[NewLength];    int number = min(OldLength, NewLength);    copy(a, a + number, temp);    delete[] temp;    a = temp;&#125;//Cè¯­è¨€å®ç°ChaLenArray *Expand_Capacity(ChaLenArray *old_arr)&#123;    if (old_arr == NULL)        return NULL;    ChaLenArray *New_arr;    New_arr->cap = (int *)malloc(sizeof(int) * old_arr->cap * 2);    memcpy(New_arr->pAddr, old_arr->pAddr, old_arr->cap * sizeof(int));    New_arr->size = old_arr->size;    free(old_arr->pAddr);    return New_arr;&#125;</code></pre><h2 id="ç¬¬å››ç« -çº¿æ€§è¡¨â€”â€”-é“¾è¡¨"><a href="#ç¬¬å››ç« -çº¿æ€§è¡¨â€”â€”-é“¾è¡¨" class="headerlink" title="ç¬¬å››ç«  çº¿æ€§è¡¨â€”â€” é“¾è¡¨"></a>ç¬¬å››ç«  çº¿æ€§è¡¨â€”â€” é“¾è¡¨</h2><h3 id="4-1-å•å‘é“¾è¡¨"><a href="#4-1-å•å‘é“¾è¡¨" class="headerlink" title="4.1 å•å‘é“¾è¡¨"></a>4.1 å•å‘é“¾è¡¨</h3><p>åœ¨é“¾å¼æè¿°ä¸­ï¼Œæ•°æ®å®ä¾‹çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½ç”¨ä¸€ä¸ªå•å…ƒæˆ–èŠ‚ç‚¹æ¥æè¿°ã€‚èŠ‚ç‚¹ä¸å¿…æ˜¯æ•°ç»„æˆå‘˜ï¼Œå› æ­¤ä¸æ˜¯ç”¨å…¬å¼æ¥ç¡®å®šå…ƒç´ çš„ä½ç½®ã€‚å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œæ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æ˜ç¡®åŒ…å«å¦ä¸€ä¸ªç›¸å…³èŠ‚ç‚¹çš„ä½ç½®ä¿¡æ¯ï¼Œè¿™ä¸ªä¿¡æ¯ç§°ä¸º<code>é“¾( link )</code>æˆ–<code>æŒ‡é’ˆ( pointer )</code>ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210409083321017.png"></p><p>ä¸€èˆ¬æ¥è¯´ï¼Œä¸ºäº†æ‰¾åˆ°ç´¢å¼•ä¸ºtheIndexçš„å…ƒç´ ï¼Œéœ€è¦ä»firstNodeå¼€å§‹ï¼Œè·Ÿè¸ªtheIndexä¸ªæŒ‡é’ˆæ‰èƒ½æ‰¾åˆ°ã€‚ä¸€ä¸ªçº¿ æ€§è¡¨çš„é“¾å¼çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹åªæœ‰ä¸€ä¸ªé“¾ï¼Œè¿™ç§ç»“æ„ç§°ä¸º<code>å•å‘é“¾è¡¨( singly linkedlist)</code>ã€‚é“¾è¡¨ä»å·¦åˆ°å³ï¼Œæ¯ä¸€ä¸ªèŠ‚ç‚¹(æœ€åä¸€ä¸ªèŠ‚ç‚¹é™¤å¤–)éƒ½é“¾æ¥ç€ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæœ€åä¸€ä¸ªèŠ‚ç‚¹çš„é“¾åŸŸå€¼ä¸ºNULLã€‚è¿™æ ·çš„ç»“æ„ä¹Ÿç§°ä¸º<code>é“¾æ¡( chain )</code>ã€‚</p><p>å› æ­¤ï¼Œå®šä¹‰æ•°æ®ç±»å‹å¦‚ä¸‹ï¼š</p><pre class=" language-c"><code class="language-c"><span class="token comment" spellcheck="true">//å®šä¹‰èŠ‚ç‚¹</span><span class="token keyword">typedef</span> <span class="token keyword">struct</span> LINKNODE<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">void</span> <span class="token operator">*</span>data<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//æŒ‡å‘ä»»ä½•æ•°æ®æŒ‡é’ˆ ï¼ˆæ•°æ®åŸŸï¼‰</span>    <span class="token keyword">struct</span> LINKNODE <span class="token operator">*</span>next<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ ï¼ˆæŒ‡é’ˆåŸŸï¼‰</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> LinkNode<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å®šä¹‰é“¾è¡¨</span><span class="token keyword">typedef</span> <span class="token keyword">struct</span> LINKLIST<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    LinkNode <span class="token operator">*</span>head<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å®šä¹‰å¤´ç»“ç‚¹</span>    <span class="token keyword">int</span> size<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å®šä¹‰é“¾è¡¨é•¿åº¦</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> LinKList<span class="token punctuation">;</span></code></pre><p><code>åˆå§‹åŒ–</code>ï¼šé¦–å…ˆéœ€è¦åˆå§‹åŒ–é“¾è¡¨ï¼Œå¯¹äºä¸€ä¸ªé“¾è¡¨è€Œè¨€ï¼Œåªéœ€åˆå§‹åŒ–å¤´ç»“ç‚¹çš„æŒ‡é’ˆåŸŸå’Œæ•°æ®åŸŸã€‚</p><pre class=" language-c"><code class="language-c">LinKList <span class="token operator">*</span><span class="token function">Init_LinkList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    LinKList <span class="token operator">*</span>list <span class="token operator">=</span> <span class="token punctuation">(</span>LinKList <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>LinKList<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//ç”³è¯·å†…å­˜å­˜æ”¾é“¾è¡¨</span>    list<span class="token operator">-></span>size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    list<span class="token operator">-></span>head <span class="token operator">=</span> <span class="token punctuation">(</span>LinkNode <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>LinkNode<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//ç”³è¯·å†…å­˜å­˜æ”¾å¤´ç»“ç‚¹</span>    list<span class="token operator">-></span>head<span class="token operator">-></span>data <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å¤´ç»“ç‚¹çš„æ•°æ®åŸŸ</span>    list<span class="token operator">-></span>head<span class="token operator">-></span>next <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å¤´ç»“ç‚¹çš„æŒ‡é’ˆåŸŸ</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><code>æ’å…¥å…ƒç´ </code>: å°†è¦æ’å…¥çš„å…ƒç´ ä¸è¡¨Listã€ä½ç½®Poså’Œæ•°æ®æŒ‡é’ˆDataä¸€èµ·ä¼ å…¥ã€‚è¿™ä¸ª Insert_LinkListï¼ˆï¼‰å‡½æ•°å°†ä¸€ä¸ªå…ƒç´¢æ’äººåˆ°ç”± Posæ‰€æŒ‡ç¤ºçš„ä½ç½®ä¹‹åã€‚å®ƒæ„å‘³ç€æ’å…¥æ“ä½œå¦‚ä½•å®ç°å¹¶æ²¡æœ‰å®Œå…¨ç¡®å®šçš„è§„åˆ™ã€‚å¾ˆæœ‰å¯èƒ½å°†æ–°å…ƒç´ æ’äººåˆ°ä½ç½®Poså¤„(å³åœ¨ä½ç½®På¤„å½“æ—¶çš„å…ƒç´¢çš„å‰é¢),æ‰€ä»¥éœ€è¦çŸ¥é“ä½ç½®På‰é¢çš„å…ƒç´ ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/%E9%93%BE%E8%A1%A8%E6%8F%92%E5%85%A5.png"></p><pre class=" language-c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">Insert_LinkList</span><span class="token punctuation">(</span>LinKList <span class="token operator">*</span>List<span class="token punctuation">,</span> <span class="token keyword">int</span> Pos<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span>Data<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>list <span class="token operator">==</span> <span class="token constant">NULL</span> <span class="token operator">||</span> data <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>pos <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> pos <span class="token operator">></span> list<span class="token operator">-></span>size<span class="token punctuation">)</span>        pos <span class="token operator">=</span> list<span class="token operator">-></span>size<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//åˆ›å»ºæ–°èŠ‚ç‚¹</span>    LinkNode <span class="token operator">*</span>newNode <span class="token operator">=</span> <span class="token punctuation">(</span>LinkNode<span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>LinkNode<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    newNode<span class="token operator">-></span>data <span class="token operator">=</span> data<span class="token punctuation">;</span>    newNode<span class="token operator">-></span>next <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//æ‰¾èŠ‚ç‚¹ï¼ˆå³æ‰¾åˆ°Pos-1ä½ç½®ï¼‰</span>    LinkNode <span class="token operator">*</span>pCurrent <span class="token operator">=</span> list<span class="token operator">-></span>head<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//è¾…åŠ©æŒ‡é’ˆ</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> pos<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        pCurrent <span class="token operator">=</span> pCurrent<span class="token operator">-></span>next<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//æ–°èŠ‚ç‚¹å…¥é“¾è¡¨</span>    newNode<span class="token operator">-></span>next <span class="token operator">=</span> pCurrent<span class="token operator">-></span>next<span class="token punctuation">;</span>    pCurrent<span class="token operator">-></span>next <span class="token operator">=</span> newNode<span class="token punctuation">;</span>    list<span class="token operator">-></span>size<span class="token operator">++</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><code>åˆ é™¤å…ƒç´ </code>: é€šè¿‡ä½ç½®åˆ é™¤è¡¨Listä¸­çš„æŸä¸ªå…ƒç´ Xã€‚éœ€è¦è·å–å…ƒç´ Xçš„ä½ç½®ï¼Œä¸æ’å…¥æ“ä½œç›¸åŒï¼Œä¹Ÿè®¸å¯»æ‰¾å‡ºå‰ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶ä¸”ç¼“å­˜å‰ä¸€ä¸ªå…ƒç´ çš„æŒ‡é’ˆåŸŸä¿¡æ¯ï¼Œå°†æŒ‡é’ˆåŸŸä¿¡æ¯æŒ‡å‘Posçš„ä¸‹ä¸€ä¸ªä½ç½®ã€‚</p><pre class=" language-c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">RemoveByBos_linkList</span><span class="token punctuation">(</span>LinKList <span class="token operator">*</span>list<span class="token punctuation">,</span> <span class="token keyword">int</span> pos<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>list <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>pos <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> pos <span class="token operator">>=</span> list<span class="token operator">-></span>size<span class="token punctuation">)</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//æŸ¥æ‰¾åˆ é™¤çš„å‰ä¸€ä¸ªèŠ‚ç‚¹</span>    LinkNode <span class="token operator">*</span>pCurrent <span class="token operator">=</span> list<span class="token operator">-></span>head<span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> pos<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        pCurrent <span class="token operator">=</span> pCurrent<span class="token operator">-></span>next<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//ç¼“å­˜å¾…åˆ é™¤çš„èŠ‚ç‚¹</span>    LinkNode <span class="token operator">*</span>pDel <span class="token operator">=</span> pCurrent<span class="token operator">-></span>next<span class="token punctuation">;</span>    pCurrent<span class="token operator">-></span>next <span class="token operator">=</span> pDel<span class="token operator">-></span>next<span class="token operator">-></span>next<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//é‡Šæ”¾åˆ é™¤èŠ‚ç‚¹çš„å†…å­˜</span>    <span class="token function">free</span><span class="token punctuation">(</span>pDel<span class="token punctuation">)</span><span class="token punctuation">;</span>    list<span class="token operator">-></span>size<span class="token operator">--</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><code>æŸ¥æ‰¾å…ƒç´ </code>: åœ¨é“¾è¡¨ä¸­æŸ¥æ‰¾æŒ‡å®šæ•°æ®å…ƒç´ ï¼Œæœ€å¸¸ç”¨çš„æ–¹æ³•æ˜¯ï¼šä»è¡¨å¤´ä¾æ¬¡éå†è¡¨ä¸­èŠ‚ç‚¹ï¼Œç”¨è¢«æŸ¥æ‰¾å…ƒç´ ä¸å„èŠ‚ç‚¹æ•°æ®åŸŸä¸­å­˜å‚¨çš„æ•°æ®å…ƒç´ è¿›è¡Œæ¯”å¯¹ã€‚</p><pre class=" language-c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">Find_LinkList</span><span class="token punctuation">(</span>LinKList <span class="token operator">*</span>list<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span>data<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>list <span class="token operator">==</span> <span class="token constant">NULL</span> <span class="token operator">||</span> data <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> i<span class="token punctuation">;</span>    LinkNode <span class="token operator">*</span>pCurrent <span class="token operator">=</span> list<span class="token operator">-></span>head<span class="token operator">-></span>next<span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>pCurrent <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>pCurrent<span class="token operator">-></span>data <span class="token operator">==</span> data<span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">break</span><span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        i<span class="token operator">++</span><span class="token punctuation">;</span>        pCurrent <span class="token operator">=</span> pCurrent<span class="token operator">-></span>next<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> i<span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><code>æ‰“å°è¾“å‡º</code>ï¼šéå†é“¾è¡¨ä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œç›´åˆ°æœ€åä¸€ä¸ªå…ƒç´ ä¸º<code>NULL</code>,è¿™é‡Œä¸ºäº†æ‰“å°ä»»ä½•ç±»å‹çš„æ•°æ®ï¼Œä½¿ç”¨äº†å‡½æ•°æŒ‡é’ˆï¼Œé‡å®šä¹‰äº†Printå‡½æ•°ã€‚</p><pre class=" language-c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">MyPrint</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>data<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    PERSON <span class="token operator">*</span>p <span class="token operator">=</span> <span class="token punctuation">(</span>PERSON <span class="token operator">*</span><span class="token punctuation">)</span>data<span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Name:%s Age:%d Score:%d\n"</span><span class="token punctuation">,</span> p<span class="token operator">-></span>name<span class="token punctuation">,</span> p<span class="token operator">-></span>age<span class="token punctuation">,</span> p<span class="token operator">-></span>score<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">Printf_LinkList</span><span class="token punctuation">(</span>LinKList <span class="token operator">*</span>list<span class="token punctuation">,</span> PRINTFLINKNODE print<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>list <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    LinkNode <span class="token operator">*</span>pCurrent <span class="token operator">=</span> list<span class="token operator">-></span>head<span class="token operator">-></span>next<span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>pCurrent <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token function">print</span><span class="token punctuation">(</span>pCurrent<span class="token operator">-></span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>        pCurrent <span class="token operator">=</span> pCurrent<span class="token operator">-></span>next<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><code>é‡Šæ”¾é“¾è¡¨</code>:  æ¸…ç©ºæ‰€æœ‰å…ƒç´ çš„å†…å­˜ï¼ŒåŒ…æ‹¬é“¾è¡¨å’ŒèŠ‚ç‚¹ã€‚</p><pre class=" language-c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">FreeSpace_LinkList</span><span class="token punctuation">(</span>LinKList <span class="token operator">*</span>list<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>list <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    LinkNode <span class="token operator">*</span>pCurrent <span class="token operator">=</span> list<span class="token operator">-></span>head<span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>pCurrent <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//ç¼“å­˜ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span>        LinkNode <span class="token operator">*</span>pNext <span class="token operator">=</span> pCurrent<span class="token operator">-></span>next<span class="token punctuation">;</span>        <span class="token function">free</span><span class="token punctuation">(</span>pCurrent<span class="token punctuation">)</span><span class="token punctuation">;</span>        pCurrent <span class="token operator">=</span> pNext<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    list<span class="token operator">-></span>size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token function">free</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><h3 id="4-2-åŒå‘é“¾è¡¨"><a href="#4-2-åŒå‘é“¾è¡¨" class="headerlink" title="4.2 åŒå‘é“¾è¡¨"></a>4.2 åŒå‘é“¾è¡¨</h3><p>è™½ç„¶ä½¿ç”¨å•é“¾è¡¨èƒ½ 100% è§£å†³é€»è¾‘å…³ç³»ä¸º â€œä¸€å¯¹ä¸€â€ æ•°æ®çš„å­˜å‚¨é—®é¢˜ï¼Œä½†åœ¨è§£å†³æŸäº›ç‰¹æ®Šé—®é¢˜æ—¶ï¼Œå•é“¾è¡¨å¹¶ä¸æ˜¯æ•ˆç‡æœ€ä¼˜çš„å­˜å‚¨ç»“æ„ã€‚æ¯”å¦‚è¯´ï¼Œå¦‚æœç®—æ³•ä¸­éœ€è¦å¤§é‡åœ°æ‰¾æŸæŒ‡å®šç»“ç‚¹çš„å‰è¶‹ç»“ç‚¹ï¼Œä½¿ç”¨å•é“¾è¡¨æ— ç–‘æ˜¯ç¾éš¾æ€§çš„ï¼Œå› ä¸ºå•é“¾è¡¨æ›´é€‚åˆ â€œä»å‰å¾€åâ€ æ‰¾ï¼Œè€Œ â€œä»åå¾€å‰â€ æ‰¾å¹¶ä¸æ˜¯å®ƒçš„å¼ºé¡¹ã€‚æœ¬èŠ‚æ¥å­¦ä¹ åŒå‘é“¾è¡¨ï¼ˆç®€ç§°åŒé“¾è¡¨ï¼‰ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8.png"></p><blockquote><p>åŒå‘ï¼ŒæŒ‡çš„æ˜¯å„èŠ‚ç‚¹ä¹‹é—´çš„é€»è¾‘å…³ç³»æ˜¯åŒå‘çš„ï¼Œä½†é€šå¸¸å¤´æŒ‡é’ˆåªè®¾ç½®ä¸€ä¸ªï¼Œé™¤éå®é™…æƒ…å†µéœ€è¦ã€‚</p></blockquote><p>ä»ä¸Šå›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼ŒåŒå‘é“¾è¡¨ä¸­å„èŠ‚ç‚¹åŒ…å«ä»¥ä¸‹ 3 éƒ¨åˆ†ä¿¡æ¯ï¼š</p><ol><li>æŒ‡é’ˆåŸŸï¼šç”¨äºæŒ‡å‘å½“å‰èŠ‚ç‚¹çš„ç›´æ¥å‰é©±èŠ‚ç‚¹ï¼›</li><li>æ•°æ®åŸŸï¼šç”¨äºå­˜å‚¨æ•°æ®å…ƒç´ ã€‚</li><li>æŒ‡é’ˆåŸŸï¼šç”¨äºæŒ‡å‘å½“å‰èŠ‚ç‚¹çš„ç›´æ¥åç»§èŠ‚ç‚¹ï¼›</li></ol><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210415121701683.png"></p><p>æ•°æ®ç±»å‹ï¼š</p><pre class=" language-c"><code class="language-c"><span class="token keyword">typedef</span> <span class="token keyword">int</span> NodeDataType<span class="token punctuation">;</span><span class="token keyword">typedef</span> <span class="token keyword">struct</span> _DoublelinkedNode<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">struct</span> _DoublelinkedNOde <span class="token operator">*</span>prior<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//æŒ‡å‘ç›´æ¥å‰è¶‹</span>    NodeDataType data<span class="token punctuation">;</span>    <span class="token keyword">struct</span> _DoublelinkedNode <span class="token operator">*</span>next<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//æŒ‡å‘ç›´æ¥åç»§</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> DoubLinkNode<span class="token punctuation">;</span></code></pre><p>åˆå§‹åŒ–ä¸€ä¸ªåŒå‘é“¾è¡¨ï¼š</p><pre class=" language-c"><code class="language-c">DoubLinkNode <span class="token operator">*</span><span class="token function">DoubListInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    DoubLinkNode <span class="token operator">*</span>head <span class="token operator">=</span> <span class="token punctuation">(</span>DoubLinkNode <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>DoubLinkNode<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    head<span class="token operator">-></span>prior <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>    head<span class="token operator">-></span>next <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>    head<span class="token operator">-></span>data <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//å£°æ˜ä¸€ä¸ªæŒ‡å‘é¦–å…ƒèŠ‚ç‚¹çš„æŒ‡é’ˆï¼Œæ–¹ä¾¿åæœŸå‘é“¾è¡¨ä¸­æ·»åŠ æ–°åˆ›å»ºçš„èŠ‚ç‚¹</span>    DoubLinkNode <span class="token operator">*</span>list <span class="token operator">=</span> head<span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//åˆ›å»ºæ–°çš„èŠ‚ç‚¹å¹¶åˆå§‹åŒ–</span>        DoubLinkNode <span class="token operator">*</span>body <span class="token operator">=</span> <span class="token punctuation">(</span>DoubLinkNode <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>DoubLinkNode<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        body<span class="token operator">-></span>prior <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>        body<span class="token operator">-></span>next <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>        body<span class="token operator">-></span>data <span class="token operator">=</span> i<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//æ–°èŠ‚ç‚¹ä¸é“¾è¡¨æœ€åä¸€ä¸ªèŠ‚ç‚¹å»ºç«‹å…³ç³»</span>        list<span class="token operator">-></span>next <span class="token operator">=</span> body<span class="token punctuation">;</span>        body<span class="token operator">-></span>prior <span class="token operator">=</span> list<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//listæ°¸è¿œæŒ‡å‘é“¾è¡¨ä¸­æœ€åä¸€ä¸ªèŠ‚ç‚¹</span>        list <span class="token operator">=</span> list<span class="token operator">-></span>next<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> head<span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><strong><code>åŒå‘é“¾è¡¨æ·»åŠ èŠ‚ç‚¹</code></strong>:æœ‰ä¸‰ç§æƒ…å†µï¼Œåˆ†åˆ«æ˜¯å¤´éƒ¨æ’å…¥ã€ä¸­é—´æ’å…¥å’Œå°¾éƒ¨æ’å…¥ã€‚</p><p>1ã€<code>å¤´éƒ¨æ’å…¥</code>ï¼šå°†æ–°æ•°æ®å…ƒç´ æ·»åŠ åˆ°è¡¨å¤´ï¼Œåªéœ€è¦å°†è¯¥å…ƒç´ ä¸è¡¨å¤´å…ƒç´ å»ºç«‹åŒå±‚é€»è¾‘å…³ç³»å³å¯ã€‚</p><p>æ¢å¥è¯è¯´ï¼Œå‡è®¾æ–°å…ƒç´ èŠ‚ç‚¹ä¸º tempï¼Œè¡¨å¤´èŠ‚ç‚¹ä¸º headï¼Œåˆ™éœ€è¦åšä»¥ä¸‹ 2 æ­¥æ“ä½œå³å¯ï¼š</p><ol><li>temp-&gt;next=head; head-&gt;prior=temp;</li><li>å°† head ç§»è‡³ tempï¼Œé‡æ–°æŒ‡å‘æ–°çš„è¡¨å¤´ï¼›</li></ol><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8%E5%A4%B4%E6%8F%92%E5%85%A5.png" alt="åŒå‘é“¾è¡¨å¤´æ’å…¥"></p><p>2ã€<code>ä¸­é—´ä½ç½®æ’å…¥</code>ï¼šåŒ<a href="http://c.biancheng.net/view/3336.html">å•é“¾è¡¨</a>æ·»åŠ æ•°æ®ç±»ä¼¼ï¼ŒåŒå‘é“¾è¡¨ä¸­é—´ä½ç½®æ·»åŠ æ•°æ®éœ€è¦ç»è¿‡ä»¥ä¸‹ 2 ä¸ªæ­¥éª¤ï¼Œ</p><ol><li>æ–°èŠ‚ç‚¹å…ˆä¸å…¶ç›´æ¥åç»§èŠ‚ç‚¹å»ºç«‹åŒå±‚é€»è¾‘å…³ç³»ï¼›</li><li>æ–°èŠ‚ç‚¹çš„ç›´æ¥å‰é©±èŠ‚ç‚¹ä¸ä¹‹å»ºç«‹åŒå±‚é€»è¾‘å…³ç³»ï¼›</li></ol><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8%E4%B8%AD%E6%8F%92%E5%85%A5.png"></p><p>3ã€<code>å°¾éƒ¨æ’å…¥</code>ï¼šä¸æ·»åŠ åˆ°è¡¨å¤´æ˜¯ä¸€ä¸ªé“ç†ï¼Œå®ç°è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ol><li><p>æ‰¾åˆ°åŒé“¾è¡¨ä¸­æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼›</p></li><li><p>è®©æ–°èŠ‚ç‚¹ä¸æœ€åä¸€ä¸ªèŠ‚ç‚¹è¿›è¡ŒåŒå±‚é€»è¾‘å…³ç³»ï¼›</p><p><img src="D:\å°å‘¨çš„éƒ¨è½é˜\DataStructAndAlgorithms\åŒå‘é“¾è¡¨å°¾æ’.png"></p></li></ol><pre class=" language-c"><code class="language-c">DoubLinkNode <span class="token operator">*</span><span class="token function">InsertList</span><span class="token punctuation">(</span>DoubLinkNode <span class="token operator">*</span>list<span class="token punctuation">,</span> NodeDataType data<span class="token punctuation">,</span> <span class="token keyword">int</span> pos<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    DoubLinkNode <span class="token operator">*</span>NewNode <span class="token operator">=</span> <span class="token punctuation">(</span>DoubLinkNode <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>DoubLinkNode<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    NewNode<span class="token operator">-></span>data <span class="token operator">=</span> data<span class="token punctuation">;</span>    NewNode<span class="token operator">-></span>next <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>    NewNode<span class="token operator">-></span>prior <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//æ’å…¥åˆ°é“¾è¡¨å¤´ï¼Œè¦ç‰¹æ®Šè€ƒè™‘</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>pos <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        NewNode<span class="token operator">-></span>next <span class="token operator">=</span> list<span class="token punctuation">;</span>        list<span class="token operator">-></span>prior <span class="token operator">=</span> NewNode<span class="token punctuation">;</span>        list <span class="token operator">=</span> NewNode<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//æ’å…¥é“¾è¡¨ä¸­</span>    <span class="token keyword">else</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        DoubLinkNode <span class="token operator">*</span>pCurrent <span class="token operator">=</span> list<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//è¾…åŠ©æŒ‡é’ˆï¼Œæ‰¾åˆ°æ’å…¥ä½ç½®çš„å‰ä¸€ä¸ªèŠ‚ç‚¹</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> pos <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            pCurrent <span class="token operator">=</span> pCurrent<span class="token operator">-></span>next<span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>pCurrent<span class="token operator">-></span>next <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//è¯´æ˜æ’å…¥ç‚¹æ˜¯å°¾éƒ¨</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            pCurrent<span class="token operator">-></span>next <span class="token operator">=</span> NewNode<span class="token punctuation">;</span>            NewNode<span class="token operator">-></span>prior <span class="token operator">=</span> pCurrent<span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token keyword">else</span> <span class="token comment" spellcheck="true">//è¯´æ˜æ’å…¥ç‚¹æ˜¯ä¸­é—´</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            pCurrent<span class="token operator">-></span>next<span class="token operator">-></span>prior <span class="token operator">=</span> NewNode<span class="token punctuation">;</span>            NewNode<span class="token operator">-></span>next <span class="token operator">=</span> pCurrent<span class="token operator">-></span>next<span class="token punctuation">;</span>            pCurrent<span class="token operator">-></span>next <span class="token operator">=</span> NewNode<span class="token punctuation">;</span>            NewNode<span class="token operator">-></span>prior <span class="token operator">=</span> pCurrent<span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> list<span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><strong><code>åŒå‘é“¾è¡¨åˆ é™¤èŠ‚ç‚¹</code></strong>:åŒé“¾è¡¨åˆ é™¤ç»“ç‚¹æ—¶ï¼Œåªéœ€éå†é“¾è¡¨æ‰¾åˆ°è¦åˆ é™¤çš„ç»“ç‚¹ï¼Œç„¶åå°†è¯¥èŠ‚ç‚¹ä»è¡¨ä¸­æ‘˜é™¤å³å¯ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8%E5%88%A0%E9%99%A4.png"></p><pre class=" language-c"><code class="language-c">DoubLinkNode <span class="token operator">*</span><span class="token function">DeleteNodeByData</span><span class="token punctuation">(</span>DoubLinkNode <span class="token operator">*</span>list<span class="token punctuation">,</span> <span class="token keyword">int</span> data<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>list <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    DoubLinkNode <span class="token operator">*</span>pCurrent <span class="token operator">=</span> list<span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>pCurrent<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>pCurrent<span class="token operator">-></span>data <span class="token operator">==</span> data<span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            pCurrent<span class="token operator">-></span>next<span class="token operator">-></span>prior <span class="token operator">=</span> pCurrent<span class="token operator">-></span>prior<span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//pCurrent->prior->next = pCurrent->next;</span>            <span class="token function">free</span><span class="token punctuation">(</span>pCurrent<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> list<span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        pCurrent <span class="token operator">=</span> pCurrent<span class="token operator">-></span>next<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"tThis list doesn't have this element\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> list<span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><strong><code>åŒå‘é“¾è¡¨æŸ¥æ‰¾èŠ‚ç‚¹</code></strong>:é€šå¸¸ï¼ŒåŒå‘é“¾è¡¨åŒå•é“¾è¡¨ä¸€æ ·ï¼Œéƒ½ä»…æœ‰ä¸€ä¸ªå¤´æŒ‡é’ˆã€‚å› æ­¤ï¼ŒåŒé“¾è¡¨æŸ¥æ‰¾æŒ‡å®šå…ƒç´ çš„å®ç°åŒå•é“¾è¡¨ç±»ä¼¼ï¼Œéƒ½æ˜¯ä»è¡¨å¤´ä¾æ¬¡éå†è¡¨ä¸­å…ƒç´ ã€‚</p><pre class=" language-c"><code class="language-c">NodeDataType <span class="token function">selectElem</span><span class="token punctuation">(</span>DoubLinkNode <span class="token operator">*</span>list<span class="token punctuation">,</span> NodeDataType elem<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//æ–°å»ºä¸€ä¸ªæŒ‡é’ˆtï¼Œåˆå§‹åŒ–ä¸ºå¤´æŒ‡é’ˆ head</span>    DoubLinkNode <span class="token operator">*</span>t <span class="token operator">=</span> list<span class="token punctuation">;</span>    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>t<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>t<span class="token operator">-></span>data <span class="token operator">==</span> elem<span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> i<span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        i<span class="token operator">++</span><span class="token punctuation">;</span>        t <span class="token operator">=</span> t<span class="token operator">-></span>next<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//ç¨‹åºæ‰§è¡Œè‡³æ­¤å¤„ï¼Œè¡¨ç¤ºæŸ¥æ‰¾å¤±è´¥</span>    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><strong><code>åŒå‘é“¾è¡¨æ›´æ”¹èŠ‚ç‚¹</code></strong>:æ›´æ”¹åŒé“¾è¡¨ä¸­æŒ‡å®šç»“ç‚¹æ•°æ®åŸŸçš„æ“ä½œæ˜¯åœ¨æŸ¥æ‰¾çš„åŸºç¡€ä¸Šå®Œæˆçš„ã€‚å®ç°è¿‡ç¨‹æ˜¯ï¼šé€šè¿‡éå†æ‰¾åˆ°å­˜å‚¨æœ‰è¯¥æ•°æ®å…ƒç´ çš„ç»“ç‚¹ï¼Œç›´æ¥æ›´æ”¹å…¶æ•°æ®åŸŸå³å¯ã€‚</p><pre class=" language-c"><code class="language-c"><span class="token comment" spellcheck="true">//æ›´æ–°å‡½æ•°ï¼Œå…¶ä¸­ï¼Œadd è¡¨ç¤ºæ›´æ”¹ç»“ç‚¹åœ¨åŒé“¾è¡¨ä¸­çš„ä½ç½®ï¼ŒnewElem ä¸ºæ–°æ•°æ®çš„å€¼</span>DoubLinkNode <span class="token operator">*</span><span class="token function">amendElem</span><span class="token punctuation">(</span>DoubLinkNode <span class="token operator">*</span>list<span class="token punctuation">,</span> <span class="token keyword">int</span> pos<span class="token punctuation">,</span> <span class="token keyword">int</span> newElem<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    DoubLinkNode <span class="token operator">*</span>temp <span class="token operator">=</span> list<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//éå†åˆ°è¢«åˆ é™¤ç»“ç‚¹</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> pos<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        temp <span class="token operator">=</span> temp<span class="token operator">-></span>next<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    temp<span class="token operator">-></span>data <span class="token operator">=</span> newElem<span class="token punctuation">;</span>    <span class="token keyword">return</span> list<span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><h3 id="4-3-ç»å…¸ç®—æ³•é¢˜â€”â€”çº¦ç‘Ÿå¤«ç¯"><a href="#4-3-ç»å…¸ç®—æ³•é¢˜â€”â€”çº¦ç‘Ÿå¤«ç¯" class="headerlink" title="4.3 ç»å…¸ç®—æ³•é¢˜â€”â€”çº¦ç‘Ÿå¤«ç¯"></a>4.3 ç»å…¸ç®—æ³•é¢˜â€”â€”çº¦ç‘Ÿå¤«ç¯</h3><p>çº¦ç‘Ÿå¤«ç¯é—®é¢˜ï¼Œæ˜¯ä¸€ä¸ªç»å…¸çš„å¾ªç¯é“¾è¡¨é—®é¢˜ï¼Œé¢˜æ„æ˜¯ï¼šå·²çŸ¥ n ä¸ªäººï¼ˆåˆ†åˆ«ç”¨ç¼–å· 1ï¼Œ2ï¼Œ3ï¼Œâ€¦ï¼Œn è¡¨ç¤ºï¼‰å›´ååœ¨ä¸€å¼ åœ†æ¡Œå‘¨å›´ï¼Œä»ç¼–å·ä¸º k çš„äººå¼€å§‹é¡ºæ—¶é’ˆæŠ¥æ•°ï¼Œæ•°åˆ° m çš„é‚£ä¸ªäººå‡ºåˆ—ï¼›ä»–çš„ä¸‹ä¸€ä¸ªäººåˆä» 1 å¼€å§‹ï¼Œè¿˜æ˜¯é¡ºæ—¶é’ˆå¼€å§‹æŠ¥æ•°ï¼Œæ•°åˆ° m çš„é‚£ä¸ªäººåˆå‡ºåˆ—ï¼›ä¾æ¬¡é‡å¤ä¸‹å»ï¼Œç›´åˆ°åœ†æ¡Œä¸Šå‰©ä½™ä¸€ä¸ªäººã€‚</p><p>å¦‚å›¾ æ‰€ç¤ºï¼Œå‡è®¾æ­¤æ—¶åœ†å‘¨å‘¨å›´æœ‰ 5 ä¸ªäººï¼Œè¦æ±‚ä»ç¼–å·ä¸º 3 çš„äººå¼€å§‹é¡ºæ—¶é’ˆæ•°æ•°ï¼Œæ•°åˆ° 2 çš„é‚£ä¸ªäººå‡ºåˆ—ï¼š</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/%E7%BA%A6%E7%91%9F%E5%A4%AB%E7%8E%AF.png"></p><p>å‡ºåˆ—é¡ºåºä¾æ¬¡ä¸ºï¼š</p><ul><li>ç¼–å·ä¸º 3 çš„äººå¼€å§‹æ•° 1ï¼Œç„¶å 4 æ•° 2ï¼Œæ‰€ä»¥ 4 å…ˆå‡ºåˆ—ï¼›</li><li>4 å‡ºåˆ—åï¼Œä» 5 å¼€å§‹æ•° 1ï¼Œ1 æ•° 2ï¼Œæ‰€ä»¥ 1 å‡ºåˆ—ï¼›</li><li>1 å‡ºåˆ—åï¼Œä» 2 å¼€å§‹æ•° 1ï¼Œ3 æ•° 2ï¼Œæ‰€ä»¥ 3 å‡ºåˆ—ï¼›</li><li>3 å‡ºåˆ—åï¼Œä» 5 å¼€å§‹æ•° 1ï¼Œ2 æ•° 2ï¼Œæ‰€ä»¥ 2 å‡ºåˆ—ï¼›</li><li>æœ€ååªå‰©ä¸‹ 5 è‡ªå·±ï¼Œæ‰€ä»¥ 5 èƒœå‡ºã€‚</li></ul><blockquote><p>å¯èƒ½ç”¨é“¾è¡¨çš„æ–¹æ³•å»æ¨¡æ‹Ÿè¿™ä¸ªè¿‡ç¨‹ï¼ŒNä¸ªäººçœ‹ä½œæ˜¯Nä¸ªé“¾è¡¨èŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹1æŒ‡å‘èŠ‚ç‚¹2ï¼ŒèŠ‚ç‚¹2æŒ‡å‘èŠ‚ç‚¹3ï¼Œâ€¦â€¦ï¼ŒèŠ‚ç‚¹N-1æŒ‡å‘èŠ‚ç‚¹Nï¼ŒèŠ‚ç‚¹NæŒ‡å‘èŠ‚ç‚¹1ï¼Œè¿™æ ·å°±å½¢æˆäº†ä¸€ä¸ªç¯ã€‚ç„¶åä»èŠ‚ç‚¹1å¼€å§‹1ã€2ã€3â€¦â€¦å¾€ä¸‹æŠ¥æ•°ï¼Œæ¯æŠ¥åˆ°Mï¼Œå°±æŠŠé‚£ä¸ªèŠ‚ç‚¹ä»ç¯ä¸Šåˆ é™¤ã€‚ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ¥ç€ä»1å¼€å§‹æŠ¥æ•°ã€‚æœ€ç»ˆé“¾è¡¨ä»…å‰©ä¸€ä¸ªèŠ‚ç‚¹ã€‚å®ƒå°±æ˜¯æœ€ç»ˆçš„èƒœåˆ©è€…ã€‚</p><p>ç¼ºç‚¹ï¼šè¦æ¨¡æ‹Ÿæ•´ä¸ªæ¸¸æˆè¿‡ç¨‹ï¼Œæ—¶é—´å¤æ‚åº¦é«˜è¾¾O(nm)ï¼Œå½“nï¼Œméå¸¸å¤§(ä¾‹å¦‚ä¸Šç™¾ä¸‡ï¼Œä¸Šåƒä¸‡)çš„æ—¶å€™ï¼Œå‡ ä¹æ˜¯æ²¡æœ‰åŠæ³•åœ¨çŸ­æ—¶é—´å†…å‡ºç»“æœçš„ã€‚</p></blockquote><pre class=" language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h></span></span><span class="token keyword">typedef</span> <span class="token keyword">struct</span> node<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> number<span class="token punctuation">;</span>    <span class="token keyword">struct</span> node <span class="token operator">*</span> next<span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>person<span class="token punctuation">;</span>person <span class="token operator">*</span> <span class="token function">initLink</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    person <span class="token operator">*</span> head<span class="token operator">=</span><span class="token punctuation">(</span>person<span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    head<span class="token operator">-></span>number<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>    head<span class="token operator">-></span>next<span class="token operator">=</span><span class="token constant">NULL</span><span class="token punctuation">;</span>    person <span class="token operator">*</span> cyclic<span class="token operator">=</span>head<span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        person <span class="token operator">*</span> body<span class="token operator">=</span><span class="token punctuation">(</span>person<span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        body<span class="token operator">-></span>number<span class="token operator">=</span>i<span class="token punctuation">;</span>        body<span class="token operator">-></span>next<span class="token operator">=</span><span class="token constant">NULL</span><span class="token punctuation">;</span>         cyclic<span class="token operator">-></span>next<span class="token operator">=</span>body<span class="token punctuation">;</span>        cyclic<span class="token operator">=</span>cyclic<span class="token operator">-></span>next<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    cyclic<span class="token operator">-></span>next<span class="token operator">=</span>head<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//é¦–å°¾ç›¸è¿</span>    <span class="token keyword">return</span> head<span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">findAndKillK</span><span class="token punctuation">(</span>person <span class="token operator">*</span> head<span class="token punctuation">,</span><span class="token keyword">int</span> k<span class="token punctuation">,</span><span class="token keyword">int</span> m<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>     person <span class="token operator">*</span> tail<span class="token operator">=</span>head<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//æ‰¾åˆ°é“¾è¡¨ç¬¬ä¸€ä¸ªç»“ç‚¹çš„ä¸Šä¸€ä¸ªç»“ç‚¹ï¼Œä¸ºåˆ é™¤æ“ä½œåšå‡†å¤‡</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>tail<span class="token operator">-></span>next<span class="token operator">!=</span>head<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        tail<span class="token operator">=</span>tail<span class="token operator">-></span>next<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    person <span class="token operator">*</span> p<span class="token operator">=</span>head<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//æ‰¾åˆ°ç¼–å·ä¸ºkçš„äºº</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>p<span class="token operator">-></span>number<span class="token operator">!=</span>k<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        tail<span class="token operator">=</span>p<span class="token punctuation">;</span>        p<span class="token operator">=</span>p<span class="token operator">-></span>next<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//ä»ç¼–å·ä¸ºkçš„äººå¼€å§‹ï¼Œåªæœ‰ç¬¦åˆp->next==pæ—¶ï¼Œè¯´æ˜é“¾è¡¨ä¸­é™¤äº†pç»“ç‚¹ï¼Œæ‰€æœ‰ç¼–å·éƒ½å‡ºåˆ—äº†ï¼Œ</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>p<span class="token operator">-></span>next<span class="token operator">!=</span>p<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//æ‰¾åˆ°ä»pæŠ¥æ•°1å¼€å§‹ï¼ŒæŠ¥mçš„äººï¼Œå¹¶ä¸”è¿˜è¦çŸ¥é“æ•°m-1deäººçš„ä½ç½®tailï¼Œæ–¹ä¾¿åšåˆ é™¤æ“ä½œã€‚</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            tail<span class="token operator">=</span>p<span class="token punctuation">;</span>            p<span class="token operator">=</span>p<span class="token operator">-></span>next<span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        tail<span class="token operator">-></span>next<span class="token operator">=</span>p<span class="token operator">-></span>next<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//ä»é“¾è¡¨ä¸Šå°†pç»“ç‚¹æ‘˜ä¸‹æ¥</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"å‡ºåˆ—äººçš„ç¼–å·ä¸º:%d\n"</span><span class="token punctuation">,</span>p<span class="token operator">-></span>number<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">free</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>        p<span class="token operator">=</span>tail<span class="token operator">-></span>next<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//ç»§ç»­ä½¿ç”¨pæŒ‡é’ˆæŒ‡å‘å‡ºåˆ—ç¼–å·çš„ä¸‹ä¸€ä¸ªç¼–å·ï¼Œæ¸¸æˆç»§ç»­</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"å‡ºåˆ—äººçš„ç¼–å·ä¸º:%d\n"</span><span class="token punctuation">,</span>p<span class="token operator">-></span>number<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">free</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"è¾“å…¥åœ†æ¡Œä¸Šçš„äººæ•°n:"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> n<span class="token punctuation">;</span>    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>    person <span class="token operator">*</span> head<span class="token operator">=</span><span class="token function">initLink</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"ä»ç¬¬käººå¼€å§‹æŠ¥æ•°(k>1ä¸”k&lt;%d)ï¼š"</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> k<span class="token punctuation">;</span>    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"æ•°åˆ°mçš„äººå‡ºåˆ—ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> m<span class="token punctuation">;</span>    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">findAndKillK</span><span class="token punctuation">(</span>head<span class="token punctuation">,</span> k<span class="token punctuation">,</span> m<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><h2 id="ç¬¬äº”ç« -æ ˆå’Œé˜Ÿåˆ—"><a href="#ç¬¬äº”ç« -æ ˆå’Œé˜Ÿåˆ—" class="headerlink" title="ç¬¬äº”ç«  æ ˆå’Œé˜Ÿåˆ—"></a>ç¬¬äº”ç«  æ ˆå’Œé˜Ÿåˆ—</h2><h3 id="4-1-æ ˆ"><a href="#4-1-æ ˆ" class="headerlink" title="4.1 æ ˆ"></a>4.1 æ ˆ</h3><p>åŒé¡ºåºè¡¨å’Œé“¾è¡¨ä¸€æ ·ï¼Œæ ˆä¹Ÿæ˜¯ç”¨æ¥å­˜å‚¨é€»è¾‘å…³ç³»ä¸º â€œä¸€å¯¹ä¸€â€ æ•°æ®çš„çº¿æ€§å­˜å‚¨ç»“æ„ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚</p><p><img src="D:\å°å‘¨çš„éƒ¨è½é˜\DataStructAndAlgorithms\æ ˆpng.png"><br>ä»å›¾çœ‹åˆ°ï¼Œæ ˆå­˜å‚¨ç»“æ„ä¸ä¹‹å‰æ‰€å­¦çš„çº¿æ€§å­˜å‚¨ç»“æ„æœ‰æ‰€å·®å¼‚ï¼Œè¿™ç¼˜äºæ ˆå¯¹æ•°æ® â€œå­˜â€ å’Œ â€œå–â€ çš„è¿‡ç¨‹æœ‰ç‰¹æ®Šçš„è¦æ±‚ï¼š</p><ol><li><strong>æ ˆåªèƒ½ä»è¡¨çš„ä¸€ç«¯å­˜å–æ•°æ®ï¼Œå¦ä¸€ç«¯æ˜¯å°é—­çš„ï¼›</strong></li><li><strong>åœ¨æ ˆä¸­ï¼Œæ— è®ºæ˜¯å­˜æ•°æ®è¿˜æ˜¯å–æ•°æ®ï¼Œéƒ½å¿…é¡»éµå¾ªâ€å…ˆè¿›åå‡ºâ€çš„åŸåˆ™ï¼Œå³æœ€å…ˆè¿›æ ˆçš„å…ƒç´ æœ€åå‡ºæ ˆã€‚ä»å›¾ä¸­æ•°æ®çš„å­˜å‚¨çŠ¶æ€å¯åˆ¤æ–­å‡ºï¼Œå…ƒç´  1 æ˜¯æœ€å…ˆè¿›çš„æ ˆã€‚å› æ­¤ï¼Œå½“éœ€è¦ä»æ ˆä¸­å–å‡ºå…ƒç´  1 æ—¶ï¼Œæ ¹æ®â€å…ˆè¿›åå‡ºâ€çš„åŸåˆ™ï¼Œéœ€æå‰å°†å…ƒç´  3 å’Œå…ƒç´  2 ä»æ ˆä¸­å–å‡ºï¼Œç„¶åæ‰èƒ½æˆåŠŸå–å‡ºå…ƒç´  1ã€‚</strong></li></ol><p>å› æ­¤ï¼Œå³æ ˆæ˜¯ä¸€ç§åªèƒ½ä»è¡¨çš„ä¸€ç«¯å­˜å–æ•°æ®ä¸”éµå¾ª <strong>â€œå…ˆè¿›åå‡ºâ€</strong> åŸåˆ™çš„çº¿æ€§å­˜å‚¨ç»“æ„ã€‚</p><p>æ ˆçš„å¼€å£ç«¯è¢«ç§°ä¸ºæ ˆé¡¶ï¼›ç›¸åº”åœ°ï¼Œå°å£ç«¯è¢«ç§°ä¸ºæ ˆåº•ã€‚å› æ­¤ï¼Œæ ˆé¡¶å…ƒç´ æŒ‡çš„å°±æ˜¯è·ç¦»æ ˆé¡¶æœ€è¿‘çš„å…ƒç´ ï¼Œæ‹¿å›¾ 2 æ¥è¯´ï¼Œæ ˆé¡¶å…ƒç´ ä¸ºå…ƒç´  4ï¼›åŒç†ï¼Œæ ˆåº•å…ƒç´ æŒ‡çš„æ˜¯ä½äºæ ˆæœ€åº•éƒ¨çš„å…ƒç´ ï¼Œå›¾ä¸­çš„æ ˆåº•å…ƒç´ ä¸ºå…ƒç´  1ã€‚<br><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/%E6%A0%881.gif"></p><h3 id="4-2-è¿›æ ˆå’Œå‡ºæ ˆ"><a href="#4-2-è¿›æ ˆå’Œå‡ºæ ˆ" class="headerlink" title="4.2 è¿›æ ˆå’Œå‡ºæ ˆ"></a>4.2 è¿›æ ˆå’Œå‡ºæ ˆ</h3><p>åŸºäºæ ˆç»“æ„çš„ç‰¹ç‚¹ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œé€šå¸¸åªä¼šå¯¹æ ˆæ‰§è¡Œä»¥ä¸‹ä¸¤ç§æ“ä½œï¼š</p><ul><li>å‘æ ˆä¸­æ·»åŠ å…ƒç´ ï¼Œæ­¤è¿‡ç¨‹è¢«ç§°ä¸ºâ€è¿›æ ˆâ€ï¼ˆå…¥æ ˆæˆ–å‹æ ˆï¼‰ï¼›</li><li>ä»æ ˆä¸­æå–å‡ºæŒ‡å®šå…ƒç´ ï¼Œæ­¤è¿‡ç¨‹è¢«ç§°ä¸ºâ€å‡ºæ ˆâ€ï¼ˆæˆ–å¼¹æ ˆï¼‰ï¼›</li></ul><p>æ ˆæ˜¯ä¸€ç§ â€œç‰¹æ®Šâ€ çš„çº¿æ€§å­˜å‚¨ç»“æ„ï¼Œå› æ­¤æ ˆçš„å…·ä½“å®ç°æœ‰ä»¥ä¸‹ä¸¤ç§æ–¹å¼ï¼š</p><p>é¡ºåºæ ˆï¼šé‡‡ç”¨é¡ºåºå­˜å‚¨ç»“æ„å¯ä»¥æ¨¡æ‹Ÿæ ˆå­˜å‚¨æ•°æ®çš„ç‰¹ç‚¹ï¼Œä»è€Œå®ç°æ ˆå­˜å‚¨ç»“æ„ï¼›</p><pre class=" language-c"><code class="language-c"><span class="token comment" spellcheck="true">//æ ˆçš„æ•°æ®ç»“æ„</span><span class="token keyword">typedef</span> <span class="token keyword">int</span> dataType<span class="token punctuation">;</span><span class="token keyword">typedef</span> <span class="token keyword">struct</span> _LinearStack<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    dataType arr<span class="token punctuation">[</span>MAX_SIZE<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> size<span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> LinearStack<span class="token punctuation">;</span></code></pre><pre class=" language-c"><code class="language-c"><span class="token comment" spellcheck="true">//åˆå§‹åŒ–ä¸€ä¸ªæ ˆï¼š</span>LinearStack <span class="token operator">*</span><span class="token function">StackInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    LinearStack <span class="token operator">*</span>stack <span class="token operator">=</span> <span class="token punctuation">(</span>LinearStack <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>LinearStack<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> MAX_SIZE<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        stack<span class="token operator">-></span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    stack<span class="token operator">-></span>size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> stack<span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><pre class=" language-c"><code class="language-c"><span class="token comment" spellcheck="true">//å…¥æ ˆ</span>LinearStack <span class="token operator">*</span><span class="token function">PushStack</span><span class="token punctuation">(</span>LinearStack <span class="token operator">*</span>stack<span class="token punctuation">,</span> dataType data<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    stack<span class="token operator">-></span>arr<span class="token punctuation">[</span>stack<span class="token operator">-></span>size<span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"æ•°æ®:%då‹å…¥æ ˆï¼Œä½ç½®ä¸º:%d \n"</span><span class="token punctuation">,</span> stack<span class="token operator">-></span>arr<span class="token punctuation">[</span>stack<span class="token operator">-></span>size<span class="token punctuation">]</span><span class="token punctuation">,</span> stack<span class="token operator">-></span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>    stack<span class="token operator">-></span>size<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> stack<span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å‡ºæ ˆ</span>LinearStack <span class="token operator">*</span><span class="token function">PopStack</span><span class="token punctuation">(</span>LinearStack <span class="token operator">*</span>stack<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"æ•°æ®:%då‡ºæ ˆ"</span><span class="token punctuation">,</span> stack<span class="token operator">-></span>arr<span class="token punctuation">[</span>stack<span class="token operator">-></span>size<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    stack<span class="token operator">-></span>arr<span class="token punctuation">[</span>stack<span class="token operator">-></span>size<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    stack<span class="token operator">-></span>size<span class="token operator">--</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"å‰©ä½™æ ˆé•¿ä¸ºï¼š%d \n"</span><span class="token punctuation">,</span> stack<span class="token operator">-></span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> stack<span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><h3 id="4-3-é˜Ÿåˆ—"><a href="#4-3-é˜Ÿåˆ—" class="headerlink" title="4.3 é˜Ÿåˆ—"></a>4.3 é˜Ÿåˆ—</h3><p>ä¸æ ˆç»“æ„ä¸åŒçš„æ˜¯ï¼Œé˜Ÿåˆ—çš„ä¸¤ç«¯éƒ½â€å¼€å£â€ï¼Œè¦æ±‚æ•°æ®åªèƒ½ä»ä¸€ç«¯è¿›ï¼Œä»å¦ä¸€ç«¯å‡ºï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/%E9%98%9F%E5%88%97.gif"></p><blockquote><p>é€šå¸¸ï¼Œç§°è¿›æ•°æ®çš„ä¸€ç«¯ä¸º â€œé˜Ÿå°¾â€ï¼Œå‡ºæ•°æ®çš„ä¸€ç«¯ä¸º â€œé˜Ÿå¤´â€ï¼Œæ•°æ®å…ƒç´ è¿›é˜Ÿåˆ—çš„è¿‡ç¨‹ç§°ä¸º â€œå…¥é˜Ÿâ€ï¼Œå‡ºé˜Ÿåˆ—çš„è¿‡ç¨‹ç§°ä¸º â€œå‡ºé˜Ÿâ€ã€‚</p><p>æ ˆå’Œé˜Ÿåˆ—ä¸è¦æ··æ·†ï¼Œæ ˆç»“æ„æ˜¯ä¸€ç«¯å°å£ï¼Œç‰¹ç‚¹æ˜¯â€å…ˆè¿›åå‡ºâ€ï¼›è€Œé˜Ÿåˆ—çš„ä¸¤ç«¯å…¨æ˜¯å¼€å£ï¼Œç‰¹ç‚¹æ˜¯â€å…ˆè¿›å…ˆå‡ºâ€ã€‚</p></blockquote><h3 id="4-4-å…¥é˜Ÿå’Œå‡ºé˜Ÿ"><a href="#4-4-å…¥é˜Ÿå’Œå‡ºé˜Ÿ" class="headerlink" title="4.4 å…¥é˜Ÿå’Œå‡ºé˜Ÿ"></a>4.4 å…¥é˜Ÿå’Œå‡ºé˜Ÿ</h3><p>ç”±äºé¡ºåºé˜Ÿåˆ—çš„åº•å±‚ä½¿ç”¨çš„æ˜¯æ•°ç»„ï¼Œå› æ­¤éœ€é¢„å…ˆç”³è¯·ä¸€å—è¶³å¤Ÿå¤§çš„å†…å­˜ç©ºé—´åˆå§‹åŒ–é¡ºåºé˜Ÿåˆ—ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä¸ºäº†æ»¡è¶³é¡ºåºé˜Ÿåˆ—ä¸­æ•°æ®ä»é˜Ÿå°¾è¿›ï¼Œé˜Ÿå¤´å‡ºä¸”å…ˆè¿›å…ˆå‡ºçš„è¦æ±‚ã€‚</p><pre class=" language-c"><code class="language-c"><span class="token keyword">typedef</span> <span class="token keyword">int</span> datatype<span class="token punctuation">;</span><span class="token keyword">typedef</span> <span class="token keyword">struct</span> _Queue<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    datatype arr<span class="token punctuation">[</span>MAX<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> size<span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> Queue<span class="token punctuation">;</span>Queue <span class="token operator">*</span><span class="token function">QueueInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    Queue <span class="token operator">*</span>queue <span class="token operator">=</span> <span class="token punctuation">(</span>Queue <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>queue<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> MAX<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        queue<span class="token operator">-></span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    queue<span class="token operator">-></span>size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">PushQueue</span><span class="token punctuation">(</span>Queue <span class="token operator">*</span>queue<span class="token punctuation">,</span> datatype data<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>queue <span class="token operator">==</span> <span class="token constant">NULL</span> <span class="token operator">||</span> queue<span class="token operator">-></span>size <span class="token operator">==</span> MAX<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    queue<span class="token operator">-></span>arr<span class="token punctuation">[</span>queue<span class="token operator">-></span>size<span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">;</span>    queue<span class="token operator">-></span>size<span class="token operator">++</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">PopQueue</span><span class="token punctuation">(</span>Queue <span class="token operator">*</span>queue<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>queue <span class="token operator">==</span> <span class="token constant">NULL</span> <span class="token operator">||</span> queue<span class="token operator">-></span>size <span class="token operator">==</span> MAX<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> queue<span class="token operator">-></span>size <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        queue<span class="token operator">-></span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> queue<span class="token operator">-></span>arr<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    queue<span class="token operator">-></span>size<span class="token operator">--</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>datatype <span class="token function">BackTopQueue</span><span class="token punctuation">(</span>Queue <span class="token operator">*</span>queue<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>queue <span class="token operator">==</span> <span class="token constant">NULL</span> <span class="token operator">||</span> queue<span class="token operator">-></span>size <span class="token operator">==</span> MAX<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> queue<span class="token operator">-></span>arr<span class="token punctuation">[</span>queue<span class="token operator">-></span>size<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><h3 id="4-5-æ ˆå’Œé˜Ÿåˆ—çš„åº”ç”¨"><a href="#4-5-æ ˆå’Œé˜Ÿåˆ—çš„åº”ç”¨" class="headerlink" title="4.5 æ ˆå’Œé˜Ÿåˆ—çš„åº”ç”¨"></a>4.5 æ ˆå’Œé˜Ÿåˆ—çš„åº”ç”¨</h3><p>åŸºäºæ ˆç»“æ„å¯¹æ•°æ®å­˜å–é‡‡ç”¨ â€œå…ˆè¿›åå‡ºâ€ åŸåˆ™çš„ç‰¹ç‚¹ï¼Œå®ƒå¯ä»¥ç”¨äºå®ç°å¾ˆå¤šåŠŸèƒ½ã€‚</p><p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬ç»å¸¸ä½¿ç”¨æµè§ˆå™¨åœ¨å„ç§ç½‘ç«™ä¸ŠæŸ¥æ‰¾ä¿¡æ¯ã€‚å‡è®¾å…ˆæµè§ˆçš„é¡µé¢ Aï¼Œç„¶åå…³é—­äº†é¡µé¢ A è·³è½¬åˆ°é¡µé¢ Bï¼Œéšååˆå…³é—­é¡µé¢ B è·³è½¬åˆ°äº†é¡µé¢ Cã€‚è€Œæ­¤æ—¶ï¼Œæˆ‘ä»¬å¦‚æœæƒ³é‡æ–°å›åˆ°é¡µé¢ Aï¼Œæœ‰ä¸¤ä¸ªé€‰æ‹©ï¼š</p><ul><li>é‡æ–°æœç´¢æ‰¾åˆ°é¡µé¢ Aï¼›</li><li>ä½¿ç”¨æµè§ˆå™¨çš„â€å›é€€â€åŠŸèƒ½ã€‚æµè§ˆå™¨ä¼šå…ˆå›é€€åˆ°é¡µé¢ Bï¼Œè€Œåå†å›é€€åˆ°é¡µé¢ Aã€‚</li></ul><p>æµè§ˆå™¨ â€œå›é€€â€ åŠŸèƒ½çš„å®ç°ï¼Œåº•å±‚ä½¿ç”¨çš„å°±æ˜¯æ ˆå­˜å‚¨ç»“æ„ã€‚å½“ä½ å…³é—­é¡µé¢ A æ—¶ï¼Œæµè§ˆå™¨ä¼šå°†é¡µé¢ A å…¥æ ˆï¼›åŒæ ·ï¼Œå½“ä½ å…³é—­é¡µé¢ B æ—¶ï¼Œæµè§ˆå™¨ä¹Ÿä¼šå°† Bå…¥æ ˆã€‚å› æ­¤ï¼Œå½“ä½ æ‰§è¡Œå›é€€æ“ä½œæ—¶ï¼Œæ‰ä¼šé¦–å…ˆçœ‹åˆ°çš„æ˜¯é¡µé¢ Bï¼Œç„¶åæ˜¯é¡µé¢ Aï¼Œè¿™æ˜¯æ ˆä¸­æ•°æ®ä¾æ¬¡å‡ºæ ˆçš„æ•ˆæœã€‚</p><p>ä¸ä»…å¦‚æ­¤ï¼Œæ ˆå­˜å‚¨ç»“æ„è¿˜å¯ä»¥å¸®æˆ‘ä»¬æ£€æµ‹ä»£ç ä¸­çš„æ‹¬å·åŒ¹é…é—®é¢˜ã€‚å¤šæ•°ç¼–ç¨‹è¯­è¨€éƒ½ä¼šç”¨åˆ°æ‹¬å·ï¼ˆå°æ‹¬å·ã€ä¸­æ‹¬å·å’Œå¤§æ‹¬å·ï¼‰ï¼Œæ‹¬å·çš„é”™è¯¯ä½¿ç”¨ï¼ˆé€šå¸¸æ˜¯ä¸¢å³æ‹¬å·ï¼‰ä¼šå¯¼è‡´ç¨‹åºç¼–è¯‘é”™è¯¯ï¼Œè€Œå¾ˆå¤šå¼€å‘å·¥å…·ä¸­éƒ½æœ‰æ£€æµ‹ä»£ç æ˜¯å¦æœ‰ç¼–è¾‘é”™è¯¯çš„åŠŸèƒ½ï¼Œå…¶ä¸­å°±åŒ…å«æ£€æµ‹ä»£ç ä¸­çš„æ‹¬å·åŒ¹é…é—®é¢˜ï¼Œæ­¤åŠŸèƒ½çš„åº•å±‚å®ç°ä½¿ç”¨çš„å°±æ˜¯æ ˆç»“æ„ã€‚</p><p>åŒæ—¶ï¼Œæ ˆç»“æ„è¿˜å¯ä»¥å®ç°æ•°å€¼çš„è¿›åˆ¶è½¬æ¢åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œç¼–å†™ç¨‹åºå®ç°ä»åè¿›åˆ¶æ•°è‡ªåŠ¨è½¬æ¢æˆäºŒè¿›åˆ¶æ•°ï¼Œå°±å¯ä»¥ä½¿ç”¨æ ˆå­˜å‚¨ç»“æ„æ¥å®ç°ã€‚</p><p>ä»¥ä¸Šä¹Ÿä»…æ˜¯æ ˆåº”ç”¨é¢†åŸŸçš„å†°å±±ä¸€è§’ï¼Œè¿™é‡Œä¸å†è¿‡å¤šä¸¾ä¾‹ã€‚åœ¨åç»­ç« èŠ‚çš„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬ä¼šå¤§é‡ä½¿ç”¨åˆ°æ ˆç»“æ„ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å­¦ä¹ å¦‚ä½•å®ç°é¡ºåºæ ˆå’Œé“¾æ ˆï¼Œä»¥åŠå¯¹æ ˆä¸­å…ƒç´ è¿›è¡Œå…¥æ ˆå’Œå‡ºæ ˆçš„æ“ä½œã€‚</p><h2 id="ç¬¬å…­ç« -ä¸²"><a href="#ç¬¬å…­ç« -ä¸²" class="headerlink" title="ç¬¬å…­ç«  ä¸²"></a>ç¬¬å…­ç«  ä¸²</h2><p>æ•°æ®ç»“æ„ä¸­ï¼Œå­—ç¬¦ä¸²è¦å•ç‹¬ç”¨ä¸€ç§å­˜å‚¨ç»“æ„æ¥å­˜å‚¨ï¼Œç§°ä¸ºä¸²å­˜å‚¨ç»“æ„ã€‚è¿™é‡Œçš„ä¸²æŒ‡çš„å°±æ˜¯å­—ç¬¦ä¸²ã€‚ä¸¥æ ¼æ„ä¹‰ä¸Šè®²ï¼Œä¸²å­˜å‚¨ç»“æ„ä¹Ÿæ˜¯ä¸€ç§çº¿æ€§å­˜å‚¨ç»“æ„ï¼Œå› ä¸ºå­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ä¹‹é—´ä¹Ÿå…·æœ‰â€ä¸€å¯¹ä¸€â€çš„é€»è¾‘å…³ç³»ã€‚åªä¸è¿‡ï¼Œä¸ä¹‹å‰æ‰€å­¦çš„çº¿æ€§å­˜å‚¨ç»“æ„ä¸åŒï¼Œä¸²ç»“æ„åªç”¨äºå­˜å‚¨å­—ç¬¦ç±»å‹çš„æ•°æ®ã€‚</p><p>æ— è®ºå­¦ä¹ å“ªç§ç¼–ç¨‹è¯­è¨€ï¼Œæ“ä½œæœ€å¤šçš„æ€»æ˜¯å­—ç¬¦ä¸²ã€‚æ•°æ®ç»“æ„ä¸­ï¼Œæ ¹æ®ä¸²ä¸­å­˜å‚¨å­—ç¬¦çš„æ•°é‡åŠç‰¹ç‚¹ï¼Œå¯¹ä¸€äº›ç‰¹æ®Šçš„ä¸²è¿›è¡Œäº†å‘½åï¼Œæ¯”å¦‚è¯´ï¼š</p><ul><li>ç©ºä¸²ï¼šå­˜å‚¨ 0 ä¸ªå­—ç¬¦çš„ä¸²ï¼Œä¾‹å¦‚ S = â€œâ€ï¼ˆåŒå¼•å·ç´§æŒ¨ç€ï¼‰ï¼›</li><li>ç©ºæ ¼ä¸²ï¼šåªåŒ…å«ç©ºæ ¼å­—ç¬¦çš„ä¸²ï¼Œä¾‹å¦‚ S = â€œ   â€œï¼ˆåŒå¼•å·åŒ…å« 5 ä¸ªç©ºæ ¼ï¼‰ï¼›</li><li>å­ä¸²å’Œä¸»ä¸²ï¼šå‡è®¾æœ‰ä¸¤ä¸ªä¸² a å’Œ bï¼Œå¦‚æœ a ä¸­å¯ä»¥æ‰¾åˆ°å‡ ä¸ªè¿ç»­å­—ç¬¦ç»„æˆçš„ä¸²ä¸ b å®Œå…¨ç›¸åŒï¼Œåˆ™ç§° a æ˜¯ b çš„ä¸»ä¸²ï¼Œb æ˜¯ a çš„å­ä¸²ã€‚ä¾‹å¦‚ï¼Œè‹¥ a = â€œshujujiegouâ€ï¼Œb = â€œshujuâ€ï¼Œç”±äº a ä¸­ä¹ŸåŒ…å« â€œshujuâ€ï¼Œå› æ­¤ä¸² a å’Œä¸² b æ˜¯ä¸»ä¸²å’Œå­ä¸²çš„å…³ç³»ï¼›</li></ul><p>å¦å¤–ï¼Œå¯¹äºå…·æœ‰ä¸»ä¸²å’Œå­ä¸²å…³ç³»çš„ä¸¤ä¸ªä¸²ï¼Œé€šå¸¸ä¼šè®©ä½ ç”¨ç®—æ³•æ‰¾åˆ°å­ä¸²åœ¨ä¸»ä¸²çš„ä½ç½®ã€‚å­ä¸²åœ¨ä¸»ä¸²ä¸­çš„ä½ç½®ï¼ŒæŒ‡çš„æ˜¯å­ä¸²é¦–ä¸ªå­—ç¬¦åœ¨ä¸»ä¸²ä¸­çš„ä½ç½®ã€‚</p><p>ä¾‹å¦‚ï¼Œä¸² a = â€œshujujiegouâ€ï¼Œä¸² b = â€œjiegouâ€ï¼Œé€šè¿‡è§‚å¯Ÿï¼Œå¯ä»¥åˆ¤æ–­ a å’Œ b æ˜¯ä¸»ä¸²å’Œå­ä¸²çš„å…³ç³»ï¼ŒåŒæ—¶å­ä¸² b ä½äºä¸»ä¸² a ä¸­ç¬¬ 6 çš„ä½ç½®ï¼Œå› ä¸ºåœ¨ä¸² a ä¸­ï¼Œä¸² b é¦–å­—ç¬¦ â€˜jâ€™ çš„ä½ç½®æ˜¯ 6ã€‚</p><h3 id="6-1-ä¸²çš„å®šé•¿é¡ºåºå­˜å‚¨"><a href="#6-1-ä¸²çš„å®šé•¿é¡ºåºå­˜å‚¨" class="headerlink" title="6.1 ä¸²çš„å®šé•¿é¡ºåºå­˜å‚¨"></a>6.1 ä¸²çš„å®šé•¿é¡ºåºå­˜å‚¨</h3><blockquote><p>ä¸²çš„å®šé•¿é¡ºåºå­˜å‚¨ç»“æ„ï¼Œå¯ä»¥ç®€å•åœ°ç†è§£ä¸ºé‡‡ç”¨ â€œå›ºå®šé•¿åº¦çš„é¡ºåºå­˜å‚¨ç»“æ„â€ æ¥å­˜å‚¨å­—ç¬¦ä¸²ï¼Œå› æ­¤é™å®šäº†å…¶åº•å±‚å®ç°åªèƒ½ä½¿ç”¨é™æ€æ•°ç»„ã€‚</p></blockquote><p>ä½¿ç”¨å®šé•¿é¡ºåºå­˜å‚¨ç»“æ„å­˜å‚¨å­—ç¬¦ä¸²æ—¶ï¼Œéœ€ç»“åˆç›®æ ‡å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œé¢„å…ˆç”³è¯·è¶³å¤Ÿå¤§çš„å†…å­˜ç©ºé—´ã€‚ä¾‹å¦‚ï¼Œé‡‡ç”¨å®šé•¿é¡ºåºå­˜å‚¨ç»“æ„å­˜å‚¨ â€œ<a href="http://www.codezhou.club&quot;,é€šè¿‡ç›®æµ‹å¾—çŸ¥æ­¤å­—ç¬¦ä¸²é•¿åº¦ä¸º/">www.codezhou.club&quot;ï¼Œé€šè¿‡ç›®æµ‹å¾—çŸ¥æ­¤å­—ç¬¦ä¸²é•¿åº¦ä¸º</a> 17ï¼Œå› æ­¤æˆ‘ä»¬ç”³è¯·çš„æ•°ç»„ç©ºé—´é•¿åº¦è‡³å°‘ä¸º 18ï¼ˆæœ€åä¸€ä½å­˜å‚¨å­—ç¬¦ä¸²çš„ç»“æŸæ ‡å¿— â€˜\0â€™ï¼‰ï¼Œç”¨ C è¯­è¨€è¡¨ç¤ºä¸ºï¼š</p><pre class=" language-c"><code class="language-c"><span class="token keyword">char</span> str<span class="token punctuation">[</span><span class="token number">18</span><span class="token punctuation">]</span> <span class="token operator">=</span> â€œwww<span class="token punctuation">.</span>codezhou<span class="token punctuation">.</span>club"<span class="token punctuation">;</span></code></pre><h3 id="6-2-ä¸²çš„å †åˆ†é…å­˜å‚¨"><a href="#6-2-ä¸²çš„å †åˆ†é…å­˜å‚¨" class="headerlink" title="6.2 ä¸²çš„å †åˆ†é…å­˜å‚¨"></a>6.2 ä¸²çš„å †åˆ†é…å­˜å‚¨</h3><p>ä¸²çš„å †åˆ†é…å­˜å‚¨å…¶å…·ä½“å®ç°æ–¹å¼æ˜¯é‡‡ç”¨åŠ¨æ€æ•°ç»„å­˜å‚¨å­—ç¬¦ä¸²ã€‚é€šå¸¸ï¼Œç¼–ç¨‹è¯­è¨€ä¼šå°†ç¨‹åºå æœ‰çš„å†…å­˜ç©ºé—´åˆ†æˆå¤šä¸ªä¸åŒçš„åŒºåŸŸï¼Œç¨‹åºåŒ…å«çš„æ•°æ®ä¼šè¢«åˆ†é—¨åˆ«ç±»å¹¶å­˜å‚¨åˆ°å¯¹åº”çš„åŒºåŸŸã€‚æ‹¿ C è¯­è¨€æ¥è¯´ï¼Œç¨‹åºä¼šå°†å†…å­˜åˆ†ä¸º 4 ä¸ªåŒºåŸŸï¼Œåˆ†åˆ«ä¸ºå †åŒºã€æ ˆåŒºã€æ•°æ®åŒºå’Œä»£ç åŒºã€‚</p><p>ä¸å…¶ä»–åŒºåŸŸä¸åŒï¼Œå †åŒºçš„å†…å­˜ç©ºé—´éœ€è¦ç¨‹åºå‘˜æ‰‹åŠ¨ä½¿ç”¨ malloc å‡½æ•°ç”³è¯·ï¼Œå¹¶ä¸”åœ¨ä¸ç”¨åè¦æ‰‹åŠ¨é€šè¿‡ free å‡½æ•°å°†å…¶é‡Šæ”¾ã€‚</p><p>C è¯­è¨€ä¸­ä½¿ç”¨ malloc å‡½æ•°æœ€å¤šçš„åœºæ™¯æ˜¯ç»™æ•°ç»„åˆ†é…ç©ºé—´ï¼Œè¿™ç±»æ•°ç»„ç§°ä¸ºåŠ¨æ€æ•°ç»„ã€‚ä¾‹å¦‚ï¼š</p><pre class=" language-c"><code class="language-c"><span class="token keyword">char</span> <span class="token operator">*</span> a <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token operator">*</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>æ­¤è¡Œä»£ç åˆ›å»ºäº†ä¸€ä¸ªåŠ¨æ€æ•°ç»„ aï¼Œé€šè¿‡ä½¿ç”¨ malloc ç”³è¯·äº† 5 ä¸ª char ç±»å‹å¤§å°çš„å †å­˜å‚¨ç©ºé—´ã€‚</p><p>==åŠ¨æ€æ•°ç»„ç›¸æ¯”æ™®é€šæ•°ç»„ï¼ˆé™æ€æ•°ç»„ï¼‰çš„ä¼˜åŠ¿æ˜¯é•¿åº¦å¯å˜ï¼Œæ¢å¥è¯è¯´ï¼Œæ ¹æ®éœ€è¦åŠ¨æ€æ•°ç»„å¯é¢å¤–ç”³è¯·æ›´å¤šçš„å †ç©ºé—´ï¼ˆä½¿ç”¨ relloc å‡½æ•°ï¼‰ï¼š==</p><pre class=" language-c"><code class="language-c">a <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">realloc</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">10</span><span class="token operator">*</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>é€šè¿‡ä½¿ç”¨è¿™è¡Œä»£ç ï¼Œä¹‹å‰å…·æœ‰ 5 ä¸ª char å‹å­˜å‚¨ç©ºé—´çš„åŠ¨æ€æ•°ç»„ï¼Œå…¶å®¹é‡æ‰©å¤§ä¸ºå¯å­˜å‚¨ 10 ä¸ª char å‹æ•°æ®ã€‚</p><p>å®Œæ•´å±•ç¤ºå¦‚ä¸‹ï¼š</p><pre class=" language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h></span></span><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;string.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">char</span> <span class="token operator">*</span>a1 <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>    <span class="token keyword">char</span> <span class="token operator">*</span>a2 <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>    a1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">strcpy</span><span class="token punctuation">(</span>a1<span class="token punctuation">,</span> <span class="token string">"http://www"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//å°†å­—ç¬¦ä¸²"http://www"å¤åˆ¶ç»™a1</span>    a2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">strcpy</span><span class="token punctuation">(</span>a2<span class="token punctuation">,</span> <span class="token string">"codezhou.club"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> lengthA1 <span class="token operator">=</span> <span class="token function">strlen</span><span class="token punctuation">(</span>a1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//a1ä¸²çš„é•¿åº¦</span>    <span class="token keyword">int</span> lengthA2 <span class="token operator">=</span> <span class="token function">strlen</span><span class="token punctuation">(</span>a2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//a2ä¸²çš„é•¿åº¦</span>    <span class="token comment" spellcheck="true">//å°è¯•å°†åˆå¹¶çš„ä¸²å­˜å‚¨åœ¨ a1 ä¸­ï¼Œå¦‚æœ a1 ç©ºé—´ä¸å¤Ÿï¼Œåˆ™ç”¨reallocåŠ¨æ€ç”³è¯·</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>lengthA1 <span class="token operator">&lt;</span> lengthA1 <span class="token operator">+</span> lengthA2<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        a1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">realloc</span><span class="token punctuation">(</span>a1<span class="token punctuation">,</span> <span class="token punctuation">(</span>lengthA1 <span class="token operator">+</span> lengthA2 <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//åˆå¹¶ä¸¤ä¸ªä¸²åˆ° a1 ä¸­</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> lengthA1<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> lengthA1 <span class="token operator">+</span> lengthA2<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        a1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> a2<span class="token punctuation">[</span>i <span class="token operator">-</span> lengthA1<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//ä¸²çš„æœ«å°¾è¦æ·»åŠ  \0ï¼Œé¿å…å‡ºé”™</span>    a1<span class="token punctuation">[</span>lengthA1 <span class="token operator">+</span> lengthA2<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'\0'</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s"</span><span class="token punctuation">,</span> a1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//ç”¨å®ŒåŠ¨æ€æ•°ç»„è¦ç«‹å³é‡Šæ”¾</span>    <span class="token function">free</span><span class="token punctuation">(</span>a1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">free</span><span class="token punctuation">(</span>a2<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><h3 id="6-3-BFç®—æ³•"><a href="#6-3-BFç®—æ³•" class="headerlink" title="6.3 BFç®—æ³•"></a>6.3 BFç®—æ³•</h3><p>æš´åŠ›(Brute Force)ç®—æ³•æ˜¯æ™®é€šçš„æ¨¡å¼åŒ¹é…ç®—æ³•ï¼ŒBFç®—æ³•çš„æ€æƒ³å°±æ˜¯å°†ç›®æ ‡ä¸²Sçš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸æ¨¡å¼ä¸²Tçš„ç¬¬ä¸€ä¸ªå­—ç¬¦è¿›è¡ŒåŒ¹é…ï¼Œè‹¥ç›¸ç­‰ï¼Œåˆ™ç»§ç»­æ¯”è¾ƒSçš„ç¬¬äºŒä¸ªå­—ç¬¦å’Œ Tçš„ç¬¬äºŒä¸ªå­—ç¬¦ï¼›è‹¥ä¸ç›¸ç­‰ï¼Œåˆ™æ¯”è¾ƒSçš„ç¬¬äºŒä¸ªå­—ç¬¦å’ŒTçš„ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œä¾æ¬¡æ¯”è¾ƒä¸‹å»ï¼Œç›´åˆ°å¾—å‡ºæœ€åçš„åŒ¹é…ç»“æœã€‚BFç®—æ³•æ˜¯ä¸€ç§è›®åŠ›ç®—æ³•ã€‚</p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/20210507125343.png" style="zoom:80%;" /><pre class=" language-c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">index</span><span class="token punctuation">(</span> String S<span class="token punctuation">,</span> String T<span class="token punctuation">,</span> <span class="token keyword">int</span> pos <span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> i <span class="token operator">=</span> pos<span class="token punctuation">;</span>                        <span class="token comment" spellcheck="true">// i è¡¨ç¤ºä¸»ä¸² S ä¸­å½“å‰ä½ç½®ä¸‹æ ‡</span>    <span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>                            <span class="token comment" spellcheck="true">// j è¡¨ç¤ºå­ä¸² T ä¸­å½“å‰ä½ç½®ä¸‹æ ‡</span>    <span class="token keyword">while</span><span class="token punctuation">(</span> i <span class="token operator">&lt;=</span> S<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> j <span class="token operator">&lt;=</span> T<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// i æˆ– j å…¶ä¸­ä¸€ä¸ªåˆ°è¾¾å°¾éƒ¨åˆ™ç»ˆæ­¢æœç´¢</span>        <span class="token keyword">if</span><span class="token punctuation">(</span> S<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> T<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>             <span class="token comment" spellcheck="true">// è‹¥ç›¸ç­‰åˆ™ç»§ç»­è¿›è¡Œä¸‹ä¸€ä¸ªå…ƒç´ åŒ¹é…</span>            i<span class="token operator">++</span><span class="token punctuation">;</span>            j<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token keyword">else</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>                         <span class="token comment" spellcheck="true">// è‹¥åŒ¹é…å¤±è´¥åˆ™ j å›æº¯åˆ°ç¬¬ä¸€ä¸ªå…ƒç´ é‡æ–°åŒ¹é…</span>            i <span class="token operator">=</span> i <span class="token operator">-</span> j <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">;</span>              <span class="token comment" spellcheck="true">// å°† i é‡æ–°å›æº¯åˆ°ä¸Šæ¬¡åŒ¹é…é¦–ä½çš„ä¸‹ä¸€ä¸ªå…ƒç´ </span>            j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span> j <span class="token operator">></span> T<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> i <span class="token operator">-</span> T<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token keyword">else</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p>BFç®—æ³•æ—¶é—´å¤æ‚åº¦:è¯¥ç®—æ³•æœ€ç†æƒ³çš„æ—¶é—´å¤æ‚åº¦ <code>O(n)</code>ï¼Œn è¡¨ç¤ºä¸² A çš„é•¿åº¦ï¼Œå³ç¬¬ä¸€æ¬¡åŒ¹é…å°±æˆåŠŸã€‚BF ç®—æ³•æœ€åæƒ…å†µçš„æ—¶é—´å¤æ‚åº¦ä¸º <code>O(n*m)</code>ï¼Œn ä¸ºä¸² A çš„é•¿åº¦ï¼Œm ä¸ºä¸² B çš„é•¿åº¦ã€‚ä¾‹å¦‚ï¼Œä¸² B ä¸º â€œ0000000001â€ï¼Œè€Œä¸² A ä¸º â€œ01â€ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œä¸¤ä¸ªä¸²æ¯æ¬¡åŒ¹é…ï¼Œéƒ½å¿…é¡»åŒ¹é…è‡³ä¸² A çš„æœ€æœ«å°¾æ‰èƒ½åˆ¤æ–­åŒ¹é…å¤±è´¥ï¼Œå› æ­¤è¿è¡Œäº† n*m æ¬¡ã€‚</p><p>BF ç®—æ³•çš„å®ç°è¿‡ç¨‹å¾ˆ â€œæ— è„‘â€ï¼Œä¸åŒ…å«ä»»ä½•æŠ€å·§ï¼Œåœ¨å¯¹æ•°æ®é‡å¤§çš„ä¸²è¿›è¡Œæ¨¡å¼åŒ¹é…æ—¶ï¼Œç®—æ³•çš„æ•ˆç‡å¾ˆä½ã€‚</p><h3 id="6-4-KMPç®—æ³•"><a href="#6-4-KMPç®—æ³•" class="headerlink" title="6.4 KMPç®—æ³•"></a>6.4 KMPç®—æ³•</h3><blockquote><p>åœ¨<a href="https://zh.wikipedia.org/wiki/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6">è®¡ç®—æœºç§‘å­¦</a>ä¸­ï¼Œ<strong>Knuth-Morris-Pratt<a href="https://zh.wikipedia.org/wiki/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%9F%A5%E6%89%BE%E7%AE%97%E6%B3%95">å­—ç¬¦ä¸²æŸ¥æ‰¾ç®—æ³•</a><strong>ï¼ˆç®€ç§°ä¸º</strong>KMPç®—æ³•</strong>ï¼‰å¯åœ¨ä¸€ä¸ª<a href="https://zh.wikipedia.org/wiki/%E5%AD%97%E7%AC%A6%E4%B8%B2">å­—ç¬¦ä¸²</a><code>S</code>å†…æŸ¥æ‰¾ä¸€ä¸ªè¯<code>W</code>çš„å‡ºç°ä½ç½®ã€‚ä¸€ä¸ªè¯åœ¨ä¸åŒ¹é…æ—¶æœ¬èº«å°±åŒ…å«è¶³å¤Ÿçš„ä¿¡æ¯æ¥ç¡®å®šä¸‹ä¸€ä¸ªåŒ¹é…å¯èƒ½çš„å¼€å§‹ä½ç½®ï¼Œæ­¤ç®—æ³•åˆ©ç”¨è¿™ä¸€ç‰¹æ€§ä»¥é¿å…é‡æ–°æ£€æŸ¥å…ˆå‰åŒ¹é…çš„<a href="https://zh.wikipedia.org/wiki/%E5%AD%97%E7%AC%A6">å­—ç¬¦</a>ã€‚</p><p>è¿™ä¸ªç®—æ³•ç”±<a href="https://zh.wikipedia.org/wiki/%E9%AB%98%E5%BE%B7%E7%BA%B3">é«˜å¾·çº³</a>å’Œ<a href="https://zh.wikipedia.org/w/index.php?title=%E6%B2%83%E6%81%A9%C2%B7%E6%99%AE%E6%8B%89%E7%89%B9&action=edit&redlink=1">æ²ƒæ©Â·æ™®æ‹‰ç‰¹</a>åœ¨1974å¹´æ„æ€ï¼ŒåŒå¹´<a href="https://zh.wikipedia.org/w/index.php?title=%E8%A9%B9%E5%A7%86%E6%96%AF%C2%B7H%C2%B7%E8%8E%AB%E9%87%8C%E6%96%AF&action=edit&redlink=1">è©¹å§†æ–¯Â·HÂ·è«é‡Œæ–¯</a>ä¹Ÿç‹¬ç«‹åœ°è®¾è®¡å‡ºè¯¥ç®—æ³•ï¼Œæœ€ç»ˆä¸‰äººäº1977å¹´è”åˆå‘è¡¨ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
            <tag> C++ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°å­—å›¾åƒå¤„ç†ï¼ˆDIPï¼‰</title>
      <link href="/2020/04/26/DigitalImageProcessing/"/>
      <url>/2020/04/26/DigitalImageProcessing/</url>
      
        <content type="html"><![CDATA[<h1 id="æ•°å­—å›¾åƒå¤„ç†ï¼ˆåŸºäºPython-Opencvï¼‰"><a href="#æ•°å­—å›¾åƒå¤„ç†ï¼ˆåŸºäºPython-Opencvï¼‰" class="headerlink" title="æ•°å­—å›¾åƒå¤„ç†ï¼ˆåŸºäºPython-Opencvï¼‰"></a>æ•°å­—å›¾åƒå¤„ç†ï¼ˆåŸºäºPython-Opencvï¼‰</h1><h2 id="ç¬¬ä¸€ç« -å›¾åƒåŸºç¡€"><a href="#ç¬¬ä¸€ç« -å›¾åƒåŸºç¡€" class="headerlink" title="ç¬¬ä¸€ç«  å›¾åƒåŸºç¡€"></a>ç¬¬ä¸€ç«  å›¾åƒåŸºç¡€</h2><h3 id="1-1-å›¾åƒçš„åŸºæœ¬æ¦‚å¿µ"><a href="#1-1-å›¾åƒçš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="1.1 å›¾åƒçš„åŸºæœ¬æ¦‚å¿µ"></a>1.1 å›¾åƒçš„åŸºæœ¬æ¦‚å¿µ</h3><p><strong>ï¼ˆ1ï¼‰å›¾åƒçš„é¢œè‰²</strong></p><p>è‰²åº¦å­¦ç†è®ºè®¤ä¸ºï¼Œä»»ä½•é¢œè‰²å¯ç”±çº¢ã€ç»¿ã€è“ä¸‰ç§åŸºæœ¬é¢œè‰²æ··åˆå¾—åˆ°ã€‚nå›¾åƒå¯ç”¨çº¢ã€ç»¿ã€è“ä¸‰åŸè‰²æ¥è¡¨ç¤ºã€‚</p><p>$$ f(x,y,z) = {fred(x,y,z),fgreen(x,y,z),fbule(x,y,z)}$$</p><p><strong>ï¼ˆ2ï¼‰å›¾åƒçš„è¡¨ç¤º</strong></p><p>ä¸€èˆ¬æ¥è¯´ï¼Œå›¾åƒæ˜¯ä¸€ä¸ªæ ‡å‡†çš„çŸ©å½¢ï¼Œæœ‰ç€å®½åº¦ï¼ˆwidthï¼‰å’Œé«˜åº¦ï¼ˆheightï¼‰ã€‚è€ŒçŸ©é˜µæœ‰ç€è¡Œï¼ˆrowï¼‰å’Œåˆ—ï¼ˆcolumnï¼‰ï¼ŒçŸ©é˜µçš„æ“ä½œåœ¨æ•°å­¦å’Œè®¡ç®—æœºä¸­çš„å¤„ç†éƒ½å¾ˆå¸¸è§ä¸”æˆç†Ÿï¼Œäºæ˜¯å¾ˆè‡ªç„¶çš„å°±æŠŠå›¾åƒä½œä¸ºä¸€ä¸ªçŸ©é˜µï¼ŒæŠŠå¯¹å›¾åƒçš„æ“ä½œè½¬æ¢æˆå¯¹çŸ©é˜µçš„æ“ä½œã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/%E7%9F%A9%E9%98%B5.png"></p><p>$f_{mn}$ä»£è¡¨è¯¥è±¡ç´ å½©è‰²æˆ–ç°åº¦å€¼è„šç ä»£è¡¨è±¡ç´ çš„åæ ‡ä½ç½®:</p><p>ä½¿ç”¨opencvè·å–å¹¶ä¿®æ”¹åƒç´ å€¼:è¯»å–ä¸€å‰¯å›¾åƒï¼Œæ ¹æ®åƒç´ çš„è¡Œå’Œåˆ—çš„åæ ‡è·å–å®ƒçš„åƒç´ å€¼ï¼Œå¯¹äºRGBå›¾åƒè€Œè¨€ï¼Œè¿”å›RGBçš„å€¼ï¼Œå¯¹äºç°åº¦å›¾åˆ™è¿”å›ç°åº¦å€¼ã€‚</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> cv2<span class="token keyword">import</span> numpyimg <span class="token operator">=</span> cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">'test.jpg'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">#è¯»å…¥å›¾ç‰‡</span><span class="token keyword">print</span><span class="token punctuation">(</span>img<span class="token punctuation">.</span>size<span class="token punctuation">)</span><span class="token comment" spellcheck="true">#è¾“å‡ºå›¾ç‰‡çš„å¤§å°ï¼Œè¿”å›å›¾åƒçš„åƒç´ æ•°ç›®</span><span class="token keyword">print</span><span class="token punctuation">(</span>img<span class="token punctuation">.</span>shape<span class="token punctuation">)</span><span class="token comment" spellcheck="true">#è¾“å‡ºå›¾ç‰‡çš„å½¢çŠ¶ï¼Œè¿”å›å€¼æ˜¯ä¸€ä¸ªåŒ…å«è¡Œæ•°ï¼Œåˆ—æ•°ï¼Œé€šé“æ•°çš„å…ƒç»„</span><span class="token keyword">print</span><span class="token punctuation">(</span>img<span class="token punctuation">.</span>dtype<span class="token punctuation">)</span><span class="token comment" spellcheck="true">#è¿”å›å›¾åƒçš„æ•°æ®ç±»å‹</span></code></pre><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/%E5%AF%B9%E5%BA%94.png"></p><p><strong>å›¾åƒç©ºé—´åˆ†è¾¨ç‡</strong> :æŒ‡å›¾åƒæ•°å­—åŒ–çš„ç©ºé—´ç²¾ç»†ç¨‹åº¦ã€‚</p><p><strong>ç°åº¦çº§åˆ†è¾¨ç‡</strong>:å³é¢œè‰²æ·±åº¦ï¼Œè¡¨ç¤ºæ¯ä¸€åƒç´ çš„é¢œè‰²å€¼æ‰€å çš„äºŒè¿›åˆ¶ä½æ•°ã€‚é¢œè‰²æ·±åº¦è¶Šå¤§åˆ™èƒ½è¡¨ç¤ºçš„é¢œè‰²æ•°ç›®è¶Šå¤šã€‚</p><h3 id="1-2-å›¾åƒçš„å­˜å‚¨æ ¼å¼"><a href="#1-2-å›¾åƒçš„å­˜å‚¨æ ¼å¼" class="headerlink" title="1.2 å›¾åƒçš„å­˜å‚¨æ ¼å¼"></a>1.2 å›¾åƒçš„å­˜å‚¨æ ¼å¼</h3><p>å½©è‰²å›¾åƒæ˜¯æŒ‡æ¯ä¸ªåƒç´ çš„ä¿¡æ¯ç”±R G Bä¸‰åŸè‰²æ„æˆçš„å›¾åƒï¼Œå…¶ä¸­R G Bæ˜¯ç”±ä¸åŒçš„ç°åº¦çº§æ¥æè¿°çš„:</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210429205546906.png"></p><p>(1) é¢œè‰²è¡¨çº¢ã€ç»¿ã€è“åˆ†é‡å€¼ä¸å…¨ç›¸ç­‰ã€‚<br>        (2) åƒç´ å€¼æ˜¯å›¾åƒé¢œè‰²è¡¨çš„ç´¢å¼•åœ°å€ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210429205914771.png"></p><p>(1)æ¯ä¸€åƒç´ ç”±RGBä¸‰ä¸ªåˆ†é‡ç»„æˆã€‚</p><p>(2)æ¯ä¸ªåˆ†é‡å„å 8ä½ï¼Œå–å€¼èŒƒå›´ä¸º0~255ï¼Œæ¯ä¸ªåƒç´ 24ä½ã€‚</p><p>æŒ‰ç…§é¢œè‰²æ·±åº¦åˆ†ç±»,å¸¸ç”¨å›¾åƒæ–‡ä»¶:</p><ul><li>é»‘ç™½å›¾åƒ</li><li>8ä½ç´¢å¼•å›¾åƒ</li><li>24ä½çœŸå½©è‰²å›¾åƒ</li></ul><h2 id="ç¬¬äºŒç« -åŸºç¡€æ“ä½œ"><a href="#ç¬¬äºŒç« -åŸºç¡€æ“ä½œ" class="headerlink" title="ç¬¬äºŒç«  åŸºç¡€æ“ä½œ"></a>ç¬¬äºŒç«  åŸºç¡€æ“ä½œ</h2><h3 id="2-1-å›¾åƒçš„ç®—æ•°è¿ç®—"><a href="#2-1-å›¾åƒçš„ç®—æ•°è¿ç®—" class="headerlink" title="2.1 å›¾åƒçš„ç®—æ•°è¿ç®—"></a>2.1 å›¾åƒçš„ç®—æ•°è¿ç®—</h3><p><strong>1ã€å›¾åƒåŠ æ³•</strong>ï¼šä½¿ç”¨cv2.add()å°†ä¸¤å¹…å›¾åƒè¿›è¡ŒåŠ æ³•è¿ç®—ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨numpyï¼Œres=img1+img2ã€‚ä¸¤å¹…å›¾åƒçš„å¤§å°ï¼Œç±»å‹å¿…é¡»ä¸€è‡´ï¼Œæˆ–è€…ç¬¬äºŒä¸ªå›¾åƒå¯ä»¥æ˜¯ä¸€ä¸ªç®€å•çš„æ ‡é‡å€¼ã€‚openCVçš„åŠ æ³•æ˜¯ä¸€ç§é¥±å’Œæ“ä½œï¼Œè€Œnumpyçš„åŠ æ³•æ˜¯ä¸€ç§æ¨¡æ“ä½œã€‚</p><pre class=" language-python"><code class="language-python">x<span class="token operator">=</span>np<span class="token punctuation">.</span>uint8<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">250</span><span class="token punctuation">]</span><span class="token punctuation">)</span>y<span class="token operator">=</span>np<span class="token punctuation">.</span>uint8<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>cv2<span class="token punctuation">.</span>add<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">#250+10=260>=255</span><span class="token comment" spellcheck="true">#ç»“æœä¸º[[255]]</span><span class="token keyword">print</span> <span class="token punctuation">(</span>x<span class="token operator">+</span>y<span class="token punctuation">)</span><span class="token comment" spellcheck="true">#250+10=260%255=4</span><span class="token comment" spellcheck="true">#ç»“æœä¸º[4]</span></code></pre><p><em>OpenCVçš„ç»“æœä¼šæ›´å¥½ï¼Œå°½é‡ä½¿ç”¨OpenCVä¸­çš„å‡½æ•°</em></p><p><strong>2ã€å›¾åƒæ··åˆ</strong>ï¼šè¿™ä¹Ÿæ˜¯åŠ æ³•ï¼Œä¸åŒçš„æ˜¯ä¸¤å¹…å›¾åƒçš„æƒé‡ä¸åŒï¼Œè¿™ä¼šç»™äººä¸€ç§æ··åˆæˆ–è€…é€æ˜çš„æ„Ÿè§‰ã€‚å›¾åƒæ··åˆçš„è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š<br>$$<br>g(x) = (1âˆ’\alpha)f_0 (x)+\alpha f_1 (x)<br>$$<br>é€šè¿‡ä¿®æ”¹$\alpha$çš„å€¼ï¼ˆ0â€“&gt;1ï¼‰,å¯ä»¥å®ç°å¾ˆé…·çš„æ··åˆã€‚ä¾‹ï¼šå°†ä¸¤å¹…å›¾åƒæ··åˆï¼Œç¬¬ä¸€å¹…æƒé‡ä¸º0.7.ç¬¬äºŒå¹…æƒé‡ä¸º0.3ã€‚å‡½æ•°cv2.addWeighed()å¯ä»¥æŒ‰ä¸‹é¢çš„å…¬å¼å¯¹å›¾ç‰‡è¿›è¡Œæ··åˆã€‚$dst = \alphaÂ·img1 + \betaÂ·img2+\gamma$ã€‚è¿™é‡ŒÎ³çš„å–å€¼ä¸º0.</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> cv2<span class="token keyword">import</span> numpy <span class="token keyword">as</span> npimg1<span class="token operator">=</span>cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">'test0.jpg'</span><span class="token punctuation">)</span>img2<span class="token operator">=</span>cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">'test1.png'</span><span class="token punctuation">)</span>dst <span class="token operator">=</span> cv2<span class="token punctuation">.</span>addWeighted<span class="token punctuation">(</span>img1<span class="token punctuation">,</span><span class="token number">0.7</span><span class="token punctuation">,</span>img2<span class="token punctuation">,</span><span class="token number">0.3</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">'dst'</span><span class="token punctuation">,</span>dst<span class="token punctuation">)</span>cv2<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>cv2<span class="token punctuation">.</span>destroyAllWindows<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/1111111.png"></p><h3 id="2-2-å‡ ä½•å˜æ¢"><a href="#2-2-å‡ ä½•å˜æ¢" class="headerlink" title="2.2 å‡ ä½•å˜æ¢"></a>2.2 å‡ ä½•å˜æ¢</h3><p><strong>1ã€æ‰©å±•ç¼©æ”¾</strong>ï¼šåªæ˜¯æ”¹å˜å›¾åƒçš„å°ºå¯¸å¤§å°ï¼Œcv2.resize()å¯ä»¥å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚åœ¨ç¼©æ”¾æ—¶æ¨ècv2.INTER_AREAï¼Œåœ¨æ‹“å±•æ—¶æ¨ècv2.INTER_CUBICï¼ˆæ…¢ï¼‰å’Œcv2.INTER_LINEARã€‚é»˜è®¤æƒ…å†µä¸‹æ‰€æœ‰æ”¹å˜å›¾åƒå°ºå¯¸å¤§å°çš„æ“ä½œä½¿ç”¨çš„æ˜¯<em>æ’å€¼æ³•</em>éƒ½æ˜¯cv2.INTER_LINEARã€‚</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> cv2img <span class="token operator">=</span> cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">'test.jpg'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">#ä¸‹é¢çš„Noneæœ¬åº”è¯¥æ˜¯è¾“å‡ºå›¾åƒçš„å°ºå¯¸ï¼Œä½†æ˜¯å› ä¸ºåé¢æˆ‘ä»¬è®¾ç½®äº†ç¼©æ”¾å› å­ï¼Œæ‰€ä»¥ï¼Œè¿™é‡Œä¸ºNone</span>res <span class="token operator">=</span> cv2<span class="token punctuation">.</span>resize<span class="token punctuation">(</span>img<span class="token punctuation">,</span>None<span class="token punctuation">,</span>fx<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span>fy<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span>interpolation<span class="token operator">=</span>cv2<span class="token punctuation">.</span>INTER_CUBIC<span class="token punctuation">)</span><span class="token comment" spellcheck="true">#or</span><span class="token comment" spellcheck="true">#è¿™é‡Œç›´æ¥è®¾ç½®è¾“å‡ºå›¾åƒçš„å°ºå¯¸ï¼Œæ‰€ä»¥ä¸ç”¨è®¾ç½®ç¼©æ”¾å› å­</span>height <span class="token punctuation">,</span> width <span class="token operator">=</span>img<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span>res <span class="token operator">=</span> cv2<span class="token punctuation">.</span>resize<span class="token punctuation">(</span>img<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">*</span>width<span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">*</span>height<span class="token punctuation">)</span><span class="token punctuation">,</span>interpolation<span class="token operator">=</span>cv2<span class="token punctuation">.</span>INTER_CUBIC<span class="token punctuation">)</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">'res'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>    cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">,</span>img<span class="token punctuation">)</span>    <span class="token keyword">if</span> cv2<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&amp;</span><span class="token number">0xFF</span> <span class="token operator">==</span> <span class="token number">27</span><span class="token punctuation">:</span>        <span class="token keyword">break</span>cv2<span class="token punctuation">.</span>destroyAllWindows<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p><strong>2ã€å¹³ç§»</strong>ï¼šå¦‚æœæƒ³è¦æ²¿ï¼ˆxï¼Œyï¼‰æ–¹å‘ç§»åŠ¨ï¼Œç§»åŠ¨çš„è·ç¦»ä¸ºï¼ˆt<sub>x</sub>,t<sub>y</sub>ï¼‰å¯ä»¥ä»¥ä¸‹é¢æ–¹å¼æ„å»ºç§»åŠ¨çŸ©é˜µã€‚<br>$$<br>\left[ \begin{matrix} 1 &amp; 0 &amp; t_x\ 0 &amp; 1 &amp; t_y \end{matrix} \right]<br>$$</p><p>å¯ä»¥ä½¿ç”¨Numpyæ•°ç»„æ„å»ºçŸ©é˜µï¼Œæ•°æ®ç±»å‹æ˜¯np.float32ï¼Œç„¶åä¼ ç»™å‡½æ•°cv2.warpAffine()ï¼Œå‡½æ•°cv2.warpAffine() çš„ç¬¬ä¸‰ä¸ªå‚æ•°çš„æ˜¯è¾“å‡ºå›¾åƒçš„å¤§å°ï¼Œå®ƒçš„æ ¼å¼åº”è¯¥æ˜¯å›¾åƒçš„ï¼ˆå®½ï¼Œé«˜ï¼‰ã€‚åº”è¯¥è®°ä½çš„æ˜¯å›¾åƒçš„å®½å¯¹åº”çš„æ˜¯åˆ—æ•°ï¼Œé«˜å¯¹åº”çš„æ˜¯è¡Œæ•°ã€‚</p><pre class=" language-python"><code class="language-python">img1 <span class="token operator">=</span> cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">'./test1.jpg'</span><span class="token punctuation">,</span>cv2<span class="token punctuation">.</span>IMREAD_COLOR<span class="token punctuation">)</span> tx <span class="token operator">=</span> <span class="token number">20</span>ty <span class="token operator">=</span> <span class="token number">20</span> affine_arr <span class="token operator">=</span> np<span class="token punctuation">.</span>float32<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>tx<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>ty<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> res <span class="token operator">=</span> cv2<span class="token punctuation">.</span>warpAffine<span class="token punctuation">(</span>img1<span class="token punctuation">,</span>affine_arr<span class="token punctuation">,</span><span class="token punctuation">(</span>img1<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>img1<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">,</span>img1<span class="token punctuation">)</span>cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">'res'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span> cv2<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>cv2<span class="token punctuation">.</span>destroyAllWindows<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210430123037189.png"></p><p><strong>3ã€æ—‹è½¬</strong>ï¼šå¯¹ä¸€ä¸ªå›¾åƒæ—‹è½¬è§’åº¦Î¸ï¼Œéœ€è¦ä½¿ç”¨ä¸‹é¢çš„æ—‹è½¬çŸ©é˜µã€‚<br>$$<br>\left[ \begin{matrix} cos\theta &amp; -sin\theta\ sin\theta &amp; cos\theta \end{matrix} \right]<br>$$<br>ä½†OpenCVCå…è®¸åœ¨ä»»æ„åœ°æ–¹è¿›è¡Œæ—‹è½¬ï¼Œæ‰€ä»¥çŸ©é˜µåº”è¯¥ä¸º:<br>$$<br>\left[ \begin{matrix} \alpha &amp; \beta &amp; (1-\alpha)Â·center_x-\betaÂ·center_y\ -\beta &amp; \alpha &amp; \betaÂ·center_x+(1-\alpha)Â·center_y\end{matrix} \right]<br>$$<br>å…¶ä¸­Î± = scale Â· cos Î¸ï¼Œä¸ºæ„å»ºæ—‹è½¬çŸ©é˜µï¼ŒOpenCVæä¾›äº†ä¸€ä¸ªå‡½æ•°cv2.getRotationMatrix2Dã€‚</p><pre class=" language-python"><code class="language-python">img<span class="token operator">=</span>cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">'test1.jpg'</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>rows<span class="token punctuation">,</span>cols<span class="token operator">=</span>img<span class="token punctuation">.</span>shape<span class="token comment" spellcheck="true"># è¿™é‡Œçš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ—‹è½¬ä¸­å¿ƒï¼Œç¬¬äºŒä¸ªä¸ºæ—‹è½¬è§’åº¦ï¼Œç¬¬ä¸‰ä¸ªä¸ºæ—‹è½¬åçš„ç¼©æ”¾å› å­</span><span class="token comment" spellcheck="true"># å¯ä»¥é€šè¿‡è®¾ç½®æ—‹è½¬ä¸­å¿ƒï¼Œç¼©æ”¾å› å­ï¼Œä»¥åŠçª—å£å¤§å°æ¥é˜²æ­¢æ—‹è½¬åè¶…å‡ºè¾¹ç•Œçš„é—®é¢˜</span>m<span class="token operator">=</span>cv2<span class="token punctuation">.</span>getRotationMatrix2D<span class="token punctuation">(</span><span class="token punctuation">(</span>cols<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>rows<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">45</span><span class="token punctuation">,</span><span class="token number">0.6</span><span class="token punctuation">)</span>dst<span class="token operator">=</span>cv2<span class="token punctuation">.</span>warpAffine<span class="token punctuation">(</span>img<span class="token punctuation">,</span>m<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">*</span>cols<span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">*</span>rows<span class="token punctuation">)</span><span class="token punctuation">)</span>cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">,</span>img<span class="token punctuation">)</span>cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">'dst'</span><span class="token punctuation">,</span>dst<span class="token punctuation">)</span>cv2<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>cv2<span class="token punctuation">.</span>destroyAllWindows<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/22222.png" alt="22222"></p><p><strong>4ã€ä»¿å°„å˜æ¢</strong>ï¼šåœ¨ä»¿å°„å˜æ¢ä¸­ï¼ŒåŸå›¾ä¸­æ‰€æœ‰å¹³è¡Œçº¿åœ¨ç»“æœå›¾åƒä¸­åŒæ ·å¹³è¡Œã€‚ä¸ºåˆ›å»ºè¿™ä¸ªçŸ©é˜µï¼Œéœ€è¦ä»åŸå›¾åƒä¸­æ‰¾åˆ°ä¸‰ä¸ªç‚¹ä»¥åŠä»–ä»¬åœ¨è¾“å‡ºå›¾åƒä¸­çš„ä½ç½®ï¼Œç„¶åcv2.getAffineTransForm()ä¼šåˆ›å»ºä¸€ä¸ª2X3çš„çŸ©é˜µã€‚æœ€åè¿™ä¸ªçŸ©é˜µä¼šè¢«ä¼ ç»™å‡½æ•°cv2.warpAffine()</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> cv2<span class="token keyword">import</span> numpy <span class="token keyword">as</span> npimg <span class="token operator">=</span> cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">'test1.jpg'</span><span class="token punctuation">)</span>rows<span class="token punctuation">,</span> cols<span class="token punctuation">,</span> ch <span class="token operator">=</span> img<span class="token punctuation">.</span>shape pts1 <span class="token operator">=</span> np<span class="token punctuation">.</span>float32<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>cols <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> rows <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>pts2 <span class="token operator">=</span> np<span class="token punctuation">.</span>float32<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span>cols <span class="token operator">*</span> <span class="token number">0.2</span><span class="token punctuation">,</span> rows <span class="token operator">*</span> <span class="token number">0.1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>cols <span class="token operator">*</span> <span class="token number">0.9</span><span class="token punctuation">,</span> rows <span class="token operator">*</span> <span class="token number">0.2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>cols <span class="token operator">*</span> <span class="token number">0.1</span><span class="token punctuation">,</span> rows <span class="token operator">*</span> <span class="token number">0.9</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> M <span class="token operator">=</span> cv2<span class="token punctuation">.</span>getAffineTransform<span class="token punctuation">(</span>pts1<span class="token punctuation">,</span> pts2<span class="token punctuation">)</span>dst <span class="token operator">=</span> cv2<span class="token punctuation">.</span>warpAffine<span class="token punctuation">(</span>img<span class="token punctuation">,</span> M<span class="token punctuation">,</span> <span class="token punctuation">(</span>cols<span class="token punctuation">,</span> rows<span class="token punctuation">)</span><span class="token punctuation">)</span> cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">'image'</span><span class="token punctuation">,</span> dst<span class="token punctuation">)</span>k <span class="token operator">=</span> cv2<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token keyword">if</span> k <span class="token operator">==</span> ord<span class="token punctuation">(</span><span class="token string">'s'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    cv2<span class="token punctuation">.</span>imwrite<span class="token punctuation">(</span><span class="token string">'Rachel1.jpg'</span><span class="token punctuation">,</span> dst<span class="token punctuation">)</span>    cv2<span class="token punctuation">.</span>destroyAllWindows<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p><img src="C:\Users\zhou\AppData\Roaming\Typora\typora-user-images\image-20210430130001963.png"></p><p><strong>5ã€é€è§†å˜æ¢</strong>ï¼šå¯¹äºè§†è§’å˜æ¢ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ª3x3å˜æ¢çŸ©é˜µã€‚åœ¨å˜æ¢å‰åç›´çº¿è¿˜æ˜¯ç›´çº¿ã€‚éœ€è¦åœ¨åŸå›¾ä¸Šæ‰¾åˆ°4ä¸ªç‚¹ï¼Œä»¥åŠä»–ä»¬åœ¨è¾“å‡ºå›¾ä¸Šå¯¹åº”çš„ä½ç½®ï¼Œè¿™å››ä¸ªç‚¹ä¸­ä»»æ„ä¸‰ä¸ªéƒ½ä¸èƒ½å…±çº¿ï¼Œå¯ä»¥æœ‰å‡½æ•°cv2.getPerspectiveTransform()æ„å»ºï¼Œç„¶åè¿™ä¸ªçŸ©é˜µä¼ ç»™å‡½æ•°cv2.warpPerspective()</p><p><img src="C:\Users\zhou\AppData\Roaming\Typora\typora-user-images\image-20210430130315466.png" alt="image-20210430130315466"></p><h3 id="2-3-ROIå’Œæ³›æ´ªå¡«å……"><a href="#2-3-ROIå’Œæ³›æ´ªå¡«å……" class="headerlink" title="2.3 ROIå’Œæ³›æ´ªå¡«å……"></a>2.3 ROIå’Œæ³›æ´ªå¡«å……</h3><p>å›¾åƒROIï¼ˆregion of intrest:æ„Ÿå…´è¶£åŒºåŸŸï¼‰çš„æå–å¾€å¾€æ˜¯å›¾åƒå¤„ç†ä¸­çš„ç¬¬ä¸€æ­¥ï¼Œè€Œä¸”ä¹Ÿæ˜¯éå¸¸å…³é”®çš„ä¸€æ­¥ï¼ŒROIåŒºåŸŸçš„æå–èƒ½å¤Ÿåœ¨æ¶ˆé™¤ä¸€äº›å™ªå£°çš„åŒæ—¶å‡å°‘åç»­å›¾åƒå¤„ç†çš„æ•°æ®é‡ï¼Œæ˜¯éå¸¸å¸¸ç”¨çš„æ–¹æ³•ã€‚</p><p>  <strong>ROIæœ‰ä»€ä¹ˆç”¨ï¼Ÿ</strong></p><p>  ROIå±äºIVEæŠ€æœ¯çš„ä¸€ç§ï¼ŒIVEæŒ‡çš„æ˜¯Intelligent video encoding, å³æ™ºèƒ½è§†é¢‘ç¼–ç ï¼Œ IVEæŠ€æœ¯å¯ä»¥æ ¹æ®å®¢æˆ·è¦æ±‚å¯¹è§†é¢‘è¿›è¡Œæ™ºèƒ½ç¼–ç ï¼Œå¹¶åœ¨ä¸æŸå¤±å›¾åƒè´¨é‡çš„å‰æä¸‹ï¼Œä¼˜åŒ–è§†é¢‘ç¼–ç æ€§èƒ½ï¼Œæœ€ç»ˆé™ä½ç½‘ç»œå¸¦å®½å ç”¨ç‡å’Œå‡å°‘å­˜å‚¨ç©ºé—´ã€‚</p><p>åœ¨ç›‘æ§ç”»é¢ä¸­ï¼Œæœ‰äº›ç›‘æ§åŒºåŸŸæ˜¯ä¸éœ€è¦è¢«ç›‘æ§æˆ–æ— å…³ç´§è¦ï¼Œä¾‹å¦‚å¤©ç©ºï¼Œå¢™å£ï¼Œ è‰åœ°ç­‰ç­‰ç›‘æ§å¯¹è±¡ï¼Œæ™®é€šç½‘ç»œç›‘æ§æ‘„åƒæœºå¯¹æ•´ä¸ªåŒºåŸŸè¿›è¡Œè§†é¢‘ç¼–ç ï¼ˆå‹ç¼©ï¼‰å¹¶ä¼ è¾“ï¼Œè¿™æ ·å°±ç»™ç½‘ç»œå¸¦å®½å’Œè§†é¢‘å­˜å‚¨å¸¦æ¥äº†å‹åŠ›ã€‚è€ŒROIæ™ºèƒ½è§†é¢‘ç¼–ç æŠ€æœ¯å´å¾ˆå¥½çš„è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼ŒROIåŠŸèƒ½çš„æ‘„åƒæœºå¯ä»¥è®©ç”¨æˆ·é€‰æ‹©ç”»é¢ä¸­æ„Ÿå…´è¶£çš„åŒºåŸŸï¼Œå¯ç”¨ROIåŠŸèƒ½åï¼Œé‡è¦çš„æˆ–è€…ç§»åŠ¨çš„åŒºåŸŸå°†ä¼šè¿›è¡Œé«˜è´¨é‡æ— æŸç¼–ç ï¼Œ è€Œå¯¹é‚£äº›ä¸ç§»åŠ¨ï¼Œä¸è¢«é€‰æ‹©çš„åŒºåŸŸé™ä½å…¶ç ç‡å’Œå›¾åƒè´¨é‡ï¼Œè¿›è¡Œæ ‡å‡†æ¸…æ™°åº¦è§†é¢‘å‹ç¼©ï¼Œç”šè‡³æ˜¯ä¸ä¼ è¾“è¿™éƒ¨åˆ†åŒºåŸŸè§†é¢‘ï¼Œè¾¾åˆ°èŠ‚çœç½‘ç»œå¸¦å®½å ç”¨å’Œè§†é¢‘å­˜å‚¨ç©ºé—´ã€‚  </p><p>ä¾‹å¦‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œé€šè¿‡opencvæå–å‡ºå›¾ç‰‡ä¸­çš„è·èŠ±ä¸»ä½“ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210506213240571.png"></p><h2 id="ç¬¬ä¸‰ç« -æ¨¡ç³Šæ“ä½œ"><a href="#ç¬¬ä¸‰ç« -æ¨¡ç³Šæ“ä½œ" class="headerlink" title="ç¬¬ä¸‰ç«  æ¨¡ç³Šæ“ä½œ"></a>ç¬¬ä¸‰ç«  æ¨¡ç³Šæ“ä½œ</h2><p><strong>æ¨¡ç³ŠåŸç†ï¼š</strong>åŸºäºç¦»æ•£å·ç§¯ï¼Œä¸åŒçš„å·ç§¯å¾—åˆ°ä¸åŒçš„å·ç§¯æ•ˆæœï¼Œæ¨¡ç³Šæ˜¯å·ç§¯çš„è¡¨è±¡ã€‚</p><p>å¦‚æœä½¿ç”¨äºŒç»´æ•°å­—å›¾åƒImageä½œä¸ºæˆ‘ä»¬çš„è¾“å…¥ï¼Œå°±éœ€ä½¿ç”¨äºŒç»´å·ç§¯æ ¸Kernelï¼Œåˆ™ï¼š</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/clip_image002.gif"></p><p>å·ç§¯è¿ç®—ç”±å›¾è¡¨ç¤ºï¼š</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210506214718559.png"></p><h3 id="3-1-å‡å€¼æ¨¡ç³Š"><a href="#3-1-å‡å€¼æ¨¡ç³Š" class="headerlink" title="3.1 å‡å€¼æ¨¡ç³Š"></a>3.1 å‡å€¼æ¨¡ç³Š</h3><p>å‡å€¼æ»¤æ³¢æ˜¯å…¸å‹çš„çº¿æ€§æ»¤æ³¢ç®—æ³•ï¼Œæ¨¡ç³Šæ˜¯å·ç§¯çš„ä¸€ç§è¡¨è±¡ï¼Œæ‰€æœ‰çš„æ»¤æ³¢æ¨¡æ¿éƒ½æ˜¯ä½¿å·ç§¯æ¡†è¦†ç›–åŒºåŸŸæ‰€æœ‰åƒç´ ç‚¹ä¸æ¨¡æ¿ç›¸ä¹˜åå¾—åˆ°çš„å€¼ä½œä¸ºä¸­å¿ƒåƒç´ çš„å€¼ï¼Œæ¯”å¦‚ä¸€ä¸ª3 * 3çš„æ¨¡æ¿å…¶å®å°±å¯ä»¥å¦‚ä¸‹è¡¨ç¤ºï¼š</p><p>$$<br>\frac{1}{9} \left[ \begin{matrix} 1 &amp; 1 &amp; 1\ 1 &amp; 1 &amp; 1 \ 1 &amp; 1 &amp; 1 \end{matrix} \right]<br>$$</p><p>opencvä¸­æä¾›äº†cv.blur () APå¯ä»¥ç›´æ¥å‡å€¼æ¨¡ç³Šï¼Œä¾‹å¦‚ï¼šç»è¿‡ä¸Šè¿°5*5çš„å·ç§¯æ ¸æ¨¡ç³Šå˜æ¢åï¼Œæ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210506220323051.png"></p><h3 id="3-2-ä¸­å€¼æ¨¡ç³Š"><a href="#3-2-ä¸­å€¼æ¨¡ç³Š" class="headerlink" title="3.2 ä¸­å€¼æ¨¡ç³Š"></a>3.2 ä¸­å€¼æ¨¡ç³Š</h3><p>ä¸­å€¼æ¨¡ç³Šæ–¹æ³•åœ¨å»é™¤è„‰å†²å™ªå£°ã€æ–‘ç‚¹å™ªå£°ï¼ˆspeckle noiseï¼‰ã€æ¤’ç›å™ªå£°ï¼ˆsalt-and-pepper noiseï¼‰ã€å›¾åƒæ‰«æå™ªå£°çš„åŒæ—¶åˆèƒ½ä¿ç•™å‡¸å›¾åƒè¾¹ç¼˜ç»†èŠ‚ã€‚</p><p>ä¸­å€¼æ»¤æ³¢ä¸å‡å€¼æ»¤æ³¢æ¯”è¾ƒï¼š</p><p>ä¼˜åŠ¿æ˜¯ï¼Œåœ¨å‡å€¼æ»¤æ³¢å™¨ä¸­ï¼Œç”±äºå™ªå£°æˆåˆ†è¢«æ”¾å…¥å¹³å‡è®¡ç®—ä¸­ï¼Œæ‰€ä»¥è¾“å‡ºå—åˆ°äº†å™ªå£°çš„å½±å“ï¼›è€Œåœ¨ä¸­å€¼æ»¤æ³¢å…¶ä¸­ï¼Œå™ªå£°æˆåˆ†å¾ˆéš¾é€‰ä¸Šï¼Œæ‰€ä»¥å‡ ä¹ä¸ä¼šå½±å“åˆ°è¾“å‡ºã€‚</p><p>åŠ£åŠ¿æ˜¯ï¼Œä¸­å€¼æ»¤æ³¢èŠ±è´¹çš„æ—¶é—´æ˜¯å‡å€¼æ»¤æ³¢çš„5å€ä»¥ä¸Šã€‚</p><p>æ³¨æ„ï¼šä¸­å€¼æ»¤æ³¢è™½ç„¶å¯ä»¥å…‹æœçº¿æ€§æ»¤æ³¢å™¨æ‰€å¸¦æ¥çš„å›¾åƒç»†èŠ‚æ¨¡ç³Šï¼Œä½†æ˜¯åœ¨çº¿ã€å°–é¡¶ç­‰ç»†èŠ‚å¤šçš„å›¾åƒä¸å®œç”¨ä¸­å€¼æ»¤æ³¢ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/%E4%B8%AD%E5%80%BC%E6%BB%A4%E6%B3%A2.png"></p><h3 id="3-3-é«˜æ–¯æ¨¡ç³Š"><a href="#3-3-é«˜æ–¯æ¨¡ç³Š" class="headerlink" title="3.3 é«˜æ–¯æ¨¡ç³Š"></a>3.3 é«˜æ–¯æ¨¡ç³Š</h3><p>é«˜æ–¯æ¨¡ç³Šæœ¬è´¨ä¸Šæ˜¯ä½é€šæ»¤æ³¢å™¨ï¼Œè¾“å‡ºå›¾åƒçš„æ¯ä¸ªåƒç´ ç‚¹æ˜¯åŸå›¾åƒä¸Šå¯¹åº”åƒç´ ç‚¹ä¸å‘¨å›´åƒç´ ç‚¹çš„åŠ æƒå’Œï¼ŒåŸç†å¹¶ä¸å¤æ‚ã€‚åšä¹…äº†å·ç§¯ç¥ç»ç½‘ç»œçœ‹è¿™ä¸ªåˆ†å¤–äº²åˆ‡ï¼Œå°±æ˜¯ç”¨é«˜æ–¯åˆ†å¸ƒï¼ˆæ­£æ€åˆ†å¸ƒï¼‰æƒå€¼çŸ©é˜µä¸åŸå§‹å›¾åƒçŸ©é˜µåšå·ç§¯è¿ç®—è€Œå·²ã€‚</p><p>æ­£æ€åˆ†å¸ƒæ˜¾ç„¶æ˜¯ä¸€ç§å¯å–çš„æƒé‡åˆ†é…æ¨¡å¼ï¼š</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/%E6%AD%A3%E6%80%81%E5%88%86%E5%B8%83.png"></p><p>åœ¨å›¾å½¢ä¸Šï¼Œæ­£æ€åˆ†å¸ƒæ˜¯ä¸€ç§é’Ÿå½¢æ›²çº¿ï¼Œè¶Šæ¥è¿‘ä¸­å¿ƒï¼Œå–å€¼è¶Šå¤§ï¼Œè¶Šè¿œç¦»ä¸­å¿ƒï¼Œå–å€¼è¶Šå°ã€‚è®¡ç®—å¹³å‡å€¼çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªéœ€è¦å°†â€ä¸­å¿ƒç‚¹â€ä½œä¸ºåŸç‚¹ï¼Œå…¶ä»–ç‚¹æŒ‰ç…§å…¶åœ¨æ­£æ€æ›²çº¿ä¸Šçš„ä½ç½®ï¼Œåˆ†é…æƒé‡ï¼Œå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªåŠ æƒå¹³å‡å€¼ã€‚</p><p>ä¸Šé¢çš„æ­£æ€åˆ†å¸ƒæ˜¯ä¸€ç»´çš„ï¼Œå›¾åƒéƒ½æ˜¯äºŒç»´çš„ï¼Œæ‰€ä»¥éœ€è¦äºŒç»´çš„æ­£æ€åˆ†å¸ƒã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/%E6%AD%A3%E6%80%81%E5%88%86%E5%B8%832D.png"></p><p>æ­£æ€åˆ†å¸ƒçš„å¯†åº¦å‡½æ•°å«åšâ€œé«˜æ–¯å‡½æ•°â€ï¼ˆGaussian functionï¼‰ã€‚å®ƒçš„ä¸€ç»´å½¢å¼æ˜¯ï¼š</p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/3-1.png" style="zoom:50%;" /><p>å…¶ä¸­ï¼ŒÎ¼æ˜¯xçš„å‡å€¼ï¼ŒÏƒæ˜¯xçš„æ–¹å·®ã€‚å› ä¸ºè®¡ç®—å¹³å‡å€¼çš„æ—¶å€™ï¼Œä¸­å¿ƒç‚¹å°±æ˜¯åŸç‚¹ï¼Œæ‰€ä»¥Î¼ç­‰äº0ã€‚</p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/3-2.png" style="zoom:50%;" /><p>æ ¹æ®ä¸€ç»´é«˜æ–¯å‡½æ•°ï¼Œå¯ä»¥æ¨å¯¼å¾—åˆ°äºŒç»´é«˜æ–¯å‡½æ•°ï¼š</p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/3-3.png" style="zoom:50%;" /><p>æœ‰äº†è¿™ä¸ªå‡½æ•° ï¼Œå°±å¯ä»¥è®¡ç®—æ¯ä¸ªç‚¹çš„æƒé‡äº†ã€‚</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">import</span> cv2img <span class="token operator">=</span> cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">'lena.png'</span><span class="token punctuation">)</span>img_ <span class="token operator">=</span> cv2<span class="token punctuation">.</span>GaussianBlur<span class="token punctuation">(</span>img<span class="token punctuation">,</span> ksize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">,</span> sigmaX<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> sigmaY<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">'Source image'</span><span class="token punctuation">,</span>img<span class="token punctuation">)</span>cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">'blur image'</span><span class="token punctuation">,</span>img_<span class="token punctuation">)</span>cv2<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210507094629011.png"></p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾åƒå¤„ç† </tag>
            
            <tag> Opencv </tag>
            
            <tag> Python </tag>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>FreeRTOSåœ¨STM32ä¸Šçš„åº”ç”¨</title>
      <link href="/2020/04/09/FreeRTOSOnStm32/"/>
      <url>/2020/04/09/FreeRTOSOnStm32/</url>
      
        <content type="html"><![CDATA[<h1 id="FreeRTOSåœ¨STM32ä¸Šçš„åº”ç”¨"><a href="#FreeRTOSåœ¨STM32ä¸Šçš„åº”ç”¨" class="headerlink" title="FreeRTOSåœ¨STM32ä¸Šçš„åº”ç”¨"></a>FreeRTOSåœ¨STM32ä¸Šçš„åº”ç”¨</h1><h2 id="ç¬¬ä¸€ç« -ä»»åŠ¡ç®¡ç†"><a href="#ç¬¬ä¸€ç« -ä»»åŠ¡ç®¡ç†" class="headerlink" title="ç¬¬ä¸€ç«  ä»»åŠ¡ç®¡ç†"></a>ç¬¬ä¸€ç«  ä»»åŠ¡ç®¡ç†</h2><p>åœ¨ FreeRTOS ä¸­ï¼Œæ¯ä¸ªæ‰§è¡Œçº¿ç¨‹éƒ½è¢«ç§°ä¸ºâ€ä»»åŠ¡â€ã€‚åœ¨åµŒå…¥å¼ç¤¾åŒºä¸­ï¼Œå¯¹æ­¤å¹¶æ²¡æœ‰ä¸€ä¸ªå…¬å…çš„æœ¯è¯­ï¼Œä½†æ›´å–œæ¬¢ç”¨â€ä»»åŠ¡â€è€Œä¸æ˜¯â€çº¿ç¨‹â€ï¼Œå› ä¸ºä»ä»¥å‰çš„ç»éªŒæ¥çœ‹ï¼Œçº¿ç¨‹å…·æœ‰æ›´å¤šçš„ç‰¹å®šå«ä¹‰ã€‚</p><h3 id="1-1-ä»»åŠ¡å‡½æ•°"><a href="#1-1-ä»»åŠ¡å‡½æ•°" class="headerlink" title="1.1 ä»»åŠ¡å‡½æ•°"></a>1.1 ä»»åŠ¡å‡½æ•°</h3><p>ä»»åŠ¡æ˜¯ç”± C è¯­è¨€å‡½æ•°å®ç°çš„ã€‚å”¯ä¸€ç‰¹åˆ«çš„åªæ˜¯ä»»åŠ¡çš„å‡½æ•°åŸå‹ï¼Œå…¶å¿…é¡»è¿”å›voidï¼Œè€Œä¸”å¸¦æœ‰ä¸€ä¸ªvoid æŒ‡é’ˆå‚æ•°ã€‚å‡½æ•°åŸå‹å¦‚ä¸‹ï¼š</p><pre class=" language-c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">ATaskFunction</span><span class="token punctuation">(</span> <span class="token keyword">void</span> <span class="token operator">*</span>pvParameters <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>æ¯ä¸ªä»»åŠ¡éƒ½æ˜¯åœ¨è‡ªå·±æƒé™èŒƒå›´å†…çš„ä¸€ä¸ªå°ç¨‹åºã€‚å…¶å…·æœ‰ç¨‹åºå…¥å£ï¼Œé€šå¸¸ä¼šè¿è¡Œåœ¨ä¸€ä¸ªæ­»å¾ªç¯ä¸­ï¼Œä¹Ÿä¸ä¼šé€€å‡ºã€‚FreeRTOS ä»»åŠ¡ä¸å…è®¸ä»¥ä»»ä½•æ–¹å¼ä»å®ç°å‡½æ•°ä¸­è¿”å›â€”â€”å®ƒä»¬ç»ä¸èƒ½æœ‰ä¸€æ¡â€returnâ€è¯­å¥ï¼Œä¹Ÿä¸èƒ½æ‰§è¡Œåˆ°å‡½æ•°æœ«å°¾ã€‚å¦‚æœä¸€ä¸ªä»»åŠ¡ä¸å†éœ€è¦ï¼Œå¯ä»¥æ˜¾å¼åœ°å°†å…¶åˆ é™¤ã€‚ä¸€ä¸ªä»»åŠ¡å‡½æ•°å¯ä»¥ç”¨æ¥åˆ›å»ºè‹¥å¹²ä¸ªä»»åŠ¡â€”â€”åˆ›å»ºå‡ºçš„ä»»åŠ¡å‡æ˜¯ç‹¬ç«‹çš„æ‰§è¡Œå®ä¾‹ï¼Œæ‹¥æœ‰å±äºè‡ªå·±çš„æ ˆç©ºé—´ï¼Œä»¥åŠå±äºè‡ªå·±çš„è‡ªåŠ¨å˜é‡(æ ˆå˜é‡)ï¼Œå³ä»»åŠ¡å‡½æ•°æœ¬èº«å®šä¹‰çš„å˜é‡ã€‚</p><pre class=" language-c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">ATaskFunction</span><span class="token punctuation">(</span> <span class="token keyword">void</span> <span class="token operator">*</span>pvParameters <span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/* å¯ä»¥åƒæ™®é€šå‡½æ•°ä¸€æ ·å®šä¹‰å˜é‡ã€‚ç”¨è¿™ä¸ªå‡½æ•°åˆ›å»ºçš„æ¯ä¸ªä»»åŠ¡å®ä¾‹éƒ½æœ‰ä¸€ä¸ªå±äºè‡ªå·±çš„iVarialbleExampleå˜é‡ã€‚ä½†å¦‚æœiVariableExampleè¢«å®šä¹‰ä¸ºstaticï¼Œè¿™ä¸€ç‚¹åˆ™ä¸æˆç«‹ â€“ è¿™ç§æƒ…å†µä¸‹åªå­˜åœ¨ä¸€ä¸ªå˜é‡ï¼Œæ‰€æœ‰çš„ä»»åŠ¡å®ä¾‹å°†ä¼šå…±äº«è¿™ä¸ªå˜é‡ã€‚ */</span>    <span class="token keyword">int</span> iVariableExample <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/* ä»»åŠ¡é€šå¸¸å®ç°åœ¨ä¸€ä¸ªæ­»å¾ªç¯ä¸­ã€‚ */</span>    <span class="token keyword">for</span><span class="token punctuation">(</span> <span class="token punctuation">;</span><span class="token punctuation">;</span> <span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/* å®Œæˆä»»åŠ¡åŠŸèƒ½çš„ä»£ç å°†æ”¾åœ¨è¿™é‡Œã€‚ */</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/* å¦‚æœä»»åŠ¡çš„å…·ä½“å®ç°ä¼šè·³å‡ºä¸Šé¢çš„æ­»å¾ªç¯ï¼Œåˆ™æ­¤ä»»åŠ¡å¿…é¡»åœ¨å‡½æ•°è¿è¡Œå®Œä¹‹å‰åˆ é™¤ã€‚ä¼ å…¥NULLå‚æ•°è¡¨ç¤ºåˆ é™¤æ˜¯å½“å‰ä»»åŠ¡*/</span>    <span class="token function">vTaskDelete</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><h3 id="1-2-é¡¶å±‚ä»»åŠ¡çŠ¶æ€"><a href="#1-2-é¡¶å±‚ä»»åŠ¡çŠ¶æ€" class="headerlink" title="1.2 é¡¶å±‚ä»»åŠ¡çŠ¶æ€"></a>1.2 é¡¶å±‚ä»»åŠ¡çŠ¶æ€</h3><p>åº”ç”¨ç¨‹åºå¯ä»¥åŒ…å«å¤šä¸ªä»»åŠ¡ã€‚å¦‚æœè¿è¡Œåº”ç”¨ç¨‹åºçš„å¾®æ§åˆ¶å™¨åªæœ‰ä¸€ä¸ªæ ¸[core]ï¼Œé‚£ä¹ˆåœ¨ä»»æ„ç»™å®šæ—¶é—´ï¼Œå®é™…ä¸Šåªä¼šæœ‰ä¸€ä¸ªä»»åŠ¡è¢«æ‰§è¡Œã€‚è¿™å°±æ„å‘³ç€ä¸€ä¸ªä»»åŠ¡å¯ä»¥æœ‰ä¸€ä¸ªæˆ–ä¸¤ä¸ªçŠ¶æ€ï¼Œå³è¿è¡ŒçŠ¶æ€å’Œéè¿è¡ŒçŠ¶æ€ã€‚</p><p>å½“æŸä¸ªä»»åŠ¡å¤„äºè¿è¡Œæ€æ—¶ï¼Œå¤„ç†å™¨å°±æ­£åœ¨æ‰§è¡Œå®ƒçš„ä»£ç ã€‚å½“ä¸€ä¸ªä»»åŠ¡å¤„äºéè¿è¡Œæ€æ—¶ï¼Œè¯¥ä»»åŠ¡è¿›è¡Œä¼‘çœ ï¼Œå®ƒçš„æ‰€æœ‰çŠ¶æ€éƒ½è¢«å¦¥å–„ä¿å­˜ï¼Œä»¥ä¾¿åœ¨ä¸‹ä¸€æ¬¡è°ƒè¯•å™¨å†³å®šè®©å®ƒè¿›å…¥è¿è¡Œæ€æ—¶å¯ä»¥æ¢å¤æ‰§è¡Œã€‚å½“ä»»åŠ¡æ¢å¤æ‰§è¡Œæ—¶ï¼Œå…¶å°†ç²¾ç¡®åœ°ä»ç¦»å¼€è¿è¡Œæ€æ—¶æ­£å‡†å¤‡æ‰§è¡Œçš„é‚£ä¸€æ¡æŒ‡ä»¤å¼€å§‹æ‰§è¡Œã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/%E9%A1%B6%E5%B1%82%E4%BB%BB%E5%8A%A1.png"></p><p>FreeRTOS çš„è°ƒåº¦å™¨æ˜¯èƒ½è®©ä»»åŠ¡åˆ‡å…¥åˆ‡å‡ºçš„å”¯ä¸€å®ä½“ã€‚ä»»åŠ¡ä»éè¿è¡Œæ€è½¬ç§»åˆ°è¿è¡Œæ€è¢«ç§°ä¸ºâ€åˆ‡æ¢å…¥æˆ–åˆ‡å…¥[switched in]â€æˆ–â€äº¤æ¢å…¥[swapped in]â€ã€‚ç›¸åï¼Œä»»åŠ¡ä»è¿è¡Œæ€è½¬ç§»åˆ°éè¿è¡Œæ€è¢«ç§°ä¸ºâ€åˆ‡æ¢å‡ºæˆ–åˆ‡å‡º[switchedout]â€æˆ–â€äº¤æ¢å‡º[swapped out]â€ã€‚</p><h3 id="1-3-åˆ›å»ºä»»åŠ¡"><a href="#1-3-åˆ›å»ºä»»åŠ¡" class="headerlink" title="1.3 åˆ›å»ºä»»åŠ¡"></a>1.3 åˆ›å»ºä»»åŠ¡</h3><p>xTaskCreate() API å‡½æ•°ï¼š</p><pre class=" language-c"><code class="language-c">BaseType_t <span class="token function">xTaskCreate</span><span class="token punctuation">(</span>        TaskFunction_t pxTaskCode<span class="token punctuation">,</span>    <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span> <span class="token keyword">const</span> pcName<span class="token punctuation">,</span>        <span class="token comment" spellcheck="true">/*lint !e971 Unqualified char types are allowed for strings and single characters only. */</span>    <span class="token keyword">const</span> configSTACK_DEPTH_TYPE usStackDepth<span class="token punctuation">,</span>    <span class="token keyword">void</span> <span class="token operator">*</span> <span class="token keyword">const</span> pvParameters<span class="token punctuation">,</span>    UBaseType_t uxPriority<span class="token punctuation">,</span>    TaskHandle_t <span class="token operator">*</span> <span class="token keyword">const</span> pxCreatedTask <span class="token punctuation">)</span></code></pre><table><thead><tr><th align="center">å‚æ•°</th><th align="center">æè¿°</th></tr></thead><tbody><tr><td align="center">pxTaskCode</td><td align="center">ä»»åŠ¡åªæ˜¯æ°¸ä¸é€€å‡ºçš„C å‡½æ•°ï¼Œå®ç°å¸¸é€šå¸¸æ˜¯ä¸€ä¸ªæ­»å¾ªç¯ã€‚å‚æ•°pvTaskCode åªä¸€ä¸ªæŒ‡å‘ä»»åŠ¡çš„å®ç°å‡½æ•°çš„æŒ‡é’ˆ(æ•ˆæœä¸Šä»…ä»…æ˜¯å‡½æ•°)ã€‚</td></tr><tr><td align="center">pcName</td><td align="center">å…·æœ‰æè¿°æ€§çš„ä»»åŠ¡åã€‚è¿™ä¸ªå‚æ•°ä¸ä¼šè¢«FreeRTOS ä½¿ç”¨ã€‚å…¶åªæ˜¯å•çº¯åœ°ç”¨äºè¾…åŠ©è°ƒè¯•ã€‚</td></tr><tr><td align="center">usStackDepth</td><td align="center">usStackDepth å€¼ç”¨äºå‘Šè¯‰å†…æ ¸ä¸ºå®ƒåˆ†é…å¤šå¤§çš„æ ˆç©ºã€‚æ ˆæ·±åº¦ä¹˜ä»¥æ ˆå®½åº¦çš„ç»“æœåƒä¸‡ä¸èƒ½è¶…è¿‡ä¸€ä¸ªsize_t ç±»å‹å˜é‡æ‰€èƒ½è¡¨è¾¾çš„æœ€å¤§å€¼ã€‚</td></tr><tr><td align="center">pvParameters</td><td align="center">ä»»åŠ¡å‡½æ•°æ¥å—ä¸€ä¸ªæŒ‡å‘void çš„æŒ‡é’ˆ(void*)ã€‚pvParameters çš„å€¼å³æ˜¯ä¼ é€’åˆ°ä»»åŠ¡ä¸­çš„å€¼ã€‚</td></tr><tr><td align="center">uxPriority</td><td align="center">æŒ‡å®šä»»åŠ¡æ‰§è¡Œçš„ä¼˜å…ˆçº§ã€‚ä¼˜å…ˆçº§çš„å–å€¼èŒƒå›´å¯ä»¥ä»æœ€ä½ä¼˜å…ˆçº§0 åˆ°æœ€é«˜ä¼˜å…ˆçº§(configMAX_PRIORITIES â€“ 1)ã€‚</td></tr><tr><td align="center">pxCreatedTask</td><td align="center">pxCreatedTask ç”¨äºä¼ å‡ºä»»åŠ¡çš„å¥æŸ„ã€‚è¿™ä¸ªå¥æŸ„å°†åœ¨API è°ƒç”¨ä¸­å¯¹è¯¥åˆ›å»ºå‡ºæ¥çš„ä»»åŠ¡è¿›è¡Œå¼•ç”¨ï¼Œæ¯”å¦‚æ”¹å˜ä»»åŠ¡ä¼˜å…ˆçº§ï¼Œæˆ–è€…åˆ é™¤ä»»åŠ¡ã€‚å¦‚æœåº”ç”¨ç¨‹åºä¸­ä¸ä¼šç”¨åˆ°è¿™ä¸ªä»»åŠ¡çš„å¥æŸ„ï¼Œåˆ™pxCreatedTask å¯ä»¥è¢«è®¾ä¸ºNULLã€‚</td></tr></tbody></table><p>è¿”å›å€¼ï¼š</p><p><code>pdTRUE</code>ï¼šè¡¨æ˜ä»»åŠ¡åˆ›å»ºæˆåŠŸã€‚</p><p><code>errCOULD_NOT_ALLOCATE_REQUIRED_MEMORY</code>: ç”±äºå†…å­˜å †ç©ºé—´ä¸è¶³ï¼ŒFreeRTOS æ— æ³•åˆ†é…è¶³å¤Ÿçš„ç©ºé—´æ¥ä¿å­˜ä»»åŠ¡ç»“æ„æ•°æ®å’Œä»»åŠ¡æ ˆï¼Œå› æ­¤æ— æ³•åˆ›å»ºä»»åŠ¡ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> FreeRTOS </tag>
            
            <tag> STM32 </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœºå™¨è§†è§‰çš„ç®—æ³•ç ”ç©¶</title>
      <link href="/2020/04/07/%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E5%88%86%E7%B1%BB%E5%9B%BE%E7%89%87/"/>
      <url>/2020/04/07/%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E5%88%86%E7%B1%BB%E5%9B%BE%E7%89%87/</url>
      
        <content type="html"><![CDATA[<h1 id="æœºå™¨è§†è§‰çš„ç®—æ³•ç ”ç©¶"><a href="#æœºå™¨è§†è§‰çš„ç®—æ³•ç ”ç©¶" class="headerlink" title="æœºå™¨è§†è§‰çš„ç®—æ³•ç ”ç©¶"></a>æœºå™¨è§†è§‰çš„ç®—æ³•ç ”ç©¶</h1><p><em>æœ¬æ–‡è¯¦ç»†è§£é‡Šã€ŠåŸºäºæœºå™¨è§†è§‰çš„ä»¿ç”ŸæœºæŒã€‹ä¸­ç”¨åˆ°çš„å·ç§¯ç¥ç»ç½‘ç»œç®—æ³•</em></p><p>æœºå™¨è§†è§‰ç³»ç»Ÿå°±æ˜¯åˆ©ç”¨æœºå™¨ä»£æ›¿äººçœ¼ä½œå‡ºå„ç§æµ‹é‡å’Œåˆ¤æ–­ã€‚å®ƒç»¼åˆäº†å…‰å­¦ã€æœºæ¢°ã€ç”µå­ã€è®¡ç®—æœºè½¯ç¡¬ä»¶ç­‰æ–¹é¢çš„æŠ€æœ¯ï¼Œæ¶‰åŠåˆ°è®¡ç®—æœºã€å›¾åƒå¤„ç†ã€æ¨¡å¼è¯†åˆ«ã€äººå·¥æ™ºèƒ½ã€ä¿¡å·å¤„ç†ã€å…‰æœºç”µä¸€ä½“åŒ–ç­‰å¤šä¸ªé¢†åŸŸã€‚æœ¬ç« å°†ä»‹ç»ä»¥æ‰‹åŠ¿åˆ†ç±»ä¸ºåŸºç¡€çš„æœºå™¨è§†è§‰ç®—æ³•ã€‚è¿ç”¨æœºå™¨è§†è§‰é¢†åŸŸä¸­æœ€å¸¸è§å·ç§¯ç¥ç»ç½‘ç»œæ¥ä»¥åˆ†ç±»ä¸‰ç§â€œçŸ³å¤´â€ã€â€œå‰ªåˆ€â€ã€â€œå¸ƒâ€ä¸‰ç§æ‰‹åŠ¿ã€‚æœ¬ç« çš„ä¸»è¦å†…å®¹åŒ…æ‹¬å·ç§¯ç¥ç»ç½‘ç»œæ¦‚è¿°ã€æ‰‹åŠ¿æ ·æœ¬çš„é‡‡é›†åŠå¤„ç†ã€æ­å»ºå·ç§¯ç¥ç»ç½‘ç»œã€ä»¿çœŸç»“æ„åŠåˆ†æã€‚</p><h2 id="1ã€å·ç§¯ç¥ç»ç½‘ç»œæ¦‚è¿°"><a href="#1ã€å·ç§¯ç¥ç»ç½‘ç»œæ¦‚è¿°" class="headerlink" title="1ã€å·ç§¯ç¥ç»ç½‘ç»œæ¦‚è¿°"></a>1ã€å·ç§¯ç¥ç»ç½‘ç»œæ¦‚è¿°</h2><p>å·ç§¯ç¥ç»ç½‘ç»œï¼ˆConvolutional Neural Network, CNNï¼‰æ˜¯ä¸€ç§å‰é¦ˆç¥ç»ç½‘ç»œï¼Œå¯¹äºå¤§å‹å›¾åƒå¤„ç†æœ‰å‡ºè‰²è¡¨ç°ã€‚å·ç§¯ç¥ç»ç½‘ç»œç”±ä¸€ä¸ªæˆ–å¤šä¸ªå·ç§¯å±‚å’Œé¡¶ç«¯çš„å…¨è¿é€šå±‚ç»„æˆï¼ŒåŒæ—¶ä¹ŸåŒ…æ‹¬å…³è”æƒé‡å’Œæ± åŒ–å±‚ï¼ˆpooling layerï¼‰ã€‚å·ç§¯è¿ç®—ä½¿å¾—å·ç§¯ç¥ç»ç½‘ç»œèƒ½å¤Ÿåˆ©ç”¨è¾“å…¥æ•°æ®çš„äºŒç»´ç»“æ„ã€‚åœ¨å›¾åƒè¯†åˆ«æ–¹é¢é¢†åŸŸï¼Œå·ç§¯ç¥ç»ç½‘ç»œä¸å…¶ä»–æ·±åº¦å­¦ä¹ ç»“æ„ç›¸æ¯”èƒ½å¤Ÿç»™å‡ºæ›´å¥½çš„ç»“æœã€‚</p><h3 id="1-1ã€-å·ç§¯ç¥ç»ç½‘ç»œæ•°å­¦æ¨¡å‹"><a href="#1-1ã€-å·ç§¯ç¥ç»ç½‘ç»œæ•°å­¦æ¨¡å‹" class="headerlink" title="1.1ã€ å·ç§¯ç¥ç»ç½‘ç»œæ•°å­¦æ¨¡å‹"></a>1.1ã€ å·ç§¯ç¥ç»ç½‘ç»œæ•°å­¦æ¨¡å‹</h3><p>å·ç§¯ç½‘ç»œæ˜¯ä¸€ç§ä¸“é—¨ç”¨äºå¤„ç†å…·æœ‰å·²çŸ¥çš„ã€ç½‘æ ¼çŠ¶æ‹“æ‰‘æ•°æ®çš„ç¥ç»ç½‘ç»œã€‚æ—¢ç„¶è¢«ç§°ä¸ºâ€œå·ç§¯ç¥ç»ç½‘ç»œâ€ï¼Œåˆ™è¡¨ç¤ºåœ¨è¿ç®—è¿‡ç¨‹ä¸­é‡‡ç”¨ç§°ä¸ºå·ç§¯è¿ç®—(convolutions)ã€‚å·ç§¯æ˜¯ä¸€ç§ç‰¹æ®Šçš„çº¿æ€§æ“ä½œã€‚è®°ä¸ºå·ç§¯è¿ç®—ç¬¦ï¼Œåˆ™å·ç§¯è¿ç®—å…¬å¼å†™ä½œ</p><p>â€‹     <img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210310111526774.png"></p><p>åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œéœ€è¦å¯¹å¤šç»´æ•°æ®è¿›è¡Œå·ç§¯è¿ç®—ï¼Œå› æ­¤ä¸Šå¼ä¹Ÿéœ€è¦æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œæ‰©å±•ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½¿ç”¨äºŒç»´æ•°å­—å›¾åƒImageä½œä¸ºæˆ‘ä»¬çš„è¾“å…¥ï¼Œå°±éœ€ä½¿ç”¨äºŒç»´å·ç§¯æ ¸Kernelï¼Œåˆ™ï¼š</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210310111548796.png">)</p><p>å·ç§¯è¿ç®—æ˜¯å¯äº¤æ¢çš„ï¼Œè¿™æ„å‘³ç€ä¸Šå¼å¯ä»¥ç­‰ä»·ä¸ºï¼š</p><p> <img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210310111604623.png"></p><p>å·ç§¯è¿ç®—ç”±è¡¨ç¤ºï¼š</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/clip_image002.gif"></p><p>å·ç§¯æ“ä½œä¸»è¦åˆ©ç”¨äº†å‚æ•°å…±äº«ï¼Œç¨€ç–äº¤äº’å’Œç­‰å˜è¡¨ç¤ºçš„é‡è¦æ€æƒ³ï¼Œä»¥åŠå¤„ç†å¯å˜å¤§å°çš„è¾“å…¥æ”¹è¿›æœºå™¨å­¦ä¹ ç³»ç»Ÿã€‚</p><p>å·ç§¯è¿ç®—åï¼Œå°±è·å¾—äº†å›¾åƒçš„ç‰¹å¾(feature map)ï¼Œè‹¥ç›´æ¥ç”¨è¯¥ç‰¹å¾å›¾åƒå»åšåˆ†ç±»åˆ™é¢ä¸´å·¨å¤§è®¡ç®—é‡çš„æŒ‘æˆ˜ã€‚ä¾‹å¦‚ï¼šæœ‰ä¸€å¼ 128<em>128ä¸ªåƒç´ çš„å›¾åƒï¼Œå‡è®¾é€šè¿‡å·ç§¯è¿ç®—å¾—åˆ°äº†500ä¸ªå®šä¹‰åœ¨8</em>8è¾“å…¥ä¸Šçš„ç‰¹å¾ï¼Œæ¯ä¸ªç‰¹å¾å’Œå›¾åƒå·ç§¯ä¼šå¾—åˆ°ä¸€ä¸ªå·ç§¯ç‰¹å¾ï¼Œåˆ™ä¸€å…±æœ‰(128-8+1)<em>(128-8)=14641ç»´åº¦çš„å·ç§¯ç‰¹å¾ï¼Œæ‰€ä»¥æ¯ä¸ªæ ·æœ¬ä¼šå¾—åˆ°ä¸€ä¸ª14641</em>500=732 0500ç»´çš„å·ç§¯ç‰¹å¾å‘é‡ã€‚å­¦ä¹ ä¸€ä¸ªæ‹¥æœ‰è¶…è¿‡ä¸ƒç™¾ä¸‡ç‰¹å¾è¾“å…¥çš„åˆ†ç±»å™¨ååˆ†ä¸ä¾¿ï¼Œå¹¶ä¸”å®¹æ˜“å‡ºç°è¿‡æ‹Ÿåˆ(over-fitting)ã€‚å› æ­¤éœ€è¦å¦ä¸€ç§æ“ä½œâ€”â€”æ± åŒ–ï¼ˆPoolingï¼‰ï¼Œæ± åŒ–çš„ç»“æœå¯ä»¥ä½¿å¾—ç‰¹å¾å‡å°‘ï¼Œå‚æ•°å‡å°‘ã€‚</p><p>å¸¸è§çš„æ± åŒ–æ–¹å¼æœ‰å¦‚ä¸‹ä¸‰ç§ï¼š</p><p><strong>1)</strong> <strong>å‡å€¼æ± åŒ–</strong>  å¹³å‡æ± åŒ–å–æŸä¸ªé‚»åŸŸçš„å¹³å‡å€¼ä½œä¸ºè¯¥åŒºåŸŸçš„è¾“å‡ºå€¼ã€‚</p><p><strong>2)</strong> <strong>æœ€å¤§å€¼æ± åŒ–</strong>  æœ€å¤§å€¼æ± åŒ–åˆ™æ˜¯æŸä¸ªé‚»åŸŸå†…çš„æœ€å¤§å€¼ä½œä¸ºè¾“å‡ºå€¼ã€‚</p><p><strong>3)</strong> <strong>æ¦‚ç‡æ± åŒ–</strong>  ä»‹äºå‰ä¸¤è€…ä¹‹é—´ï¼Œå¯¹åƒç´ æŒ‰ç…§æ•°å€¼å¤§å°èµ‹äºˆæ¦‚ç‡ï¼Œå†æŒ‰ç…§æ¦‚ç‡è¿›è¡Œè¾“å‡ºã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/clip_image004.gif"></p><h3 id="1-2ã€-å·ç§¯ç¥ç»ç½‘ç»œåŸºç¡€ç»“æ„"><a href="#1-2ã€-å·ç§¯ç¥ç»ç½‘ç»œåŸºç¡€ç»“æ„" class="headerlink" title="1.2ã€ å·ç§¯ç¥ç»ç½‘ç»œåŸºç¡€ç»“æ„"></a>1.2ã€ å·ç§¯ç¥ç»ç½‘ç»œåŸºç¡€ç»“æ„</h3><p>è®¡ç®—æœºå°†è¾“å…¥å›¾åƒç†è§£ä¸ºè¾“å…¥è‹¥å¹²ä¸ªçŸ©é˜µã€‚å·ç§¯ç¥ç»ç½‘ç»œç”±å·ç§¯å±‚ã€æ± åŒ–å±‚ã€å…¨è¿æ¥å±‚ä¸‰éƒ¨åˆ†æ„æˆï¼Œå·ç§¯å±‚å¯ä»¥æå–å›¾åƒä¸­çš„å±€éƒ¨ç‰¹å¾ï¼›æ± åŒ–å±‚ç”¨æ¥å¤§å¹…é™ä½å‚æ•°é‡çº§(é™ç»´)ï¼›å…¨è¿æ¥å±‚ç±»ä¼¼ä¼ ç»Ÿç¥ç»ç½‘ç»œçš„éƒ¨åˆ†ï¼Œç”¨æ¥è¾“å‡ºæƒ³è¦çš„ç»“æœã€‚ä½†å·ç§¯ç¥ç»ç½‘ç»œå¹¶ä¸ä»…ä»…åªæœ‰ä¸‰ä¸ªå±‚çº§ï¼Œä¾‹å¦‚ä¸‹å›¾å°±æ˜¯ç”±è¾“å…¥å±‚ã€å·ç§¯å±‚ã€æ± åŒ–å±‚ã€å·ç§¯å±‚ã€æ± åŒ–å±‚ã€å…¨è¿æ¥å±‚å åŠ ç»„æˆï¼Œè¿™å°±æ„æˆäº†å¦ä¸€ç±»ç»å…¸çš„å·ç§¯ç¥ç»ç½‘ç»œæ¨¡å‹ï¼Œå³æœ¬è¯¾é¢˜ä¸­ç”¨ä»¥æ‰‹åŠ¿åˆ†ç±»çš„å·ç§¯ç¥ç»ç½‘ç»œæ¨¡å‹ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/clip_image006.gif"></p><p><strong>ï¼ˆ1ï¼‰è¾“å…¥å±‚</strong></p><p>å·ç§¯ç¥ç»ç½‘ç»œç”¨äºå›¾åƒè¯†åˆ«æ—¶ï¼Œè¾“å…¥å±‚å³ä¸ºæ•°å­—å›¾åƒï¼Œè€Œæ•°å­—å›¾åƒå®é™…ä¸Šæ˜¯å·¨å¤§çš„æ•°å­—çŸ©é˜µã€‚çŸ©é˜µä¸­çš„æ¯ä¸ªæ•°å­—å¯¹åº”äºå…¶åƒç´ çš„äº®åº¦ã€‚åœ¨RGBæ¨¡å‹ä¸­ï¼Œå½©è‰²å›¾åƒç”±ä¸‰ä¸ªçŸ©é˜µç»„æˆï¼Œåˆ†åˆ«å¯¹åº”ä¸‰ä¸ªé¢œè‰²é€šé“â€”â€”çº¢ï¼Œç»¿ï¼Œè“ã€‚è€Œåœ¨é»‘ç™½å›¾åƒä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªçŸ©é˜µã€‚çŸ©é˜µä¸­çš„æ¯ä¸ªæ•°å­—çš„å–å€¼åŒºé—´éƒ½æ˜¯0åˆ°255ã€‚</p><p><strong>ï¼ˆ2ï¼‰å·ç§¯å±‚â€”â€”æå–ç‰¹å¾</strong></p><p>è¿™ä¸€å±‚çš„ä¸»è¦éƒ¨åˆ†å°±æ˜¯è¿›è¡Œå·ç§¯æ“ä½œï¼Œå‰é¢å·²ç»ä»‹ç»äº†å·ç§¯çš„æ¦‚å¿µï¼Œå·ç§¯å±‚å®é™…ä¸Šå°±æ˜¯å®ç°äº†è¿™ä¸ªå·ç§¯çš„è®¡ç®—è¿‡ç¨‹ï¼Œå·ç§¯å°†è¾“å…¥çŸ©é˜µä¸ç¬¬äºŒä¸ªçŸ©é˜µï¼ˆå·ç§¯æ ¸ï¼‰è¿›è¡Œå·ç§¯è¿ç®—ã€‚å·ç§¯è¿‡ç¨‹å¦‚ä¸‹æ‰€ç¤ºã€‚é¦–å…ˆï¼Œå°†å·ç§¯æ ¸å åŠ åœ¨å›¾åƒæ•°ç»„çš„å·¦ä¸Šéƒ¨ã€‚æ¥ä¸‹æ¥ï¼Œæ‰€å¯¹åº”å›¾ç‰‡çš„å­éƒ¨åˆ†ä¸å·ç§¯æ ¸è¿›è¡Œå·ç§¯è¿ç®—ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå°†å·ç§¯æ ¸ä¸å›¾åƒçš„å·¦ä¸Šéƒ¨å…ƒç´ ç›¸ä¹˜ï¼Œä¾æ­¤ç±»æ¨ã€‚ç„¶åï¼Œå°†è¿™äº›ç»“æœç›¸åŠ æ¥ç”Ÿæˆä¸€ä¸ªå€¼ã€‚æ¥ç€ï¼Œå°†å·ç§¯æ ¸åœ¨å›¾åƒä¸Šç§»åŠ¨ä¸€æ®µè·ç¦»ï¼ˆç§°ä¸ºæ­¥å¹…ï¼‰ï¼Œå¹¶é‡å¤è¯¥è¿‡ç¨‹ã€‚æ­¤è¿‡ç¨‹çš„è¾“å‡ºæ˜¯ä¸€ä¸ªå…·æœ‰ä¸å›¾åƒæ•°ç»„ä¸åŒç»´æ•°çš„æ–°çŸ©é˜µï¼Œä¾‹å¦‚ï¼Œæœ‰ä¸€ä¸ªå¸¸è§çš„3*3å·ç§¯æ ¸(æ‹‰æ™®æ‹‰æ–¯ç®—å­)ï¼š </p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210310111648024.png"></p><p>ç»è¿‡å·ç§¯è¿ç®—åï¼Œå¯ä»¥æ˜æ˜¾çœ‹å‡ºï¼Œå›¾åƒçš„è¾¹ç¼˜ç‰¹å¾å·²ç»è¢«æå–å‡ºæ¥ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/clip_image008.gif"></p><p><strong>ï¼ˆ3ï¼‰æ± åŒ–å±‚â€”â€”æ•°æ®é™ç»´</strong></p><p>æ± åŒ–è¿‡ç¨‹çš„ä½œç”¨æ˜¯é™ä½æ•°æ®çš„ç»´åº¦ã€‚åœ¨ç»è¿‡å·ç§¯è¿ç®—ä¹‹åçš„å›¾ä¸­ï¼Œå¯¹1000*1000åƒç´ çš„å›¾ç‰‡è¿›è¡Œæ± åŒ–ï¼Œæ± åŒ–çª—å£ä¸º10Ã—10ï¼Œæœ€ç»ˆå°†å…¶é™ç»´æˆä¸ºä¸€ä¸ª100Ã—100å¤§å°çš„ç‰¹å¾å›¾ã€‚ä¹‹æ‰€ä»¥éœ€è¦è¿›è¡Œæ± åŒ–ï¼Œæ˜¯å› ä¸ºå³ä½¿åšå®Œäº†å·ç§¯è¿ç®—ï¼Œå›¾åƒä»ç„¶å¾ˆå¤§ï¼Œæ‰€ä»¥ä¸ºäº†é™ä½æ•°æ®ç»´åº¦ï¼Œå°±éœ€è¦è¿›è¡Œæ± åŒ–ã€‚æ± åŒ–å±‚ç›¸æ¯”å·ç§¯å±‚å¯ä»¥æ›´æœ‰æ•ˆçš„é™ä½æ•°æ®ç»´åº¦ï¼Œè¿™ä¹ˆåšä¸ä½†å¯ä»¥å¤§å¤§å‡å°‘è¿ç®—é‡ï¼Œè¿˜å¯ä»¥æœ‰æ•ˆçš„é¿å…è¿‡æ‹Ÿåˆ[20]ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/clip_image010.gif"></p><p><strong>ï¼ˆ4ï¼‰å…¨è¿æ¥å±‚</strong></p><p>åœ¨CNNç»“æ„ä¸­ï¼Œç»è¿‡æœ€åä¸€ä¸ªå·ç§¯å±‚å’Œæœ€åä¸€æ± åŒ–å±‚åã€‚è¾“å‡ºç»“æœä»ç„¶æ˜¯å›¾åƒã€‚æ€ä¹ˆèƒ½å°†å›¾åƒå‘é‡å‘¢ï¼Ÿæ± åŒ–åè¾“å‡ºçš„æ˜¯20ä¸ª12<em>12çš„å›¾åƒï¼Œæ€ä¹ˆå˜æˆ1</em>100çš„å‘é‡ï¼Ÿè¿™å°±éœ€è¦å…¨è¿æ¥å±‚ã€‚å…¨è¿æ¥å±‚çš„è¾“å‡ºæ˜¯æ‰€æœ‰è¾“å…¥å€¼ä¸å¯¹åº”çš„æƒå€¼ä¹˜ç§¯çš„å’Œã€‚å…¨è¿æ¥å±‚çš„è¾“å‡ºå°±æ˜¯12<em>12</em>20ä¸ªè¾“å…¥å€¼ä¸å…¶æƒå€¼ä¹˜ç§¯çš„å’Œã€‚è¿™æ ·å°±æŠŠä¸€å¼ å›¾é«˜åº¦æµ“ç¼©æˆä¸€ä¸ªæ•°äº†ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/clip_image012.gif"></p><h2 id="2ã€-æ‰‹åŠ¿æ ·æœ¬é‡‡é›†åŠå¤„ç†"><a href="#2ã€-æ‰‹åŠ¿æ ·æœ¬é‡‡é›†åŠå¤„ç†" class="headerlink" title="2ã€ æ‰‹åŠ¿æ ·æœ¬é‡‡é›†åŠå¤„ç†"></a>2ã€ æ‰‹åŠ¿æ ·æœ¬é‡‡é›†åŠå¤„ç†</h2><p>åœ¨æ·±åº¦å­¦ä¹ æ¡†æ¶ä¸­ï¼Œæœ€éš¾å¾—çš„å°±æ˜¯æ ·æœ¬æ•°æ®ã€‚æœ¬æ¬¡å®éªŒéœ€è¦æœ€å°‘ä¸¤ä¸‡å¼ 100*100åƒç´ çš„å„ç±»æ‰‹åŠ¿å›¾ç‰‡ï¼Œæ˜¾ç„¶é‡‡å–ç›´æ¥æ‹æ‘„çš„æ–¹å¼æ˜¯éš¾ä»¥å®Œæˆå¦‚æ­¤å¤§é‡çš„å·¥ä½œã€‚æ‰€ä»¥æœ¬ç»„é‡‡å–ä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬ç¨‹åºä»è§†é¢‘è‡ªåŠ¨æˆªå–å„ç±»æ‰‹åŠ¿å›¾ç‰‡ã€‚å…·ä½“æ“ä½œä¸ºï¼Œå…ˆå¼€å¯æ‘„åƒå¤´å¹¶åˆ›å»ºä¸€ä¸ªæ‘„åƒå¤´æ˜¾ç¤ºçª—å£ï¼Œæ¯éš”100msä»è§†é¢‘ä¸­æˆªå–ä¸€å¼ å›¾ç‰‡ä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶å¤¹ï¼Œç…§ç‰‡å‘½åä¸ºimageX.jpg ï¼Œå…¶ä¸­Xè¡¨ç¤ºåºå·ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/clip_image014.jpg"></p><p>è¯¾é¢˜ä¸­æ‰€é‡‡é›†çš„å››ç±»æ ·æœ¬ä¸€å…±ä¸º20000å¼ å›¾å½©è‰²å›¾ç‰‡ï¼Œæ¯ç±»å›¾ç‰‡çº¦5000å¼ ï¼Œåˆ†åˆ«å°†â€œçŸ³å¤´â€â€œå‰ªåˆ€â€â€œå¸ƒâ€â€œå¹²æ‰°æ‰‹åŠ¿â€å››ç§å›¾ç‰‡ä¿å­˜åˆ°rockã€scissorsã€paperã€otherså››ä¸ªæ–‡ä»¶å¤¹ä¸­ã€‚ä¸€ä¸ªå…·æœ‰è‰¯å¥½è¯†åˆ«ç‡çš„ç³»ç»Ÿå¾€å¾€ç¦»ä¸å¼€ä¼˜ç§€çš„å‰æœŸå¤„ç†ï¼Œä½†æˆ‘ä»¬è¿½æ±‚çš„ä¸æ˜¯ä¸€ä¸ªä¾èµ–äºå‰æœŸè‰¯å¥½å¤„ç†çš„è¯†åˆ«ç³»ç»Ÿï¼Œä¸ºæ­¤æˆ‘ä»¬åšäº†ç°åº¦å¤„ç†å’Œå›¾åƒäºŒå€¼åŒ–å¤„ç†ã€‚ä»¥ä¸€å¼ â€œå¸ƒâ€æ‰‹åŠ¿å±•ç¤ºå¤„ç†è¿‡ç¨‹ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/clip_image016.gif"></p><p>å…¶ä¸­ç°åº¦å¤„ç†å…¬å¼ä¸ºï¼š </p><p>Gray = R âˆ— 0.299 + G âˆ— 0.587 + B âˆ— 0.114</p><p>å…¶ä¸­ï¼šRã€Gã€B åˆ†åˆ«ä»£è¡¨çº¢ç»¿è“ä¸‰ç§é¢œè‰²ï¼›</p><h2 id="3ã€æ„å»ºå·ç§¯ç¥ç»ç½‘ç»œ"><a href="#3ã€æ„å»ºå·ç§¯ç¥ç»ç½‘ç»œ" class="headerlink" title="3ã€æ„å»ºå·ç§¯ç¥ç»ç½‘ç»œ"></a>3ã€æ„å»ºå·ç§¯ç¥ç»ç½‘ç»œ</h2><h3 id="3-1ã€å·ç§¯å±‚"><a href="#3-1ã€å·ç§¯å±‚" class="headerlink" title="3.1ã€å·ç§¯å±‚"></a>3.1ã€å·ç§¯å±‚</h3><p>å·ç§¯è¿ç®—çš„è¿‡ç¨‹ä¸ºï¼š</p><p>(1) å·ç§¯æ ¸ç»•æ ¸å†…ä¸­å¿ƒå…ƒç´ é¡ºæ—¶é’ˆæ—‹è½¬180åº¦ï¼›</p><p>(2) å°†å·ç§¯æ ¸çš„ä¸­å¿ƒå…ƒç´ å¯¹å‡†éœ€è¦å¤„ç†çš„å›¾åƒåƒç´ ï¼›</p><p>(3) å°†éœ€è¦å¤„ç†çš„å›¾åƒåƒç´ å€¼ä½œä¸ºæƒé‡ä¸æ—‹è½¬åçš„å·ç§¯æ ¸ç›¸ä¹˜ï¼›</p><p>(4) å°†ä¸Šä¸€æ­¥å¾—åˆ°çš„å€¼è¿›è¡Œæ±‚å’Œå¾—åˆ°æœ€ç»ˆç»“æœä½œä¸ºè¯¥å›¾åƒåƒç´ çš„è¾“å‡ºåƒç´ å€¼ã€‚</p><p>æœ¬æ–‡é€‰æ‹©ç”¨ç¦»æ•£å·ç§¯æ ¸æ¥å¯¹å›¾åƒè¿›è¡Œå¤„ç†ï¼Œå› ä¸ºç¦»æ•£å·ç§¯æ ¸è¿›è¡Œçš„åªæ˜¯ä¼˜å…ˆæ¬¡çš„æ•´æ•°åŠ æ³•è¿ç®—ã€‚æ²¡æœ‰æµ®ç‚¹è¿ç®—ï¼Œè¿™ä½¿å¾—è®¡ç®—æœºå¾ˆå¿«çš„è®¡ç®—å‡ºç»“æœã€‚ä¸ºæœ¬è¯¾é¢˜ä¸­æ‰€ç”¨çš„ç¬¬ä¸€å±‚ç½‘ç»œï¼ŒåŒ…æ‹¬å·ç§¯å±‚å’Œæ± åŒ–å±‚ã€‚</p><pre class=" language-python"><code class="language-python"><span class="token keyword">with</span> tf<span class="token punctuation">.</span>name_scope<span class="token punctuation">(</span><span class="token string">'conv1'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>      W_conv1 <span class="token operator">=</span> weight_variable<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">]</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">"weight"</span><span class="token punctuation">)</span>      b_conv1 <span class="token operator">=</span> bias_variable<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">]</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'bias'</span><span class="token punctuation">)</span>      h_conv1 <span class="token operator">=</span> tf<span class="token punctuation">.</span>nn<span class="token punctuation">.</span>relu<span class="token punctuation">(</span>          tf<span class="token punctuation">.</span>nn<span class="token punctuation">.</span>conv2d<span class="token punctuation">(</span>x_image<span class="token punctuation">,</span> W_conv1<span class="token punctuation">,</span> strides<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> padding<span class="token operator">=</span><span class="token string">"SAME"</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'conv'</span><span class="token punctuation">)</span>          <span class="token operator">+</span> b_conv1<span class="token punctuation">)</span>      h_pool1 <span class="token operator">=</span> tf<span class="token punctuation">.</span>nn<span class="token punctuation">.</span>max_pool<span class="token punctuation">(</span>h_conv1<span class="token punctuation">,</span> ksize<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> strides<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                               padding<span class="token operator">=</span><span class="token string">"SAME"</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">"pool"</span><span class="token punctuation">)</span></code></pre><p>å…ˆè®¾è®¡æƒé‡çŸ©é˜µä¸º[3,3,1,16]ï¼Œè®¾å®šåç½®çŸ©é˜µä¸º[16], tf.nn. conv2d()å‡½æ•°å³å¯å®Œæˆå·ç§¯æ“ä½œã€‚é¦–å…ˆï¼Œx_imageå³ä¸ºè¾“å…¥å›¾åƒï¼ŒW_conv1å³ä¸ºå·ç§¯æ ¸(è¿™é‡Œä¸æƒé‡çŸ©é˜µç›¸åŒ)ï¼Œstridesæ˜¯å·ç§¯æ­¥å¹…ï¼Œåœ¨è¿™è®¾å®šä¸º[1,1,1,1]ã€‚Paddingæ˜¯å®šä¹‰å…ƒç´ è¾¹æ¡†å’Œå…ƒç´ å†…å®¹ä¹‹é—´çš„ç©ºé—´ï¼Œåªèƒ½æ˜¯â€SAMEâ€ï¼ˆè¾¹ç¼˜å¡«å……ï¼‰æˆ–è€…â€VALIDâ€ï¼ˆè¾¹ç¼˜ä¸å¡«å……ï¼‰ã€‚tf.nn.relu()æ˜¯çº¿æ€§æ•´æµå‡½æ•°ï¼Œå…¶ä½œç”¨æ˜¯å°†è¾“å…¥å°äº0çš„å€¼å¹…å€¼ä¸º0ï¼Œè¾“å…¥å¤§äº0çš„å€¼ä¸å˜ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/clip_image020.gif"></p><h3 id="3-2ã€æ± åŒ–å±‚"><a href="#3-2ã€æ± åŒ–å±‚" class="headerlink" title="3.2ã€æ± åŒ–å±‚"></a>3.2ã€æ± åŒ–å±‚</h3><p>åœ¨é€šè¿‡å·ç§¯å¾—åˆ°äº†ç‰¹å¾äº†åï¼Œéœ€è¦åˆ©ç”¨è¿™äº›ç‰¹å¾æ¥è¿›è¡Œåˆ†ç±»ã€‚ä½†è¿™æ ·äº§ç”Ÿçš„è®¡ç®—é‡æ˜¯å·¨å¤§çš„ã€‚ä¸ºäº†å‡å°‘è®¡ç®—é‡åˆåŒæ—¶ä¿ç•™åŸå›¾åƒçš„ä¿¡æ¯ï¼Œå°±éœ€è¦å¯¹ä¸åŒä½ç½®çš„ç‰¹å¾è¿›è¡Œèšåˆç»Ÿè®¡ï¼Œè¿™ç§èšåˆæ“ä½œå°±å«ä¸ºæ± åŒ–ï¼ˆpoolingï¼‰æ“ä½œã€‚ç›®å‰å¸¸ç”¨çš„æ± åŒ–æ“ä½œä¸ºå¹³å‡æ± åŒ–ï¼ˆAverage poolingï¼‰å’Œæœ€å¤§å€¼æ± åŒ–ï¼ˆmax poolingï¼‰ï¼Œåœ¨æœ¬è¯¾é¢˜ä¸­ï¼Œé€‰æ‹©æœ€å¤§å€¼æ± åŒ–å–é‡‡æ ·çª—å£æ‰€æœ‰å…ƒç´ çš„æœ€å¤§å€¼ä½œä¸ºæ± åŒ–å±‚çš„å€¼ï¼Œè¯¥æ–¹æ³•ç®€å•æ˜“æ“ä½œè€Œä¸”æ³›åŒ–èƒ½å¼ºã€‚</p><p>tf.nn.max_pooling()å‡½æ•°å®ç°äº†æœ€å¤§æ± åŒ–æ“ä½œã€‚h_conv1æ˜¯éœ€è¦æ± åŒ–çš„è¾“å…¥ï¼Œå¯ä»¥çœ‹å‡º h_conv1æ˜¯å·ç§¯å±‚è¾“å‡ºçš„ç‰¹å¾å›¾åƒï¼ˆfeature mapï¼‰ï¼Œä¾ç„¶æ˜¯[batch, height, width, channels]è¿™æ ·çš„å›¾åƒã€‚Ksizeæ˜¯æ± åŒ–çª—å£çš„å¤§å°ï¼Œæ˜¯ä¸€ä¸ªå››ç»´å‘é‡ï¼Œä¸€èˆ¬æ˜¯[1, ç‰¹å¾å›¾åƒçš„height, ç‰¹å¾å›¾åƒçš„width, 1]ï¼Œä¸éœ€è¦å¯¹batchå’Œchannelsä¸Šåšæ± åŒ–ï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªç»´åº¦è®¾ä¸º1ã€‚Stridesä¸å·ç§¯ç›¸ä¼¼ï¼Œæ˜¯çª—å£åœ¨æ¯ä¸€ä¸ªç»´åº¦ä¸Šæ»‘åŠ¨çš„æ­¥é•¿ã€‚Paddingä¹Ÿå’Œå·ç§¯ç±»ä¼¼ï¼Œå¯ä»¥å–â€™VALIDâ€™ æˆ–è€…â€™SAMEâ€™ã€‚</p><h3 id="3-3ã€æ¿€æ´»å‡½æ•°"><a href="#3-3ã€æ¿€æ´»å‡½æ•°" class="headerlink" title="3.3ã€æ¿€æ´»å‡½æ•°"></a>3.3ã€æ¿€æ´»å‡½æ•°</h3><p>ç¥ç»ç½‘ç»œä¸­çš„æ¯ä¸ªç¥ç»å…ƒèŠ‚ç‚¹æ¥å—ä¸Šä¸€å±‚ç¥ç»å…ƒçš„è¾“å‡ºå€¼ä½œä¸ºæœ¬ç¥ç»å…ƒçš„è¾“å…¥å€¼ï¼Œå¹¶å°†è¾“å…¥å€¼ä¼ é€’ç»™ä¸‹ä¸€å±‚ï¼Œè¾“å…¥å±‚ç¥ç»å…ƒèŠ‚ç‚¹ä¼šå°†è¾“å…¥å±æ€§å€¼ç›´æ¥ä¼ é€’ç»™ä¸‹ä¸€å±‚ï¼ˆéšå±‚æˆ–è¾“å‡ºå±‚ï¼‰ã€‚åœ¨å¤šå±‚ç¥ç»ç½‘ç»œä¸­ï¼Œä¸Šå±‚èŠ‚ç‚¹çš„è¾“å‡ºå’Œä¸‹å±‚èŠ‚ç‚¹çš„è¾“å…¥ä¹‹é—´å…·æœ‰ä¸€ä¸ªå‡½æ•°å…³ç³»ï¼Œè¿™ä¸ªå‡½æ•°ç§°ä¸ºæ¿€æ´»å‡½æ•°ï¼ˆåˆç§°æ¿€åŠ±å‡½æ•°ï¼‰ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/clip_image022.gif"></p><p>ç¥ç»ç½‘ç»œä¸»è¦é‡‡ç”¨sigmoidå‡½æ•°æˆ–è€…tanhå‡½æ•°ï¼Œè¾“å‡ºæœ‰ç•Œï¼Œå¾ˆå®¹æ˜“å……å½“ä¸‹ä¸€å±‚çš„è¾“å…¥ã€‚æœ¬æ–‡é‡‡ç”¨çš„å°±æ˜¯sigmoidå‡½æ•°ï¼Œå…¶è¡¨è¾¾å¼ä¸ºï¼š</p><p>Sigmoidçš„å‡ ä½•å›¾åƒå’Œå¯¼æ•°å›¾åƒå¦‚ä¸‹å›¾æ‰€ç¤º</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210310111750894.png"></p><h2 id="4ã€ä»¿çœŸç»“æœä¸åˆ†æ"><a href="#4ã€ä»¿çœŸç»“æœä¸åˆ†æ" class="headerlink" title="4ã€ä»¿çœŸç»“æœä¸åˆ†æ"></a>4ã€ä»¿çœŸç»“æœä¸åˆ†æ</h2><p>ç¥ç»ç½‘ç»œçš„åŸå§‹è¾“å‡ºï¼ˆä¹Ÿå°±æ˜¯ç»“ç‚¹çš„ç›´æ¥è¾“å‡ºç»“æœï¼‰ä¸æ˜¯ä¸€ä¸ªæ¦‚ç‡å€¼ï¼Œå®è´¨ä¸Šåªæ˜¯è¾“å…¥çš„æ•°å€¼åšäº†å¤æ‚çš„åŠ æƒå’Œä¸éçº¿æ€§å¤„ç†ä¹‹åçš„ä¸€ä¸ªå€¼è€Œå·²ï¼Œæ•…è€Œéœ€è¦ä½¿ç”¨æ¿€æ´»å‡½æ•°æ¥è¾“å‡ºå˜æˆæ¦‚ç‡åˆ†å¸ƒã€‚æœ¬ç»„ä½¿ç”¨çš„Sigmoidå‡½æ•°ï¼Œå®ƒçš„ç‰¹æ€§æ˜¯å°†ä¸€ä¸ªæ•°å‹ç¼©åˆ°0-1ä¹‹é—´ï¼Œå‹ç¼©åçš„ç»“æœå°±å¯ä»¥ä½œä¸ºäºŒåˆ†ç±»ä¸­æŸä¸€ç±»çš„æ¦‚ç‡å€¼ï¼Œç”±äºæ˜¯äºŒåˆ†ç±»é—®é¢˜ï¼Œæ‰€ä»¥å¦ä¸€ç±»çš„æ¦‚ç‡å€¼è‡ªç„¶å°±æ˜¯1âˆ’Sigmoid(y)ï¼Œè¿™å°±è¡¨å¾å‡ºäºŒåˆ†ç±»çš„æ¦‚ç‡ã€‚</p><h3 id="4-1ã€äº¤å‰ç†µæŸå¤±"><a href="#4-1ã€äº¤å‰ç†µæŸå¤±" class="headerlink" title="4.1ã€äº¤å‰ç†µæŸå¤±"></a>4.1ã€äº¤å‰ç†µæŸå¤±</h3><p>è¿™ç§æ¦‚ç‡åˆ†å¸ƒå°±å¯ä»¥ç”±äº¤å‰ç†µè¡¨ç¤ºï¼Œäº¤å‰ç†µåˆ»ç”»çš„æ˜¯å®é™…è¾“å‡ºï¼ˆæ¦‚ç‡ï¼‰ä¸æœŸæœ›è¾“å‡ºï¼ˆæ¦‚ç‡ï¼‰çš„è·ç¦»ï¼Œä¹Ÿå°±æ˜¯äº¤å‰ç†µæŸå¤±çš„å€¼è¶Šå°ï¼Œä¸¤ä¸ªæ¦‚ç‡åˆ†å¸ƒå°±è¶Šæ¥è¿‘ã€‚å¯ä»¥çœ‹å‡ºå½“è®­ç»ƒæ ·æœ¬åˆ°è¾¾ç¬¬25%æ—¶ï¼Œäº¤å‰ç†µæŸå¤±å°±å·²ç»å°äº0.5äº†ã€‚å½“è®­ç»ƒæ ·æœ¬è¾¾åˆ°100%ï¼Œäº¤å‰ç†µæŸå¤±å·²ç»å°äº0.001äº†ã€‚è¯´æ˜æ­¤æ¨¡å‹çš„å·²ç»å¾ˆæ¥è¿‘çœŸå®è¾“å‡ºã€‚æ€§èƒ½æ»¡è¶³è¯¾é¢˜éœ€æ±‚ã€‚å¦å¤–ç”±ä¸‹å›¾å¯ä»¥çœ‹å‡ºè®­ç»ƒå‡†ç¡®ç‡åœ¨è®­ç»ƒæ ·æœ¬åˆ°è¾¾25%æ—¶å·²ç»æ¥è¿‘0.95ï¼Œåœ¨è®­ç»ƒæ ·æœ¬è¾¾åˆ°100%æ—¶ï¼Œå‡†ç¡®ç‡æ¥è¿‘99.9%ï¼Œè¯´æ˜æ­¤æ¨¡å‹çš„å‡†ç¡®æ€§ä¹Ÿè¾¾åˆ°äº†è¯¾é¢˜éœ€æ±‚ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/clip_image026.gif"></p><h3 id="4-2ã€-å‡†ç¡®ç‡éªŒè¯"><a href="#4-2ã€-å‡†ç¡®ç‡éªŒè¯" class="headerlink" title="4.2ã€ å‡†ç¡®ç‡éªŒè¯"></a>4.2ã€ å‡†ç¡®ç‡éªŒè¯</h3><p>å»ºç«‹æ¨¡å‹ä¹‹åï¼Œå¯¹äºä¸åŒæ‰‹åŠ¿å‡†ç¡®ç‡è¿›è¡Œæµ‹è¯•ã€‚ç”±ç»“æœå¯ä»¥çœ‹å‡ºï¼Œå››ç§æ‰‹åŠ¿çš„è¯†åˆ«å‡†ç¡®ç‡åŸºæœ¬æ§åˆ¶95%ä»¥ä¸Šï¼Œè™½ç„¶ç”±äºç°åœºç¯å¢ƒå…‰ç…§ç­‰åŸå› çš„å¹²æ‰°ï¼Œæœ‰æ—¶å‡†ç¡®ç‡ä½äº90%ï¼Œä½†æ˜¯èƒ½å¾ˆå¿«è°ƒæ•´ï¼Œå°†å‡†ç¡®ç‡æ§åˆ¶åœ¨92%ä»¥ä¸Šã€‚ç”±æ­¤å¯è§ã€‚æ­¤æ¨¡å‹åœ¨å‡†ç¡®ç‡ä¸Šå®Œå…¨ç¬¦åˆè¦æ±‚ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210310111803999.png"></p><h2 id="5ã€æœ¬ç« å°ç»“"><a href="#5ã€æœ¬ç« å°ç»“" class="headerlink" title="5ã€æœ¬ç« å°ç»“"></a>5ã€æœ¬ç« å°ç»“</h2><p>æœ¬ç« ä¸»è¦ä»‹ç»äº†ä»¥å·ç§¯ç¥ç»ç½‘ç»œä¸ºæ ¸å¿ƒçš„æœºå™¨è§†è§‰ç®—æ³•ï¼Œä»å·ç§¯ç¥ç»ç½‘ç»œçš„æ•°å­¦åŸç†å¼€å§‹ï¼Œå†åˆ°å·ç§¯ç¥ç»ç½‘ç»œçš„åŸºç¡€ç»“æ„ã€‚æ­å»ºäº†ä¸€ä¸ªç”¨äºåˆ†ç±»æ‰‹åŠ¿å›¾ç‰‡çš„æ·±åº¦å­¦ä¹ æ¨¡å‹ã€‚ç”±æœ€ç»ˆçš„ä»¿çœŸä»¿çœŸç»“æœå¯ä»¥çœ‹å‡ºï¼šæœ€ç»ˆæ¨¡å‹éšç€è®­ç»ƒæ—¶é—´å¢é•¿ï¼Œè¯¯å·®é€æ¸å‡å°è‡³0.005ä»¥ä¸‹ã€‚åœ¨æ­¤æ¨¡å‹ä¸­ï¼Œç”±20%çš„æµ‹è¯•é›†å¯å¾—å‡ºï¼Œå…¶é¢„æµ‹ç²¾å‡†åº¦çº¦ä¸º92%ã€‚ç”±æ­¤å¯ä»¥å¾—å‡ºï¼Œæ­¤æ¨¡å‹åŸºæœ¬æ»¡è¶³è¯¾é¢˜è¦æ±‚ã€‚å¯ä»¥ç”¨äºæœºæ¢°æ‰‹æŒåœ¨æ‰‹åŠ¿è¯†åˆ«ä¸Šçš„è¦æ±‚ã€‚</p><p><strong>æºç è¯¦è§ï¼š<a href="https://github.com/Zwyywz/Undergraduate-graduation-project">https://github.com/Zwyywz/Undergraduate-graduation-project</a></strong></p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•ç ”ç©¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> å·ç§¯ç¥ç»ç½‘ç»œ </tag>
            
            <tag> TensorFlow </tag>
            
            <tag> å›¾åƒåˆ†ç±» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±åº¦å­¦ä¹ ä¸TensorFlow</title>
      <link href="/2020/04/01/DeepLearningAndTensorFlow/"/>
      <url>/2020/04/01/DeepLearningAndTensorFlow/</url>
      
        <content type="html"><![CDATA[<h1 id="æ·±åº¦å­¦ä¹ ä¸TensorFlow"><a href="#æ·±åº¦å­¦ä¹ ä¸TensorFlow" class="headerlink" title="æ·±åº¦å­¦ä¹ ä¸TensorFlow"></a>æ·±åº¦å­¦ä¹ ä¸TensorFlow</h1><h2 id="ç¬¬ä¸€ç« -çº¿æ€§å›å½’"><a href="#ç¬¬ä¸€ç« -çº¿æ€§å›å½’" class="headerlink" title="ç¬¬ä¸€ç«  çº¿æ€§å›å½’"></a>ç¬¬ä¸€ç«  çº¿æ€§å›å½’</h2><h3 id="1ã€ç¥ç»å…ƒæ¨¡å‹"><a href="#1ã€ç¥ç»å…ƒæ¨¡å‹" class="headerlink" title="1ã€ç¥ç»å…ƒæ¨¡å‹"></a>1ã€ç¥ç»å…ƒæ¨¡å‹</h3><p>é¦–å…ˆï¼Œæˆ‘ä»¬æŠŠç”Ÿç‰©ç¥ç»å…ƒçš„æ¨¡å‹æŠ½è±¡ä¸‹å›¾æ‰€ç¤ºçš„æ•°å­¦ç»“æ„:ç¥ç»å…ƒè¾“å…¥å‘é‡x=[x<sub>1</sub>, x<sub>2</sub>, x<sub>3</sub>â€¦x<sub>n</sub>],ç»è¿‡å‡½æ•°æ˜ å°„: $f_{\theta}: \boldsymbol{x}$ â†’yåå¾—åˆ°è¾“å‡ºyï¼Œå…¶ä¸­${\theta}$ä¸ºå‡½æ•°fè‡ªèº«çš„å‚æ•°ã€‚è€ƒè™‘ä¸€ç§ç®€åŒ–çš„æƒ…å†µï¼Œå³çº¿æ€§å˜æ¢: $f(\boldsymbol{x})=\boldsymbol{w}^{\mathrm{T}} \boldsymbol{x}+b$ï¼Œ å±•å¼€ä¸ºæ ‡é‡å½¢å¼: </p><p>$f(x)=w_{1} x_{1}+w_{2} x_{2}+w_{3} x_{3}+\cdots+w_{n} x_{n}+b$</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210401182603937.png"></p><p>å‚æ•°$\theta$={w<sub>1</sub>,w<sub>2</sub>,w<sub>3</sub>w<sub>4</sub>ï¼Œw<sub>4</sub>â€¦â€¦.w<sub>n</sub>}ç¡®å®šäº†ç¥ç»å…ƒçš„çŠ¶æ€ï¼Œé€šè¿‡å›ºå®š${\theta}$å‚æ•°å³å¯ç¡®å®šæ­¤ç¥ç»å…ƒçš„å¤„ç†é€»è¾‘ã€‚å½“ç¥ç»å…ƒè¾“å…¥èŠ‚ç‚¹æ•°n= 1(å•è¾“å…¥)æ—¶ï¼Œç¥ç»å…ƒæ•°å­¦æ¨¡å‹å¯è¿›ä¸€æ­¥ç®€åŒ–ä¸º: $y=w x+b$</p><p>æ­¤æ—¶æˆ‘ä»¬å¯ä»¥ç»˜åˆ¶å‡ºç¥ç»å…ƒçš„è¾“å‡ºyå’Œè¾“å…¥xçš„å˜åŒ–è¶‹åŠ¿ï¼Œéšç€è¾“å…¥ä¿¡å·xçš„å¢åŠ ï¼Œè¾“å‡ºç”µå¹³yä¹Ÿéšä¹‹çº¿æ€§å¢åŠ ï¼Œå…¶ä¸­wå‚æ•°å¯ä»¥ç†è§£ä¸ºç›´çº¿çš„æ–œç‡, bå‚æ•°ä¸ºç›´çº¿çš„åç½®ã€‚</p><p>å¯¹äºæŸä¸ªç¥ç»å…ƒæ¥è¯´ï¼Œxå’Œyçš„æ˜ å°„å…³ç³»fw.bæ˜¯æœªçŸ¥ä½†ç¡®å®šçš„ã€‚ä¸¤ç‚¹å³å¯ç¡®å®šä¸€æ¡ç›´çº¿ï¼Œä¸ºäº†ä¼°è®¡wå’Œbçš„å€¼ï¼Œæˆ‘ä»¬åªéœ€ä»ç›´çº¿ä¸Šé‡‡æ ·ä»»æ„2ä¸ªæ•°æ®ç‚¹:$\left(x^{(1)}, y^{(1)}\right),\left(x^{(2)}, y^{(2)}\right)$å³å¯ï¼Œå…¶ä¸­ä¸Šæ ‡è¡¨ç¤ºæ•°æ®ç‚¹ç¼–å·:</p><p> $y^{(1)}=w x^{(1)}+b$</p><p> $y^{(2)}=w x^{(2)}+b$</p><p>å½“$\left(x^{(1)}, y^{(1)}\right)\neq\left(x^{(2)}, y^{(2)}\right)$æ—¶ï¼Œå³å¯è§£å‡ºw,bã€‚å¯ä»¥çœ‹åˆ°ï¼Œåªéœ€è¦è§‚æµ‹ä¸¤ä¸ªä¸åŒæ•°æ®ç‚¹ï¼Œå°±å¯å®Œç¾æ±‚è§£å•è¾“å…¥çº¿æ€§ç¥ç»å…ƒæ¨¡å‹çš„å‚æ•°ï¼Œå¯¹äºNè¾“å…¥çš„çº¿æ€§ç¥ç»å…ƒæ¨¡å‹ï¼Œåªéœ€è¦é‡‡æ ·N + 1ç»„ä¸åŒæ•°æ®ç‚¹å³å¯ï¼Œä¼¼ä¹çº¿æ€§ç¥ç»å…ƒæ¨¡å‹å¯ä»¥å¾—åˆ°å®Œç¾è§£å†³ã€‚é‚£ä¹ˆä¸Šè¿°æ–¹æ³•å­˜åœ¨ä»€ä¹ˆé—®é¢˜å‘¢?</p><p>è€ƒè™‘å¯¹äºä»»ä½•é‡‡æ ·ç‚¹ï¼Œéƒ½æœ‰å¯èƒ½å­˜åœ¨è§‚æµ‹è¯¯å·®ï¼Œæˆ‘ä»¬å‡è®¾è§‚æµ‹è¯¯å·®å˜é‡$\epsilon$å±äºå‡å€¼ä¸ºÎ¼,æ–¹å·®ä¸ºÏƒ2çš„æ­£æ€åˆ†å¸ƒ(NormalDistributionï¼Œ æˆ–é«˜æ–¯åˆ†å¸ƒï¼ŒGaussian Distibution):$\mathcal{N}\left(\mu, \sigma^{2}\right)$ï¼Œ åˆ™é‡‡æ ·åˆ°çš„æ ·æœ¬ç¬¦åˆ:<br>$$<br>y=w x+b+\epsilon, \epsilon \sim \mathcal{N}\left(\mu, \sigma^{2}\right)<br>$$<br>ä¸€æ—¦å¼•å…¥è§‚æµ‹è¯¯å·®åï¼Œå³ä½¿ç®€å•å¦‚çº¿æ€§æ¨¡å‹ï¼Œå¦‚æœä»…é‡‡æ ·ä¸¤ä¸ªæ•°æ®ç‚¹ï¼Œå¯èƒ½ä¼šå¸¦æ¥è¾ƒå¤§ä¼°è®¡åå·®ã€‚å›¾ä¸­çš„æ•°æ®ç‚¹å‡å¸¦æœ‰è§‚æµ‹è¯¯å·®ï¼Œå¦‚æœåŸºäºè“è‰²çŸ©å½¢å—çš„ä¸¤ä¸ªæ•°æ®ç‚¹è¿›è¡Œä¼°è®¡ï¼Œåˆ™è®¡ç®—å‡ºçš„è“è‰²è™šçº¿ä¸çœŸå®æ©™è‰²ç›´çº¿å­˜åœ¨è¾ƒå¤§åå·®ã€‚ä¸ºäº†å‡å°‘è§‚æµ‹è¯¯å·®å¼•å…¥çš„ä¼°è®¡åå·®ï¼Œå¯ä»¥é€šè¿‡é‡‡æ ·å¤šç»„æ•°æ®æ ·æœ¬é›†åˆï¼š</p><p>$$<br>D={\left(x^{(1)}, y^{(1)}\right),\left(x^{(2)}, y^{(2)}\right), \ldots,\left(x^{(n)}, y^{(n)}\right)}<br>$$</p><p>ç„¶åæ‰¾å‡ºä¸€æ¡â€œæœ€å¥½â€çš„ç›´çº¿ï¼Œä½¿å¾—å®ƒå°½å¯èƒ½åœ°è®©æ‰€æœ‰é‡‡æ ·ç‚¹åˆ°è¯¥ç›´çº¿çš„è¯¯å·®ä¹‹å’Œæœ€å°ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210401185614687.png"></p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œç”±äºè§‚æµ‹è¯¯å·®eçš„å­˜åœ¨ï¼Œå½“æˆ‘ä»¬é‡‡é›†äº†å¤šä¸ªæ•°æ®ç‚¹Dæ—¶ï¼Œå¯èƒ½ä¸å­˜åœ¨ä¸€æ¡ç›´çº¿å®Œç¾çš„ç©¿è¿‡æ‰€æœ‰é‡‡æ ·ç‚¹ã€‚é€€è€Œæ±‚å…¶æ¬¡ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½æ‰¾åˆ°ä¸€æ¡æ¯”è¾ƒâ€œå¥½â€çš„ä½äºé‡‡æ ·ç‚¹ä¸­é—´çš„ç›´çº¿ã€‚é‚£ä¹ˆæ€ä¹ˆè¡¡é‡â€œå¥½â€ä¸â€œä¸å¥½â€å‘¢?ä¸€ä¸ªå¾ˆè‡ªç„¶çš„æƒ³æ³•å°±æ˜¯ï¼Œæ±‚å‡ºå½“å‰æ¨¡å‹çš„æ‰€æœ‰é‡‡æ ·ç‚¹ä¸Šçš„é¢„æµ‹å€¼${w x^{(i)}}$ + bä¸çœŸå®å€¼$y^{(i)}$ä¹‹é—´çš„å·®çš„å¹³æ–¹å’Œä½œä¸ºæ€»è¯¯å·®${L}$:<br>$$<br>\mathcal{L}=\frac{1}{n} \sum_{i=1}^{n}\left(w x^{(i)}+b-y^{(i)}\right)^{2}<br>$$</p><p>å¯¹äºå•è¾“å…¥çš„ç¥ç»å…ƒæ¨¡å‹ï¼Œåªéœ€è¦ä¸¤ä¸ªæ ·æœ¬ï¼Œå°±èƒ½é€šè¿‡æ¶ˆå…ƒæ³•æ±‚å‡ºæ–¹ç¨‹ç»„çš„ç²¾ç¡®è§£ï¼Œè¿™ç§é€šè¿‡ä¸¥æ ¼çš„å…¬å¼æ¨å¯¼å‡ºçš„ç²¾ç¡®è§£ç§°ä¸ºè§£æè§£ã€‚è¿™ç§ç®—æ³•å›ºç„¶ç®€å•ç›´æ¥ï¼Œä½†æ˜¯é¢å¯¹å¤§è§„æ¨¡ã€é«˜ç»´åº¦æ•°æ®çš„ä¼˜åŒ–é—®é¢˜æ—¶è®¡ç®—æ•ˆç‡æä½ï¼ŒåŸºæœ¬ä¸å¯è¡Œã€‚æ¢¯åº¦ä¸‹é™ç®—æ³•æ˜¯ç¥ç»ç½‘ç»œè®­ç»ƒä¸­æœ€å¸¸ç”¨çš„ä¼˜åŒ–ç®—æ³•ï¼Œé…åˆå¼ºå¤§çš„å›¾å½¢å¤„ç†èŠ¯ç‰‡GPUçš„å¹¶è¡ŒåŠ é€Ÿèƒ½åŠ›ï¼Œéå¸¸é€‚åˆä¼˜åŒ–æµ·é‡æ•°æ®çš„ç¥ç»ç½‘ç»œæ¨¡å‹ï¼Œè‡ªç„¶ä¹Ÿé€‚åˆä¼˜åŒ–æˆ‘ä»¬è¿™é‡Œçš„ç¥ç»å…ƒçº¿æ€§æ¨¡å‹ã€‚</p><h3 id="2ã€æ¢¯åº¦-Gradient-ï¼š"><a href="#2ã€æ¢¯åº¦-Gradient-ï¼š" class="headerlink" title="2ã€æ¢¯åº¦(Gradient)ï¼š"></a>2ã€<strong>æ¢¯åº¦(Gradient)ï¼š</strong></h3><p>å‡½æ•°å¯¹å„ä¸ªè‡ªå˜é‡çš„åå¯¼æ•°ç»„æˆçš„å‘<br>é‡ã€‚è®¾å‡½æ•°z=f(x,y)åœ¨å¹³é¢åŒºåŸŸDå†…å…·æœ‰ä¸€é˜¶è¿ç»­åå¯¼æ•°ï¼Œåˆ™å¯¹äºæ¯ä¸€ä¸ªç‚¹P(x,y)âˆˆDï¼Œå‘é‡$\left(\frac{\partial f}{\partial x}, \frac{\partial f}{\partial y}\right)$ä¸ºå‡½æ•°z=f(x,y)åœ¨ç‚¹Pçš„æ¢¯åº¦ï¼Œè®°åš*gradf(x,y)*ã€‚æ¢¯åº¦çš„æ–¹å‘æ˜¯å‡½æ•°åœ¨è¯¥ç‚¹å˜åŒ–æœ€å¿«çš„æ–¹å‘ã€‚</p><hr><p><strong>é‡ç‚¹ï¼š</strong>ä»¥*f(x,y)=-(cos<suP>2</sup>x+sin<sup>2</sup>x)*ä¸ºä¾‹ï¼›å›¾ä¸­xyå¹³é¢çš„çº¢è‰²ç®­å¤´çš„é•¿åº¦è¡¨ç¤ºæ¢¯åº¦å‘é‡çš„æ¨¡ï¼Œç®­å¤´çš„æ–¹å‘è¡¨ç¤ºæ¢¯åº¦å‘é‡çš„æ–¹å‘ã€‚å¯ä»¥çœ‹åˆ°ï¼Œç®­å¤´çš„æ–¹å‘æ€»æ˜¯æŒ‡å‘å½“å‰ä½ç½®å‡½æ•°å€¼å¢é€Ÿæœ€å¤§çš„æ–¹å‘ï¼Œå‡½æ•°æ›²é¢è¶Šé™¡å³­ï¼Œç®­å¤´çš„é•¿åº¦ä¹Ÿå°±è¶Šé•¿ï¼Œæ¢¯åº¦çš„æ¨¡ä¹Ÿè¶Šå¤§ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210402094531701.png"></p><p>å‡½æ•°åœ¨å„å¤„çš„æ¢¯åº¦æ–¹å‘${\nabla}$fæ€»æ˜¯æŒ‡å‘å‡½æ•°å€¼å¢å¤§çš„æ–¹å‘ï¼Œé‚£ä¹ˆæ¢¯åº¦çš„åæ–¹å‘-$\nabla$fåº”æŒ‡å‘å‡½æ•°å€¼å‡å°‘çš„æ–¹å‘ã€‚åˆ©ç”¨è¿™ä¸€æ€§è´¨ï¼Œåªéœ€è¦æŒ‰ç…§:</p><p>â€‹                                                xâ€™ = x - $\eta$Â·${\nabla}$f</p><p>æ¥è¿­ä»£æ›´æ–°xâ€™ï¼Œå°±èƒ½è·å¾—è¶Šæ¥è¶Šå°çš„å‡½æ•°å€¼ï¼Œå…¶ä¸­nç”¨æ¥ç¼©æ”¾æ¢¯åº¦å‘é‡ï¼Œä¸€èˆ¬è®¾ç½®ä¸ºæŸè¾ƒå°çš„å€¼ï¼Œå¦‚0.01ã€ 0.001 ç­‰ã€‚ç‰¹åˆ«åœ°ï¼Œå¯¹äºä¸€ç»´å‡½æ•°ï¼Œä¸Šè¿°å‘é‡å½¢å¼å¯ä»¥é€€åŒ–æˆæ ‡é‡å½¢å¼:</p><p>â€‹                                                xâ€™ = x - $\eta$Â·$\frac{dy}{dx}$</p><p>é€šè¿‡ä¸Šå¼è¿­ä»£æ›´æ–°xâ€™è‹¥å¹²æ¬¡ï¼Œè¿™æ ·å¾—åˆ°çš„xâ€™å¤„çš„å‡½æ•°å€¼yâ€™,æ€»æ˜¯æ›´æœ‰å¯èƒ½æ¯”åœ¨xå¤„çš„å‡½æ•°å€¼yå°ï¼Œä¼˜åŒ–å‚æ•°çš„æ–¹æ³•ç§°ä¸º<strong>æ¢¯åº¦ä¸‹é™ç®—æ³•</strong>ã€‚ä¸€èˆ¬xè¡¨ç¤ºæ¨¡å‹è¾“å…¥ï¼Œæ¨¡å‹çš„å¾…ä¼˜åŒ–å‚æ•°ä¸€ èˆ¬ç”¨${\theta}$ã€wã€bç­‰ç¬¦å·è¡¨ç¤ºã€‚</p><hr><h3 id="3ã€çº¿æ€§å›å½’-tensorflowå®æˆ˜"><a href="#3ã€çº¿æ€§å›å½’-tensorflowå®æˆ˜" class="headerlink" title="3ã€çº¿æ€§å›å½’-tensorflowå®æˆ˜"></a>3ã€çº¿æ€§å›å½’-tensorflowå®æˆ˜</h3><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦é‡‡æ ·è‡ªçœŸå®æ¨¡å‹çš„å¤šç»„æ•°æ®ï¼Œå¯¹äºå·²çŸ¥çœŸå®æ¨¡å‹çš„ç©å…·æ ·ä¾‹,æˆ‘ä»¬ç›´æ¥ï¼Œç›´æ¥ä»æŒ‡å®šçš„w= 1.477, b= 0.089çš„çœŸå®æ¨¡å‹ä¸­ç›´æ¥é‡‡æ ·:<br>                                            $$y=1.477 x+0.089$$<br>æ¥ä¸‹æ¥å®æˆ˜è®­ç»ƒå•è¾“å…¥ç¥ç»å…ƒçº¿æ€§æ¨¡å‹ã€‚</p><p><strong>ã€é‡‡æ ·æ•°æ®ã€‘</strong>:</p><p>ä¸ºäº†èƒ½å¤Ÿå¾ˆå¥½åœ°æ¨¡æ‹ŸçœŸå®æ ·æœ¬çš„è§‚æµ‹è¯¯å·®ï¼Œæˆ‘ä»¬ç»™æ¨¡å‹æ·»åŠ è¯¯å·®è‡ªå˜é‡$\epsilon$ï¼Œå®ƒé‡‡æ ·è‡ªå‡å€¼ä¸º0ï¼Œæ ‡å‡†å·®ä¸º0.01çš„é«˜æ–¯åˆ†å¸ƒ:$y=1.477 x+0.089+\epsilon, \epsilon \sim \mathcal{N}\left(\mu, \sigma^{2}\right)$</p><p>é€šè¿‡éšæœºé‡‡æ ·n= 100æ¬¡ï¼Œæˆ‘ä»¬è·å¾—nä¸ªæ ·æœ¬çš„è®­ç»ƒæ•°æ®é›†D<sup>train</sup>ï¼Œä»£ç å¦‚ä¸‹:</p><pre class=" language-python"><code class="language-python">  data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token comment" spellcheck="true">#ä¿å­˜æ ·æœ¬åºåˆ—</span>  <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token comment" spellcheck="true">#å¾ªç¯é‡‡é›†100ä¸ªç‚¹</span>    x <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>uniform<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">.</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">#éšæœºé‡‡æ ·è¾“å…¥</span>    eps <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>normal<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">.</span><span class="token punctuation">,</span><span class="token number">0.01</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">#é‡‡æ ·é«˜æ–¯å™ªå£°</span>    y <span class="token operator">=</span> <span class="token number">1.477</span> <span class="token operator">*</span> x <span class="token operator">+</span> <span class="token number">0.089</span> <span class="token operator">+</span> eps <span class="token comment" spellcheck="true">#å¾—åˆ°æ¨¡å‹è¾“å‡º</span>    data<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span>x<span class="token punctuation">,</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">#ä¿å­˜æ ·æœ¬ç‚¹</span>  data <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token comment" spellcheck="true">#è½¬åŒ–ä¸º2D numpy æ•°ç»„</span></code></pre><p>å¾ªç¯è¿›è¡Œ100æ¬¡é‡‡æ ·ï¼Œæ¯æ¬¡ä»å‡åŒ€ä¹ åˆ†å¸ƒ$\mathcal{U}\left(-10, 10\right)$ä¸­éšæœºé‡‡æ ·ä¸€ä¸ªæ•°æ®xï¼Œ åŒæ—¶ä»å‡å€¼ä¸º0ï¼Œæ–¹å·®ä¸º0.12çš„é«˜æ–¯åˆ†å¸ƒ$\mathcal{N}\left(0, 0.1^{2}\right)$ä¸­éšæœºé‡‡æ ·å™ªå£°$\epsilon$ï¼Œæ ¹æ®çœŸå®æ¨¡å‹ç”Ÿæˆyçš„æ•°æ®,å¹¶ä¿å­˜ä¸ºNumpyæ•°ç»„ã€‚</p><p><strong>ã€è®¡ç®—è¯¯å·®ã€‘</strong></p><p>å¾ªç¯è®¡ç®—åœ¨æ¯ä¸ªç‚¹$\left(x^{(i)}, y^{(i)}\right)$å¤„çš„é¢„æµ‹å€¼ä¸çœŸå®å€¼ä¹‹é—´å·®çš„å¹³æ–¹å¹¶ç´¯åŠ ï¼Œä»è€Œè·å¾—è®­ç»ƒé›†_ä¸Šçš„å‡æ–¹è¯¯å·®æŸå¤±å€¼ã€‚ä»£ç å¦‚ä¸‹:</p><pre class=" language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">mse</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span>w<span class="token punctuation">,</span>points<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment" spellcheck="true">#æ ¹æ®å½“å‰çš„w,bè®¡ç®—å‡æ–¹å·®æŸå¤±</span>  totalError <span class="token operator">=</span> <span class="token number">0</span>  <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token punctuation">(</span>points<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    x <span class="token operator">=</span> points<span class="token punctuation">[</span>i<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span>    y <span class="token operator">=</span> points<span class="token punctuation">[</span>i <span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span>    totalError <span class="token operator">+=</span> <span class="token punctuation">(</span>y <span class="token operator">-</span><span class="token punctuation">(</span>w <span class="token operator">*</span> x <span class="token operator">+</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">**</span> <span class="token number">2</span><span class="token comment" spellcheck="true">#è®¡ç®—å·®çš„å¹³æ–¹ï¼Œå¹¶ä¸”ç´¯åŠ </span>  <span class="token keyword">return</span> totalError <span class="token operator">/</span> float<span class="token punctuation">(</span>len<span class="token punctuation">(</span>points<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><p><strong>ã€è®¡ç®—æ¢¯åº¦ã€‘</strong></p><p>æ ¹æ®ä¹‹å‰ä»‹ç»çš„æ¢¯åº¦ä¸‹é™ç®—æ³•ï¼Œæˆ‘ä»¬éœ€è¦è®¡ç®—å‡ºå‡½æ•°åœ¨æ¯ä¸€ä¸ªç‚¹ä¸Šçš„æ¢¯åº¦ä¿¡æ¯:$\left(\frac{\partial L}{\partial w}, \frac{\partial L}{\partial b}\right)$ã€‚æˆ‘ä»¬æ¥æ¨å¯¼ä¸€ä¸‹æ¢¯åº¦çš„è¡¨è¾¾å¼ï¼Œé¦–å…ˆè€ƒè™‘$\frac{\partial L}{\partial w}$ï¼Œå°†å‡æ–¹å·®å‡½æ•°å±•å¼€:<br>$$<br>\frac{\partial \mathcal{L}}{\partial w}=\frac{\partial \frac{1}{n} \sum_{i=1}^{n}\left(w x^{(i)}+b-y^{(i)}\right)^{2}}{\partial w}=\frac{1}{n} \sum_{i=1}^{n} \frac{\partial\left(w x^{(i)}+b-y^{(i)}\right)^{2}}{\partial w}<br>$$<br>è€ƒè™‘åˆ°ï¼š$\frac{\partial g^{2}}{\partial w}=2 \cdot g \cdot \frac{\partial g}{\partial w} $<br>         å› æ­¤ï¼š<br>$$<br>\begin{align}<br>\frac{\partial \mathcal{L}}{\partial w}<br>=&amp; \frac{1}{n} \sum_{i=1}^{n} 2\left(w x^{(i)}+b-y^{(i)}\right) \cdot \frac{\partial\left(w x^{(i)}+b-y^{(i)}\right)}{\partial w}\<br>=&amp; \frac{1}{n} \sum_{i=1}^{n} 2\left(w x^{(i)}+b-y^{(i)}\right) \cdot x^{(i)} \<br>=&amp;\frac{2}{n} \sum_{i=1}^{n}\left(w x^{(i)}+b-y^{(i)}\right) \cdot x^{(i)}\<br>\end{align}<br>$$</p><p>åŒæ ·çš„æ–¹æ³•ï¼š</p><p>$$<br>\begin{align}<br>\frac{\partial \mathcal{L}}{\partial b}<br>=&amp; \frac{\partial \frac{1}{n} \sum_{i=1}^{n}\left(w x^{(i)}+b-y^{(i)}\right)^{2}}{\partial b}\<br>=&amp; \frac{1}{n} \sum_{i=1}^{n} \frac{\partial\left(w x^{(i)}+b-y^{(i)}\right)^{2}}{\partial b}\<br>=&amp; \frac{1}{n} \sum_{i=1}^{n} 2\left(w x^{(i)}+b-y^{(i)}\right) \cdot 1 \<br>=&amp; \frac{2}{n} \sum_{i=1}^{n}\left(w x^{(i)}+b-y^{(i)}\right) \cdot y^{(i)}\<br>\end{align}<br>$$</p><p>æˆ‘ä»¬åªéœ€è¦è®¡ç®—åœ¨æ¯ä¸€ä¸€ä¸ªç‚¹ä¸Šé¢çš„ $((w x^{(i)}+b-y^{(i)})Â·x^{(i)}$å’Œ$w x^{(i)}+b-y^{(i)}$å€¼ï¼Œå¹³å‡åå³å¯å¾—åˆ°åå¯¼æ•°$\left(\frac{\partial L}{\partial w}, \frac{\partial L}{\partial b}\right)$ã€‚å®ç°å¦‚ä¸‹ï¼š</p><pre class=" language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">step_gradient</span><span class="token punctuation">(</span>b_current<span class="token punctuation">,</span>w_current<span class="token punctuation">,</span>points<span class="token punctuation">,</span>lr<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment" spellcheck="true">#è®¡ç®—è¯¯å·®å‡½æ•°æ‰€æœ‰ç‚¹çš„å¯¼æ•°ï¼Œå¹¶ä¸”æ›´æ–°</span>  b_gradient <span class="token operator">=</span> <span class="token number">0</span>  w_gradient <span class="token operator">=</span> <span class="token number">0</span>  m <span class="token operator">=</span> float<span class="token punctuation">(</span>len<span class="token punctuation">(</span>points<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token punctuation">(</span>points<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    x <span class="token operator">=</span> points<span class="token punctuation">[</span>i<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span>    y <span class="token operator">=</span> points<span class="token punctuation">[</span>i <span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span>    <span class="token comment" spellcheck="true">#è®¡ç®—è¯¯å·®å‡½æ•°å¯¹bçš„å¯¼æ•°ï¼šgrad_b = 2(wx+b-y)</span>    b_gradient <span class="token operator">+=</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">/</span>m<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>w_current <span class="token operator">*</span> x <span class="token operator">+</span> b_current<span class="token punctuation">)</span> <span class="token operator">-</span>y<span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">#è®¡ç®—è¯¯å·®å‡½æ•°å¯¹wçš„å¯¼æ•°ï¼šgrad_w = 2(wx+b-y)*x</span>    w_gradient <span class="token operator">+=</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">/</span>m<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>w_current <span class="token operator">*</span> x <span class="token operator">+</span> b_current<span class="token punctuation">)</span> <span class="token operator">-</span>y<span class="token punctuation">)</span> <span class="token operator">*</span> x  <span class="token comment" spellcheck="true"># æ ¹æ®æ¢¯åº¦ä¸‹é™ç®—æ³•æ›´æ–° w',b',å…¶ä¸­lr ä¸ºå­¦ä¹ ç‡</span>  new_b <span class="token operator">=</span> b_current <span class="token operator">-</span> <span class="token punctuation">(</span>lr <span class="token operator">*</span> b_gradient<span class="token punctuation">)</span>  new_w <span class="token operator">=</span> w_current <span class="token operator">-</span> <span class="token punctuation">(</span>lr <span class="token operator">*</span> w_gradient<span class="token punctuation">)</span>  <span class="token keyword">return</span> <span class="token punctuation">[</span>new_b<span class="token punctuation">,</span> new_w<span class="token punctuation">]</span></code></pre><p><strong>ã€æ¢¯åº¦æ›´æ–°ã€‘</strong></p><p>åœ¨è®¡ç®—å‡ºè¯¯å·®å‡½æ•°åœ¨wå’Œbå¤„çš„æ¢¯åº¦åï¼Œå†æ¥æ›´æ–°wå’Œbçš„å€¼ã€‚æŠŠå¯¹æ•°æ®é›†çš„æ‰€æœ‰æ ·æœ¬è®­ç»ƒä¸€æ¬¡ç§°ä¸ºä¸€ä¸ªEpoch,å…±å¾ªç¯è¿­ä»£num_ terations ä¸ªEpochã€‚å®ç°å¦‚ä¸‹:</p><pre class=" language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">gradient_descent</span><span class="token punctuation">(</span>points<span class="token punctuation">,</span> starting_b<span class="token punctuation">,</span> starting_w<span class="token punctuation">,</span> lr<span class="token punctuation">,</span> num_iterations<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment" spellcheck="true"># å¾ªç¯æ›´æ–°w,b å¤šæ¬¡</span>  b <span class="token operator">=</span> starting_b <span class="token comment" spellcheck="true"># b çš„åˆå§‹å€¼</span>  w <span class="token operator">=</span> starting_w <span class="token comment" spellcheck="true"># w çš„åˆå§‹å€¼</span>  <span class="token comment" spellcheck="true"># æ ¹æ®æ¢¯åº¦ä¸‹é™ç®—æ³•æ›´æ–°å¤šæ¬¡</span>  <span class="token keyword">for</span> step <span class="token keyword">in</span> range<span class="token punctuation">(</span>num_iterations<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># è®¡ç®—æ¢¯åº¦å¹¶æ›´æ–°ä¸€æ¬¡</span>    b<span class="token punctuation">,</span> w <span class="token operator">=</span> step_gradient<span class="token punctuation">(</span>b<span class="token punctuation">,</span> w<span class="token punctuation">,</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>points<span class="token punctuation">)</span><span class="token punctuation">,</span> lr<span class="token punctuation">)</span>    loss <span class="token operator">=</span> mse<span class="token punctuation">(</span>b<span class="token punctuation">,</span> w<span class="token punctuation">,</span> points<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># è®¡ç®—å½“å‰çš„å‡æ–¹å·®ï¼Œç”¨äºç›‘æ§è®­ç»ƒè¿›åº¦</span>    <span class="token keyword">if</span> step<span class="token operator">%</span><span class="token number">50</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span> <span class="token comment" spellcheck="true"># æ‰“å°è¯¯å·®å’Œå®æ—¶çš„w,b å€¼</span>      <span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">"iteration:&amp;#123;step&amp;#125;, loss:&amp;#123;loss&amp;#125;, w:&amp;#123;w&amp;#125;, b:&amp;#123;b&amp;#125;"</span><span class="token punctuation">)</span>  <span class="token keyword">return</span> <span class="token punctuation">[</span>b<span class="token punctuation">,</span> w<span class="token punctuation">]</span> <span class="token comment" spellcheck="true"># è¿”å›æœ€åä¸€æ¬¡çš„w,b</span></code></pre><p>ä¸»å‡½æ•°å®ç°å¦‚ä¸‹ï¼š</p><pre class=" language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment" spellcheck="true"># åŠ è½½è®­ç»ƒé›†æ•°æ®ï¼Œè¿™äº›æ•°æ®æ˜¯é€šè¿‡çœŸå®æ¨¡å‹æ·»åŠ è§‚æµ‹è¯¯å·®é‡‡æ ·å¾—åˆ°çš„</span>  lr <span class="token operator">=</span> <span class="token number">0.01</span> <span class="token comment" spellcheck="true"># å­¦ä¹ ç‡</span>  initial_b <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment" spellcheck="true"># åˆå§‹åŒ–b ä¸º0</span>  initial_w <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment" spellcheck="true"># åˆå§‹åŒ–w ä¸º0</span>  num_iterations <span class="token operator">=</span> <span class="token number">1000</span>  <span class="token comment" spellcheck="true"># è®­ç»ƒä¼˜åŒ–1000 æ¬¡ï¼Œè¿”å›æœ€ä¼˜w*,b*å’Œè®­ç»ƒLoss çš„ä¸‹é™è¿‡ç¨‹</span>  <span class="token punctuation">[</span>b<span class="token punctuation">,</span> w<span class="token punctuation">]</span><span class="token operator">=</span> gradient_descent<span class="token punctuation">(</span>data<span class="token punctuation">,</span> initial_b<span class="token punctuation">,</span> initial_w<span class="token punctuation">,</span> lr<span class="token punctuation">,</span> num_iterations<span class="token punctuation">)</span>  loss <span class="token operator">=</span> mse<span class="token punctuation">(</span>b<span class="token punctuation">,</span> w<span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># è®¡ç®—æœ€ä¼˜æ•°å€¼è§£w,b ä¸Šçš„å‡æ–¹å·®</span>  <span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">'Final loss:&amp;#123;loss&amp;#125;, w:&amp;#123;w&amp;#125;, b:&amp;#123;b&amp;#125;'</span><span class="token punctuation">)</span></code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œç¬¬100æ¬¡è¿­ä»£æ—¶ï¼Œwå’Œbçš„å€¼å°±å·²ç»æ¯”è¾ƒæ¥è¿‘çœŸå®æ¨¡å‹äº†ï¼Œæ›´æ–°1000æ¬¡åå¾—åˆ°çš„w*å’Œbæ•°å€¼è§£ä¸çœŸå®æ¨¡å‹çš„éå¸¸æ¥è¿‘ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210402113941430.png"></p><h2 id="ç¬¬äºŒç« -åˆ†ç±»é—®é¢˜"><a href="#ç¬¬äºŒç« -åˆ†ç±»é—®é¢˜" class="headerlink" title="ç¬¬äºŒç«  åˆ†ç±»é—®é¢˜"></a>ç¬¬äºŒç«  åˆ†ç±»é—®é¢˜</h2><p>è€ƒè™‘å›¾ç‰‡åˆ†ç±»ä¸­æœ€ç®€å•çš„ä»»åŠ¡ä¹‹ä¸€ï¼š0~9 æ•°å­—å›¾ç‰‡è¯†åˆ«ï¼Œå®ƒç›¸å¯¹ç®€å•ï¼Œè€Œä¸”ä¹Ÿå…·æœ‰éå¸¸å¹¿æ³›çš„åº”ç”¨ä»·å€¼ï¼Œæ¯”å¦‚é‚®æ”¿ç¼–ç ã€å¿«é€’å•å·ã€æ‰‹æœºå·ç ç­‰éƒ½å±äºæ•°å­—å›¾ç‰‡è¯†åˆ«èŒƒç•´ã€‚</p><h3 id="2-1-æ‰‹å†™æ•°å­—å›¾ç‰‡æ•°æ®é›†"><a href="#2-1-æ‰‹å†™æ•°å­—å›¾ç‰‡æ•°æ®é›†" class="headerlink" title="2.1 æ‰‹å†™æ•°å­—å›¾ç‰‡æ•°æ®é›†"></a>2.1 æ‰‹å†™æ•°å­—å›¾ç‰‡æ•°æ®é›†</h3><p>ä»¥æ‰‹å†™çš„æ•°å­—å›¾ç‰‡è¯†åˆ«ä¸ºä¾‹ï¼Œéœ€è¦æ”¶é›†å¤§é‡çš„ç”±çœŸäººä¹¦å†™çš„0-9 çš„æ•°å­—å›¾ç‰‡ï¼Œä¸ºäº†ä¾¿äºå­˜å‚¨å’Œè®¡ç®—ï¼Œä¸€èˆ¬æŠŠæ”¶é›†çš„åŸå§‹å›¾ç‰‡ç¼©æ”¾åˆ°æŸä¸ªå›ºå®šçš„å¤§å°(Size æˆ–Shape)ï¼Œæ¯”å¦‚96 ä¸ªåƒç´ çš„è¡Œå’Œ96 ä¸ªåƒç´ çš„åˆ—(96 Ã— 96)ï¼Œè¿™å¼ å›¾ç‰‡å°†ä½œä¸ºè¾“å…¥æ•°æ®xã€‚åŒæ—¶ï¼Œæˆ‘ä»¬éœ€è¦ç»™æ¯ä¸€å¼ å›¾ç‰‡æ ‡æ³¨ä¸€ä¸ªæ ‡ç­¾ï¼Œå®ƒå°†ä½œä¸ºå›¾ç‰‡çš„çœŸå®å€¼ğ‘¦ï¼Œè¿™ä¸ªæ ‡ç­¾è¡¨æ˜è¿™å¼ å›¾ç‰‡å±äºå“ªä¸€ä¸ªå…·ä½“çš„ç±»åˆ«ï¼Œä¸€èˆ¬é€šè¿‡æ˜ å°„æ–¹å¼å°†ç±»åˆ«åä¸€ä¸€å¯¹åº”åˆ°ä»0 å¼€å§‹ç¼–å·çš„æ•°å­—ï¼Œè¿™ç§ç¼–ç æ–¹å¼å«ä½œæ•°å­—ç¼–ç ã€‚å¯¹äºæ‰‹å†™æ•°å­—å›¾ç‰‡è¯†åˆ«é—®é¢˜ï¼Œç¼–ç æ›´ä¸ºç›´è§‚ï¼Œæˆ‘ä»¬ç”¨æ•°å­—çš„0-9 æ¥è¡¨ç¤ºç±»åˆ«åå­—ä¸º0-9 çš„å›¾ç‰‡ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210405151000637.png"></p><p>å¦‚æœå¸Œæœ›æ¨¡å‹èƒ½å¤Ÿåœ¨æ–°æ ·æœ¬ä¸Šä¹Ÿèƒ½å…·æœ‰è‰¯å¥½çš„è¡¨ç°ï¼Œå³æ¨¡å‹æ³›åŒ–èƒ½åŠ›è¾ƒå¥½ï¼Œé‚£ä¹ˆåº”è¯¥å°½å¯èƒ½å¤šåœ°å¢åŠ æ•°æ®é›†çš„è§„æ¨¡å’Œå¤šæ ·æ€§(Variance)ï¼Œä½¿å¾—æˆ‘ä»¬ç”¨äºå­¦ä¹ çš„è®­ç»ƒæ•°æ®é›†ä¸çœŸå®çš„æ‰‹å†™æ•°å­—å›¾ç‰‡çš„åˆ†å¸ƒ(Ground-truth Distribution)å°½å¯èƒ½çš„é€¼è¿‘ï¼Œè¿™æ ·åœ¨è®­ç»ƒæ•°æ®é›†ä¸Šé¢å­¦åˆ°äº†æ¨¡å‹èƒ½å¤Ÿå¾ˆå¥½çš„ç”¨äºæœªè§è¿‡çš„æ‰‹å†™æ•°å­—å›¾ç‰‡çš„é¢„æµ‹ã€‚</p><p>é‡‡ç”¨å¼€æºçš„MNISTæ•°æ®é›†ï¼Œè¿™æ˜¯åœ¨æœºå™¨å­¦ä¹ é¢†åŸŸä¸­çš„ä¸€ä¸ªç»å…¸é—®é¢˜ã€‚è¯¥é—®é¢˜è§£å†³çš„æ˜¯æŠŠ28x28åƒç´ çš„ç°åº¦æ‰‹å†™æ•°å­—å›¾ç‰‡è¯†åˆ«ä¸ºç›¸åº”çš„æ•°å­—ï¼Œå…¶ä¸­æ•°å­—çš„èŒƒå›´ä»0åˆ°9ã€‚é‡‡é›†è‡ªä¸åŒä¹¦å†™é£æ ¼çš„çœŸå®æ‰‹å†™å›¾ç‰‡ï¼Œä¸€å…±70000 å¼ å›¾ç‰‡ã€‚å…¶ä¸­60000 å¼ å›¾ç‰‡ä½œä¸ºè®­ç»ƒé›†D<sup>train</sup>ï¼Œç”¨æ¥è®­ç»ƒæ¨¡å‹ï¼Œå‰©ä¸‹10000 å¼ å›¾ç‰‡ä½œä¸ºæµ‹è¯•é›†D<sup>test</sup>ï¼Œè¿™äº›å›¾ç‰‡ç”±çœŸäººä¹¦å†™ï¼ŒåŒ…å«äº†å¦‚å­—ä½“å¤§å°ã€ä¹¦å†™é£æ ¼ã€ç²—ç»†ç­‰ä¸°å¯Œçš„æ ·å¼ï¼Œç¡®ä¿è¿™äº›å›¾ç‰‡çš„åˆ†å¸ƒä¸çœŸå®çš„æ‰‹å†™æ•°å­—å›¾ç‰‡çš„åˆ†å¸ƒå°½å¯èƒ½çš„æ¥è¿‘ï¼Œä»è€Œä¿è¯äº†æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210405151917695.png"></p><p>ä¸€å¼ å›¾ç‰‡åŒ…å«äº†â„è¡Œï¼Œğ‘¤åˆ—ï¼Œæ¯ä¸ªä½ç½®ä¿å­˜äº†åƒç´ å€¼ï¼Œåƒç´ å€¼ä¸€èˆ¬ä½¿ç”¨0~255 çš„æ•´å½¢æ•°å€¼æ¥è¡¨è¾¾é¢œè‰²å¼ºåº¦ä¿¡æ¯ï¼Œä¾‹å¦‚0 è¡¨ç¤ºå¼ºåº¦æœ€ä½ï¼Œ255 è¡¨è¡¨ç¤ºå¼ºåº¦æœ€é«˜ã€‚å¦‚æœæ˜¯å½©è‰²å›¾ç‰‡ï¼Œåˆ™æ¯ä¸ªåƒç´ ç‚¹åŒ…å«äº†Rã€Gã€B ä¸‰ä¸ªé€šé“çš„å¼ºåº¦ä¿¡æ¯ï¼Œåˆ†åˆ«ä»£è¡¨çº¢è‰²é€šé“ã€ç»¿è‰²é€šé“ã€è“è‰²é€šé“çš„é¢œè‰²å¼ºåº¦ï¼Œæ‰€ä»¥ä¸ç°åº¦å›¾ç‰‡ä¸åŒï¼Œå®ƒçš„æ¯ä¸ªåƒç´ ç‚¹ä½¿ç”¨ä¸€ä¸ª1 ç»´ã€é•¿åº¦ä¸º3 çš„å‘é‡(Vector)æ¥è¡¨ç¤ºï¼Œå‘é‡çš„3 ä¸ªå…ƒç´ ä¾æ¬¡ä»£è¡¨äº†å½“å‰åƒç´ ç‚¹ä¸Šé¢çš„Rã€Gã€B é¢œè‰²å¼ºå€¼ï¼Œå› æ­¤å½©è‰²å›¾ç‰‡éœ€è¦ä¿å­˜ä¸ºå½¢çŠ¶æ˜¯[â„, ğ‘¤, 3]çš„å¼ é‡(Tensorï¼Œå¯ä»¥é€šä¿—åœ°ç†è§£ä¸º3 ç»´æ•°ç»„)ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210405152807104.png"></p><p>åˆ©ç”¨TensorFlow è‡ªåŠ¨åœ¨çº¿ä¸‹è½½MNIST æ•°æ®é›†ï¼Œå¹¶è½¬æ¢ä¸ºNumpy æ•°ç»„æ ¼å¼:</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> os<span class="token keyword">import</span> tensorflow <span class="token keyword">as</span> tf <span class="token comment" spellcheck="true"># å¯¼å…¥TF åº“</span><span class="token keyword">from</span> tensorflow <span class="token keyword">import</span> keras <span class="token comment" spellcheck="true"># å¯¼å…¥TF å­åº“keras</span><span class="token keyword">from</span> tensorflow<span class="token punctuation">.</span>keras <span class="token keyword">import</span> layers<span class="token punctuation">,</span> optimizers<span class="token punctuation">,</span> datasets <span class="token comment" spellcheck="true"># å¯¼å…¥TF å­åº“ç­‰</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>x_val<span class="token punctuation">,</span> y_val<span class="token punctuation">)</span> <span class="token operator">=</span> datasets<span class="token punctuation">.</span>mnist<span class="token punctuation">.</span>load_data<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># åŠ è½½MNIST æ•°æ®é›†</span>x <span class="token operator">=</span> <span class="token number">2</span><span class="token operator">*</span>tf<span class="token punctuation">.</span>convert_to_tensor<span class="token punctuation">(</span>x<span class="token punctuation">,</span> dtype<span class="token operator">=</span>tf<span class="token punctuation">.</span>float32<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">255</span><span class="token punctuation">.</span><span class="token operator">-</span><span class="token number">1</span> <span class="token comment" spellcheck="true"># è½¬æ¢ä¸ºæµ®ç‚¹å¼ é‡ï¼Œå¹¶ç¼©æ”¾åˆ°-1~1</span>y <span class="token operator">=</span> tf<span class="token punctuation">.</span>convert_to_tensor<span class="token punctuation">(</span>y<span class="token punctuation">,</span> dtype<span class="token operator">=</span>tf<span class="token punctuation">.</span>int32<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># è½¬æ¢ä¸ºæ•´å½¢å¼ é‡</span>y <span class="token operator">=</span> tf<span class="token punctuation">.</span>one_hot<span class="token punctuation">(</span>y<span class="token punctuation">,</span> depth<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># one-hot ç¼–ç </span><span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>shape<span class="token punctuation">,</span> y<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>train_dataset <span class="token operator">=</span> tf<span class="token punctuation">.</span>data<span class="token punctuation">.</span>Dataset<span class="token punctuation">.</span>from_tensor_slices<span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># æ„å»ºæ•°æ®é›†å¯¹è±¡</span>train_dataset <span class="token operator">=</span> train_dataset<span class="token punctuation">.</span>batch<span class="token punctuation">(</span><span class="token number">512</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># æ‰¹é‡è®­ç»ƒ</span></code></pre><h3 id="2-2-æ¨¡å‹æ„å»º"><a href="#2-2-æ¨¡å‹æ„å»º" class="headerlink" title="2.2 æ¨¡å‹æ„å»º"></a>2.2 æ¨¡å‹æ„å»º</h3><p>å¯¹äºæ˜¯å¤šè¾“å…¥ã€å•è¾“å‡ºçš„æ¨¡å‹ç»“æ„çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨å‘é‡å½¢å¼æ¥è¡¨ç¤ºï¼š<br>$$<br>y=\boldsymbol{w}^{\mathrm{T}} \boldsymbol{x}+b=\left[w_{1}, w_{2}, w_{3}, \ldots, w_{d_{i n}}\right] \cdot\left[\begin{array}{c}<br>x_{1} \<br>x_{2} \<br>x_{3} \<br>\vdots \<br>x_{d_{i n}}<br>\end{array}\right]+b<br>$$<br>é€šè¿‡ç»„åˆå¤šä¸ªå¤šè¾“å…¥ã€å•è¾“å‡ºçš„ç¥ç»å…ƒæ¨¡å‹ï¼Œå¯ä»¥æ‹¼æˆä¸€ä¸ªå¤šè¾“å…¥ã€å¤šè¾“å‡ºçš„æ¨¡å‹ï¼šğ’š = ğ‘¾ğ’™ + ğ’ƒã€‚å…¶ä¸­ï¼Œğ’™ âˆˆ ğ‘…<sup>ğ‘‘<sub>in</sub></sup>ï¼Œğ’ƒ âˆˆ ğ‘…<sup>ğ‘‘<sub>out</sub></sup>ï¼Œğ’š âˆˆ ğ‘…<sup>ğ‘‘<sub>out</sub></sup>ï¼Œğ‘¾ âˆˆ ğ‘…<sup>ğ‘‘<sub>out</sub>Ã—ğ‘‘<sub>in</sub></sup>ã€‚</p><p>å¯¹äºå¤šè¾“å‡ºèŠ‚ç‚¹ã€æ‰¹é‡è®­ç»ƒæ–¹å¼ï¼Œæˆ‘ä»¬å°†æ¨¡å‹å†™æˆæ‰¹é‡å½¢å¼ï¼šğ’€ = ğ‘¿@ğ‘¾ + ğ’ƒï¼Œå…¶ä¸­ï¼Œğ‘¿ âˆˆ ğ‘…<sup>b*ğ‘‘<sub>in</sub></sup>ï¼Œğ’ƒ âˆˆ ğ‘…<sup>ğ‘‘<sub>out</sub></sup>ï¼Œğ’š âˆˆ ğ‘…<sup>ğ‘‘<sub>out</sub></sup>ï¼Œğ‘¾ âˆˆ ğ‘…<sup>ğ‘‘<sub>out</sub>Ã—ğ‘‘<sub>in</sub></sup>ã€‚ğ‘‘<sub>in</sub>è¡¨ç¤ºè¾“å…¥èŠ‚ç‚¹æ•°ï¼Œğ‘‘<sub>out</sub>è¡¨ç¤ºè¾“å‡ºèŠ‚ç‚¹æ•°ï¼›ğ‘¿å½¢çŠ¶ä¸º[ğ‘, ğ‘‘<sub>in</sub>]ï¼Œè¡¨ç¤ºğ‘ä¸ªæ ·æœ¬çš„è¾“å…¥æ•°æ®ï¼Œæ¯ä¸ªæ ·æœ¬çš„ç‰¹å¾é•¿åº¦ä¸ºğ‘‘<sub>in</sub>ï¼›ğ‘¾çš„å½¢çŠ¶ä¸º[ğ‘‘<sub>in</sub>, ğ‘‘<sub>out</sub>]ï¼Œå…±åŒ…å«äº†ğ‘‘<sub>in</sub> âˆ— ğ‘‘<sub>out</sub>ä¸ªç½‘ç»œå‚æ•°ï¼›åç½®å‘é‡ğ’ƒ å½¢çŠ¶ä¸ºğ‘‘<sub>out</sub>ï¼Œæ¯ä¸ªè¾“å‡ºèŠ‚ç‚¹ä¸Šå‡æ·»åŠ ä¸€ä¸ªåç½®å€¼ï¼›@ç¬¦å·è¡¨ç¤ºçŸ©é˜µç›¸ä¹˜ã€‚</p><p>è€ƒè™‘ä¸¤ä¸ªæ ·æœ¬ï¼Œè¾“å…¥ç‰¹å¾é•¿åº¦ğ‘‘<sub>in</sub> = 3ï¼Œè¾“å‡ºç‰¹å¾é•¿åº¦ğ‘‘<sub>out</sub> = 2çš„æ¨¡å‹ï¼Œå±•å¼€ä¸ºï¼š<br>$$<br>\left[\begin{array}{ll}<br>o_{1}^{(1)} &amp; o_{2}^{(1)}<br>\<br>o_{1}^{(2)} &amp; o_{2}^{(2)}<br>\end{array}\right]=\left[\begin{array}{lll}<br>x_{1}^{(1)} &amp; x_{2}^{(1)} &amp; x_{3}^{(1)}<br>\<br>x_{1}^{(2)} &amp; x_{2}^{(2)} &amp; x_{3}^{(2)}<br>\end{array}\right]\left[\begin{array}{ll}<br>w_{11} &amp; w_{12}<br>\<br>w_{21} &amp; w_{22}<br>\<br>w_{31} &amp; w_{32}<br>\end{array}\right]+\left[\begin{array}{l}<br>b_{1}<br>\<br>b_{2}<br>\end{array}\right]<br>$$<br>å…¶ä¸­ğ‘¥1<sup>(1)</sup>ã€ğ‘œ1<sup>(1)</sup>ç­‰ç¬¦å·çš„ä¸Šæ ‡è¡¨ç¤ºæ ·æœ¬ç´¢å¼•å·(æ ·æœ¬ç¼–å·)ï¼Œä¸‹æ ‡è¡¨ç¤ºæŸä¸ªæ ·æœ¬å‘é‡çš„å…ƒç´ ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210408151633039.png"></p><p>æ¨å¹¿åˆ°å›¾ç‰‡ï¼Œå‡è®¾ä¸€å¼ ç°åº¦å›¾xä½¿ç”¨çŸ©é˜µå­˜å‚¨ï¼Œå½¢çŠ¶ä¸ºï¼š[h,w]ã€‚bå¼ å›¾ç‰‡ä½¿ç”¨å½¢çŠ¶ä¸º[b,h,w]çš„å¼ é‡Xå­˜å‚¨ã€‚è€Œæ¨¡å‹åªæ¥å—å‘é‡å½¢å¼çš„è¾“å…¥ï¼Œå› æ­¤éœ€è¦å°†[h,w]æ‰“å¹³æˆ[hÂ·w]çš„ä¸€ç»´å‘é‡ï¼Œé•¿åº¦d<sub>in</sub>=hÂ·wã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210408152925228.png"></p><blockquote><p>==<strong>one-hot ç¼–ç (ç‹¬çƒ­ç¼–ç ï¼‰ï¼š</strong>==</p><p>æ•°å­—ç¼–ç å¯ä»¥ç”¨ä¸€ä¸ªæ•°å­—æ¥è¡¨ç¤ºæ ‡ç­¾ä¿¡æ¯ï¼Œæ­¤æ—¶è¾“å‡ºåªéœ€è¦ä¸€ä¸ªèŠ‚ç‚¹å³å¯è¡¨ç¤ºç½‘ç»œçš„é¢„æµ‹ç±»åˆ«å€¼ï¼Œä¾‹å¦‚æ•°å­—1 è¡¨ç¤ºçŒ«ï¼Œæ•°å­—3 è¡¨ç¤ºé±¼ç­‰ã€‚ä½†æ˜¯æ•°å­—ç¼–ç ä¸€ä¸ªæœ€å¤§çš„é—®é¢˜æ˜¯ï¼Œæ•°å­—ä¹‹é—´å­˜åœ¨å¤©ç„¶çš„å¤§å°å…³ç³»ï¼Œä¾‹å¦‚1 &lt; 2 &lt; 3ï¼Œå¦‚æœ1ã€2ã€3 åˆ†åˆ«å¯¹åº”çš„æ ‡ç­¾æ˜¯çŒ«ã€ç‹—ã€é±¼ï¼Œä»–ä»¬ä¹‹é—´å¹¶æ²¡æœ‰å¤§å°å…³ç³»ï¼Œæ‰€ä»¥é‡‡ç”¨æ•°å­—ç¼–ç çš„æ—¶å€™ä¼šè¿«ä½¿æ¨¡å‹å»å­¦ä¹ è¿™ç§ä¸å¿…è¦çš„çº¦æŸã€‚</p><p>é‚£ä¹ˆæ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿå¯ä»¥å°†è¾“å‡ºè®¾ç½®ä¸ºğ‘‘outä¸ªè¾“å‡ºèŠ‚ç‚¹çš„å‘é‡ï¼Œğ‘‘outä¸ç±»åˆ«æ•°ç›¸åŒï¼Œè®©ç¬¬ğ‘– âˆˆ [1, ğ‘‘out]ä¸ªè¾“å‡ºèŠ‚ç‚¹çš„å€¼è¡¨ç¤ºå½“å‰æ ·æœ¬å±äºç±»åˆ«ğ‘–çš„æ¦‚ç‡ğ‘ƒ(ğ’™å±äºç±»åˆ«ğ‘–|ğ’™)ã€‚æˆ‘ä»¬åªè€ƒè™‘è¾“å…¥å›¾ç‰‡åªè¾“å…¥ä¸€ä¸ªç±»åˆ«çš„æƒ…å†µï¼Œæ­¤æ—¶è¾“å…¥å›¾ç‰‡çš„çœŸå®æ ‡ç­¾å·²ç»å”¯ä¸€ç¡®å®šï¼šå¦‚æœç‰©ä½“å±äºç¬¬ğ‘–ç±»çš„è¯ï¼Œé‚£ä¹ˆç´¢å¼•ä¸ºğ‘–çš„ä½ç½®ä¸Šè®¾ç½®ä¸º1ï¼Œå…¶ä»–ä½ç½®è®¾ç½®ä¸º0ï¼Œæˆ‘ä»¬æŠŠè¿™ç§ç¼–ç æ–¹å¼å«ä½œ<strong>one-hot ç¼–ç (ç‹¬çƒ­ç¼–ç )</strong></p></blockquote><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210408153228789.png"></p><p>æ‰‹å†™æ•°å­—å›¾ç‰‡çš„æ€»ç±»åˆ«æ•°æœ‰10 ç§ï¼Œå³è¾“å‡ºèŠ‚ç‚¹æ•°ğ‘‘out = 10ï¼Œé‚£ä¹ˆå¯¹äºæŸä¸ªæ ·æœ¬ï¼Œå‡è®¾å®ƒå±äºç±»åˆ«ğ‘–ï¼Œå³å›¾ç‰‡çš„ä¸­æ•°å­—ä¸ºğ‘–ï¼Œåªéœ€è¦ä¸€ä¸ªé•¿åº¦ä¸º10 çš„å‘é‡ğ’šï¼Œå‘é‡ğ’šçš„ç´¢å¼•å·ä¸ºğ‘–çš„å…ƒç´ è®¾ç½®ä¸º1ï¼Œå…¶ä»–ä½ä¸º0ã€‚æ¯”å¦‚å›¾ç‰‡0 çš„One-hot ç¼–ç ä¸º[1,0,0, â€¦ ,0]ï¼Œå›¾ç‰‡2 çš„Onehotç¼–ç ä¸º[0,0,1, â€¦ ,0]ï¼Œå›¾ç‰‡9 çš„One-hot ç¼–ç ä¸º[0,0,0, â€¦ ,1]ã€‚ï¼Œç›¸å¯¹äºæ•°å­—ç¼–ç æ¥è¯´ï¼Œå ç”¨è¾ƒå¤šçš„å­˜å‚¨ç©ºé—´ï¼Œæ‰€ä»¥ä¸€èˆ¬åœ¨å­˜å‚¨æ—¶è¿˜æ˜¯é‡‡ç”¨æ•°å­—ç¼–ç ï¼Œåœ¨è®¡ç®—æ—¶ï¼Œæ ¹æ®éœ€è¦æ¥æŠŠæ•°å­—ç¼–ç è½¬æ¢æˆOne-hot ç¼–ç ã€‚</p><pre class=" language-python"><code class="language-python">y <span class="token operator">=</span> tf<span class="token punctuation">.</span>constant<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># æ•°å­—ç¼–ç çš„4 ä¸ªæ ·æœ¬æ ‡ç­¾</span>y <span class="token operator">=</span> tf<span class="token punctuation">.</span>one_hot<span class="token punctuation">(</span>y<span class="token punctuation">,</span> depth<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># one-hot ç¼–ç ï¼ŒæŒ‡å®šç±»åˆ«æ€»æ•°ä¸º10</span><span class="token keyword">print</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token comment" spellcheck="true">###è¾“å‡º</span>tf<span class="token punctuation">.</span>Tensor<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">.</span> <span class="token number">0</span><span class="token punctuation">.</span> <span class="token number">0</span><span class="token punctuation">.</span> <span class="token number">0</span><span class="token punctuation">.</span> <span class="token number">0</span><span class="token punctuation">.</span> <span class="token number">0</span><span class="token punctuation">.</span> <span class="token number">0</span><span class="token punctuation">.</span> <span class="token number">0</span><span class="token punctuation">.</span> <span class="token number">0</span><span class="token punctuation">.</span> <span class="token number">0</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">.</span> <span class="token number">1</span><span class="token punctuation">.</span> <span class="token number">0</span><span class="token punctuation">.</span> <span class="token number">0</span><span class="token punctuation">.</span> <span class="token number">0</span><span class="token punctuation">.</span> <span class="token number">0</span><span class="token punctuation">.</span> <span class="token number">0</span><span class="token punctuation">.</span> <span class="token number">0</span><span class="token punctuation">.</span> <span class="token number">0</span><span class="token punctuation">.</span> <span class="token number">0</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">.</span> <span class="token number">0</span><span class="token punctuation">.</span> <span class="token number">1</span><span class="token punctuation">.</span> <span class="token number">0</span><span class="token punctuation">.</span> <span class="token number">0</span><span class="token punctuation">.</span> <span class="token number">0</span><span class="token punctuation">.</span> <span class="token number">0</span><span class="token punctuation">.</span> <span class="token number">0</span><span class="token punctuation">.</span> <span class="token number">0</span><span class="token punctuation">.</span> <span class="token number">0</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">.</span> <span class="token number">0</span><span class="token punctuation">.</span> <span class="token number">0</span><span class="token punctuation">.</span> <span class="token number">1</span><span class="token punctuation">.</span> <span class="token number">0</span><span class="token punctuation">.</span> <span class="token number">0</span><span class="token punctuation">.</span> <span class="token number">0</span><span class="token punctuation">.</span> <span class="token number">0</span><span class="token punctuation">.</span> <span class="token number">0</span><span class="token punctuation">.</span> <span class="token number">0</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> shape<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dtype<span class="token operator">=</span>float32<span class="token punctuation">)</span><span class="token comment" spellcheck="true">###</span></code></pre><p>è¾“å…¥æ˜¯ä¸€å¼ æ‰“å¹³åçš„å›¾ç‰‡å‘é‡ğ’™ âˆˆ ğ‘…<sup>784</sup>ï¼Œè¾“å‡ºæ˜¯ä¸€ä¸ªé•¿åº¦ä¸º10 çš„å‘é‡ âˆˆ ğ‘…<sup>10</sup>ï¼Œå›¾ç‰‡çš„çœŸå®æ ‡ç­¾ğ‘¦ç»è¿‡One-hot ç¼–ç åå˜æˆé•¿åº¦ä¸º10 çš„é0 å³1 çš„ç¨€ç–å‘é‡ğ’š âˆˆ {0,1}<sup>10</sup>ã€‚é¢„æµ‹æ¨¡å‹é‡‡ç”¨å¤šè¾“å…¥ã€å¤šè¾“å‡ºçš„çº¿æ€§æ¨¡å‹ = ğ‘¾<sup>ğ“</sup>ğ’™ + ğ’ƒï¼Œå…¶ä¸­æ¨¡å‹çš„è¾“å‡ºè®°ä¸ºè¾“å…¥çš„é¢„æµ‹å€¼ ï¼Œæˆ‘ä»¬å¸Œæœ› è¶Šæ¥è¿‘çœŸå®æ ‡ç­¾ğ’šè¶Šå¥½ã€‚ä¸€èˆ¬æŠŠè¾“å…¥ç»è¿‡ä¸€æ¬¡(çº¿æ€§)å˜æ¢å«ä½œ<strong>ä¸€å±‚ç½‘ç»œ</strong>ã€‚</p><h3 id="2-3-è¯¯å·®è®¡ç®—"><a href="#2-3-è¯¯å·®è®¡ç®—" class="headerlink" title="2.3 è¯¯å·®è®¡ç®—"></a>2.3 è¯¯å·®è®¡ç®—</h3><p>å¯¹äºğ‘›ä¸ªæ ·æœ¬çš„å‡æ–¹å·®æŸå¤±å‡½æ•°å¯ä»¥è¡¨è¾¾ä¸ºï¼š<br>$$<br>\mathcal{L}(\boldsymbol{o}, \boldsymbol{y})=\frac{1}{n} \sum_{i=1}^{n} \sum_{j=1}^{10}\left(o_{j}^{(i)}-y_{j}^{(i)}\right)^{2}<br>$$<br>ç°åœ¨æˆ‘ä»¬åªéœ€è¦é‡‡ç”¨æ¢¯åº¦ä¸‹é™ç®—æ³•æ¥ä¼˜åŒ–æŸå¤±å‡½æ•°å¾—åˆ°ğ‘¾, ğ’ƒçš„æœ€ä¼˜è§£ï¼Œç„¶åå†åˆ©ç”¨æ±‚å¾—çš„æ¨¡å‹å»é¢„æµ‹æœªçŸ¥çš„æ‰‹å†™æ•°å­—å›¾ç‰‡ğ’™ âˆˆ D<sup>test</sup>ã€‚</p><p>è¿™é‡Œæœ€èµ·ç å­˜åœ¨ä¸¤ä¸ªé—®é¢˜ï¼š</p><ul><li><input disabled="" type="checkbox"> <strong>çº¿æ€§æ¨¡å‹</strong> æ˜¯æœºå™¨å­¦ä¹ ä¸­é—´æœ€ç®€å•çš„æ•°å­¦æ¨¡å‹ä¹‹ä¸€ï¼Œå‚æ•°é‡å°‘ï¼Œè®¡ç®—ç®€å•ï¼Œä½†æ˜¯åªèƒ½è¡¨è¾¾çº¿æ€§å…³ç³»ã€‚å³ä½¿æ˜¯ç®€å•å¦‚æ•°å­—å›¾ç‰‡è¯†åˆ«ä»»åŠ¡ï¼Œå®ƒä¹Ÿæ˜¯å±äºå›¾ç‰‡è¯†åˆ«çš„èŒƒç•´ï¼Œå¦‚æœåªä½¿ç”¨ä¸€ä¸ªç®€å•çš„çº¿æ€§æ¨¡å‹å»é€¼è¿‘å¤æ‚çš„äººè„‘å›¾ç‰‡è¯†åˆ«æ¨¡å‹ï¼Œå¾ˆæ˜¾ç„¶ä¸èƒ½èƒœä»»ã€‚</li><li><input disabled="" type="checkbox"> <strong>è¡¨è¾¾èƒ½åŠ›</strong> ä½“ç°ä¸ºé€¼è¿‘å¤æ‚åˆ†å¸ƒçš„èƒ½åŠ›ã€‚ä¸Šé¢çš„è§£å†³æ–¹æ¡ˆåªä½¿ç”¨äº†å°‘é‡ç¥ç»å…ƒç»„æˆçš„ä¸€å±‚ç½‘ç»œæ¨¡å‹ï¼Œç›¸å¯¹äºäººè„‘ä¸­åƒäº¿çº§åˆ«çš„ç¥ç»å…ƒäº’è”ç»“æ„ï¼Œå®ƒçš„è¡¨è¾¾èƒ½åŠ›æ˜æ˜¾åå¼±ã€‚</li></ul><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210408160825603.png"></p><h3 id="2-4-éçº¿æ€§æ¨¡å‹"><a href="#2-4-éçº¿æ€§æ¨¡å‹" class="headerlink" title="2.4 éçº¿æ€§æ¨¡å‹"></a>2.4 éçº¿æ€§æ¨¡å‹</h3><p>æ—¢ç„¶çº¿æ€§æ¨¡å‹ä¸å¯è¡Œï¼Œæˆ‘ä»¬å¯ä»¥ç»™çº¿æ€§æ¨¡å‹åµŒå¥—ä¸€ä¸ªéçº¿æ€§å‡½æ•°ï¼Œå³å¯å°†å…¶è½¬æ¢ä¸ºéçº¿æ€§æ¨¡å‹ã€‚æˆ‘ä»¬æŠŠè¿™ä¸ªéçº¿æ€§å‡½æ•°ç§°ä¸ºæ¿€æ´»å‡½æ•°(Activation Function)ï¼Œç”¨ğœè¡¨ç¤ºï¼šo= ğœ(ğ‘¾ğ’™ + ğ’ƒ)ï¼Œè¿™é‡Œçš„ğœä»£è¡¨äº†æŸä¸ªå…·ä½“çš„éçº¿æ€§æ¿€æ´»å‡½æ•°ï¼Œå¦‚Sigmoid å‡½æ•°ã€ReLU å‡½æ•°ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210408161820924.png"></p><p>ReLU å‡½æ•°éå¸¸ç®€å•ï¼Œåœ¨ğ‘¦ = ğ‘¥çš„åŸºç¡€ä¸Šé¢æˆªå»äº†ğ‘¥ &lt; 0çš„éƒ¨åˆ†ï¼Œå¯ä»¥ç›´è§‚åœ°ç†è§£ä¸ºReLU å‡½æ•°ä»…ä¿ç•™æ­£çš„è¾“å…¥éƒ¨ä»½ï¼Œæ¸…é›¶è´Ÿçš„è¾“å…¥ï¼Œå…·æœ‰å•è¾¹æŠ‘åˆ¶ç‰¹æ€§ã€‚ReLU å‡½æ•°å´æœ‰ä¼˜è‰¯çš„éçº¿æ€§ç‰¹æ€§ï¼Œè€Œä¸”æ¢¯åº¦è®¡ç®—ç®€å•ï¼Œè®­ç»ƒç¨³å®šï¼Œæ˜¯æ·±åº¦å­¦ä¹ æ¨¡å‹ä½¿ç”¨æœ€å¹¿æ³›çš„æ¿€æ´»å‡½æ•°ä¹‹ä¸€ã€‚æˆ‘ä»¬è¿™é‡Œé€šè¿‡åµŒå¥—ReLU å‡½æ•°å°†æ¨¡å‹è½¬æ¢ä¸ºéçº¿æ€§æ¨¡å‹ï¼šo= ReLU(ğ‘¾ğ’™ + ğ’ƒ)</p><h3 id="2-5-è¡¨è¾¾èƒ½åŠ›"><a href="#2-5-è¡¨è¾¾èƒ½åŠ›" class="headerlink" title="2.5 è¡¨è¾¾èƒ½åŠ›"></a>2.5 è¡¨è¾¾èƒ½åŠ›</h3><p>é’ˆå¯¹äºæ¨¡å‹çš„è¡¨è¾¾èƒ½åŠ›åå¼±çš„é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡é‡å¤å †å å¤šæ¬¡å˜æ¢æ¥å¢åŠ å…¶è¡¨è¾¾èƒ½åŠ›ï¼š<br>$$<br>\begin{align}<br>h1 =&amp; ReLU(W_1X+b1)\<br>h2 =&amp; ReLU(W_2X+b2)\<br>o =&amp; W_3h2+b_3<br> \end{align}<br>$$<br>æŠŠç¬¬ä¸€å±‚ç¥ç»å…ƒçš„è¾“å‡ºå€¼ğ’‰1ä½œä¸ºç¬¬äºŒå±‚ç¥ç»å…ƒæ¨¡å‹çš„è¾“å…¥ï¼ŒæŠŠç¬¬äºŒå±‚ç¥ç»å…ƒçš„è¾“å‡ºğ’‰2ä½œä¸ºç¬¬ä¸‰å±‚ç¥ç»å…ƒçš„è¾“å…¥ï¼Œæœ€åä¸€å±‚ç¥ç»å…ƒçš„è¾“å‡ºä½œä¸ºæ¨¡å‹çš„è¾“å‡º ã€‚å‡½æ•°çš„åµŒå¥—è¡¨ç°ä¸ºç½‘ç»œå±‚çš„å‰åç›¸è¿ï¼Œæ¯å †å ä¸€ä¸ª(é)çº¿æ€§ç¯èŠ‚ï¼Œç½‘ç»œå±‚æ•°å¢åŠ ä¸€å±‚ã€‚æˆ‘ä»¬æŠŠè¾“å…¥èŠ‚ç‚¹ğ’™æ‰€åœ¨çš„å±‚å«ä½œè¾“å…¥å±‚ï¼Œæ¯ä¸€ä¸ªéçº¿æ€§æ¨¡å—çš„è¾“å‡ºğ’‰ğ‘–è¿åŒå®ƒçš„ç½‘ç»œå±‚å‚æ•°ğ‘¾ğ‘–å’Œğ’ƒğ‘–ç§°ä¸ºä¸€å±‚ç½‘ç»œå±‚ï¼Œç‰¹åˆ«åœ°ï¼Œå¯¹äºç½‘ç»œä¸­é—´çš„å±‚ï¼Œå«ä½œéšè—å±‚ï¼Œæœ€åä¸€å±‚å«ä½œè¾“å‡ºå±‚ã€‚è¿™ç§ç”±å¤§é‡ç¥ç»å…ƒæ¨¡å‹è¿æ¥å½¢æˆçš„ç½‘ç»œç»“æ„ç§°ä¸ºç¥ç»ç½‘ç»œ(Neural Network)ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210408163123638.png"></p><h3 id="2-6-æ‰‹å†™æ•°å­—å›¾ç‰‡è¯†åˆ«-Tensorflowå®æˆ˜"><a href="#2-6-æ‰‹å†™æ•°å­—å›¾ç‰‡è¯†åˆ«-Tensorflowå®æˆ˜" class="headerlink" title="2.6 æ‰‹å†™æ•°å­—å›¾ç‰‡è¯†åˆ«-Tensorflowå®æˆ˜"></a>2.6 æ‰‹å†™æ•°å­—å›¾ç‰‡è¯†åˆ«-Tensorflowå®æˆ˜</h3><p>å¯¹äºç¬¬ä¸€å±‚æ¨¡å‹æ¥è¯´ï¼Œå®ƒæ¥å—çš„è¾“å…¥ğ’™ âˆˆ ğ‘…<sup>784</sup>ï¼Œè¾“å‡ºğ’‰1 âˆˆ ğ‘…<sup>56</sup>è®¾è®¡ä¸ºé•¿åº¦ä¸º256 çš„å‘é‡ï¼Œä¸éœ€è¦æ˜¾å¼åœ°ç¼–å†™$ğ’‰1 = ReLU(ğ‘¾_1ğ’™ + ğ’ƒ_1)$çš„è®¡ç®—é€»è¾‘ï¼Œåœ¨TensorFlow ä¸­é€šè¿‡ä¸€è¡Œä»£ç å³å¯å®ç°ï¼š</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># åˆ›å»ºä¸€å±‚ç½‘ç»œï¼Œè®¾ç½®è¾“å‡ºèŠ‚ç‚¹æ•°ä¸º256ï¼Œæ¿€æ´»å‡½æ•°ç±»å‹ä¸ºReLU</span>layers<span class="token punctuation">.</span>Dense<span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">,</span> activation<span class="token operator">=</span><span class="token string">'relu'</span><span class="token punctuation">)</span></code></pre><p>ä½¿ç”¨TensorFlow çš„Sequential å®¹å™¨å¯ä»¥éå¸¸æ–¹ä¾¿åœ°æ­å»ºå¤šå±‚çš„ç½‘ç»œã€‚å¯¹äº3 å±‚ç½‘ç»œï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¿«é€Ÿå®Œæˆ3 å±‚ç½‘ç»œçš„æ­å»ºï¼š</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># åˆ©ç”¨Sequential å®¹å™¨å°è£…3 ä¸ªç½‘ç»œå±‚ï¼Œå‰ç½‘ç»œå±‚çš„è¾“å‡ºé»˜è®¤ä½œä¸ºä¸‹ä¸€å±‚çš„è¾“å…¥</span>model <span class="token operator">=</span> keras<span class="token punctuation">.</span>Sequential<span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token comment" spellcheck="true"># 3 ä¸ªéçº¿æ€§å±‚çš„åµŒå¥—æ¨¡å‹</span>layers<span class="token punctuation">.</span>Dense<span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">,</span> activation<span class="token operator">=</span><span class="token string">'relu'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true"># éšè—å±‚1</span>layers<span class="token punctuation">.</span>Dense<span class="token punctuation">(</span><span class="token number">128</span><span class="token punctuation">,</span> activation<span class="token operator">=</span><span class="token string">'relu'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true"># éšè—å±‚2</span>layers<span class="token punctuation">.</span>Dense<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># è¾“å‡ºå±‚ï¼Œè¾“å‡ºèŠ‚ç‚¹æ•°ä¸º10</span></code></pre><p>ç¬¬1 å±‚çš„è¾“å‡ºèŠ‚ç‚¹æ•°è®¾è®¡ä¸º256ï¼Œç¬¬2 å±‚è®¾è®¡ä¸º128ï¼Œè¾“å‡ºå±‚èŠ‚ç‚¹æ•°è®¾è®¡ä¸º10ã€‚ç›´æ¥è°ƒç”¨è¿™ä¸ªæ¨¡å‹å¯¹è±¡model(x)å°±å¯ä»¥è¿”å›æ¨¡å‹æœ€åä¸€å±‚çš„è¾“å‡ºğ‘œã€‚</p><p>æ­å»ºå®Œæˆ3 å±‚ç¥ç»ç½‘ç»œçš„å¯¹è±¡åï¼Œç»™å®šè¾“å…¥ğ’™ï¼Œè°ƒç”¨model(ğ’™)å¾—åˆ°æ¨¡å‹è¾“å‡ºğ‘œåï¼Œé€šè¿‡MSE æŸå¤±å‡½æ•°è®¡ç®—å½“å‰çš„è¯¯å·®â„’ï¼š</p><pre class=" language-python"><code class="language-python"><span class="token keyword">with</span> tf<span class="token punctuation">.</span>GradientTape<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> tape<span class="token punctuation">:</span> <span class="token comment" spellcheck="true"># æ„å»ºæ¢¯åº¦è®°å½•ç¯å¢ƒ</span>    <span class="token comment" spellcheck="true"># æ‰“å¹³æ“ä½œï¼Œ[b, 28, 28] => [b, 784]</span>    x <span class="token operator">=</span> tf<span class="token punctuation">.</span>reshape<span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token operator">*</span><span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># Step1. å¾—åˆ°æ¨¡å‹è¾“å‡ºoutput [b, 784] => [b, 10]</span>    out <span class="token operator">=</span> model<span class="token punctuation">(</span>x<span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># [b] => [b, 10]</span>    y_onehot <span class="token operator">=</span> tf<span class="token punctuation">.</span>one_hot<span class="token punctuation">(</span>y<span class="token punctuation">,</span> depth<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># è®¡ç®—å·®çš„å¹³æ–¹å’Œï¼Œ[b, 10]</span>    loss <span class="token operator">=</span> tf<span class="token punctuation">.</span>square<span class="token punctuation">(</span>out<span class="token operator">-</span>y_onehot<span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># è®¡ç®—æ¯ä¸ªæ ·æœ¬çš„å¹³å‡è¯¯å·®ï¼Œ[b]</span>    loss <span class="token operator">=</span> tf<span class="token punctuation">.</span>reduce_sum<span class="token punctuation">(</span>loss<span class="token punctuation">)</span> <span class="token operator">/</span> x<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span></code></pre><p>å†åˆ©ç”¨TensorFlow æä¾›çš„è‡ªåŠ¨æ±‚å¯¼å‡½æ•°tape.gradient(loss, model.trainable_variables)æ±‚å‡ºæ¨¡å‹ä¸­æ‰€æœ‰å‚æ•°çš„æ¢¯åº¦ä¿¡æ¯$\frac{\partial L}{\partial ğœƒ}$, ğœƒ âˆˆ {ğ‘¾1, ğ’ƒ1, ğ‘¾2, ğ’ƒ2, ğ‘¾3, ğ’ƒ3}ã€‚</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># Step3. è®¡ç®—å‚æ•°çš„æ¢¯åº¦ w1, w2, w3, b1, b2, b3</span>grads <span class="token operator">=</span> tape<span class="token punctuation">.</span>gradient<span class="token punctuation">(</span>loss<span class="token punctuation">,</span> model<span class="token punctuation">.</span>trainable_variables<span class="token punctuation">)</span></code></pre><p>è®¡ç®—è·å¾—çš„æ¢¯åº¦ç»“æœä½¿ç”¨grads åˆ—è¡¨å˜é‡ä¿å­˜ã€‚å†ä½¿ç”¨optimizers å¯¹è±¡è‡ªåŠ¨æŒ‰ç…§æ¢¯åº¦æ›´æ–°æ³•åˆ™å»æ›´æ–°æ¨¡å‹çš„å‚æ•°ğœƒã€‚</p><p>$$ğœƒâ€™ = ğœƒ - \etaÂ·\frac{\partial L}{\partial ğœƒ}$$</p><p>å®ç°å¦‚ä¸‹:</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># è‡ªåŠ¨è®¡ç®—æ¢¯åº¦</span>grads <span class="token operator">=</span> tape<span class="token punctuation">.</span>gradient<span class="token punctuation">(</span>loss<span class="token punctuation">,</span> model<span class="token punctuation">.</span>trainable_variables<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># w' = w - lr * gradï¼Œæ›´æ–°ç½‘ç»œå‚æ•°</span>optimizer<span class="token punctuation">.</span>apply_gradients<span class="token punctuation">(</span>zip<span class="token punctuation">(</span>grads<span class="token punctuation">,</span> model<span class="token punctuation">.</span>trainable_variables<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><p>ç”±äº3 å±‚çš„ç¥ç»ç½‘ç»œè¡¨è¾¾èƒ½åŠ›è¾ƒå¼ºï¼Œæ‰‹å†™æ•°å­—å›¾ç‰‡è¯†åˆ«ä»»åŠ¡ç›¸å¯¹ç®€å•ï¼Œè¯¯å·®å€¼å¯ä»¥è¾ƒå¿«é€Ÿã€ç¨³å®šåœ°ä¸‹é™ï¼Œå…¶ä¸­ï¼ŒæŠŠå¯¹æ•°æ®é›†çš„æ‰€æœ‰æ ·æœ¬è¿­ä»£ä¸€éå«ä½œä¸€ä¸ªEpochï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é—´éš”æ•°ä¸ªEpoch åæµ‹è¯•æ¨¡å‹çš„å‡†ç¡®ç‡ç­‰æŒ‡æ ‡ï¼Œæ–¹ä¾¿ç›‘æ§æ¨¡å‹çš„è®­ç»ƒæ•ˆæœã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210408180132023.png"></p><h2 id="ç¬¬ä¸‰ç« -TensorFlowç¼–ç¨‹åŸºç¡€"><a href="#ç¬¬ä¸‰ç« -TensorFlowç¼–ç¨‹åŸºç¡€" class="headerlink" title="ç¬¬ä¸‰ç«  TensorFlowç¼–ç¨‹åŸºç¡€"></a>ç¬¬ä¸‰ç«  TensorFlowç¼–ç¨‹åŸºç¡€</h2><h3 id="3-1-æ•°æ®ç±»å‹"><a href="#3-1-æ•°æ®ç±»å‹" class="headerlink" title="3.1 æ•°æ®ç±»å‹"></a>3.1 æ•°æ®ç±»å‹</h3><p>1ã€<strong>æ•°å€¼ç±»å‹</strong>ï¼šå¼ é‡[Tensor]æ˜¯[TensorFlow] çš„ä¸»è¦æ•°æ®è½½ä½“ï¼Œæ ¹æ®ç»´åº¦æ•°æ¥åŒºåˆ†ï¼Œå¯åˆ†ä¸ºï¼š</p><ul><li><p>æ ‡é‡(Scalar)ã€‚å•ä¸ªçš„å®æ•°ï¼Œå¦‚1.2, 3.4 ç­‰ï¼Œç»´åº¦(Dimension)æ•°ä¸º0ï¼Œshape ä¸º[]ã€‚</p></li><li><p>å‘é‡(Vector)ã€‚ğ‘›ä¸ªå®æ•°çš„æœ‰åºé›†åˆï¼Œé€šè¿‡ä¸­æ‹¬å·åŒ…è£¹ï¼Œå¦‚[1.2]ï¼Œ[1.2, 3.4]ç­‰ï¼Œç»´åº¦æ•°<br>ä¸º1ï¼Œé•¿åº¦ä¸å®šï¼Œshape ä¸º[ğ‘›]ã€‚</p></li><li><p>çŸ©é˜µ(Matrix)ã€‚ã€‚ğ‘›è¡Œğ‘šåˆ—å®æ•°çš„æœ‰åºé›†åˆï¼Œå¦‚[[1,2], [3,4]]ï¼Œä¹Ÿå¯ä»¥å†™æˆ$\left[ \begin{matrix} 1 &amp; 2\ 3 &amp; 4 \end{matrix} \right] $</p></li><li><p>å¼ é‡(Tensor)ã€‚æ‰€æœ‰ç»´åº¦æ•°dim &gt; 2çš„æ•°ç»„ç»Ÿç§°ä¸ºå¼ é‡ã€‚å¼ é‡çš„æ¯ä¸ªç»´åº¦ä¹Ÿä½œè½´(Axis)ï¼Œä¸€èˆ¬ç»´åº¦ä»£è¡¨äº†å…·ä½“çš„ç‰©ç†å«ä¹‰ï¼Œæ¯”å¦‚Shape ä¸º[2,32,32,3]çš„å¼ é‡å…±æœ‰4 ç»´ï¼Œå¦‚æœè¡¨ç¤ºå›¾ç‰‡æ•°æ®çš„è¯ï¼Œæ¯ä¸ªç»´åº¦/è½´ä»£è¡¨çš„å«ä¹‰åˆ†åˆ«æ˜¯å›¾ç‰‡æ•°é‡ã€å›¾ç‰‡é«˜åº¦ã€å›¾ç‰‡å®½åº¦ã€å›¾ç‰‡é€šé“æ•°ï¼Œå…¶ä¸­2 ä»£è¡¨äº†2 å¼ å›¾ç‰‡ï¼Œ32 ä»£è¡¨äº†é«˜ã€å®½å‡ä¸º32ï¼Œ3 ä»£è¡¨äº†RGB å…±3 ä¸ªé€šé“ã€‚å¼ é‡çš„ç»´åº¦æ•°ä»¥åŠæ¯ä¸ªç»´åº¦æ‰€ä»£è¡¨çš„å…·ä½“ç‰©ç†å«ä¹‰éœ€è¦ç”±ç”¨æˆ·è‡ªè¡Œå®šä¹‰ã€‚</p></li></ul><p>é¦–å…ˆæ¥çœ‹æ ‡é‡åœ¨TensorFlow æ˜¯å¦‚ä½•åˆ›å»ºçš„ï¼Œå®ç°å¦‚ä¸‹ï¼š</p><pre class=" language-python"><code class="language-python">b <span class="token operator">=</span> tf<span class="token punctuation">.</span>constant<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">.</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token comment" spellcheck="true">#tf.Tensor([1. 2. 1. 9.], shape=(4,), dtype=float32)</span><span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>numpy<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># å°†TF å¼ é‡çš„æ•°æ®å¯¼å‡ºä¸ºnumpy æ•°ç»„æ ¼å¼</span></code></pre><p>åŒæ ·çš„æ–¹æ³•ï¼Œå®šä¹‰çŸ©é˜µçš„å®ç°å¦‚ä¸‹ï¼š</p><pre class=" language-python"><code class="language-python">a <span class="token operator">=</span> tf<span class="token punctuation">.</span>constant<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>shape<span class="token punctuation">)</span><span class="token comment" spellcheck="true">#tf.Tensor([</span><span class="token comment" spellcheck="true">#[1 2]</span><span class="token comment" spellcheck="true"># [3 4]]</span><span class="token comment" spellcheck="true"># shape=(2, 2), dtype=int32) </span><span class="token comment" spellcheck="true">#(2, 2)</span></code></pre><p>2ã€<strong>å­—ç¬¦ä¸²ç±»å‹</strong>ï¼šé™¤äº†ä¸°å¯Œçš„æ•°å€¼ç±»å‹å¼ é‡å¤–ï¼ŒTensorFlow è¿˜æ”¯æŒå­—ç¬¦ä¸²(String) ç±»å‹çš„æ•°æ®ã€‚</p><pre class=" language-python"><code class="language-python">a <span class="token operator">=</span> tf<span class="token punctuation">.</span>constant<span class="token punctuation">(</span><span class="token string">"hello world"</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token comment" spellcheck="true">#tf.Tensor(b'hello world', shape=(), dtype=string)</span></code></pre><p>åœ¨tf.strings æ¨¡å—ä¸­ï¼Œæä¾›äº†å¸¸è§çš„å­—ç¬¦ä¸²ç±»å‹çš„å·¥å…·å‡½æ•°ï¼Œå¦‚å°å†™åŒ–lower()ã€æ‹¼æ¥<br>join()ã€é•¿åº¦length()ã€åˆ‡åˆ†split()ç­‰ã€‚</p><pre class=" language-python"><code class="language-python">b <span class="token operator">=</span> tf<span class="token punctuation">.</span>strings<span class="token punctuation">.</span>lower<span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token comment" spellcheck="true">#tf.Tensor(b'hello world', shape=(), dtype=string)</span></code></pre><p>3ã€<strong>å¸ƒå°”ç±»å‹</strong>ï¼šä¸ºäº†æ–¹ä¾¿è¡¨è¾¾æ¯”è¾ƒè¿ç®—æ“ä½œçš„ç»“æœï¼ŒTensorFlow è¿˜æ”¯æŒå¸ƒå°”ç±»å‹(Booleanï¼Œç®€ç§°bool)çš„å¼ é‡ã€‚å¸ƒå°”ç±»å‹çš„å¼ é‡åªéœ€è¦ä¼ å…¥Python è¯­è¨€çš„å¸ƒå°”ç±»å‹æ•°æ®ï¼Œè½¬æ¢æˆTensorFlow å†…éƒ¨å¸ƒå°”å‹ã€‚</p><pre class=" language-python"><code class="language-python">a <span class="token operator">=</span> tf<span class="token punctuation">.</span>constant<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># åˆ›å»ºå¸ƒå°”ç±»å‹æ ‡é‡</span><span class="token comment" spellcheck="true">#tf.Tensor(True, shape=(), dtype=bool)</span>b <span class="token operator">=</span> tf<span class="token punctuation">.</span>constant<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token boolean">True</span><span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># åˆ›å»ºå¸ƒå°”ç±»å‹å‘é‡</span><span class="token comment" spellcheck="true">#tf.Tensor([ True False], shape=(2,), dtype=bool)</span></code></pre><h3 id="3-2-æ•°å€¼ç²¾åº¦"><a href="#3-2-æ•°å€¼ç²¾åº¦" class="headerlink" title="3.2 æ•°å€¼ç²¾åº¦"></a>3.2 æ•°å€¼ç²¾åº¦</h3><p>å¯¹äºæ•°å€¼ç±»å‹çš„å¼ é‡ï¼Œå¯ä»¥ä¿å­˜ä¸ºä¸åŒå­—èŠ‚é•¿åº¦çš„ç²¾åº¦ï¼Œå¦‚æµ®ç‚¹æ•°3.14 æ—¢å¯ä»¥ä¿å­˜ä¸º16 ä½(Bit)é•¿åº¦ï¼Œä¹Ÿå¯ä»¥ä¿å­˜ä¸º32 ä½ç”šè‡³64 ä½çš„ç²¾åº¦ã€‚ä½è¶Šé•¿ï¼Œç²¾åº¦è¶Šé«˜ï¼ŒåŒæ—¶å ç”¨çš„å†…å­˜ç©ºé—´ä¹Ÿå°±è¶Šå¤§ã€‚å¸¸ç”¨çš„ç²¾åº¦ç±»å‹æœ‰tf.int16ã€tf.int32ã€tf.int64ã€tf.float16ã€tf.float32ã€tf.float64 ç­‰ï¼Œå…¶ä¸­tf.float64 å³ä¸ºtf.double.</p><pre class=" language-python"><code class="language-python">a <span class="token operator">=</span> tf<span class="token punctuation">.</span>constant<span class="token punctuation">(</span><span class="token number">123456789</span><span class="token punctuation">,</span> dtype<span class="token operator">=</span>tf<span class="token punctuation">.</span>int16<span class="token punctuation">)</span>b <span class="token operator">=</span> tf<span class="token punctuation">.</span>constant<span class="token punctuation">(</span><span class="token number">123456789</span><span class="token punctuation">,</span> dtype<span class="token operator">=</span>tf<span class="token punctuation">.</span>int32<span class="token punctuation">)</span><span class="token comment" spellcheck="true">#tf.Tensor(-13035, shape=(), dtype=int16)</span><span class="token comment" spellcheck="true">#tf.Tensor(123456789, shape=(), dtype=int32)</span></code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œä¿å­˜ç²¾åº¦è¿‡ä½æ—¶ï¼Œæ•°æ®123456789 å‘ç”Ÿäº†æº¢å‡ºï¼Œå¾—åˆ°äº†é”™è¯¯çš„ç»“æœï¼Œä¸€èˆ¬ä½¿ç”¨tf.int32ã€tf.int64 ç²¾åº¦ã€‚å¯¹äºæµ®ç‚¹æ•°ï¼Œé«˜ç²¾åº¦çš„å¼ é‡å¯ä»¥è¡¨ç¤ºæ›´ç²¾å‡†çš„æ•°æ®ã€‚</p><p><strong>è¯»å–ç²¾åº¦</strong>ï¼šé€šè¿‡è®¿é—®å¼ é‡çš„dtype æˆå‘˜å±æ€§å¯ä»¥åˆ¤æ–­å¼ é‡çš„ä¿å­˜ç²¾åº¦ã€‚å¯¹äºæŸäº›åªèƒ½å¤„ç†æŒ‡å®šç²¾åº¦ç±»å‹çš„è¿ç®—æ“ä½œï¼Œéœ€è¦æå‰æ£€éªŒè¾“å…¥å¼ é‡çš„ç²¾åº¦ç±»å‹ï¼Œå¹¶å°†ä¸ç¬¦åˆè¦æ±‚çš„å¼ é‡è¿›è¡Œç±»å‹è½¬æ¢ã€‚</p><pre class=" language-python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'before:'</span><span class="token punctuation">,</span>a<span class="token punctuation">.</span>dtype<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># è¯»å–åŸæœ‰å¼ é‡çš„æ•°å€¼ç²¾åº¦</span><span class="token keyword">if</span> a<span class="token punctuation">.</span>dtype <span class="token operator">!=</span> tf<span class="token punctuation">.</span>float32<span class="token punctuation">:</span> <span class="token comment" spellcheck="true"># å¦‚æœç²¾åº¦ä¸ç¬¦åˆè¦æ±‚ï¼Œåˆ™è¿›è¡Œè½¬æ¢</span>  a <span class="token operator">=</span> tf<span class="token punctuation">.</span>cast<span class="token punctuation">(</span>a<span class="token punctuation">,</span>tf<span class="token punctuation">.</span>float32<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># tf.cast å‡½æ•°å¯ä»¥å®Œæˆç²¾åº¦è½¬æ¢</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'after :'</span><span class="token punctuation">,</span>a<span class="token punctuation">.</span>dtype<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># æ‰“å°è½¬æ¢åçš„ç²¾åº¦</span></code></pre><h3 id="3-3-å¾…ä¼˜åŒ–å¼ é‡"><a href="#3-3-å¾…ä¼˜åŒ–å¼ é‡" class="headerlink" title="3.3 å¾…ä¼˜åŒ–å¼ é‡"></a>3.3 å¾…ä¼˜åŒ–å¼ é‡</h3><p>ä¸ºäº†åŒºåˆ†éœ€è¦è®¡ç®—æ¢¯åº¦ä¿¡æ¯çš„å¼ é‡ä¸ä¸éœ€è¦è®¡ç®—æ¢¯åº¦ä¿¡æ¯çš„å¼ é‡ï¼ŒTensorFlow å¢åŠ äº†ä¸€ç§ä¸“é—¨çš„æ•°æ®ç±»å‹æ¥æ”¯æŒæ¢¯åº¦ä¿¡æ¯çš„è®°å½•ï¼štf.Variableã€‚tf.Variable ç±»å‹åœ¨æ™®é€šçš„å¼ é‡ç±»å‹åŸºç¡€ä¸Šæ·»åŠ äº†nameï¼Œtrainable ç­‰å±æ€§æ¥æ”¯æŒè®¡ç®—å›¾çš„æ„å»ºã€‚ã€‚ç”±äºæ¢¯åº¦è¿ç®—ä¼šæ¶ˆè€—å¤§é‡çš„è®¡ç®—èµ„æºï¼Œè€Œä¸”ä¼šè‡ªåŠ¨æ›´æ–°ç›¸å…³å‚æ•°ï¼Œå¯¹äºä¸éœ€è¦çš„ä¼˜åŒ–çš„å¼ é‡ï¼Œå¦‚ç¥ç»ç½‘ç»œçš„è¾“å…¥ğ‘¿ï¼Œä¸éœ€è¦é€šè¿‡tf.Variable å°è£…ã€‚</p><p>é€šè¿‡ tf.Variable()å‡½æ•°å¯ä»¥å°†æ™®é€šå¼ é‡è½¬æ¢ä¸ºå¾…ä¼˜åŒ–å¼ é‡ï¼š</p><pre class=" language-python"><code class="language-python">a <span class="token operator">=</span> tf<span class="token punctuation">.</span>constant<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># åˆ›å»ºTF å¼ é‡</span>aa <span class="token operator">=</span> tf<span class="token punctuation">.</span>Variable<span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># è½¬æ¢ä¸ºVariable ç±»å‹</span><span class="token keyword">print</span><span class="token punctuation">(</span>aa<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>aa<span class="token punctuation">.</span>trainable<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># Variable ç±»å‹å¼ é‡çš„å±æ€§</span></code></pre><h3 id="3-4-åˆ›å»ºå¼ é‡"><a href="#3-4-åˆ›å»ºå¼ é‡" class="headerlink" title="3.4 åˆ›å»ºå¼ é‡"></a>3.4 åˆ›å»ºå¼ é‡</h3><p>TensorFlow ä¸­ï¼Œå¯ä»¥é€šè¿‡å¤šç§æ–¹å¼åˆ›å»ºå¼ é‡ï¼Œå¦‚ä»Python åˆ—è¡¨å¯¹è±¡åˆ›å»ºï¼Œä»umpy æ•°ç»„åˆ›å»ºï¼Œæˆ–è€…åˆ›å»ºé‡‡æ ·è‡ªæŸç§å·²çŸ¥åˆ†å¸ƒçš„å¼ é‡ç­‰ã€‚</p><p>==<strong>1ã€ä»æ•°ç»„ã€åˆ—è¡¨å¯¹è±¡åˆ›å»º</strong>:==</p><pre class=" language-python"><code class="language-python">a <span class="token operator">=</span> tf<span class="token punctuation">.</span>convert_to_tensor<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># ä»åˆ—è¡¨åˆ›å»ºå¼ é‡</span><span class="token comment" spellcheck="true">#f.Tensor([1. 2.], shape=(2,), dtype=float32)</span>b <span class="token operator">=</span> tf<span class="token punctuation">.</span>convert_to_tensor<span class="token punctuation">(</span>np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># ä»æ•°ç»„ä¸­åˆ›å»ºå¼ é‡</span><span class="token comment" spellcheck="true">#tf.Tensor([[1. 2.] [3. 4.]], shape=(2, 2), dtype=float64)</span></code></pre><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒNumpy æµ®ç‚¹æ•°æ•°ç»„é»˜è®¤ä½¿ç”¨64 ä½ç²¾åº¦ä¿å­˜æ•°æ®ï¼Œè½¬æ¢åˆ°Tensor ç±»å‹æ—¶ç²¾<br>åº¦ä¸ºtf.float64ï¼Œå¯ä»¥åœ¨éœ€è¦çš„æ—¶å€™å°†å…¶è½¬æ¢ä¸ºtf.float32 ç±»å‹ã€‚</p><p>==<strong>2ã€åˆ›å»ºå…¨0 æˆ–å…¨1 å¼ é‡</strong>==</p><p>å°†å¼ é‡åˆ›å»ºä¸ºå…¨0 æˆ–è€…å…¨1 æ•°æ®æ˜¯éå¸¸å¸¸è§çš„å¼ é‡åˆå§‹åŒ–æ‰‹æ®µã€‚è€ƒè™‘çº¿æ€§å˜æ¢ğ’š = ğ‘¾ğ’™ + ğ’ƒï¼Œå°†æƒå€¼çŸ©é˜µğ‘¾åˆå§‹åŒ–ä¸ºå…¨1 çŸ©é˜µï¼Œåç½®b åˆå§‹åŒ–ä¸ºå…¨0 å‘é‡ï¼Œæ­¤æ—¶çº¿æ€§å˜åŒ–å±‚è¾“å‡ºğ’š = ğ’™ï¼Œå› æ­¤æ˜¯ä¸€ç§æ¯”è¾ƒå¥½çš„å±‚åˆå§‹åŒ–çŠ¶æ€ã€‚é€šè¿‡tf.zeros()å’Œtf.ones()å³å¯åˆ›å»ºä»»æ„å½¢çŠ¶ï¼Œä¸”å†…å®¹å…¨0 æˆ–å…¨1 çš„å¼ é‡ã€‚ä¾‹å¦‚ï¼Œåˆ›å»ºä¸º0 å’Œä¸º1 çš„æ ‡é‡ï¼š</p><pre class=" language-python"><code class="language-python">c <span class="token operator">=</span> tf<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>d <span class="token operator">=</span> tf<span class="token punctuation">.</span>ones<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># åˆ›å»ºå…¨0ï¼Œå…¨1 çš„æ ‡é‡</span><span class="token comment" spellcheck="true">#tf.Tensor(0.0, shape=(), dtype=float32)</span><span class="token comment" spellcheck="true">#tf.Tensor(1.0, shape=(), dtype=float32)</span>e <span class="token operator">=</span> tf<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">#åˆ›å»ºå…¨0 çŸ©é˜µï¼ŒæŒ‡å®šshape ä¸º2 è¡Œ2 åˆ—</span>f <span class="token operator">=</span> tf<span class="token punctuation">.</span>ones<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#åˆ›å»ºå…¨1 çŸ©é˜µï¼ŒæŒ‡å®šshape ä¸º3 è¡Œ2 åˆ—</span></code></pre><p>é€šè¿‡tf.zeros_like, tf.ones_like å¯ä»¥æ–¹ä¾¿åœ°æ–°å»ºä¸æŸä¸ªå¼ é‡shape ä¸€è‡´ï¼Œä¸”å†…å®¹ä¸ºå…¨0 æˆ–å…¨1 çš„å¼ é‡ã€‚ä¾‹å¦‚ï¼Œåˆ›å»ºä¸å¼ é‡ğ‘¨å½¢çŠ¶ä¸€æ ·çš„å…¨0 å¼ é‡ï¼š</p><pre class=" language-python"><code class="language-python">tf<span class="token punctuation">.</span>ones_like<span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># åˆ›å»ºä¸€ä¸ªä¸a å½¢çŠ¶ç›¸åŒï¼Œä½†æ˜¯å…¨1 çš„æ–°çŸ©é˜µ</span>tf<span class="token punctuation">.</span>zeros_like<span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># åˆ›å»ºä¸€ä¸ªä¸a å½¢çŠ¶ç›¸åŒï¼Œä½†æ˜¯å…¨0 çš„æ–°çŸ©é˜µ</span></code></pre><p>==<strong>3ã€åˆ›å»ºè‡ªå®šä¹‰æ•°å€¼å¼ é‡</strong>==</p><p>é™¤äº†åˆå§‹åŒ–ä¸ºå…¨0ï¼Œæˆ–å…¨1 çš„å¼ é‡ä¹‹å¤–ï¼Œæœ‰æ—¶ä¹Ÿéœ€è¦å…¨éƒ¨åˆå§‹åŒ–ä¸ºæŸä¸ªè‡ªå®šä¹‰æ•°å€¼çš„<br>å¼ é‡ï¼Œæ¯”å¦‚å°†å¼ é‡çš„æ•°å€¼å…¨éƒ¨åˆå§‹åŒ–ä¸ºâˆ’1ç­‰ã€‚é€šè¿‡ tf.fill(shape, value)å¯ä»¥åˆ›å»ºå…¨ä¸ºè‡ªå®šä¹‰æ•°å€¼value çš„å¼ é‡ï¼Œå½¢çŠ¶ç”±shape å‚æ•°æŒ‡å®šã€‚ä¾‹å¦‚ï¼Œåˆ›å»ºå…ƒç´ ä¸ºâˆ’1çš„æ ‡é‡ï¼š</p><pre class=" language-python"><code class="language-python">tf<span class="token punctuation">.</span>fill<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># åˆ›å»º-1 çš„æ ‡é‡</span>tf<span class="token punctuation">.</span>fill<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># åˆ›å»º-1 çš„å‘é‡</span>tf<span class="token punctuation">.</span>fill<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># åˆ›å»º2 è¡Œ2 åˆ—ï¼Œå…ƒç´ å…¨ä¸º99 çš„çŸ©é˜µ</span></code></pre><p>==<strong>3ã€åˆ›å»ºå·²çŸ¥åˆ†å¸ƒçš„å¼ é‡</strong>==</p><p>æ­£æ€åˆ†å¸ƒ(Normal Distributionï¼Œæˆ–Gaussian Distribution)å’Œå‡åŒ€åˆ†å¸ƒ(Uniform Distribution)æ˜¯æœ€å¸¸è§çš„åˆ†å¸ƒä¹‹ä¸€ï¼Œåˆ›å»ºé‡‡æ ·è‡ªè¿™2 ç§åˆ†å¸ƒçš„å¼ é‡éå¸¸æœ‰ç”¨ï¼Œæ¯”å¦‚åœ¨å·ç§¯ç¥ç»ç½‘ç»œä¸­ï¼Œå·ç§¯æ ¸å¼ é‡ğ‘¾åˆå§‹åŒ–ä¸ºæ­£æ€åˆ†å¸ƒæœ‰åˆ©äºç½‘ç»œçš„è®­ç»ƒï¼›åœ¨å¯¹æŠ—ç”Ÿæˆç½‘ç»œä¸­ï¼Œéšè—å˜é‡ğ’›ä¸€èˆ¬é‡‡æ ·è‡ªå‡åŒ€åˆ†å¸ƒã€‚</p><p>é€šè¿‡ tf.random.normal(shape, mean=0.0, stddev=1.0)å¯ä»¥åˆ›å»ºå½¢çŠ¶ä¸ºshapeï¼Œå‡å€¼ä¸ºmeanï¼Œæ ‡å‡†å·®ä¸ºstddev çš„æ­£æ€åˆ†å¸ƒğ’©(mean, stddev2)ã€‚ä¾‹å¦‚ï¼Œåˆ›å»ºå‡å€¼ä¸º0ï¼Œæ ‡å‡†å·®ä¸º1çš„æ­£æ€åˆ†å¸ƒï¼š</p><pre class=" language-python"><code class="language-python">tf<span class="token punctuation">.</span>random<span class="token punctuation">.</span>normal<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># åˆ›å»ºæ ‡å‡†æ­£æ€åˆ†å¸ƒçš„å¼ é‡</span></code></pre><p>é€šè¿‡tf.random.uniform(shape, minval=0, maxval=None, dtype=tf.float32)å¯ä»¥åˆ›å»ºé‡‡æ ·è‡ª[minval, maxval)åŒºé—´çš„å‡åŒ€åˆ†å¸ƒçš„å¼ é‡ã€‚ä¾‹å¦‚åˆ›å»ºé‡‡æ ·è‡ªåŒºé—´[0,1)ï¼Œshape ä¸º[2,2]çš„çŸ©é˜µï¼š</p><pre class=" language-python"><code class="language-python">tf<span class="token punctuation">.</span>random<span class="token punctuation">.</span>uniform<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># åˆ›å»ºé‡‡æ ·è‡ª[0,1)å‡åŒ€åˆ†å¸ƒçš„çŸ©é˜µ</span></code></pre><p><strong>==5ã€åˆ›å»ºåºåˆ—==</strong></p><p>åœ¨å¾ªç¯è®¡ç®—æˆ–è€…å¯¹å¼ é‡è¿›è¡Œç´¢å¼•æ—¶ï¼Œç»å¸¸éœ€è¦åˆ›å»ºä¸€æ®µè¿ç»­çš„æ•´å‹åºåˆ—ï¼Œå¯ä»¥é€šè¿‡tf.range()å‡½æ•°å®ç°ã€‚tf.range(limit, delta=1)å¯ä»¥åˆ›å»º[0, limit)ä¹‹é—´ï¼Œæ­¥é•¿ä¸ºdelta çš„æ•´å‹åºåˆ—ï¼Œä¸åŒ…å«limit æœ¬èº«ã€‚ä¾‹å¦‚ï¼Œåˆ›å»º0~10ï¼Œæ­¥é•¿ä¸º1 çš„æ•´å‹åºåˆ—ï¼š</p><pre class=" language-python"><code class="language-python">tf<span class="token punctuation">.</span>range<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># 0~10ï¼Œä¸åŒ…å«10</span>tf<span class="token punctuation">.</span>range<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span>delta<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">#åˆ›å»º0~10ï¼Œæ­¥é•¿ä¸º2 çš„æ•´å½¢åºåˆ—</span></code></pre><h3 id="3-5-å¼ é‡çš„å…¸å‹åº”ç”¨"><a href="#3-5-å¼ é‡çš„å…¸å‹åº”ç”¨" class="headerlink" title="3.5 å¼ é‡çš„å…¸å‹åº”ç”¨"></a>3.5 å¼ é‡çš„å…¸å‹åº”ç”¨</h3><p>==1ã€<strong>æ ‡é‡</strong>==ï¼šåœ¨ TensorFlow ä¸­ï¼Œæ ‡é‡æœ€å®¹æ˜“ç†è§£ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªç®€å•çš„æ•°å­—ï¼Œç»´åº¦æ•°ä¸º0ï¼Œshape ä¸º<br>[]ã€‚æ ‡é‡çš„ä¸€äº›å…¸å‹ç”¨é€”æ˜¯è¯¯å·®å€¼çš„è¡¨ç¤ºã€å„ç§æµ‹é‡æŒ‡æ ‡çš„è¡¨ç¤ºï¼Œæ¯”å¦‚å‡†ç¡®åº¦(Accuracyï¼Œç®€ç§°acc)ï¼Œç²¾åº¦(Precision)å’Œå¬å›ç‡(Recall)ç­‰ã€‚</p><pre class=" language-python"><code class="language-python">out <span class="token operator">=</span> tf<span class="token punctuation">.</span>random<span class="token punctuation">.</span>uniform<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#éšæœºæ¨¡æ‹Ÿç½‘ç»œè¾“å‡º</span>y <span class="token operator">=</span> tf<span class="token punctuation">.</span>constant<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># éšæœºæ„é€ æ ·æœ¬çœŸå®æ ‡ç­¾</span>y <span class="token operator">=</span> tf<span class="token punctuation">.</span>one_hot<span class="token punctuation">(</span>y<span class="token punctuation">,</span> depth<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># one-hot ç¼–ç </span>loss <span class="token operator">=</span> tf<span class="token punctuation">.</span>keras<span class="token punctuation">.</span>losses<span class="token punctuation">.</span>mse<span class="token punctuation">(</span>y<span class="token punctuation">,</span> out<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># è®¡ç®—æ¯ä¸ªæ ·æœ¬çš„MSE</span>loss <span class="token operator">=</span> tf<span class="token punctuation">.</span>reduce_mean<span class="token punctuation">(</span>loss<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># å¹³å‡MSE,loss åº”æ˜¯æ ‡é‡</span><span class="token keyword">print</span><span class="token punctuation">(</span>loss<span class="token punctuation">)</span><span class="token comment" spellcheck="true">#tf.Tensor(0.19950335, shape=(), dtype=float32)</span></code></pre><p>**==2ã€å‘é‡==**ï¼šå‘é‡æ˜¯ä¸€ç§éå¸¸å¸¸è§çš„æ•°æ®è½½ä½“ï¼Œå¦‚åœ¨å…¨è¿æ¥å±‚å’Œå·ç§¯ç¥ç»ç½‘ç»œå±‚ä¸­ï¼Œåç½®å¼ é‡ğ’ƒå°±<br>ä½¿ç”¨å‘é‡æ¥è¡¨ç¤ºã€‚å¦‚å›¾ 4.2 æ‰€ç¤ºï¼Œæ¯ä¸ªå…¨è¿æ¥å±‚çš„è¾“å‡ºèŠ‚ç‚¹éƒ½æ·»åŠ äº†ä¸€ä¸ªåç½®å€¼ï¼ŒæŠŠæ‰€æœ‰è¾“å‡ºèŠ‚ç‚¹çš„åç½®è¡¨ç¤ºæˆå‘é‡å½¢å¼ï¼š$b=\left[ \begin{matrix} b_1 \ b_2 \end{matrix} \right] $</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210415091950106.png"></p><p>è€ƒè™‘ 2 ä¸ªè¾“å‡ºèŠ‚ç‚¹çš„ç½‘ç»œå±‚ï¼Œæˆ‘ä»¬åˆ›å»ºé•¿åº¦ä¸º2 çš„åç½®å‘é‡ğ’ƒï¼Œå¹¶ç´¯åŠ åœ¨æ¯ä¸ªè¾“å‡ºèŠ‚ç‚¹ä¸Šï¼š</p><pre class=" language-python"><code class="language-python">z <span class="token operator">=</span> tf<span class="token punctuation">.</span>random<span class="token punctuation">.</span>normal<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>b <span class="token operator">=</span> tf<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># åˆ›å»ºåç½®å‘é‡</span>z <span class="token operator">=</span> z <span class="token operator">+</span> b <span class="token comment" spellcheck="true"># ç´¯åŠ ä¸Šåç½®å‘é‡</span></code></pre><p>**==3ã€çŸ©é˜µ==**ï¼šçŸ©é˜µä¹Ÿæ˜¯éå¸¸å¸¸è§çš„å¼ é‡ç±»å‹ï¼Œæ¯”å¦‚å…¨è¿æ¥å±‚çš„æ‰¹é‡è¾“å…¥å¼ é‡ğ‘¿çš„å½¢çŠ¶ä¸º[ğ‘, ğ‘‘in]ï¼Œå…¶<br>ä¸­ğ‘è¡¨ç¤ºè¾“å…¥æ ·æœ¬çš„ä¸ªæ•°ï¼Œå³Batch Sizeï¼Œğ‘‘inè¡¨ç¤ºè¾“å…¥ç‰¹å¾çš„é•¿åº¦ã€‚</p><pre class=" language-python"><code class="language-python">x <span class="token operator">=</span> tf<span class="token punctuation">.</span>random<span class="token punctuation">.</span>normal<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># 2 ä¸ªæ ·æœ¬ï¼Œç‰¹å¾é•¿åº¦ä¸º4 çš„å¼ é‡</span>w <span class="token operator">=</span> tf<span class="token punctuation">.</span>ones<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># å®šä¹‰W å¼ é‡</span>b <span class="token operator">=</span> tf<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># å®šä¹‰b å¼ é‡</span>o <span class="token operator">=</span> x@w<span class="token operator">+</span>b</code></pre><p>å…¶ä¸­ğ‘¿å’Œğ‘¾å¼ é‡å‡æ˜¯çŸ©é˜µï¼Œä¸Šè¿°ä»£ç å®ç°äº†ä¸€ä¸ªçº¿æ€§å˜æ¢çš„ç½‘ç»œå±‚ï¼Œæ¿€æ´»å‡½æ•°ä¸ºç©ºã€‚ä¸€èˆ¬åœ°ï¼Œğœ(ğ‘¿@ğ‘¾ + ğ’ƒ)ç½‘ç»œå±‚ç§°ä¸ºå…¨è¿æ¥å±‚ï¼Œåœ¨TensorFlow ä¸­å¯ä»¥é€šè¿‡Dense ç±»ç›´æ¥å®ç°ï¼Œç‰¹åˆ«åœ°ï¼Œå½“æ¿€æ´»å‡½æ•°ğœä¸ºç©ºæ—¶ï¼Œå…¨è¿æ¥å±‚ä¹Ÿç§°ä¸ºçº¿æ€§å±‚ã€‚</p><p>**==4ã€ä¸‰ç»´å¼ é‡==**ï¼šä¸‰ç»´çš„å¼ é‡ä¸€ä¸ªå…¸å‹åº”ç”¨æ˜¯è¡¨ç¤ºåºåˆ—ä¿¡å·ï¼Œå®ƒçš„æ ¼å¼æ˜¯ï¼šğ‘¿ = [ğ‘, sequence len, feature len]ã€‚å…¶ä¸­ğ‘è¡¨ç¤ºåºåˆ—ä¿¡å·çš„æ•°é‡ï¼Œsequence len è¡¨ç¤ºåºåˆ—ä¿¡å·åœ¨æ—¶é—´ç»´åº¦ä¸Šçš„é‡‡æ ·ç‚¹æ•°æˆ–æ­¥æ•°ï¼Œfeature len è¡¨ç¤ºæ¯ä¸ªç‚¹çš„ç‰¹å¾é•¿åº¦ã€‚åæœŸNLPè‡ªç„¶è¯­è¨€å¤„ç†ä¼šç”¨åˆ°ã€‚</p><p>**==5ã€å››ç»´å¼ é‡==**ï¼šå››ç»´å¼ é‡åœ¨å·ç§¯ç¥ç»ç½‘ç»œä¸­åº”ç”¨éå¸¸å¹¿æ³›ï¼Œå®ƒç”¨äºä¿å­˜ç‰¹å¾å›¾(Feature maps)æ•°æ®ï¼Œæ ¼å¼ä¸€èˆ¬å®šä¹‰ä¸ºï¼š[ğ‘, â„, w, ğ‘]ã€‚å…¶ä¸­ğ‘è¡¨ç¤ºè¾“å…¥æ ·æœ¬çš„æ•°é‡ï¼Œâ„/ åˆ†åˆ«è¡¨ç¤ºç‰¹å¾å›¾çš„é«˜/å®½ï¼Œğ‘è¡¨ç¤ºç‰¹å¾å›¾çš„é€šé“æ•°ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210415094312131.png"></p><h3 id="3-6-ç´¢å¼•ä¸åˆ‡ç‰‡"><a href="#3-6-ç´¢å¼•ä¸åˆ‡ç‰‡" class="headerlink" title="3.6  ç´¢å¼•ä¸åˆ‡ç‰‡"></a>3.6  ç´¢å¼•ä¸åˆ‡ç‰‡</h3><p>é€šè¿‡ç´¢å¼•ä¸åˆ‡ç‰‡æ“ä½œå¯ä»¥æå–å¼ é‡çš„éƒ¨åˆ†æ•°æ®ã€‚</p><p>**==1ã€ç´¢å¼•==**ï¼šåœ¨ TensorFlow ä¸­ï¼Œæ”¯æŒåŸºæœ¬çš„[ğ‘–] [ğ‘—] â‹¯æ ‡å‡†ç´¢å¼•æ–¹å¼ï¼Œä¹Ÿæ”¯æŒé€šè¿‡é€—å·åˆ†éš”ç´¢å¼•å·çš„ç´¢å¼•æ–¹å¼ã€‚ç±»ä¼¼äºCè¯­è¨€ä¸­çš„æ•°ç»„ã€‚</p><p>**==2ã€åˆ‡ç‰‡==**ï¼šé€šè¿‡start: end: stepåˆ‡ç‰‡æ–¹å¼å¯ä»¥æ–¹ä¾¿åœ°æå–ä¸€æ®µæ•°æ®ï¼Œå…¶ä¸­start ä¸ºå¼€å§‹è¯»å–ä½ç½®çš„ç´¢<br>å¼•ï¼Œend ä¸ºç»“æŸè¯»å–ä½ç½®çš„ç´¢å¼•(ä¸åŒ…å«end ä½)ï¼Œstep ä¸ºé‡‡æ ·æ­¥é•¿ã€‚</p><h2 id="ç¬¬å››ç« -ç¥ç»ç½‘ç»œ"><a href="#ç¬¬å››ç« -ç¥ç»ç½‘ç»œ" class="headerlink" title="ç¬¬å››ç«  ç¥ç»ç½‘ç»œ"></a>ç¬¬å››ç«  ç¥ç»ç½‘ç»œ</h2><p>åœ¨ç¬¬ä¸€ç« ä¸­å·²ç»ä»‹ç»äº†ç¥ç»å…ƒæ¨¡å‹ï¼Œå½“é€‰æ‹©é˜¶è·ƒå‡½æ•°ä¸ºæ¿€æ´»å‡½æ•°æ—¶ï¼Œè™½ç„¶å•ä¸ªç¥ç»å…ƒç»“åˆé˜¶è·ƒå‡½æ•°èƒ½å¤Ÿå®Œæˆç®€å•çš„äºŒåˆ†ç±»é—®é¢˜ï¼Œä½†æ˜¯é˜¶è·ƒå‡½æ•°åœ¨ğ‘§ = 0å¤„æ˜¯ä¸è¿ç»­çš„ï¼Œå…¶ä»–ä½ç½®å¯¼æ•°ä¸º0ï¼Œæ— æ³•åˆ©ç”¨æ¢¯åº¦ä¸‹é™ç®—æ³•è¿›è¡Œå‚æ•°ä¼˜åŒ–ã€‚</p><p>ä¸ºäº†èƒ½å¤Ÿè®©æ„ŸçŸ¥æœºæ¨¡å‹èƒ½å¤Ÿä»æ•°æ®ä¸­é—´è‡ªåŠ¨å­¦ä¹ ï¼ŒFrank Rosenblatt æå‡ºäº†æ„ŸçŸ¥æœºï¼ˆç¥ç»å…ƒï¼‰çš„å­¦ä¹ ç®—æ³•ï¼š</p><table><thead><tr><th align="left">More Actionsç®—æ³• 1ï¼šæ„ŸçŸ¥æœºè®­ç»ƒç®—æ³•</th></tr></thead><tbody><tr><td align="left">åˆå§‹åŒ–å‚æ•°ğ’˜ = 0, ğ‘ = 0</td></tr><tr><td align="left">repeat</td></tr><tr><td align="left">ä»è®­ç»ƒé›†éšæœºé‡‡æ ·ä¸€ä¸ªæ ·æœ¬(ğ’™ğ‘–, ğ‘¦ğ‘–)</td></tr><tr><td align="left">è®¡ç®—æ„ŸçŸ¥æœºçš„è¾“å‡º = sign(ğ’˜ğ“ğ’™ğ‘– + ğ‘)</td></tr><tr><td align="left">å¦‚æœ ğ’™ğ‘–â‰  ğ‘¦ğ‘–ï¼š</td></tr><tr><td align="left">è¾“å‡ºï¼šåˆ†ç±»ç½‘ç»œå‚æ•°ğ’˜å’Œğ‘</td></tr><tr><td align="left">ğ’˜â€² â† ğ’˜ + ğœ‚ âˆ™ ğ‘¦ğ‘– âˆ™ ğ’™ğ’Š</td></tr><tr><td align="left">ğ‘â€² â† ğ‘ + ğœ‚ âˆ™ ğ‘¦ğ‘–</td></tr><tr><td align="left">until è®­ç»ƒæ¬¡æ•°è¾¾åˆ°è¦æ±‚</td></tr><tr><td align="left">è¾“å‡ºï¼šåˆ†ç±»ç½‘ç»œå‚æ•°ğ’˜å’Œğ‘</td></tr></tbody></table><p>å…¶ä¸­ğœ‚ä¸ºå­¦ä¹ ç‡ã€‚</p><p>ä½†æ˜¯ä»¥æ„ŸçŸ¥æœºä¸ºä»£è¡¨çš„çº¿æ€§æ¨¡å‹ä¸èƒ½è§£å†³å¼‚æˆ–(XOR)ç­‰çº¿æ€§ä¸å¯åˆ†é—®é¢˜ï¼Œå°½ç®¡æ„ŸçŸ¥æœºæ¨¡å‹ä¸èƒ½è§£å†³çº¿æ€§ä¸å¯åˆ†é—®é¢˜ï¼Œä½†ä¹Ÿå¯ä»¥é€šè¿‡åµŒå¥—å¤šå±‚ç¥ç»ç½‘ç»œå¯ä»¥è§£å†³ã€‚</p><h3 id="4-1-å…¨è¿æ¥å±‚"><a href="#4-1-å…¨è¿æ¥å±‚" class="headerlink" title="4.1 å…¨è¿æ¥å±‚"></a><strong>4.1 å…¨è¿æ¥å±‚</strong></h3><p>æ„ŸçŸ¥æœºæ¨¡å‹çš„ä¸å¯å¯¼ç‰¹æ€§ä¸¥é‡çº¦æŸäº†å®ƒçš„æ½œåŠ›ï¼Œä½¿å¾—å®ƒåªèƒ½è§£å†³æå…¶ç®€å•çš„ä»»åŠ¡ã€‚ç°ä»£æ·±åº¦å­¦ä¹ åŠ¨è¾„æ•°ç™¾ä¸‡ç”šè‡³ä¸Šäº¿çš„å‚æ•°è§„æ¨¡ï¼Œä½†å®ƒçš„æ ¸å¿ƒç»“æ„ä¸æ„ŸçŸ¥æœºå¹¶æ²¡æœ‰å¤šå¤§å·®åˆ«ã€‚å®ƒåœ¨æ„ŸçŸ¥æœºçš„åŸºç¡€ä¸Šï¼Œå°†ä¸è¿ç»­çš„é˜¶è·ƒæ¿€æ´»å‡½æ•°æ¢æˆäº†å…¶å®ƒå¹³æ»‘è¿ç»­å¯å¯¼çš„æ¿€æ´»å‡½æ•°ï¼Œå¹¶é€šè¿‡å †å å¤šä¸ªç½‘ç»œå±‚æ¥å¢å¼ºç½‘ç»œçš„è¡¨è¾¾èƒ½åŠ›ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210512125705818.png"></p><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå¹¶è¡Œå †å äº†2 ä¸ªç¥ç»å…ƒï¼Œå³2 ä¸ªæ›¿æ¢äº†æ¿€æ´»å‡½æ•°çš„æ„ŸçŸ¥æœºï¼Œæ„æˆ3 è¾“å…¥èŠ‚ç‚¹ã€2 ä¸ªè¾“å‡ºèŠ‚ç‚¹çš„ç½‘ç»œå±‚ã€‚å…¶ä¸­ç¬¬ä¸€ä¸ªè¾“å‡ºèŠ‚ç‚¹çš„è¾“å‡ºä¸ºï¼š</p><p>$$<br>o_1 = ğœ(ğ‘¤_{11} âˆ™ ğ‘¥<em>1 + ğ‘¤</em>{21} âˆ™ ğ‘¥<em>2 + ğ‘¤</em>{31} âˆ™ ğ‘¥<em>3 + ğ‘_1)<br>$$<br>ç¬¬äºŒä¸ªè¾“å‡ºèŠ‚ç‚¹çš„è¾“å‡ºä¸ºï¼š<br>$$<br>o_2 = ğœ(ğ‘¤</em>{12} âˆ™ ğ‘¥<em>1 + ğ‘¤</em>{22} âˆ™ ğ‘¥<em>2 + ğ‘¤</em>{32} âˆ™ ğ‘¥<em>3 + ğ‘_2)<br>$$<br>è¾“å‡ºå‘é‡ä¸ºğ’ = [ğ‘œ1, ğ‘œ2]ã€‚æ•´ä¸ªç½‘ç»œå±‚å¯ä»¥é€šè¿‡çŸ©é˜µå…³ç³»å¼è¡¨è¾¾ï¼š<br>$$<br>\left[ \begin{matrix} o_1 &amp; o_2 \end{matrix} \right]= \left[ \begin{matrix} x_1 &amp; x_2 &amp; x_3 \end{matrix} \right] \bullet  \left[ \begin{matrix} w</em>{11} &amp; w_{12}\ w_{21} &amp; w_{22}\ w_{31} &amp; w_{32} \end{matrix} \right] + \left[ \begin{matrix} b_1 &amp; b_2 \end{matrix} \right]<br>$$<br>å³: $ O =  X \bullet W + b $</p><p>å…¶ä¸­è¾“å‡ºçŸ©é˜µğ‘¶åŒ…å«äº†ğ‘ä¸ªæ ·æœ¬çš„è¾“å‡ºç‰¹å¾ï¼Œç”±äºæ¯ä¸ªè¾“å‡ºèŠ‚ç‚¹ä¸å…¨éƒ¨çš„è¾“å…¥èŠ‚ç‚¹ç›¸è¿æ¥ï¼Œè¿™ç§ç½‘ç»œå±‚ç§°ä¸ºå…¨è¿æ¥å±‚(Fully-connected Layer)ï¼Œğ‘¾çŸ©é˜µå«åšå…¨è¿æ¥å±‚çš„æƒå€¼çŸ©é˜µï¼Œğ’ƒå‘é‡å«åšå…¨è¿æ¥å±‚çš„åç½®å‘é‡ã€‚</p><p>å…¨è¿æ¥å±‚æœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼š<strong>å¼ é‡æ–¹å¼å®ç°</strong>å’Œ<strong>å±‚æ–¹å¼å®ç°</strong></p><p><strong>1ã€å¼ é‡æ–¹å¼å®ç°</strong>ï¼šè¦å®ç°å…¨è¿æ¥å±‚ï¼Œåªéœ€è¦å®šä¹‰å¥½æƒå€¼å¼ é‡ğ‘¾å’Œåç½®å¼ é‡ğ’ƒï¼Œå¹¶åˆ©ç”¨TensorFlow æä¾›çš„æ‰¹é‡çŸ©é˜µç›¸ä¹˜å‡½æ•°tf.matmul()å³å¯å®Œæˆç½‘ç»œå±‚çš„è®¡ç®—ã€‚</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true">##åˆ›å»ºè¾“å…¥ğ‘¿çŸ©é˜µä¸ºğ‘ = 2ä¸ªæ ·æœ¬ï¼Œæ¯ä¸ªæ ·æœ¬çš„è¾“å…¥ç‰¹å¾é•¿åº¦ä¸ºğ‘‘in = 784ï¼Œè¾“å‡ºèŠ‚ç‚¹æ•°ä¸ºğ‘‘out = 256ï¼Œæ•…å®šä¹‰æƒå€¼çŸ©é˜µğ‘¾çš„shape ä¸º[784,256]ï¼Œå¹¶é‡‡ç”¨æ­£æ€åˆ†å¸ƒåˆå§‹åŒ–ğ‘¾ï¼›</span>xx <span class="token operator">=</span> tf<span class="token punctuation">.</span>random<span class="token punctuation">.</span>normal<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">784</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">##åç½®å‘é‡ğ’ƒçš„shape å®šä¹‰ä¸º[256]ï¼Œåœ¨è®¡ç®—å®Œğ‘¿@ğ‘¾åç›¸åŠ å³å¯ï¼Œ</span>ww1 <span class="token operator">=</span> tf<span class="token punctuation">.</span>Variable<span class="token punctuation">(</span>tf<span class="token punctuation">.</span>random<span class="token punctuation">.</span>truncated_normal<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">784</span><span class="token punctuation">,</span> <span class="token number">256</span><span class="token punctuation">]</span><span class="token punctuation">,</span> stddev<span class="token operator">=</span><span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">##æœ€ç»ˆå…¨è¿æ¥å±‚çš„è¾“å‡ºğ‘¶çš„shape ä¸º[2,256]ï¼Œå³2 ä¸ªæ ·æœ¬çš„ç‰¹å¾ï¼Œæ¯ä¸ªç‰¹å¾é•¿åº¦ä¸º256</span>bb1 <span class="token operator">=</span> tf<span class="token punctuation">.</span>Variable<span class="token punctuation">(</span>tf<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">256</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>oo1 <span class="token operator">=</span> tf<span class="token punctuation">.</span>matmul<span class="token punctuation">(</span>x<span class="token punctuation">,</span>w1<span class="token punctuation">)</span> <span class="token operator">+</span> b1 <span class="token comment" spellcheck="true"># çº¿æ€§å˜æ¢</span>oo1 <span class="token operator">=</span> tf<span class="token punctuation">.</span>nn<span class="token punctuation">.</span>relu<span class="token punctuation">(</span>o1<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># æ¿€æ´»å‡½æ•°</span></code></pre><p><strong>2ã€å±‚æ–¹å¼å®ç°ï¼š</strong></p><blockquote><p>å…¨è¿æ¥å±‚æœ¬è´¨ä¸Šæ˜¯çŸ©é˜µçš„ç›¸ä¹˜å’Œç›¸åŠ è¿ç®—ï¼Œå®ç°å¹¶ä¸å¤æ‚ã€‚ä½†æ˜¯ä½œä¸ºæœ€å¸¸ç”¨çš„ç½‘ç»œå±‚ä¹‹ä¸€ï¼ŒTensorFlow ä¸­æœ‰æ›´é«˜å±‚ã€ä½¿ç”¨æ›´æ–¹ä¾¿çš„å±‚å®ç°æ–¹å¼ï¼šlayers.Dense(units, activation)ã€‚é€šè¿‡layer.Dense ç±»ï¼Œåªéœ€è¦æŒ‡å®šè¾“å‡ºèŠ‚ç‚¹æ•°Units å’Œæ¿€æ´»å‡½æ•°ç±»å‹activation å³å¯ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¾“å…¥èŠ‚ç‚¹æ•°ä¼šæ ¹æ®ç¬¬ä¸€æ¬¡è¿ç®—æ—¶çš„è¾“å…¥shape ç¡®å®šï¼ŒåŒæ—¶æ ¹æ®è¾“å…¥ã€è¾“å‡ºèŠ‚ç‚¹æ•°è‡ªåŠ¨åˆ›å»ºå¹¶åˆå§‹åŒ–æƒå€¼å¼ é‡ğ‘¾å’Œåç½®å¼ é‡ğ’ƒï¼Œå› æ­¤åœ¨æ–°å»ºç±»Dense å®ä¾‹æ—¶ï¼Œå¹¶ä¸ä¼šç«‹å³åˆ›å»ºæƒå€¼å¼ é‡ğ‘¾å’Œåç½®å¼ é‡ğ’ƒï¼Œè€Œæ˜¯éœ€è¦è°ƒç”¨build å‡½æ•°æˆ–è€…ç›´æ¥è¿›è¡Œä¸€æ¬¡å‰å‘è®¡ç®—ï¼Œæ‰èƒ½å®Œæˆç½‘ç»œå‚æ•°çš„åˆ›å»ºã€‚å…¶ä¸­activation å‚æ•°æŒ‡å®šå½“å‰å±‚çš„æ¿€æ´»å‡½æ•°ï¼Œå¯ä»¥ä¸ºå¸¸è§çš„æ¿€æ´»å‡½æ•°æˆ–è‡ªå®šä¹‰æ¿€æ´»å‡½æ•°ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šä¸ºNoneï¼Œå³æ— æ¿€æ´»å‡½æ•°ã€‚</p></blockquote><pre class=" language-python"><code class="language-python">x <span class="token operator">=</span> tf<span class="token punctuation">.</span>random<span class="token punctuation">.</span>normal<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">28</span><span class="token operator">*</span><span class="token number">28</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">from</span> tensorflow<span class="token punctuation">.</span>keras <span class="token keyword">import</span> layers <span class="token comment" spellcheck="true"># å¯¼å…¥å±‚æ¨¡å—</span><span class="token comment" spellcheck="true"># åˆ›å»ºå…¨è¿æ¥å±‚ï¼ŒæŒ‡å®šè¾“å‡ºèŠ‚ç‚¹æ•°å’Œæ¿€æ´»å‡½æ•°</span>fc <span class="token operator">=</span> layers<span class="token punctuation">.</span>Dense<span class="token punctuation">(</span><span class="token number">512</span><span class="token punctuation">,</span> activation<span class="token operator">=</span>tf<span class="token punctuation">.</span>nn<span class="token punctuation">.</span>relu<span class="token punctuation">)</span>h1 <span class="token operator">=</span> fc<span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># é€šè¿‡fc ç±»å®ä¾‹å®Œæˆä¸€æ¬¡å…¨è¿æ¥å±‚çš„è®¡ç®—ï¼Œè¿”å›è¾“å‡ºå¼ é‡</span></code></pre><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210512124340498.png"></p><p>ä¸Šè¿°é€šè¿‡ä¸€è¡Œä»£ç å³å¯ä»¥åˆ›å»ºä¸€å±‚å…¨è¿æ¥å±‚fcï¼Œå¹¶æŒ‡å®šè¾“å‡ºèŠ‚ç‚¹æ•°ä¸º512ï¼Œè¾“å…¥çš„èŠ‚ç‚¹æ•°åœ¨fc(x)è®¡ç®—æ—¶è‡ªåŠ¨è·å–ï¼Œå¹¶åˆ›å»ºå†…éƒ¨æƒå€¼å¼ é‡ğ‘¾å’Œåç½®å¼ é‡ğ’ƒã€‚</p><h3 id="4-2-ç¥ç»ç½‘ç»œ"><a href="#4-2-ç¥ç»ç½‘ç»œ" class="headerlink" title="4.2 ç¥ç»ç½‘ç»œ"></a>4.2 ç¥ç»ç½‘ç»œ</h3><p>é€šè¿‡å±‚å±‚å †å çš„å…¨è¿æ¥å±‚ï¼Œä¿è¯å‰ä¸€å±‚çš„è¾“å‡ºèŠ‚ç‚¹æ•°ä¸å½“å‰å±‚çš„è¾“å…¥èŠ‚ç‚¹æ•°åŒ¹é…ï¼Œå³å¯å †å å‡ºä»»æ„å±‚æ•°çš„ç½‘ç»œã€‚æˆ‘ä»¬æŠŠè¿™ç§ç”±ç¥ç»å…ƒç›¸äº’è¿æ¥è€Œæˆçš„ç½‘ç»œå«åšç¥ç»ç½‘ç»œã€‚é€šè¿‡å †å 4 ä¸ªå…¨è¿æ¥å±‚ï¼Œå¯ä»¥è·å¾—å±‚æ•°ä¸º4 çš„ç¥ç»ç½‘ç»œï¼Œç”±äºæ¯å±‚å‡ä¸ºå…¨è¿æ¥å±‚ï¼Œç§°ä¸ºå…¨è¿æ¥ç½‘ç»œï¼Œå…¶ä¸­ç¬¬1~3 ä¸ªå…¨è¿æ¥å±‚åœ¨ç½‘ç»œä¸­é—´ï¼Œç§°ä¹‹ä¸ºéšè—å±‚1ã€2ã€3ï¼Œæœ€åä¸€ä¸ªå…¨è¿æ¥å±‚çš„è¾“å‡ºä½œä¸ºç½‘ç»œçš„è¾“å‡ºï¼Œç§°ä¸ºè¾“å‡ºå±‚ã€‚éšè—å±‚1ã€2ã€3 çš„è¾“å‡ºèŠ‚ç‚¹æ•°åˆ†åˆ«ä¸º[256,128,64]ï¼Œè¾“å‡ºå±‚çš„è¾“å‡ºèŠ‚ç‚¹æ•°ä¸º10ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210512125014472.png"></p><p>é‡‡ç”¨tf.keraså®ç°ä¸Šè¿°ç½‘ç»œï¼š</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> tensorflow <span class="token keyword">as</span> tfx <span class="token operator">=</span> tf<span class="token punctuation">.</span>random<span class="token punctuation">.</span>normal<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">28</span><span class="token operator">*</span><span class="token number">28</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># å¯¼å…¥å¸¸ç”¨ç½‘ç»œå±‚layers</span><span class="token keyword">from</span> tensorflow<span class="token punctuation">.</span>keras <span class="token keyword">import</span> layers<span class="token punctuation">,</span>Sequentialfc1 <span class="token operator">=</span> layers<span class="token punctuation">.</span>Dense<span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">,</span> activation<span class="token operator">=</span>tf<span class="token punctuation">.</span>nn<span class="token punctuation">.</span>relu<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># éšè—å±‚1</span>fc2 <span class="token operator">=</span> layers<span class="token punctuation">.</span>Dense<span class="token punctuation">(</span><span class="token number">128</span><span class="token punctuation">,</span> activation<span class="token operator">=</span>tf<span class="token punctuation">.</span>nn<span class="token punctuation">.</span>relu<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># éšè—å±‚2</span>fc3 <span class="token operator">=</span> layers<span class="token punctuation">.</span>Dense<span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">,</span> activation<span class="token operator">=</span>tf<span class="token punctuation">.</span>nn<span class="token punctuation">.</span>relu<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># éšè—å±‚3</span>fc4 <span class="token operator">=</span> layers<span class="token punctuation">.</span>Dense<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> activation<span class="token operator">=</span>None<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># è¾“å‡ºå±‚</span>x <span class="token operator">=</span> tf<span class="token punctuation">.</span>random<span class="token punctuation">.</span>normal<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">28</span><span class="token operator">*</span><span class="token number">28</span><span class="token punctuation">]</span><span class="token punctuation">)</span>h1 <span class="token operator">=</span> fc1<span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># é€šè¿‡éšè—å±‚1 å¾—åˆ°è¾“å‡º</span>h2 <span class="token operator">=</span> fc2<span class="token punctuation">(</span>h1<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># é€šè¿‡éšè—å±‚2 å¾—åˆ°è¾“å‡º</span>h3 <span class="token operator">=</span> fc3<span class="token punctuation">(</span>h2<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># é€šè¿‡éšè—å±‚3 å¾—åˆ°è¾“å‡º</span>h4 <span class="token operator">=</span> fc4<span class="token punctuation">(</span>h3<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># é€šè¿‡è¾“å‡ºå±‚å¾—åˆ°ç½‘ç»œè¾“å‡º</span><span class="token comment" spellcheck="true"># å¯¼å…¥Sequential å®¹å™¨</span><span class="token keyword">from</span> tensorflow<span class="token punctuation">.</span>keras <span class="token keyword">import</span> layers<span class="token punctuation">,</span>Sequential<span class="token comment" spellcheck="true"># é€šè¿‡Sequential å®¹å™¨å°è£…ä¸ºä¸€ä¸ªç½‘ç»œç±»</span>model <span class="token operator">=</span> Sequential<span class="token punctuation">(</span><span class="token punctuation">[</span>layers<span class="token punctuation">.</span>Dense<span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">,</span> activation<span class="token operator">=</span>tf<span class="token punctuation">.</span>nn<span class="token punctuation">.</span>relu<span class="token punctuation">)</span> <span class="token punctuation">,</span> <span class="token comment" spellcheck="true"># åˆ›å»ºéšè—å±‚1</span>layers<span class="token punctuation">.</span>Dense<span class="token punctuation">(</span><span class="token number">128</span><span class="token punctuation">,</span> activation<span class="token operator">=</span>tf<span class="token punctuation">.</span>nn<span class="token punctuation">.</span>relu<span class="token punctuation">)</span> <span class="token punctuation">,</span> <span class="token comment" spellcheck="true"># åˆ›å»ºéšè—å±‚2</span>layers<span class="token punctuation">.</span>Dense<span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">,</span> activation<span class="token operator">=</span>tf<span class="token punctuation">.</span>nn<span class="token punctuation">.</span>relu<span class="token punctuation">)</span> <span class="token punctuation">,</span> <span class="token comment" spellcheck="true"># åˆ›å»ºéšè—å±‚3</span>layers<span class="token punctuation">.</span>Dense<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> activation<span class="token operator">=</span>None<span class="token punctuation">)</span> <span class="token punctuation">,</span> <span class="token comment" spellcheck="true"># åˆ›å»ºè¾“å‡ºå±‚</span><span class="token punctuation">]</span><span class="token punctuation">)</span></code></pre><h3 id="4-3-ä¼˜åŒ–ç›®æ ‡"><a href="#4-3-ä¼˜åŒ–ç›®æ ‡" class="headerlink" title="4.3 ä¼˜åŒ–ç›®æ ‡"></a>4.3 ä¼˜åŒ–ç›®æ ‡</h3><p>ç¥ç»ç½‘ç»œä»è¾“å…¥åˆ°è¾“å‡ºçš„è®¡ç®—è¿‡ç¨‹å«åšå‰å‘ä¼ æ’­(Forward Propagation)æˆ–å‰å‘è®¡ç®—ã€‚ç¥ç»ç½‘ç»œçš„å‰å‘ä¼ æ’­è¿‡ç¨‹ï¼Œä¹Ÿæ˜¯æ•°æ®å¼ é‡(Tensor)ä»ç¬¬ä¸€å±‚æµåŠ¨(Flow)è‡³è¾“å‡ºå±‚çš„è¿‡ç¨‹ï¼Œå³ä»è¾“å…¥æ•°æ®å¼€å§‹ï¼Œé€”å¾„æ¯ä¸ªéšè—å±‚ï¼Œç›´è‡³å¾—åˆ°è¾“å‡ºå¹¶è®¡ç®—è¯¯å·®ï¼Œè¿™ä¹Ÿæ˜¯TensorFlowæ¡†æ¶åå­—ç”±æ¥ã€‚</p><p>å‰å‘ä¼ æ’­çš„æœ€åä¸€æ­¥å°±æ˜¯å®Œæˆè¯¯å·®çš„è®¡ç®—ï¼š<br>$$<br>â„’ = ğ‘”(ğ‘“<em>ğœƒ(ğ’™), ğ’š)<br>$$<br>å…¶ä¸­ğ‘“<sub>ğœƒ</sub>(âˆ™)ä»£è¡¨äº†åˆ©ç”¨ğœƒå‚æ•°åŒ–çš„ç¥ç»ç½‘ç»œæ¨¡å‹ï¼Œğ‘”(âˆ™)ç§°ä¹‹ä¸ºè¯¯å·®å‡½æ•°ï¼Œç”¨æ¥æè¿°å½“å‰ç½‘ç»œçš„é¢„æµ‹å€¼ğ‘“<sub>ğœƒ</sub>(ğ’™)ä¸çœŸå®æ ‡ç­¾ğ’šä¹‹é—´çš„å·®è·åº¦é‡ï¼Œæ¯”å¦‚å¸¸ç”¨çš„å‡æ–¹å·®è¯¯å·®å‡½æ•°ã€‚â„’ç§°ä¸ºç½‘ç»œçš„è¯¯å·®(Errorï¼Œæˆ–æŸå¤±Loss)ï¼Œä¸€èˆ¬ä¸ºæ ‡é‡ã€‚æˆ‘ä»¬å¸Œæœ›é€šè¿‡åœ¨è®­ç»ƒé›†ğ”»<sup>train</sup>ä¸Šé¢å­¦ä¹ åˆ°ä¸€ç»„å‚æ•°ğœƒä½¿å¾—è®­ç»ƒçš„è¯¯å·®â„’æœ€å°ï¼š<br>$$<br>\theta^{*}=\underbrace{\arg \min }</em>{\theta} g\left(f_{\theta}(x), y\right), x \in \mathbb{D}^{\text {train }}<br>$$<br>ä¸Šè¿°çš„æœ€å°åŒ–ä¼˜åŒ–é—®é¢˜ä¸€èˆ¬é‡‡ç”¨è¯¯å·®åå‘ä¼ æ’­(Backward Propagationï¼Œç®€ç§°BP)ç®—æ³•æ¥æ±‚è§£ç½‘ç»œå‚æ•°ğœƒçš„æ¢¯åº¦ä¿¡æ¯ï¼Œå¹¶åˆ©ç”¨æ¢¯åº¦ä¸‹é™(Gradient Descentï¼Œç®€ç§°GD)ç®—æ³•è¿­ä»£æ›´æ–°å‚æ•°ï¼š<br>$$<br>ğœƒâ€² = ğœƒ âˆ’ ğœ‚ âˆ™ âˆ‡ğœƒâ„’<br>$$<br>ğœ‚ä¸ºå­¦ä¹ ç‡;</p><h3 id="4-4-æ¿€æ´»å‡½æ•°"><a href="#4-4-æ¿€æ´»å‡½æ•°" class="headerlink" title="4.4 æ¿€æ´»å‡½æ•°"></a>4.4 æ¿€æ´»å‡½æ•°</h3><p>ä¸‹é¢ä»‹ç»ç¥ç»ç½‘ç»œä¸­çš„å¸¸è§æ¿€æ´»å‡½æ•°ï¼Œä¸é˜¶è·ƒå‡½æ•°å’Œç¬¦å·å‡½æ•°ä¸åŒï¼Œè¿™äº›å‡½æ•°éƒ½æ˜¯å¹³æ»‘å¯å¯¼çš„ï¼Œé€‚åˆäºæ¢¯åº¦ä¸‹é™ç®—æ³•ã€‚</p><p><strong>1ã€Sigmoid</strong>ï¼šSigmoid å‡½æ•°ä¹Ÿå«Logistic å‡½æ•°ï¼Œå®šä¹‰ä¸º<br>$$<br>sigmoid(x) = \frac{1}{1+e^{-x}}<br>$$<br>å®ƒçš„ä¸€ä¸ªä¼˜è‰¯ç‰¹æ€§å°±æ˜¯èƒ½å¤ŸæŠŠğ‘¥ âˆˆ ğ‘…çš„è¾“å…¥â€œå‹ç¼©â€åˆ°ğ‘¥ âˆˆ (0,1)åŒºé—´ï¼Œè¿™ä¸ªåŒºé—´çš„æ•°å€¼åœ¨æœºå™¨å­¦ä¹ å¸¸ç”¨æ¥è¡¨ç¤ºä»¥ä¸‹æ„ä¹‰ï¼š</p><ul><li>æ¦‚ç‡åˆ†å¸ƒ (0,1)åŒºé—´çš„è¾“å‡ºå’Œæ¦‚ç‡çš„åˆ†å¸ƒèŒƒå›´[0,1]å¥‘åˆï¼Œå¯ä»¥é€šè¿‡Sigmoid å‡½æ•°å°†è¾“å‡ºè½¬è¯‘ä¸ºæ¦‚ç‡è¾“å‡º</li><li>ä¿¡å·å¼ºåº¦ ä¸€èˆ¬å¯ä»¥å°†0~1 ç†è§£ä¸ºæŸç§ä¿¡å·çš„å¼ºåº¦ï¼Œå¦‚åƒç´ çš„é¢œè‰²å¼ºåº¦ï¼Œ1 ä»£è¡¨å½“å‰é€šé“é¢œè‰²æœ€å¼ºï¼Œ0 ä»£è¡¨å½“å‰é€šé“æ— é¢œè‰²ï¼›æŠ‘æˆ–ä»£è¡¨é—¨æ§å€¼(Gate)çš„å¼ºåº¦ï¼Œ1 ä»£è¡¨å½“å‰é—¨æ§å…¨éƒ¨å¼€æ”¾ï¼Œ0 ä»£è¡¨é—¨æ§å…³é—­Sigmoid å‡½æ•°è¿ç»­å¯å¯¼</li></ul><p>Sigmoid å‡½æ•°è¿ç»­å¯å¯¼ï¼Œå¯ä»¥ç›´æ¥åˆ©ç”¨æ¢¯åº¦ä¸‹é™ç®—æ³•ä¼˜åŒ–ç½‘ç»œå‚æ•°ï¼Œåº”ç”¨çš„éå¸¸å¹¿æ³›ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210512210001845.png"></p><p>åœ¨ TensorFlow ä¸­ï¼Œå¯ä»¥é€šè¿‡tf.nn.sigmoid å®ç°Sigmoid å‡½æ•°ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><pre class=" language-python"><code class="language-python">tf<span class="token punctuation">.</span>nn<span class="token punctuation">.</span>sigmoid<span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># é€šè¿‡Sigmoid å‡½æ•°</span></code></pre><p><strong>2ã€ ReLUï¼š</strong>ReLU å‡½æ•°å®šä¹‰ä¸ºï¼š<br>$$<br>ReLU(ğ‘¥) â‰œ max(0, ğ‘¥)<br>$$</p><p>å¯ä»¥çœ‹åˆ°ï¼ŒReLU å¯¹å°äº0 çš„å€¼å…¨éƒ¨æŠ‘åˆ¶ä¸º0ï¼›å¯¹äºæ­£æ•°åˆ™ç›´æ¥è¾“å‡ºï¼Œè¿™ç§å•è¾¹æŠ‘åˆ¶ç‰¹æ€§æ¥æºäºç”Ÿç‰©å­¦ã€‚å®ƒå…·æœ‰å•ä¾§æŠ‘åˆ¶ã€ç›¸å¯¹å®½æ¾çš„å…´å¥‹è¾¹ç•Œç­‰ç‰¹æ€§</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210513182832791.png"></p><p>åœ¨ TensorFlow ä¸­ï¼Œå¯ä»¥é€šè¿‡tf.nn.relu å®ç°ReLU å‡½æ•°ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><pre class=" language-python"><code class="language-python">tf<span class="token punctuation">.</span>nn<span class="token punctuation">.</span>relu<span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># é€šè¿‡ReLU æ¿€æ´»å‡½æ•°</span></code></pre><h3 id="4-5-è¾“å‡ºå±‚è®¾è®¡"><a href="#4-5-è¾“å‡ºå±‚è®¾è®¡" class="headerlink" title="4.5 è¾“å‡ºå±‚è®¾è®¡"></a>4.5 è¾“å‡ºå±‚è®¾è®¡</h3><p>ç¥ç»ç½‘ç»œçš„æœ€åä¸€å±‚é™¤äº†å’Œæ‰€æœ‰çš„éšè—å±‚ä¸€æ ·ï¼Œå®Œæˆç»´åº¦å˜æ¢ã€ç‰¹å¾æå–çš„åŠŸèƒ½ï¼Œè¿˜ä½œä¸ºè¾“å‡ºå±‚ä½¿ç”¨ï¼Œéœ€è¦æ ¹æ®å…·ä½“çš„ä»»åŠ¡åœºæ™¯æ¥å†³å®šæ˜¯å¦ä½¿ç”¨æ¿€æ´»å‡½æ•°ï¼Œä»¥åŠä½¿ç”¨ä»€ä¹ˆç±»å‹çš„æ¿€æ´»å‡½æ•°ç­‰ã€‚éœ€è¦æ ¹æ®è¾“å‡ºå€¼çš„åŒºé—´èŒƒå›´æ¥åˆ†ç±»è®¨è®ºã€‚å¸¸è§çš„å‡ ç§è¾“å‡ºç±»å‹åŒ…æ‹¬ï¼š</p><ul><li>ğ‘œğ‘– âˆˆ ğ‘…ğ‘‘ è¾“å‡ºå±äºæ•´ä¸ªå®æ•°ç©ºé—´ï¼Œæˆ–è€…æŸæ®µæ™®é€šçš„å®æ•°ç©ºé—´ï¼Œæ¯”å¦‚å‡½æ•°å€¼è¶‹åŠ¿çš„é¢„æµ‹ï¼Œå¹´é¾„çš„é¢„æµ‹é—®é¢˜ç­‰ã€‚</li><li>ğ‘œğ‘– âˆˆ [0,1] è¾“å‡ºå€¼ç‰¹åˆ«åœ°è½åœ¨[0, 1]çš„åŒºé—´ï¼Œå¦‚å›¾ç‰‡ç”Ÿæˆï¼Œå›¾ç‰‡åƒç´ å€¼ä¸€èˆ¬ç”¨[0, 1]åŒºé—´çš„å€¼è¡¨ç¤ºï¼›æˆ–è€…äºŒåˆ†ç±»é—®é¢˜çš„æ¦‚ç‡ï¼Œå¦‚ç¡¬å¸æ­£åé¢çš„æ¦‚ç‡é¢„æµ‹é—®é¢˜ã€‚</li><li>ğ‘œğ‘– âˆˆ [0, 1], ğ‘– ğ‘œğ‘– = 1 è¾“å‡ºå€¼è½åœ¨[0,1]çš„åŒºé—´ï¼Œå¹¶ä¸”æ‰€æœ‰è¾“å‡ºå€¼ä¹‹å’Œä¸º1ï¼Œå¸¸è§çš„å¦‚å¤šåˆ†ç±»é—®é¢˜ï¼Œå¦‚MNIST æ‰‹å†™æ•°å­—å›¾ç‰‡è¯†åˆ«ï¼Œå›¾ç‰‡å±äº10 ä¸ªç±»åˆ«çš„æ¦‚ç‡ä¹‹å’Œåº”ä¸º1ã€‚</li><li>ğ‘œğ‘– âˆˆ [âˆ’1, 1] è¾“å‡ºå€¼åœ¨[-1, 1]ä¹‹é—´</li></ul><p><strong>1ã€æ™®é€šå®æ•°ç©ºé—´</strong></p><p>è¿™ä¸€ç±»é—®é¢˜æ¯”è¾ƒæ™®éï¼Œåƒæ­£å¼¦å‡½æ•°æ›²çº¿é¢„æµ‹ã€å¹´é¾„çš„é¢„æµ‹ã€è‚¡ç¥¨èµ°åŠ¿çš„é¢„æµ‹ç­‰éƒ½å±äºæ•´ä¸ªæˆ–è€…éƒ¨åˆ†è¿ç»­çš„å®æ•°ç©ºé—´ï¼Œè¾“å‡ºå±‚å¯ä»¥ä¸åŠ æ¿€æ´»å‡½æ•°ã€‚è¯¯å·®çš„è®¡ç®—ç›´æ¥åŸºäºæœ€åä¸€å±‚çš„è¾“å‡ºğ’å’ŒçœŸå®å€¼ğ’šè¿›è¡Œè®¡ç®—ï¼Œå¦‚é‡‡ç”¨å‡æ–¹å·®è¯¯å·®å‡½æ•°åº¦é‡è¾“å‡ºå€¼ğ’ä¸çœŸå®å€¼ğ’šä¹‹é—´çš„è·ç¦»ï¼š<br>$$<br>â„’ = ğ‘”(ğ’, ğ’š)<br>$$<br>å…¶ä¸­ğ‘”ä»£è¡¨äº†æŸä¸ªå…·ä½“çš„è¯¯å·®è®¡ç®—å‡½æ•°ï¼Œä¾‹å¦‚MSE ç­‰ã€‚</p><p><strong>2 ã€[0, 1]åŒºé—´</strong></p><p>è¾“å‡ºå€¼å±äº[0, 1]åŒºé—´ä¹Ÿæ¯”è¾ƒå¸¸è§ï¼Œæ¯”å¦‚å›¾ç‰‡çš„ç”Ÿæˆã€äºŒåˆ†ç±»é—®é¢˜ç­‰ã€‚åœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œä¸€èˆ¬ä¼šå°†å›¾ç‰‡çš„åƒç´ å€¼å½’ä¸€åŒ–åˆ°[0,1]åŒºé—´ï¼Œå¦‚æœç›´æ¥ä½¿ç”¨è¾“å‡ºå±‚çš„å€¼ï¼Œåƒç´ çš„å€¼èŒƒå›´ä¼šåˆ†å¸ƒåœ¨æ•´ä¸ªå®æ•°ç©ºé—´ã€‚ä¸ºäº†è®©åƒç´ çš„å€¼èŒƒå›´æ˜ å°„åˆ°[0,1]çš„æœ‰æ•ˆå®æ•°ç©ºé—´ï¼Œéœ€è¦åœ¨è¾“å‡ºå±‚åæ·»åŠ æŸä¸ªåˆé€‚çš„æ¿€æ´»å‡½æ•°ğœï¼Œå…¶ä¸­Sigmoid å‡½æ•°åˆšå¥½å…·æœ‰æ­¤åŠŸèƒ½ã€‚</p><p><strong>3ã€ [0,1]åŒºé—´ï¼Œå’Œä¸º1</strong></p><p>è¾“å‡ºå€¼ğ‘œğ‘– âˆˆ [0,1]ï¼Œä¸”æ‰€æœ‰è¾“å‡ºå€¼ä¹‹å’Œä¸º1ï¼Œè¿™ç§è®¾å®šä»¥å¤šåˆ†ç±»é—®é¢˜æœ€ä¸ºå¸¸è§ï¼Œè¾“å‡ºå±‚çš„æ¯ä¸ªè¾“å‡ºèŠ‚ç‚¹ä»£è¡¨äº†ä¸€ç§ç±»åˆ«ã€‚è€ƒè™‘å¤šåˆ†ç±»é—®é¢˜ä¸­çš„æ ·æœ¬åªå¯èƒ½å±äºæ‰€æœ‰ç±»åˆ«ä¸­çš„æŸä¸€ç§ï¼Œå› æ­¤æ»¡è¶³æ‰€æœ‰ç±»åˆ«æ¦‚ç‡ä¹‹å’Œä¸º1 çš„çº¦æŸã€‚</p><p>å¯ä»¥é€šè¿‡åœ¨è¾“å‡ºå±‚æ·»åŠ Softmax å‡½æ•°å®ç°ã€‚Softmax å‡½æ•°å®šä¹‰ä¸ºï¼š<br>$$<br>Softmax(x) = \frac{e^{z_i}}{\sum_{j = 1}^{d_{out}}e^{z_j}}<br>$$<br>Softmax å‡½æ•°ä¸ä»…å¯ä»¥å°†è¾“å‡ºå€¼æ˜ å°„åˆ°[0,1]åŒºé—´ï¼Œè¿˜æ»¡è¶³æ‰€æœ‰çš„è¾“å‡ºå€¼ä¹‹å’Œä¸º1 çš„ç‰¹æ€§ã€‚</p><p>ä¾‹å¦‚è¾“å‡ºå±‚çš„è¾“å‡ºä¸º[2.0,1.0,0.1]ï¼Œç»è¿‡Softmax å‡½æ•°è®¡ç®—åï¼Œå¾—åˆ°è¾“å‡ºä¸º[0.7,0.2,0.1]ï¼Œæ¯ä¸ªå€¼ä»£è¡¨äº†å½“å‰æ ·æœ¬å±äºæ¯ä¸ªç±»åˆ«çš„æ¦‚ç‡ï¼Œæ¦‚ç‡å€¼ä¹‹å’Œä¸º1ã€‚é€šè¿‡Softmaxå‡½æ•°å¯ä»¥å°†è¾“å‡ºå±‚çš„è¾“å‡ºè½¬è¯‘ä¸ºç±»åˆ«æ¦‚ç‡ï¼Œåœ¨åˆ†ç±»é—®é¢˜ä¸­ä½¿ç”¨çš„éå¸¸é¢‘ç¹ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210513192502831.png"></p><p><strong>4ã€ [-1, 1]</strong></p><p>æœå¸Œæœ›è¾“å‡ºå€¼çš„èŒƒå›´åˆ†å¸ƒåœ¨(âˆ’1, 1)åŒºé—´ï¼Œå¯ä»¥ç®€å•åœ°ä½¿ç”¨tanh æ¿€æ´»å‡½æ•°ï¼Œå®ç°å¦‚ä¸‹ï¼š</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210513193007115.png"></p><h3 id="4-6-è¯¯å·®è®¡ç®—"><a href="#4-6-è¯¯å·®è®¡ç®—" class="headerlink" title="4.6 è¯¯å·®è®¡ç®—"></a>4.6 è¯¯å·®è®¡ç®—</h3><p>åœ¨æ­å»ºå®Œæ¨¡å‹ç»“æ„åï¼Œä¸‹ä¸€æ­¥å°±æ˜¯é€‰æ‹©åˆé€‚çš„è¯¯å·®å‡½æ•°æ¥è®¡ç®—è¯¯å·®ã€‚å¸¸è§çš„è¯¯å·®å‡½æ•°æœ‰å‡æ–¹å·®ã€äº¤å‰ç†µã€KL æ•£åº¦ã€Hinge Loss å‡½æ•°ç­‰ï¼Œå…¶ä¸­å‡æ–¹å·®å‡½æ•°å’Œäº¤å‰ç†µå‡½æ•°åœ¨æ·±åº¦å­¦ä¹ ä¸­æ¯”è¾ƒå¸¸è§ï¼Œå‡æ–¹å·®å‡½æ•°ä¸»è¦ç”¨äºå›å½’é—®é¢˜ï¼Œäº¤å‰ç†µå‡½æ•°ä¸»è¦ç”¨äºåˆ†ç±»é—®é¢˜ã€‚</p><p><strong>1ã€å‡æ–¹å·®è¯¯å·®å‡½æ•°ï¼š</strong></p><p>å‡æ–¹å·®(Mean Squared Errorï¼Œç®€ç§°MSE)è¯¯å·®å‡½æ•°æŠŠè¾“å‡ºå‘é‡å’ŒçœŸå®å‘é‡æ˜ å°„åˆ°ç¬›å¡å°”åæ ‡ç³»çš„ä¸¤ä¸ªç‚¹ä¸Šï¼Œé€šè¿‡è®¡ç®—è¿™ä¸¤ä¸ªç‚¹ä¹‹é—´çš„æ¬§å¼è·ç¦»(å‡†ç¡®åœ°è¯´æ˜¯æ¬§å¼è·ç¦»çš„å¹³æ–¹)æ¥è¡¡é‡ä¸¤ä¸ªå‘é‡ä¹‹é—´çš„å·®è·ï¼š<br>$$<br>\operatorname{MSE}(\boldsymbol{y}, \boldsymbol{o}) \triangleq \frac{1}{d_{\text {out }}} \sum_{i=1}^{d_{\text {out }}}\left(y_{i}-o_{i}\right)^{2}<br>$$<br>MSE è¯¯å·®å‡½æ•°çš„å€¼æ€»æ˜¯å¤§äºç­‰äº0ï¼Œå½“MSE å‡½æ•°è¾¾åˆ°æœ€å°å€¼0 æ—¶ï¼Œè¾“å‡ºç­‰äºçœŸå®æ ‡ç­¾ï¼Œæ­¤æ—¶ç¥ç»ç½‘ç»œçš„å‚æ•°è¾¾åˆ°æœ€ä¼˜çŠ¶æ€ã€‚</p><p>å‡æ–¹å·®è¯¯å·®å‡½æ•°å¹¿æ³›åº”ç”¨åœ¨å›å½’é—®é¢˜ä¸­ï¼Œå®é™…ä¸Šï¼Œåˆ†ç±»é—®é¢˜ä¸­ä¹Ÿå¯ä»¥åº”ç”¨å‡æ–¹å·®è¯¯å·®å‡½æ•°ã€‚åœ¨TensorFlow ä¸­ï¼Œå¯ä»¥é€šè¿‡å‡½æ•°æ–¹å¼æˆ–å±‚æ–¹å¼å®ç°MSE è¯¯å·®è®¡ç®—ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨å‡½æ•°æ–¹å¼å®ç°MSE è®¡ç®—ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210513194833853.png"></p><h2 id="ç¬¬äº”ç« -åå‘ä¼ æ’­ç®—æ³•"><a href="#ç¬¬äº”ç« -åå‘ä¼ æ’­ç®—æ³•" class="headerlink" title="ç¬¬äº”ç«  åå‘ä¼ æ’­ç®—æ³•"></a>ç¬¬äº”ç«  åå‘ä¼ æ’­ç®—æ³•</h2><p>è¯¯å·®åå‘ä¼ æ’­ç®—æ³•ï¼ˆBackpropagationï¼Œç®€ç§°BPï¼‰ï¼Œåå‘ä¼ æ’­ç®—æ³•å’Œæ¢¯åº¦ä¸‹é™ç®—æ³•æ˜¯ç¥ç»ç½‘ç»œçš„æ ¸å¿ƒç®—æ³•ï¼Œæ·±åˆ»ç†è§£å…¶å·¥ä½œåŸç†ååˆ†é‡è¦ã€‚å…ˆå›é¡¾å¯¼æ•°ã€æ¢¯åº¦ç­‰æ•°å­¦æ¦‚å¿µï¼Œç„¶åæ¨å¯¼å¸¸ç”¨æ¿€æ´»å‡½æ•°ã€æŸå¤±å‡½æ•°çš„æ¢¯åº¦å½¢å¼ï¼Œå¹¶å¼€å§‹é€æ¸æ¨å¯¼æ„ŸçŸ¥æœºã€å¤šå±‚ç¥ç»ç½‘ç»œçš„æ¢¯åº¦ä¼ æ’­æ–¹å¼ã€‚</p><h3 id="5-1-å¯¼æ•°ä¸æ¢¯åº¦"><a href="#5-1-å¯¼æ•°ä¸æ¢¯åº¦" class="headerlink" title="5.1 å¯¼æ•°ä¸æ¢¯åº¦"></a>5.1 å¯¼æ•°ä¸æ¢¯åº¦</h3><p>å¯¼æ•°ï¼ˆDerivativeï¼‰çš„å®šä¹‰æ˜¯è‡ªå˜é‡ğ‘¥äº§ç”Ÿä¸€ä¸ªå¾®å°æ‰°åŠ¨Î”ğ‘¥åï¼Œå‡½æ•°è¾“å‡ºå€¼çš„å¢é‡Î”ğ‘¦ä¸è‡ªå˜é‡å¢é‡Î”ğ‘¥çš„æ¯”å€¼åœ¨Î”ğ‘¥è¶‹äº0 æ—¶çš„æé™ğ‘ï¼Œå¦‚æœå­˜åœ¨ï¼Œğ‘å³ä¸ºåœ¨ğ‘¥å¤„çš„å¯¼æ•°ï¼š<br>$$<br>a = \lim_{\Delta x \rightarrow 0} {\frac{f(x+\Delta x)-f(x)}{\Delta x}}<br>$$<br>å‡½æ•°çš„å¯¼æ•°å¯ä»¥è®°ä¸ºğ‘“â€²(ğ‘¥)æˆ–$\frac {dğ‘¦}{dğ‘¥}$ï¼Œä»å‡ ä½•è§’åº¦æ¥çœ‹ï¼Œä¸€å…ƒå‡½æ•°åœ¨æŸå¤„çš„å¯¼æ•°å°±æ˜¯å‡½æ•°çš„åˆ‡çº¿åœ¨æ­¤å¤„çš„æ–œç‡ï¼Œå³å‡½æ•°å€¼æ²¿ç€ğ‘¥æ–¹å‘çš„å˜åŒ–ç‡ã€‚</p><p>é’ˆå¯¹å¤šå…ƒå‡½æ•°è€Œè¨€ï¼Œå½“å‡½æ•°çš„è‡ªå˜é‡æ•°å¤§äºä¸€ä¸ªæ—¶ï¼Œå‡½æ•°çš„å¯¼æ•°æ¦‚å¿µæ‹“å±•ä¸ºå‡½æ•°å€¼æ²¿ç€ä»»æ„Î”ğ’™æ–¹å‘çš„å˜åŒ–ç‡ã€‚å¯¼æ•°æœ¬èº«æ˜¯æ ‡é‡ï¼Œæ²¡æœ‰æ–¹å‘ï¼Œä½†æ˜¯å¯¼æ•°è¡¨å¾äº†å‡½æ•°å€¼åœ¨æŸä¸ªæ–¹å‘Î”ğ’™çš„ä¸Šå˜åŒ–ç‡ã€‚åœ¨è¿™äº›ä»»æ„Î”ğ’™æ–¹å‘ä¸­ï¼Œæ²¿ç€åæ ‡è½´çš„å‡ ä¸ªæ–¹å‘æ¯”è¾ƒç‰¹æ®Šï¼Œæ­¤æ—¶çš„å¯¼æ•°ä¹Ÿå«ä½œåå¯¼æ•°ï¼ˆPartial Derivativeï¼‰ã€‚å¯¹äºå¤šå…ƒå‡½æ•°çš„åå¯¼æ•°ï¼Œè®°ä¸º$\frac{\partial y}{\partial x_{1}}, \frac{\partial y}{\partial x_{2}}, \cdots$</p><p>ä¾‹å¦‚æœ¬è´¨ä¸Šä¸ºå¤šå…ƒå‡½æ•°çš„ç¥ç»ç½‘ç»œæ¨¡å‹ï¼Œshape ä¸º[784, 256]çš„æƒå€¼çŸ©é˜µğ‘¾ï¼Œå®ƒåŒ…å«äº†784 Ã— 256ä¸ªè¿æ¥æƒå€¼ğ‘¤ï¼Œéœ€è¦æ±‚å‡º784 Ã— 256ä¸ªåå¯¼æ•°ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨æ•°å­¦è¡¨è¾¾ä¹ æƒ¯ä¸­ï¼Œä¸€èˆ¬è¦è®¨è®ºçš„è‡ªå˜é‡è®°ä¸ºğ’™ï¼Œä½†æ˜¯åœ¨ç¥ç»ç½‘ç»œä¸­ï¼Œğ’™ä¸€èˆ¬ç”¨æ¥è¡¨ç¤ºè¾“å…¥ï¼Œæ¯”å¦‚å›¾ç‰‡ã€æ–‡æœ¬ã€è¯­éŸ³æ•°æ®ç­‰ï¼Œç½‘ç»œçš„è‡ªå˜é‡æ˜¯ç½‘ç»œå‚æ•°é›†ğœƒ = {ğ‘¤1, ğ‘1, ğ‘¤2, ğ‘2, â‹¯ }ã€‚åˆ©ç”¨æ¢¯åº¦ä¸‹é™ç®—æ³•ä¼˜åŒ–ç½‘ç»œæ—¶ï¼Œéœ€è¦æ±‚å‡ºç½‘ç»œçš„æ‰€æœ‰åå¯¼æ•°ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å…³å¿ƒçš„ä¹Ÿæ˜¯è¯¯å·®å‡½æ•°è¾“å‡ºâ„’æ²¿ç€è‡ªå˜é‡ğœƒğ‘–æ–¹å‘ä¸Šçš„å¯¼æ•°ï¼Œå³â„’å¯¹ç½‘ç»œå‚æ•°ğœƒğ‘–çš„åå¯¼æ•°$\frac{\partial l}{\partial w_1}, \frac{\partial l}{\partial b_2}, \cdots$  ç­‰ã€‚æŠŠå‡½æ•°æ‰€æœ‰åå¯¼æ•°å†™æˆå‘é‡å½¢å¼ï¼š<br>$$<br>\nabla_{\theta} \mathcal{L}=\left(\frac{\partial \mathcal{L}}{\partial \theta_{1}}, \frac{\partial \mathcal{L}}{\partial \theta_{2}}, \frac{\partial \mathcal{L}}{\partial \theta_{3}}, \cdots, \frac{\partial \mathcal{L}}{\partial \theta_{n}}\right)<br>$$<br>æ­¤æ—¶æ¢¯åº¦ä¸‹é™ç®—æ³•å¯ä»¥æŒ‰ç€å‘é‡å½¢å¼è¿›è¡Œæ›´æ–°ï¼š<br>$$<br>\theta^{\prime}=\theta-\eta \cdot \nabla_{\theta} \mathcal{L}<br>$$<br>ğœ‚ä¸ºå­¦ä¹ ç‡è¶…å‚æ•°ã€‚æ¢¯åº¦ä¸‹é™ç®—æ³•ä¸€èˆ¬æ˜¯å¯»æ‰¾å‡½æ•°â„’çš„æœ€å°å€¼ï¼Œæœ‰æ—¶ä¹Ÿå¸Œæœ›æ±‚è§£å‡½æ•°çš„æœ€å¤§å€¼ï¼Œå¦‚å¼ºåŒ–å­¦ä¹ ä¸­å¸Œæœ›æœ€å¤§åŒ–å›æŠ¥å‡½æ•°ï¼Œåˆ™å¯æŒ‰ç€æ¢¯åº¦æ–¹å‘æ›´æ–°ï¼š<br>$$<br>\theta^{\prime}=\theta+\eta \cdot \nabla_{\theta} \mathcal{L}<br>$$<br>è¿™ç§æ›´æ–°æ–¹å¼ç§°ä¸ºæ¢¯åº¦ä¸Šå‡ç®—æ³•ã€‚æ¢¯åº¦ä¸‹é™ç®—æ³•å’Œæ¢¯åº¦ä¸Šå‡ç®—æ³•æ€æƒ³ä¸Šæ˜¯ç›¸åŒçš„ï¼Œä¸€æ˜¯æœ<br>ç€æ¢¯åº¦çš„åå‘æ›´æ–°ï¼Œä¸€æ˜¯æœç€æ¢¯åº¦çš„æ–¹å‘æ›´æ–°ï¼Œä¸¤è€…éƒ½éœ€è¦æ±‚è§£åå¯¼æ•°ã€‚è¿™é‡ŒæŠŠå‘é‡<br>($\frac{\partial l}{\partial \theta_1}, \frac{\partial l}{\partial \theta_2}, \cdots \frac{\partial l}{\partial \theta_n}$  )ç§°ä¸ºå‡½æ•°çš„æ¢¯åº¦ï¼ˆGradientï¼‰ã€‚</p><p>ä½†æ˜¯é€šè¿‡æ¢¯åº¦ä¸‹é™ç®—æ³•å¹¶ä¸èƒ½ä¿è¯å¾—åˆ°å…¨å±€æœ€ä¼˜è§£ï¼Œè¿™ä¸»è¦æ˜¯ç›®æ ‡å‡½æ•°çš„éå‡¸æ€§é€ æˆçš„ã€‚å¦‚å›¾æ‰€ç¤ºï¼Œæ·±è“è‰²åŒºåŸŸä¸ºæå°å€¼åŒºåŸŸï¼Œä¸åŒçš„ä¼˜åŒ–è½¨è¿¹å¯èƒ½å¾—åˆ°ä¸åŒçš„æœ€ä¼˜æ•°å€¼è§£ï¼Œè¿™äº›æ•°å€¼è§£å¹¶ä¸ä¸€å®šæ˜¯å…¨å±€æœ€ä¼˜è§£ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210526130047428.png"></p><blockquote><p>ç¥ç»ç½‘ç»œçš„æ¨¡å‹è¡¨è¾¾å¼é€šå¸¸éå¸¸å¤æ‚ï¼Œæ¨¡å‹å‚æ•°é‡å¯è¾¾åƒä¸‡ã€æ•°äº¿çº§åˆ«ï¼Œå‡ ä¹æ‰€æœ‰çš„ç¥ç»ç½‘ç»œçš„ä¼˜åŒ–é—®é¢˜éƒ½æ˜¯ä¾èµ–äºæ·±åº¦å­¦ä¹ æ¡†æ¶å»è‡ªåŠ¨è®¡ç®—ç½‘ç»œå‚æ•°çš„æ¢¯åº¦ï¼Œç„¶åé‡‡ç”¨æ¢¯åº¦ä¸‹é™ç®—æ³•å¾ªç¯è¿­ä»£ä¼˜åŒ–ç½‘ç»œçš„å‚æ•°ç›´è‡³æ€§èƒ½æ»¡è¶³éœ€æ±‚ã€‚æ·±åº¦å­¦ä¹ æ¡†æ¶è¿™é‡Œä¸»è¦å®ç°çš„ç®—æ³•å°±æ˜¯åå‘ä¼ æ’­ç®—æ³•å’Œæ¢¯åº¦ä¸‹é™ç®—æ³•ï¼Œå› æ­¤ç†è§£è¿™ä¸¤ä¸ªç®—æ³•çš„åŸç†æœ‰åˆ©äºäº†è§£æ·±åº¦å­¦ä¹ æ¡†æ¶çš„ä½œç”¨ã€‚</p></blockquote><h3 id="5-2-æ¿€æ´»å‡½æ•°å¯¼æ•°"><a href="#5-2-æ¿€æ´»å‡½æ•°å¯¼æ•°" class="headerlink" title="5.2 æ¿€æ´»å‡½æ•°å¯¼æ•°"></a>5.2 æ¿€æ´»å‡½æ•°å¯¼æ•°</h3><p>Sigmoidå‡½æ•°è¡¨è¾¾å¼ï¼š$$\sigma(x) = \frac{1}{1 + e^{-x}}$$</p><p>Sigmoidå‡½æ•°çš„å¯¼æ•°è¡¨è¾¾å¼ï¼š</p><p>$$<br>\begin{array}{c}<br>\frac{\mathrm{d}}{\mathrm{d} x} \sigma(x)=\frac{\mathrm{d}}{\mathrm{d} x}\left(\frac{1}{1+e^{-x}}\right) \<br>=\frac{\mathrm{e}^{-x}}{\left(1+\mathrm{e}^{-x}\right)^{2}} \<br>=\frac{\left(1+\mathrm{e}^{-x}\right)-1}{\left(1+\mathrm{e}^{-x}\right)^{2}} \<br>=\frac{1+e^{-x}}{\left(1+e^{-x}\right)^{2}}-\left(\frac{1}{1+e^{-x}}\right)^{2} \<br>=\sigma(x)-\sigma(x)^{2} \<br>=\sigma(1-\sigma)<br>\end{array}<br>$$</p><p>å¯ä»¥çœ‹åˆ°ï¼ŒSigmoid å‡½æ•°çš„å¯¼æ•°è¡¨è¾¾å¼æœ€ç»ˆå¯ä»¥è¡¨è¾¾ä¸ºæ¿€æ´»å‡½æ•°çš„è¾“å‡ºå€¼çš„ç®€å•è¿ç®—ï¼Œåˆ©ç”¨è¿™ä¸€æ€§è´¨ï¼Œåœ¨ç¥ç»ç½‘ç»œçš„æ¢¯åº¦è®¡ç®—ä¸­ï¼Œé€šè¿‡ç¼“å­˜æ¯å±‚çš„Sigmoid å‡½æ•°è¾“å‡ºå€¼ï¼Œå³å¯åœ¨éœ€è¦çš„æ—¶å€™è®¡ç®—å‡ºå…¶å¯¼æ•°ã€‚</p><pre class=" language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">sigmoid</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>     <span class="token comment" spellcheck="true"># å®ç° sigmoid å‡½æ•°</span>    <span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> np<span class="token punctuation">.</span>exp<span class="token punctuation">(</span><span class="token operator">-</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">sigmoid_derivative</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>     <span class="token comment" spellcheck="true"># sigmoid å¯¼æ•°çš„è®¡ç®—</span>    <span class="token comment" spellcheck="true"># sigmoid å‡½æ•°çš„è¡¨è¾¾å¼ç”±æ‰‹åŠ¨æ¨å¯¼è€Œå¾—</span>    <span class="token keyword">return</span> sigmoid<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span>sigmoid<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><p><img src="C:\Users\zhou\AppData\Roaming\Typora\typora-user-images\image-20210527211709757.png"></p><p> ReLU å‡½æ•°çš„å¯¼æ•°è¡¨è¾¾å¼ï¼š$ReLU(ğ‘¥) = max(0, ğ‘¥)$</p><p>å®ƒçš„å¯¼æ•°æ¨å¯¼éå¸¸ç®€å•ï¼Œç›´æ¥å¯å¾—ï¼š<br>$$<br>\frac{\mathrm{d}}{\mathrm{d} x} \operatorname{ReLU}=\left{\begin{array}{ll}<br>1 &amp; x \geq 0 \<br>0 &amp; x&lt;0<br>\end{array}\right.<br>$$<br>å¯ä»¥çœ‹åˆ°ï¼ŒReLU å‡½æ•°çš„å¯¼æ•°è®¡ç®—ç®€å•ï¼Œx å¤§äºç­‰äºé›¶çš„æ—¶å€™ï¼Œå¯¼æ•°å€¼æ’ä¸º1ï¼Œåœ¨åå‘ä¼ æ’­è¿‡ç¨‹ä¸­ï¼Œå®ƒæ—¢ä¸ä¼šæ”¾å¤§æ¢¯åº¦ï¼Œé€ æˆæ¢¯åº¦çˆ†ç‚¸(Gradient exploding)ç°è±¡ï¼›ä¹Ÿä¸ä¼šç¼©å°æ¢¯åº¦ï¼Œé€ æˆæ¢¯åº¦å¼¥æ•£(Gradient vanishing)ç°è±¡ã€‚</p><pre class=" language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">relu</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">return</span> np<span class="token punctuation">.</span>maximum<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">relu_derivative</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment" spellcheck="true"># ReLU å‡½æ•°çš„å¯¼æ•°</span>    d <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>x<span class="token punctuation">,</span> copy<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># ç”¨äºä¿å­˜æ¢¯åº¦çš„å¼ é‡</span>    d<span class="token punctuation">[</span>x <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment" spellcheck="true"># å…ƒç´ ä¸ºè´Ÿçš„å¯¼æ•°ä¸º 0</span>    d<span class="token punctuation">[</span>x <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment" spellcheck="true"># å…ƒç´ ä¸ºæ­£çš„å¯¼æ•°ä¸º 1</span>    <span class="token keyword">return</span> d</code></pre><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210527211931148.png"></p><p>åœ¨ ReLU å‡½æ•°è¢«å¹¿æ³›åº”ç”¨ä¹‹å‰ï¼Œç¥ç»ç½‘ç»œä¸­æ¿€æ´»å‡½æ•°é‡‡ç”¨Sigmoid å±…å¤šï¼Œä½†æ˜¯Sigmoidå‡½æ•°å®¹æ˜“å‡ºç°æ¢¯åº¦å¼¥æ•£ç°è±¡ï¼Œå½“ç½‘ç»œçš„å±‚æ•°å¢åŠ åï¼Œè¾ƒå‰å±‚çš„å‚æ•°ç”±äºæ¢¯åº¦å€¼éå¸¸å¾®å°ï¼Œå‚æ•°é•¿æ—¶é—´å¾—ä¸åˆ°æœ‰æ•ˆæ›´æ–°ï¼Œæ— æ³•è®­ç»ƒè¾ƒæ·±å±‚çš„ç¥ç»ç½‘ç»œï¼Œå¯¼è‡´ç¥ç»ç½‘ç»œçš„ç ”ç©¶ä¸€ç›´åœç•™åœ¨æµ…å±‚ã€‚</p><p>Tanh å‡½æ•°æ¢¯åº¦ï¼štanh å‡½æ•°çš„è¡¨è¾¾å¼ï¼š<br>$$<br>\begin{array}{l}<br>\tanh (x)=\frac{\left(e^{x}-e^{-x}\right)}{\left(e^{x}+e^{-x}\right)} \<br>=2 \cdot \operatorname{sigmoid}(2 x)-1<br>\end{array}<br>$$<br>å®ƒçš„å¯¼æ•°æ¨å¯¼ä¸º:<br>$$<br>\begin{aligned}<br>\frac{\mathrm{d}}{\mathrm{d} x} \tanh (x)=&amp; \frac{\left(e^{x}+e^{-x}\right)\left(e^{x}+e^{-x}\right)-\left(e^{x}-e^{-x}\right)\left(e^{x}-e^{-x}\right)}{\left(e^{x}+e^{-x}\right)^{2}} \<br>&amp;=1-\frac{\left(e^{x}-e^{-x}\right)^{2}}{\left(e^{x}+e^{-x}\right)^{2}}=1-\tanh ^{2}(x)<br>\end{aligned}<br>$$</p><pre class=" language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">tanh</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment" spellcheck="true"># tanh å‡½æ•°å®ç°</span>    <span class="token keyword">return</span> <span class="token number">2</span><span class="token operator">*</span>sigmoid<span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">*</span>x<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token keyword">def</span> <span class="token function">tanh_derivative</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment" spellcheck="true"># tanh å¯¼æ•°å®ç°</span>    <span class="token keyword">return</span> <span class="token number">1</span><span class="token operator">-</span>tanh<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">2</span></code></pre><p><img src="C:\Users\zhou\AppData\Roaming\Typora\typora-user-images\image-20210527212906988.png"></p><h3 id="5-3-æŸå¤±å‡½æ•°æ¢¯åº¦"><a href="#5-3-æŸå¤±å‡½æ•°æ¢¯åº¦" class="headerlink" title="5.3 æŸå¤±å‡½æ•°æ¢¯åº¦"></a>5.3 æŸå¤±å‡½æ•°æ¢¯åº¦</h3><p>å‡æ–¹è¯¯å·®æŸå¤±å‡½æ•°è¡¨è¾¾å¼ä¸ºï¼š$\mathcal{L}=\frac{1}{2} \sum_{k=1}^{K}\left(y_{k}-o_{k}\right)^{2}$</p><p>ä¸Šå¼ä¸­çš„$\frac {1}{2}$é¡¹ç”¨äºç®€åŒ–è®¡ç®—ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨$\frac{1}{k}$è¿›è¡Œå¹³å‡ï¼Œè¿™äº›ç¼©æ”¾è¿ç®—å‡ä¸ä¼šæ”¹å˜æ¢¯åº¦æ–¹å‘ã€‚åˆ™å®ƒçš„åå¯¼æ•°$\frac {âˆ‚â„’}{âˆ‚ğ‘œ<em>ğ‘–}$å¯ä»¥å±•å¼€ä¸ºï¼š<br>$$<br>\frac{\partial \mathcal{L}}{\partial o</em>{i}}=\frac{1}{2} \sum_{k=1}^{K} \frac{\partial}{\partial o_{i}}\left(y_{k}-o_{k}\right)^{2}<br>$$<br>åˆ©ç”¨å¤åˆå‡½æšå¯¼æ•°æ³•åˆ™åˆ†è§£ä¸º:<br>$$<br>\frac{\partial \mathcal{L}}{\partial \boldsymbol{o}<em>{\boldsymbol{i}}}=\frac{1}{2} \sum</em>{k=1}^{K}{ }<em>{k=1} \cdot\left(y</em>{k}-o_{k}\right) \cdot \frac{\partial\left(y_{k}-o_{k}\right)}{\partial o_{i}}<br>$$<br>å³<br>$$<br>\begin{aligned}<br>\frac{\partial \mathcal{L}}{\partial o_{i}} &amp;=\sum_{k=1}^{K}\left(y_{k}-o_{k}\right) \cdot-1 \cdot \frac{\partial o_{k}}{\partial o_{i}} \<br>&amp;=\sum_{k=1}^{K}\left(o_{k}-y_{k}\right) \cdot \frac{\partial o_{k}}{\partial o_{l}}<br>\end{aligned}<br>$$<br>è€ƒè™‘åˆ°$\frac {ğœ•ğ‘œ<em>ğ‘˜}{ğœ•ğ‘œ_ğ‘–}$ä»…å½“ğ‘˜ = ğ‘–æ—¶æ‰ä¸º1ï¼Œå…¶å®ƒç‚¹éƒ½ä¸º0ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåå¯¼æ•°$\frac {ğœ•â„’}{ğœ•ğ‘œğ‘–}$åªä¸ç¬¬ğ‘–å·èŠ‚ç‚¹ç›¸å…³ï¼Œä¸å…¶å®ƒèŠ‚ç‚¹æ— å…³ï¼Œå› æ­¤ä¸Šå¼ä¸­çš„æ±‚å’Œç¬¦å·å¯ä»¥å»æ‰ã€‚å‡æ–¹è¯¯å·®å‡½æ•°çš„å¯¼æ•°å¯ä»¥æ¨å¯¼ä¸ºï¼š<br>$$<br>\frac{\partial \mathcal{L}}{\partial o</em>{i}}=\left(o_{i}-y_{i}\right)<br>$$</p><h3 id="5-4-å…¨è¿æ¥å±‚æ¢¯åº¦"><a href="#5-4-å…¨è¿æ¥å±‚æ¢¯åº¦" class="headerlink" title="5.4 å…¨è¿æ¥å±‚æ¢¯åº¦"></a>5.4 å…¨è¿æ¥å±‚æ¢¯åº¦</h3><p>å•ç¥ç»å…ƒæ¢¯åº¦ï¼š</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210604094102790.png"></p><p>å¦‚æœæˆ‘ä»¬é‡‡ç”¨å‡æ–¹è¯¯å·®å‡½æ•°ï¼Œè€ƒè™‘åˆ°å•ä¸ªç¥ç»å…ƒåªæœ‰ä¸€ä¸ªè¾“å‡ºğ‘œ<sub>1</sub><sup>(1)</sup>ï¼Œé‚£ä¹ˆæŸå¤±å¯ä»¥è¡¨è¾¾ä¸ºï¼š<br>$$<br>L =\frac{1}{2}(o_1^{(1)}-t)^2 = (o_1-t)^2<br>$$<br>å…¶ä¸­ğ‘¡ä¸ºçœŸå®æ ‡ç­¾å€¼ï¼Œæ·»åŠ $\frac{1}{2}$å¹¶ä¸å½±å“æ¢¯åº¦çš„æ–¹å‘ï¼Œè®¡ç®—æ›´ç®€ä¾¿ã€‚æˆ‘ä»¬ä»¥æƒå€¼è¿æ¥çš„ç¬¬ğ‘— âˆˆ[1,j]å·èŠ‚ç‚¹çš„æƒå€¼å˜é‡ğ‘¤<sub>j1</sub>ä¸ºä¾‹ï¼Œè€ƒè™‘æŸå¤±å‡½æ•°â„’å¯¹å…¶çš„åå¯¼æ•°$\frac{\partial \mathcal{L}}{\partial w_{j1}}$<br>$$<br>\frac{\partial \mathcal{L}}{\partial w_{j1}} = (o_1-t)\frac{\partial \mathcal{o_1}}{\partial w_{j1}}<br>$$</p><p>å…¨è¿æ¥å±‚æ¢¯åº¦:æŠŠå•ä¸ªç¥ç»å…ƒæ¨¡å‹æ¨å¹¿åˆ°å•å±‚çš„å…¨è¿æ¥å±‚çš„ç½‘ç»œä¸Šï¼Œè¾“å…¥å±‚é€šè¿‡ä¸€ä¸ªå…¨è¿æ¥å±‚å¾—åˆ°è¾“å‡ºå‘é‡ğ’(1)ï¼Œä¸çœŸå®æ ‡ç­¾å‘é‡ğ’•è®¡ç®—å‡æ–¹è¯¯å·®ã€‚è¾“å…¥èŠ‚ç‚¹æ•°ä¸ºJï¼Œè¾“å‡ºèŠ‚ç‚¹æ•°ä¸ºğ¾ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210604101535767.png"></p><p>å¤šè¾“å‡ºçš„å…¨è¿æ¥ç½‘ç»œå±‚æ¨¡å‹ä¸å•ä¸ªç¥ç»å…ƒæ¨¡å‹ä¸åŒä¹‹å¤„åœ¨äºï¼Œå®ƒå¤šäº†å¾ˆå¤šçš„è¾“å‡ºèŠ‚ç‚¹ğ‘œ<sub>1</sub><sup>(1)</sup>, ğ‘œ<sub>2</sub><sup>(1)</sup>,, ğ‘œ<sub>3</sub><sup>(1)</sup>,, â‹¯ , ğ‘œ<sub>k</sub><sup>(1)</sup>,ï¼Œæ¯ä¸ªè¾“å‡ºèŠ‚ç‚¹åˆ†åˆ«å¯¹åº”åˆ°çœŸå®æ ‡ç­¾ğ‘¡<sub>1</sub>, ğ‘¡<sub>2</sub>, â€¦ , ğ‘¡<sub>k</sub>ã€‚ğ‘¤<sub>k</sub>æ˜¯è¾“å…¥ç¬¬ğ‘—å¥½èŠ‚ç‚¹ä¸è¾“å‡ºç¬¬ğ‘˜å·èŠ‚ç‚¹çš„è¿æ¥æƒå€¼ã€‚å‡æ–¹è¯¯å·®å¯ä»¥è¡¨è¾¾ä¸ºï¼š<br>$$<br>L=\frac{1}{2} \sum_{k=1}^{K} \left(o_{i}^{(1)}-t_{i}\right)^{2}<br>$$<br>è¿™é‡Œç®€å•ä½¿ç”¨TensorFlow è‡ªåŠ¨æ±‚å¯¼åŠŸèƒ½ï¼Œæ¥ä½“éªŒé“¾å¼æ³•åˆ™æ±‚è§£å…¨è¿æ¥å±‚æ¢¯åº¦çš„é­…åŠ›ã€‚ä¾‹å¦‚ï¼š</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> tensorflow <span class="token keyword">as</span> tf<span class="token comment" spellcheck="true"># æ„å»ºå¾…ä¼˜åŒ–å˜é‡</span>x <span class="token operator">=</span> tf<span class="token punctuation">.</span>constant<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">.</span><span class="token punctuation">)</span>w1 <span class="token operator">=</span> tf<span class="token punctuation">.</span>constant<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">.</span><span class="token punctuation">)</span>b1 <span class="token operator">=</span> tf<span class="token punctuation">.</span>constant<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">.</span><span class="token punctuation">)</span>w2 <span class="token operator">=</span> tf<span class="token punctuation">.</span>constant<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">.</span><span class="token punctuation">)</span>b2 <span class="token operator">=</span> tf<span class="token punctuation">.</span>constant<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># æ„å»ºæ¢¯åº¦è®°å½•å™¨</span><span class="token keyword">with</span> tf<span class="token punctuation">.</span>GradientTape<span class="token punctuation">(</span>persistent<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span> <span class="token keyword">as</span> tape<span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># étf.Variable ç±»å‹çš„å¼ é‡éœ€è¦äººä¸ºè®¾ç½®è®°å½•æ¢¯åº¦ä¿¡æ¯</span>    tape<span class="token punctuation">.</span>watch<span class="token punctuation">(</span><span class="token punctuation">[</span>w1<span class="token punctuation">,</span> b1<span class="token punctuation">,</span> w2<span class="token punctuation">,</span> b2<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># æ„å»º2 å±‚çº¿æ€§ç½‘ç»œ</span>    y1 <span class="token operator">=</span> x <span class="token operator">*</span> w1 <span class="token operator">+</span> b1    y2 <span class="token operator">=</span> y1 <span class="token operator">*</span> w2 <span class="token operator">+</span> b2<span class="token comment" spellcheck="true"># ç‹¬ç«‹æ±‚è§£å‡ºå„ä¸ªåå¯¼æ•°</span>dy2_dy1 <span class="token operator">=</span> tape<span class="token punctuation">.</span>gradient<span class="token punctuation">(</span>y2<span class="token punctuation">,</span> <span class="token punctuation">[</span>y1<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>dy1_dw1 <span class="token operator">=</span> tape<span class="token punctuation">.</span>gradient<span class="token punctuation">(</span>y1<span class="token punctuation">,</span> <span class="token punctuation">[</span>w1<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>dy2_dw1 <span class="token operator">=</span> tape<span class="token punctuation">.</span>gradient<span class="token punctuation">(</span>y2<span class="token punctuation">,</span> <span class="token punctuation">[</span>w1<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token comment" spellcheck="true"># éªŒè¯é“¾å¼æ³•åˆ™ï¼Œ2 ä¸ªè¾“å‡ºåº”ç›¸ç­‰</span><span class="token keyword">print</span><span class="token punctuation">(</span>dy2_dy1 <span class="token operator">*</span> dy1_dw1<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>dy2_dw1<span class="token punctuation">)</span></code></pre><p>ä»¥ä¸Šä»£ç ï¼Œé€šè¿‡è‡ªåŠ¨æ±‚å¯¼åŠŸèƒ½è®¡ç®—å‡º$\frac{\partial \mathcal{y_2}}{\partial y_1},\frac{\partial \mathcal{y_1}}{\partial w_1}å’Œ\frac{\partial \mathcal{y_2}}{\partial w_1}$ï¼Œå€ŸåŠ©é“¾å¼æ³•åˆ™æˆ‘ä»¬å¯ä»¥æ¨æ–­$\frac{\partial \mathcal{y_2}}{\partial y_1},\frac{\partial \mathcal{y_1}}{\partial w_1}å’Œ\frac{\partial \mathcal{y_2}}{\partial w_1}$åº”è¯¥æ˜¯ç›¸ç­‰çš„ï¼Œå®ƒä»¬çš„è®¡ç®—ç»“æœå¦‚ä¸‹ï¼š</p><pre class=" language-python"><code class="language-python">tf<span class="token punctuation">.</span>Tensor<span class="token punctuation">(</span><span class="token number">2.0</span><span class="token punctuation">,</span> shape<span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dtype<span class="token operator">=</span>float32<span class="token punctuation">)</span>tf<span class="token punctuation">.</span>Tensor<span class="token punctuation">(</span><span class="token number">2.0</span><span class="token punctuation">,</span> shape<span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dtype<span class="token operator">=</span>float32<span class="token punctuation">)</span></code></pre><p>å¯ä»¥çœ‹åˆ°$\frac{\partial \mathcal{y_2}}{\partial y_1},\frac{\partial \mathcal{y_1}}{\partial w_1}å’Œ\frac{\partial \mathcal{y_2}}{\partial w_1}$ï¼Œåå¯¼æ•°çš„ä¼ æ’­æ˜¯ç¬¦åˆé“¾å¼æ³•åˆ™çš„ã€‚</p><h3 id="5-5-åå‘ä¼ æ’­ç®—æ³•"><a href="#5-5-åå‘ä¼ æ’­ç®—æ³•" class="headerlink" title="5.5 åå‘ä¼ æ’­ç®—æ³•"></a>5.5 åå‘ä¼ æ’­ç®—æ³•</h3><p>ç°åœ¨æ¥æ¨å¯¼éšè—å±‚çš„æ¢¯åº¦ä¼ æ’­è§„å¾‹ã€‚ç®€å•å›é¡¾ä¸€ä¸‹è¾“å‡ºå±‚çš„åå¯¼æ•°å…¬å¼ï¼š<br>$$<br>\frac{\partial \mathcal{L}}{\partial w_{j k}}=\left(o_{k}-t_{k}\right) o_{k}\left(1-o_{k}\right) x_{j}=\delta_{k} x_{j}<br>$$<br>è€ƒè™‘å€’æ•°ç¬¬äºŒå±‚çš„åå¯¼æ•° $\frac{\partial \mathcal{L}}{\partial w_{i j}}$, è¾“å‡ºå±‚èŠ‚ç‚¹æ•°ä¸º Kï¼Œè¾“å‡ºä¸º $\boldsymbol{0}^{(K)}=\left[o_{1}^{(K)}, o_{2}^{(K)}, \cdots, o_{K}^{(K)}\right] $ ï¼›å€’æ•°ç¬¬äºŒå±‚èŠ‚ç‚¹æ•°ä¸º $\mathrm{J}$, è¾“å‡ºä¸º $\boldsymbol{o}^{(J)}=\left[o_{1}^{(J)}, o_{2}^{(I)}, \cdots, o_{J}^{(J)}\right] $ï¼› å€’æ•°ç¬¬ä¸‰å±‚çš„èŠ‚ç‚¹æ•°ä¸º $\mathrm{I}$, è¾“å‡ºä¸º $\boldsymbol{o}^{(I)}=\left[o_{1}^{(I)}, o_{2}^{(I)}, \cdots, o_{I}^{(I)}\right] $ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210604103815539.png"></p><p>ç”±äº $\mathcal{L}$ é€šè¿‡æ¯ä¸ªè¾“å‡ºèŠ‚ç‚¹o $<em>{k}$ ä¸ $w</em>{i j}$ ç›¸å…³è”ï¼Œæ•…æ­¤å¤„ä¸èƒ½å»æ‰æ±‚å’Œç¬¦å·ï¼Œè¿ç”¨é“¾å¼æ³•åˆ™å°†å‡æ–¹ å·®å‡½æ•°æ‹†è§£ï¼š<br>$$<br>\frac{\partial \mathcal{L}}{\partial w_{i j}}=\sum_{k}\left(o_{k}-t_{k}\right) \frac{\partial}{\partial w_{i j}} o_{k}<br>$$<br>å°†o $<em>{k}=\sigma\left(z</em>{k}\right)$ ä»£å…¥å¯å¾—:<br>$$<br>\frac{\partial \mathcal{L}}{\partial w_{i j}}=\sum_{k}\left(o_{k}-t_{k}\right) \frac{\partial}{\partial w_{i j}} \sigma\left(z_{k}\right)<br>$$<br>åˆ©ç”¨ Sigmoid å‡½æ•°çš„å¯¼æ•° $\sigma^{\prime}=\sigma(1-\sigma)$ è¿›ä¸€æ­¥åˆ†è§£ä¸º:<br>$$<br>\frac{\partial \mathcal{L}}{\partial w_{i j}}=\sum_{\boldsymbol{k}}\left(o_{k}-t_{k}\right) \sigma\left(z_{k}\right)\left(1-\sigma\left(z_{k}\right)\right) \frac{\partial z_{k}}{\partial w_{i j}}<br>$$<br>å°† $\sigma\left(z_{k}\right)$ å†™å› $o_{k}$ å½¢å¼ï¼Œå¹¶åˆ©ç”¨é“¾å¼æ³•åˆ™ï¼Œå°† $\frac{\partial z_{k}}{\partial w_{i j}}$ åˆ†è§£ä¸º:<br>$$<br>\frac{\partial \mathcal{L}}{\partial w_{i j}}=\sum_{k}\left(o_{k}-t_{k}\right) o_{k}\left(1-o_{k}\right) \frac{\partial z_{k}}{\partial o_{j}} \cdot \frac{\partial o_{j}}{\partial w_{i j}}<br>$$<br>ä¸­ $\frac{\partial z_{k}}{\partial o_{j}}=w_{j k}$, å› æ­¤:<br>$$<br>\frac{\partial \mathcal{L}}{\partial w_{i j}}=\sum_{k}\left(o_{k}-t_{k}\right) o_{k}\left(1-o_{k}\right) w_{j k} \frac{\partial o_{j}}{\partial w_{i j}}<br>$$<br>è€ƒè™‘åˆ° $\frac{\partial o_{j}}{\partial w_{i j}}$ ä¸ $k$ æ— å…³ï¼Œå¯æå–å…¬å…±é¡¹ä¸º:<br>$$<br>\frac{\partial \mathcal{L}}{\partial w_{i j}}=\frac{\partial o_{j}}{\partial w_{i j}} \sum_{k}\left(o_{k}-t_{k}\right) o_{k}\left(1-o_{k}\right) w_{j k}<br>$$<br>è¿›ä¸€æ­¥åˆ©ç”¨o $<em>{j}=\sigma\left(z</em>{j}\right)$, å¹¶åˆ©ç”¨ Sigmoid å¯¼æ•° $\sigma^{\prime}=\sigma(1-\sigma)$, å°† $\frac{\partial o_{j}}{\partial w_{i j}}$ æ‹†åˆ†ä¸º<br>$$<br>\frac{\partial \mathcal{L}}{\partial w_{i j}}=o_{j}\left(1-o_{j}\right) \frac{\partial z_{j}}{\partial w_{i j}} \sum_{k}\left(o_{k}-t_{k}\right) o_{k}\left(1-o_{k}\right) w_{j k}<br>$$<br>å…¶ä¸­ $\frac{\partial z_{j}}{\partial w_{i j}}$ çš„å¯¼æ•°å¯ç›´æ¥æ¨å¯¼å‡ºä¸º $o_{i}$, ä¸Šå¼å¯å†™ä¸º:<br>$$<br>\frac{\partial \mathcal{L}}{\partial w_{i j}}=o_{j}\left(1-o_{j}\right) o_{i} \sum_{k} \underbrace{\left(o_{k}-t_{k}\right) o_{k}\left(1-o_{k}\right)}<em>{\delta</em>{k}^{(K)}} w_{j k}<br>$$<br>å…¶ä¸­ $\delta_{k}^{(K)}=\left(o_{k}-t_{k}\right) o_{k}\left(1-o_{k}\right)$, åˆ™ $\frac{\partial \mathcal{L}}{\partial w_{i j}}$ çš„è¡¨è¾¾å¼å¯ç®€å†™ä¸º:<br>$$<br>\frac{\partial \mathcal{L}}{\partial w_{i j}}=o_{j}\left(1-o_{j}\right) o_{i} \sum_{\mathrm{k}} \delta_{k}^{(K)} w_{j k}<br>$$<br>ç±»ä¼¼åœ°ï¼Œä»¿ç…§è¾“å‡ºå±‚$\frac{\partial \mathcal{L}}{\partial w_{j k}} =\delta_{k}^{(K)} x_{j}$ çš„ä¹¦å†™æ–¹å¼ï¼Œå°† $\delta_{j}^{J}$ å®šä¹‰ä¸º:<br>$$<br>\delta_{j}^{J} \triangleq o_{j}\left(1-o_{j}\right) \sum_{k} \delta_{k}^{(K)} w_{j k}<br>$$<br>æ­¤æ—¶ $\frac{\partial \mathcal{L}}{\partial w_{i j}}$ å¯ä»¥å†™ä¸ºå½“å‰è¿æ¥çš„èµ·å§‹èŠ‚ç‚¹çš„è¾“å‡ºå€¼o $<em>{i}$ ä¸ç»ˆæ­¢èŠ‚ç‚¹jçš„æ¢¯åº¦å˜é‡ä¿¡æ¯ $\delta</em>{j}^{(J)}$ çš„ç®€å•ç›¸<br>ä¹˜è¿ç®—:<br>$$<br>\frac{\partial \mathcal{L}}{\partial w_{i j}}=\delta_{j}^{(J)} o_{i}^{(I)}<br>$$<br><strong>è¾“å‡ºå±‚:</strong><br>$$<br>\begin{array}{c}<br>\frac{\partial \mathcal{L}}{\partial w_{j k}}=\delta_{k}^{(K)} o_{j} \<br>\delta_{k}^{(K)}=o_{k}\left(1-o_{k}\right)\left(o_{k}-t_{k}\right)<br>\end{array}<br>$$<br><strong>å€’æ•°ç¬¬äºŒå±‚:</strong><br>$$<br>\frac{\partial \mathcal{L}}{\partial w_{i j}}=\delta_{j}^{(J)} o_{i}<br>$$<br>$$<br>\delta_{j}^{(J)}=o_{j}\left(1-o_{j}\right) \sum_{k} \delta_{k}^{(K)} w_{j k}<br>$$<br><strong>å€’æ•°ç¬¬ä¸‰å±‚:</strong><br>$$<br>\begin{array}{c}<br>\frac{\partial \mathcal{L}}{\partial w_{n i}}=\delta_{i}^{(I)} o_{n} \<br>\delta_{i}^{(I)}=o_{i}\left(1-o_{i}\right) \sum_{j} \delta_{j}^{(J)} w_{i j}<br>\end{array}<br>$$<br>å…¶ä¸­ $o_{n}$ ä¸ºå€’æ•°ç¬¬ä¸‰å±‚çš„è¾“å…¥ï¼Œå³å€’æ•°ç¬¬å››å±‚çš„è¾“å‡ºã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> æœºå™¨å­¦ä¹  </tag>
            
            <tag> TensorFlow </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœºå™¨å­¦ä¹ ä¸­çš„æ•°å­¦åŸç†</title>
      <link href="/2020/03/31/MathematicaOfMachineLearning/"/>
      <url>/2020/03/31/MathematicaOfMachineLearning/</url>
      
        <content type="html"><![CDATA[<h1 id="æœºå™¨å­¦ä¹ ä¸­çš„æ•°å­¦åŸç†"><a href="#æœºå™¨å­¦ä¹ ä¸­çš„æ•°å­¦åŸç†" class="headerlink" title="æœºå™¨å­¦ä¹ ä¸­çš„æ•°å­¦åŸç†"></a>æœºå™¨å­¦ä¹ ä¸­çš„æ•°å­¦åŸç†</h1><h2 id="ç¬¬ä¸€è®²-å¾®ç§¯åˆ†å’Œæ¢¯åº¦"><a href="#ç¬¬ä¸€è®²-å¾®ç§¯åˆ†å’Œæ¢¯åº¦" class="headerlink" title="ç¬¬ä¸€è®² å¾®ç§¯åˆ†å’Œæ¢¯åº¦"></a>ç¬¬ä¸€è®² å¾®ç§¯åˆ†å’Œæ¢¯åº¦</h2><p>ä¸»è¦å†…å®¹</p><ul><li>å¸¸æ•°eçš„è®¡ç®—è¿‡ç¨‹</li><li>å¸¸è§å‡½æ•°çš„å¯¼æ•°</li><li>åˆ†éƒ¨ç§¯åˆ†æ³•åŠå…¶åº”ç”¨</li><li>æ¢¯åº¦</li><li>ä¸Šå‡/ä¸‹é™æœ€å¿«æ–¹å‘</li><li>å‡¸å‡½æ•°</li><li>Jensenä¸ ç­‰å¼</li></ul><h3 id="1ã€æé™"><a href="#1ã€æé™" class="headerlink" title="1ã€æé™"></a>1ã€æé™</h3><p>ä¾‹å¦‚ï¼šæ±‚Sçš„å€¼ï¼š</p><p>â€‹    $S=\frac{1}{0 !}+\frac{1}{1 !}+\frac{1}{2 !}+\frac{1}{3 !}+\frac{1}{4 !}+\cdots+\frac{1}{n !}+\cdots$</p><p>==å¤¹é€¼å®šç†==</p><blockquote><p> åœ¨æŸ-åŸŸä¸Š,è‹¥9(x)â‰¤f(x)â‰¤h(x),åŒæ—¶æˆ‘ä»¬è¿˜çŸ¥é“ï¼Œ å½“xè¶‹å‘aæ—¶ï¼Œ9(x)çš„æé™<br> ç­‰äºLï¼Œä»¥åŠå½“xè¶‹å‘aæ—¶ï¼Œh(x)çš„æé™ä¹Ÿç­‰äºLï¼Œé‚£ä¹ˆå¤¹é€¼å®šç†å‘Šè¯‰æˆ‘ä»¬:å½“xè¶‹å‘aæ—¶ï¼Œf(x)çš„æé™ä¹Ÿä¸€ å®šç­‰äºLã€‚</p></blockquote><p>å¯ä»¥æ±‚å‡ºå¯¹æ•°å‡½æ•°çš„ä¸Šå‡é€Ÿåº¦ï¼š</p><p>é—®é¢˜åˆ†æï¼šä»¤f(x)= log<sub>a</sub>X,åˆ™:<br>$$<br>\begin{aligned}<br>&amp;\frac{f(x+\Delta x)-f(x)}{\Delta x}=\frac{\log _{a}(x+\Delta x)-\log _{a} x}{\Delta x}=\frac{\log _{a}\left(\frac{x+\Delta x}{x}\right)}{\Delta x}=\log _{a}\left(\frac{x+\Delta x}{x}\right)^{\frac{1}{\Delta x}}<br>\end{aligned}<br>$$<br>$$<br>\stackrel{\because x=1}{\longrightarrow} \log _{a}(1+\Delta x)^{\frac{1}{\Delta x}}=1 \Rightarrow \lim _{\Delta x \rightarrow 0}(1+\Delta x)^ \frac{1}{\Delta x}=a<br>$$</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> math<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span> pyplot <span class="token keyword">as</span> plt<span class="token keyword">import</span> numpy <span class="token keyword">as</span> npx <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">0.05</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">0.05</span><span class="token punctuation">)</span>y1<span class="token operator">=</span><span class="token punctuation">[</span>math<span class="token punctuation">.</span>log<span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">1.5</span><span class="token punctuation">)</span>  <span class="token keyword">for</span> a <span class="token keyword">in</span> x<span class="token punctuation">]</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y1<span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'#007500'</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">'log1.5(x)'</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>y1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> y1<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">"r--"</span><span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>y2 <span class="token operator">=</span> <span class="token punctuation">[</span>math<span class="token punctuation">.</span>log<span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">for</span> a <span class="token keyword">in</span> x<span class="token punctuation">]</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y2<span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'#9F35FF'</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">'log2(x)'</span><span class="token punctuation">)</span>y3 <span class="token operator">=</span> <span class="token punctuation">[</span>math<span class="token punctuation">.</span>log<span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">for</span> a <span class="token keyword">in</span> x<span class="token punctuation">]</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y3<span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'#F75000'</span> <span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">'1og3(x)'</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span> legend<span class="token punctuation">(</span>loc<span class="token operator">=</span><span class="token string">'lower right'</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span> grid<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>savefig<span class="token punctuation">(</span><span class="token string">'./test.jpg'</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span> show<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/test.jpg"></p><p>é—®ï¼š<br>$$<br>\lim _{n \rightarrow \infty}\left(1+\frac{1}{n}\right)^{n}=?<br>$$<br>æ˜¾ç„¶ï¼šç”±é«˜åº¦æ•°å­¦å¯çŸ¥ï¼š<br>$$<br>\lim _{n \rightarrow \infty}\left(1+\frac{1}{n}\right)^{n}=e<br>$$</p><p>æ¨åˆ°è¿‡ç¨‹ï¼š<br>$$<br>\begin{array}{l}<br>x_{n}=\left(1+\frac{1}{n}\right)^{n} \<br>=1+C_{n}^{1} \frac{1}{n}+C_{n}^{2} \frac{1}{n^{2}}+C_{n}^{3} \frac{1}{n^{3}}+\cdots+C_{n}^{n} \frac{1}{n^{n}} \<br>=1+n \cdot \frac{1}{n}+\frac{n(n-1)}{2 !} \cdot \frac{1}{n^{2}}+\frac{n(n-1)(n-2)}{3 !} \cdot \frac{1}{n^{3}}+\cdots+\frac{n(n-1)(n-2) \cdots 1}{n !} \cdot \frac{1}{n^{n}} \<br>=1+1+\frac{1}{2 !} \cdot\left(1-\frac{1}{n}\right)+\frac{1}{3 !} \cdot\left(1-\frac{1}{n}\right)\left(1-\frac{2}{n}\right)+\cdots+\frac{1}{n !} \cdot\left(1-\frac{1}{n}\right)\left(1-\frac{2}{n}\right) \cdots\left(1-\frac{n-1}{n}\right)<br>&lt;1+1+\frac{1}{2 !}+\frac{1}{3 !}+\cdots+\frac{1}{n !} \<br>&lt;1+1+\frac{1}{2}+\frac{1}{2^{2}}+\cdots+\frac{1}{2^{n-1}} \<br>=3-\frac{1}{2^{n-1}} \<br>&lt;3<br>\end{array}<br>$$</p><p>ç”±æ­¤ï¼Œ{<em>Xn</em>}æ˜¯æœ‰ä¸Šç•Œçš„ã€‚<br>$$<br>x_{n+1}-x_{n}&gt;\frac{1}{(n+1)} \cdot\left(1-\frac{1}{n+1}\right)\left(1-\frac{2}{n+1}\right) \cdots\left(1-\frac{n}{n+1}\right)&gt;0<br>$$<br>ç”±æ­¤ï¼Œ{<em>Xn</em>}æ˜¯å•å¢çš„ã€‚</p><p>æ ¹æ®æé™å­˜åœ¨å®šä¹‰ï¼›è¿™ä¸ªæé™ä¸€å®šæ˜¯å­˜åœ¨çš„ã€‚è€Œä¸”è¿™æ˜¯æ•°å¤§äº2å°äº3ã€‚æ•…è€Œã€‚æˆ‘ä»¬å°†è¿™ä¸ªæ•°è®°ä¸º:e</p><p>==è‡ªç„¶å¸¸æ•°ï¼š==$\lim _{x \rightarrow \infty}\left(1+\frac{1}{x}\right)^{x}=e$</p><p>æ ¹æ®å‰æ–‡      $a_{n}=\left(1+\frac{1}{n}\right)^{n}$ä¸­çš„äºŒé¡¹å±•å¼€å¼ï¼Œå·²ç»è¯æ˜æ•°ç»„{a<sub>n</sub>}å•å¢æœ‰ä¸Šç•Œï¼Œå› æ­¤ï¼Œå¿…æœ‰æé™ï¼Œè®°åšeã€‚å¯¹å®æ•°xï¼Œæ€»å­˜åœ¨æ•´æ•°nï¼Œä½¿å¾—nâ‰¤xâ‰¤n+1ï¼Œå¾—:<br>$$<br>\begin{array}{c}<br>\left(1+\frac{1}{n+1}\right)^{n}&lt;\left(1+\frac{1}{x}\right)^{x}&lt;\left(1+\frac{1}{n}\right)^{n+1} \<br>\lim _{n \rightarrow \infty}\left(1+\frac{1}{n+1}\right)^{n}=\lim _{n \rightarrow \infty} \frac{\left(1+\frac{1}{n+1}\right)^{n+1}}{1+\frac{1}{n+1}}=\frac{\lim _{n \rightarrow \infty}\left(1+\frac{1}{n+1}\right)^{n+1}}{\lim _{n \rightarrow \infty}\left(1+\frac{1}{n+1}\right)}=\frac{e}{1+0}=e \<br>\lim _{n \rightarrow \infty}\left(1+\frac{1}{n}\right)^{n+1}=\lim _{n \rightarrow \infty}\left(\left(1+\frac{1}{n}\right)^{n}\left(1+\frac{1}{n}\right)\right)=\lim _{n \rightarrow \infty}\left(1+\frac{1}{n}\right)^{n} \cdot \lim _{n \rightarrow \infty}\left(1+\frac{1}{n}\right)=e \cdot(1+0)=e<br>\end{array}<br>$$<br>æ ¹æ®å¤¹é€¼å®šç†ï¼Œå‡½æ•°$f(x)=\left(1+\frac{1}{x}\right)^{x}$çš„æé™å¿…ç„¶å­˜åœ¨ä¸”ä¸ºeã€‚</p><h3 id="2ã€å¯¼æ•°"><a href="#2ã€å¯¼æ•°" class="headerlink" title="2ã€å¯¼æ•°"></a>2ã€å¯¼æ•°</h3><p>ç®€å•çš„è¯´ï¼Œå¯¼æ•°å°±æ˜¯æ›²çº¿çš„æ–œç‡ï¼Œæ˜¯æ›²çº¿å˜åŒ–å¿«æ…¢çš„ååº”ã€‚äºŒé˜¶å¯¼æ•°æ˜¯æ–œç‡å˜åŒ–å¿«æ…¢çš„ååº”ï¼Œè¡¨å¾æ›²çº¿å‡¸å‡¹æ€§ã€‚äºŒé˜¶å¯¼æ•°è¿ç»­çš„æ›²çº¿ï¼Œå¾€å¾€ç§°ä¹‹ä¸ºâ€œå…‰é¡ºâ€çš„ã€‚è¿˜è®°å¾—é«˜ä¸­ç‰©ç†è€å¸ˆæ—¶å¸¸å¿µå¨çš„å—:åŠ é€Ÿåº¦çš„æ–¹å‘æ€»æ˜¯<br>æŒ‡å‘è½¨è¿¹æ›²çº¿å‡¹çš„ä¸€ä¾§ã€‚æ ¹æ®$\lim _{x \rightarrow \infty}\left(1+\frac{1}{x}\right)^{x}=e$å¯ä»¥å¾—åˆ°å‡½æ•°$f(x)=\ln x$çš„å¯¼æ•°ï¼Œè¿›ä¸€æ­¥æ ¹æ®æ¢åº•å…¬å¼ã€åå‡½æ•°æ±‚å¯¼ç­‰ï¼Œå¾—åˆ°å…¶ä»–åˆç­‰å‡½æ•°çš„å¯¼æ•°ã€‚<br>$$<br>\begin{array}{cc}<br>C^{\prime}=0 &amp; \left(x^{n}\right)^{\prime}=n x^{n-1} \<br>(\sin x)^{\prime}=\cos x &amp; (\cos x)^{\prime}=-\sin x \<br>\left(a^{x}\right)^{\prime}=a^{x} \ln a &amp; \left(e^{x}\right)^{\prime}=e^{x} \<br>\left(\log _{a} x\right)^{\prime}=\frac{1}{x} \log _{a} e &amp; (\ln x)^{\prime}=\frac{1}{x} \<br>(u+v)^{\prime}-u^{\prime}+v^{\prime} &amp; (u v)^{\prime}=u^{\prime} v+u v^{\prime}<br>\end{array}<br>$$<br>æŒæ¡é«˜ç­‰æ•°å­¦ä¸­çš„åˆ†éƒ¨ç§¯åˆ†æ³•ã€å‡‘å¾®åˆ†æ³•ã€æ¢å…ƒæ³•â€¦.<br>$$<br>N^{\frac{1}{\log N}}= ?<br>$$<br>åœ¨è®¡ç®—æœºç®—æ³•è·³è·ƒè¡¨SkipListçš„åˆ†æä¸­ï¼Œç”¨åˆ°äº†è¯¥å¸¸æ•°ã€‚èƒŒæ™¯:è·³è¡¨æ˜¯æ”¯æŒå¢åˆ æ”¹æŸ¥çš„åŠ¨æ€æ•°æ®ç»“æ„ï¼Œèƒ½å¤Ÿè¾¾åˆ°ä¸å¹³è¡¡äºŒå‰æ ‘ã€çº¢é»‘æ ‘è¿‘ä¼¼çš„æ•ˆç‡ï¼Œè€Œä»£ç å®ç°ç®€å•ã€‚</p><p>ç§¯åˆ†åº”ç”¨ï¼š$N \rightarrow \infty \Rightarrow \ln N ! \rightarrow N(\ln N-1)$<br>$$<br>\begin{array}{l}<br>\ln N !=\sum_{i=1}^{N} \ln i \approx \int_{1}^{N} \ln x d x \<br>=\left.x \ln x\right|<em>{1} ^{N}-\int</em>{1}^{N} x d \ln x \<br>=N \ln N-\int_{1}^{N} \quad x \cdot \frac{1}{x} d x \<br>=N \ln N-\left.x\right|_{1} ^{N} \<br>=N \ln N-N+1 \<br>\rightarrow N \ln N-N<br>\end{array}<br>$$</p><h3 id="3ã€æ–¹å‘å¯¼æ•°"><a href="#3ã€æ–¹å‘å¯¼æ•°" class="headerlink" title="3ã€æ–¹å‘å¯¼æ•°"></a>3ã€æ–¹å‘å¯¼æ•°</h3><p>å¦‚æœå‡½æ•°Z=f(xï¼Œy)åœ¨ç‚¹P(x,y)æ˜¯å¯å¾®åˆ†çš„ï¼Œé‚£ä¹ˆï¼Œå‡½æ•°åœ¨è¯¥ç‚¹æ²¿ä»»ä¸€æ–¹å‘Lçš„æ–¹å‘å¯¼æ•°éƒ½å­˜åœ¨ï¼Œä¸”æœ‰:<br>$$<br>\frac{\partial f}{\partial l}=\frac{\partial f}{\partial x} \cos \varphi+\frac{\partial f}{\partial y} \sin \varphi<br>$$<br>å…¶ä¸­,Ïˆä¸ºxè½´åˆ°æ–¹å‘Lçš„è½¬è§’ã€‚</p><h3 id="4ã€æ¢¯åº¦"><a href="#4ã€æ¢¯åº¦" class="headerlink" title="4ã€æ¢¯åº¦"></a>4ã€æ¢¯åº¦</h3><p>è®¾å‡½æ•°z=f(x,y)åœ¨å¹³é¢åŒºåŸŸDå†…å…·æœ‰ä¸€é˜¶è¿ç»­åå¯¼æ•°ï¼Œåˆ™å¯¹äºæ¯ä¸€ä¸ªç‚¹P(x,y)âˆˆDï¼Œå‘é‡</p><p>$\left(\frac{\partial f}{\partial x}, \frac{\partial f}{\partial y}\right)$</p><p>ä¸ºå‡½æ•°z=f(x,y)åœ¨ç‚¹Pçš„æ¢¯åº¦ï¼Œè®°åšgradf(x,y)ã€‚æ¢¯åº¦çš„æ–¹å‘æ˜¯å‡½æ•°åœ¨è¯¥ç‚¹å˜åŒ–æœ€å¿«çš„æ–¹å‘</p><h3 id="5ã€å‡¸å‡½æ•°"><a href="#5ã€å‡¸å‡½æ•°" class="headerlink" title="5ã€å‡¸å‡½æ•°"></a>5ã€å‡¸å‡½æ•°</h3><p>è‹¥å‡½æ•°fçš„å®šä¹‰åŸŸdomfä¸ºå‡¸é›†ï¼Œä¸”æ»¡è¶³ï¼š<br>$$<br>\begin{array}{l}<br>\forall x, y \in \operatorname{dom} f, 0 \leq \theta \leq 1, \text { æœ‰ } \<br>f(\theta x+(1-\theta) y) \leq \theta f(x)+(1-\theta) f(y)<br>\end{array}<br>$$<br><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210401105231130.png"></p><p>==æ³¨ï¼šåœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œå‡¸å‡½æ•°å’Œå‡¹å‡½æ•°çš„å®šä¹‰ä¸é«˜ç­‰æ•°å­¦ç›¸å==</p><p>è‹¥fä¸€é˜¶å¯å¾®ï¼Œåˆ™å‡½æ•°fä¸ºå‡¸å‡½æ•°å½“å‰ä»…å½“fçš„å®šä¹‰åŸŸdomfä¸ºå‡¸é›†ï¼Œä¸”<br>$$<br>\forall x, y \in \operatorname{dom} f, f(y) \geq f(x)+\nabla f(x)^{T}(y-x)<br>$$<br><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210401105748209.png"></p><p>ç»“åˆå‡¸å‡½æ•°å›¾åƒå’Œæ”¯æ’‘è¶…å¹³é¢ç†è§£è¯¥é—®é¢˜ã€‚å¯¹äºå‡¸å‡½æ•°ï¼Œå…¶ä¸€é˜¶Taylorè¿‘ä¼¼æœ¬è´¨ä¸Šæ˜¯è¯¥<br>å‡½æ•°çš„å…¨å±€ä¸‹ä¼°è®¡ã€‚åä¹‹ï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°çš„ä¸€é˜¶Taylorè¿‘ä¼¼æ€»æ˜¯èµ·å…¨å±€ä¸‹ä¼°è®¡ï¼Œåˆ™è¯¥å‡½æ•°æ˜¯å‡¸å‡½æ•°ã€‚<br>è¯¥ä¸ç­‰å¼è¯´æ˜ä»ä¸€ä¸ªå‡½æ•°çš„å±€éƒ¨ä¿¡æ¯ï¼Œå¯ä»¥å¾—åˆ°ä¸€å®šç¨‹åº¦çš„å…¨å±€ä¿¡æ¯ã€‚ä¸æœºå™¨å­¦ä¹ é¢†åŸŸä¸­çš„å‡¸ä¼˜åŒ–ç›¸è”ç³»ã€‚</p><h3 id="6ã€Jensenä¸ç­‰å¼"><a href="#6ã€Jensenä¸ç­‰å¼" class="headerlink" title="6ã€Jensenä¸ç­‰å¼"></a>6ã€Jensenä¸ç­‰å¼</h3><p>è‹¥fæ˜¯å‡¸å‡½æ•°ï¼š$f(\theta x+(1-\theta) y) \leq \theta f(x)+(1-\theta) f(y)$</p><p>è‹¥ $\theta_{1}, \ldots, \theta_{k} \geq 0, \theta_{1}+\cdots+\theta_{k}=1$ï¼Œåˆ™ $f\left(\theta_{1} x_{1}+\cdots+\theta_{k} x_{k}\right) \leq \theta_{1} f\left(x_{1}\right)+\cdots+\theta_{k} f\left(x_{k}\right)$</p><p>è‹¥ $p(x) \geq 0$ on $S \subseteq \operatorname{dom} f, \int_{S} p(x) d x=1$ï¼Œåˆ™ $f\left(\int_{S} p(x) x d x\right) \leq \int_{S} f(x) p(x) d x$</p><blockquote><p>å¯ä»¥æ¨å¯¼å¾—å‡ºï¼š$f(\mathbf{E} x) \leq \mathbf{E} f(x)$</p></blockquote><p>Jensenä¸ç­‰å¼æ˜¯å‡ ä¹æ‰€æœ‰ä¸ç­‰å¼çš„åŸºç¡€ï¼Œä¾‹å¦‚ï¼šåˆ©ç”¨y=-logxæ˜¯å‡¸å‡½æ•°ï¼Œè¯æ˜:$\frac{a+b}{2} \geq \sqrt{a b}, \quad a&gt;0, b&gt;0$<br>æç¤º:ä»»å–a,b&gt;0ï¼ŒÎ¸=0.5å¸¦å…¥ åŸºæœ¬Jensenä¸ç­‰å¼ï¼Œåˆ©ç”¨f(E(x))â‰¤E(f(x))ï¼Œ(fæ˜¯ å‡¸å‡½æ•°)ï¼Œè¯æ˜ä¸‹å¼Dâ‰¥0<br>$$<br>D(p | q)=\sum_{x} p(x) \log \frac{p(x)}{q(x)}=E_{p(x)} \log \frac{p(x)}{q(x)}&gt;0<br>$$<br><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210401110909370.png"></p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æœºå™¨å­¦ä¹  </tag>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºæœºå™¨è§†è§‰çš„æœºæ¢°æ‰‹æŒ</title>
      <link href="/2020/03/07/%E5%9F%BA%E4%BA%8E%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89%E7%9A%84%E4%BB%BF%E7%94%9F%E6%9C%BA%E6%A2%B0%E6%89%8B%E6%8E%8C/"/>
      <url>/2020/03/07/%E5%9F%BA%E4%BA%8E%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89%E7%9A%84%E4%BB%BF%E7%94%9F%E6%9C%BA%E6%A2%B0%E6%89%8B%E6%8E%8C/</url>
      
        <content type="html"><![CDATA[<h1 id="åŸºäºæœºå™¨è§†è§‰çš„æœºæ¢°æ‰‹æŒ"><a href="#åŸºäºæœºå™¨è§†è§‰çš„æœºæ¢°æ‰‹æŒ" class="headerlink" title="åŸºäºæœºå™¨è§†è§‰çš„æœºæ¢°æ‰‹æŒ"></a>åŸºäºæœºå™¨è§†è§‰çš„æœºæ¢°æ‰‹æŒ</h1><p>å°†å®Œæˆæœºæ¢°æ‰‹æŒçš„ç»“æ„è®¾è®¡ã€èˆµæœºæ§åˆ¶æ¿è®¾è®¡ã€åµŒå…¥å¼è½¯ä»¶è®¾è®¡ã€æ·±åº¦å­¦ä¹ ç®—æ³•è®¾è®¡ã€æ•°å­—å›¾åƒé¢„å¤„ç†ç®—æ³•è®¾è®¡ã€‚æœ¬ç»„ä½¿ç”¨ä¸€ç§å¸¸è§çš„å¸¦æŒè¿æ†ä¼ åŠ¨æœºæ¢°æ‰‹ï¼Œåœ¨èˆµæœºæ§åˆ¶æ¿çš„è®¾è®¡ä¸­é‡‡ç”¨ä»¥STM32F103ç³»åˆ—çš„MCUå…­è·¯èˆµæœºæ§åˆ¶å™¨ã€‚æœ¬ç»„å¯¹èˆµæœºæ§åˆ¶ç³»ç»Ÿè¿›è¡Œå»ºæ¨¡ï¼Œé‡‡ç”¨PIDæ§åˆ¶ç®—æ³•å¯¹èˆµæœºè¿›è¡Œæ§åˆ¶ï¼Œå°† PIDç®—æ³•éƒ¨ç½²åœ¨STM32å•ç‰‡æœºä¸Šï¼Œé‡‡ç”¨Cè¯­è¨€å®ç°PIDç®—æ³•ã€‚åœ¨æ·±åº¦å­¦ä¹ ç®—æ³•æ–¹é¢ï¼Œé€šè¿‡æ‘„åƒå¤´é‡‡é›†æ‰‹åŠ¿å›¾åƒï¼Œæ‰€é‡‡é›†çš„å›¾åƒå…ˆç”±OpenCVå®Œæˆå›¾åƒé¢„å¤„ç†ï¼Œå†å°†é¢„å¤„ç†å®Œæˆçš„å›¾ç‰‡è¾“å…¥TensorFlowæ¡†æ¶æ­å»ºçš„å·ç§¯ç¥ç»ç½‘ç»œç”¨ä»¥åˆ†ç±»å›¾åƒï¼Œå®ç°ç›®æ ‡æ‰‹åŠ¿ä¸æ¨¡å‹åŒ¹é…ã€‚åœ¨25mså†…è¯†åˆ«æ‰‹åŠ¿å›¾ç‰‡ï¼Œåœ¨50mså†…å®ç°å‡ºæ‹³åŠ¨ä½œï¼Œç”±æ­¤å®ç°äº†ç”¨æˆ·æ‰‹åŠ¿å’Œæœºæ¢°æ‰‹æŒçš„æ‰‹åŠ¿ä¹‹é—´å®æ—¶çŒœæ‹³äº’åŠ¨ï¼Œè¾¾åˆ°äº†å¾ˆå¥½çš„æ•ˆæœã€‚</p><iframe src="//player.bilibili.com/player.html?aid=886981603&bvid=BV1hK4y1J7gP&cid=304571731&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe><h2 id="ä¸€ã€æ€»ä½“æŠ€æœ¯è·¯çº¿"><a href="#ä¸€ã€æ€»ä½“æŠ€æœ¯è·¯çº¿" class="headerlink" title="ä¸€ã€æ€»ä½“æŠ€æœ¯è·¯çº¿"></a>ä¸€ã€æ€»ä½“æŠ€æœ¯è·¯çº¿</h2><p>æœºæ¢°æ‰‹çš„æ€»ä½“è®¾è®¡åŒ…æ‹¬æœºæ¢°ç»“æ„ã€ç¡¬ä»¶ç”µè·¯ã€æœºå™¨è§†è§‰é¢†åŸŸçš„å›¾åƒåˆ†ç±»ç®—æ³•è®¾è®¡ä»¥åŠèˆµæœºæ§åˆ¶ç®—æ³•è®¾è®¡å››ä¸ªéƒ¨åˆ†ã€‚æœ¬ç« å°†å¯¹æœºæ¢°æ‰‹æŒçš„æ€»ä½“è®¾è®¡æ–¹æ¡ˆè¿›è¡Œç®€è¦çš„æ¦‚æ‹¬ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210310103941740.png" alt="æ€»ä½“ç¤ºæ„å›¾"></p><p>é¦–å…ˆç¬¬ä¸€éƒ¨åˆ†æ˜¯é€šè¿‡OpenCVè¿›è¡Œå›¾åƒé¢„å¤„ç†ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯å…ˆæŠŠæ‘„åƒå¤´é‡‡é›†åˆ°çš„å›¾åƒç”±RGBç©ºé—´è½¬æ¢åˆ°HSVç©ºé—´ï¼ˆHSVç©ºé—´å¯¹ç”¨æˆ·æ¥è¯´æ˜¯ä¸€ç§ç›´è§‚çš„é¢œè‰²æ¨¡å‹ï¼‰ï¼Œå†æŠŠå›¾åƒäºŒå€¼åŒ–è½¬æˆç°åº¦å›¾ï¼Œæå–ä¸»è¦ç‰¹å¾å¾—åˆ°ç›®æ ‡è½®å»“ï¼›å¦ä¸€éƒ¨åˆ†æ˜¯åœ¨æ ‘è“æ´¾ä¸Šæ­å»ºä¸€ä¸ªåº”ç”¨ä»¥å·ç§¯ç¥ç»ç½‘ç»œä¸ºæ ¸å¿ƒçš„å›¾åƒåˆ†ç±»æ·±åº¦å­¦ä¹ æ¨¡å‹ã€‚</p><p>å®Œæˆè¿™ä¸¤éƒ¨ä»½å·¥ä½œä»¥åï¼Œå°†é¢„å¤„ç†åçš„å›¾åƒä¸æ­å»ºå¥½çš„æ¨¡å‹å¯¹æ¯”è¿›è¡ŒåŒ¹é…ï¼Œæ¥ç€é€šè¿‡ä¸²å£é€šä¿¡å°†åŒ¹é…ç»“æœè½¬æ¢æˆç›¸åº”çš„èˆµæœºIDå·ã€ä½ç½®ä¿¡æ¯åŠæ—¶é—´ç­‰å‚æ•°æŒ‡ä»¤ä¼ é€åˆ°èˆµæœºæ§åˆ¶å™¨ä¸Šï¼Œæ§åˆ¶èˆµæœºå®ç°ç›¸åº”çš„çŸ³å¤´ã€å‰ªåˆ€ã€å¸ƒçš„æ‰‹åŠ¿åŠ¨ä½œã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210310104041626.png" alt="ç¨‹åºæµç¨‹å›¾"></p><p>â€‹    æœ¬æ¬¡è®¾è®¡æ‹Ÿè¾¾åˆ°çš„æŠ€æœ¯æŒ‡æ ‡å¦‚ä¸‹ï¼š</p><ol><li><p>è¯†åˆ«ä¸€å¼ å›¾ç‰‡æ§åˆ¶åœ¨25msä»¥å†…ï¼Œè¯†åˆ«ç²¾åº¦è¾¾åˆ°95ï¼…ä»¥ä¸Šï¼›</p></li><li><p>æ•´ä½“ç³»ç»Ÿå“åº”æ—¶é—´åœ¨40-50msä»¥å†…ï¼›</p></li><li><p>èˆµæœºæ§åˆ¶æ¿èƒ½æä¾›5V/2Açš„å¸¦è½½èƒ½åŠ›ï¼Œå…·æœ‰é«˜å‹ä½å‹æŠ¥è­¦ä¿æŠ¤ã€‚</p></li></ol><h2 id="äºŒã€æœºæ¢°ç»“æ„åˆ†æ"><a href="#äºŒã€æœºæ¢°ç»“æ„åˆ†æ" class="headerlink" title="äºŒã€æœºæ¢°ç»“æ„åˆ†æ"></a>äºŒã€æœºæ¢°ç»“æ„åˆ†æ</h2><p>æœºæ¢°æ‰‹çš„ç»“æ„æ•´ä½“ä¸äººæ‰‹ç±»ä¼¼ï¼ŒåŸºäºæ‰‹æŒ‡çš„ä»¿ç”ŸåŸç†ï¼Œæœ¬æ¬¡è®¾è®¡å°†ä½¿ç”¨ä¸€ç§å¸¸è§çš„å¸¦æŒè¿æ†ä¼ åŠ¨æœºæ¢°æ‰‹ï¼ŒåŒ…æ‹¬æ‰‹æŒå’Œ5æ ¹æ‰‹æŒ‡ã€‚æ‰‹æŒ‡æ˜¯ä¸¤ä¸ªå››è¿æ†æœºæ„ï¼Œæ¯æ ¹æ‰‹æŒ‡å‡åªæœ‰ä¸€ä¸ªè‡ªç”±åº¦ï¼Œè€Œæ‰‹æŒæ¿ç”±ä¸¤ä¸ªç›¸åŒçš„å›ºå®šæ¿å—ç»„æˆï¼ŒæŒå¿ƒç›¸é‚»æ‰‹æŒ‡å›ºå®šéƒ¨ä½ç•™æœ‰é—´éš™ï¼Œä¾¿äºæå–ç”µæœºé©±åŠ¨çº¿å’Œæ§åˆ¶ä¿¡å·çº¿ï¼Œæ–¹ä¾¿è°ƒè¯•ã€‚</p><p>æœ¬æ¬¡è®¾è®¡æ‰€ç”¨çš„æœºæ¢°æ‰‹æŒçš„æœºæ¢°ç»“æ„é™¤æ‰‹æŒ‡å…³èŠ‚çš„è¿æ†ä¸ºé“åˆé‡‘ææ–™ä»¥å¤–å‡ç”±äºšå…‹åŠ›ææ–™åˆ¶ä½œï¼Œé“åˆé‡‘åˆ¶ä½œçš„è¿æ†ç¨³å®šæ€§å¾ˆå¥½ï¼Œäºšå…‹åŠ›æ¿ç¡¬åº¦å¥½ã€ç¾è§‚ä¸”æ˜“åŠ å·¥ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210310104118104.png" alt="æœºæ¢°æ‰‹æŒç»“æ„å›¾"></p><h2 id="ä¸‰ã€ç¡¬ä»¶ç”µè·¯æ§åˆ¶æ¿è®¾è®¡"><a href="#ä¸‰ã€ç¡¬ä»¶ç”µè·¯æ§åˆ¶æ¿è®¾è®¡" class="headerlink" title="ä¸‰ã€ç¡¬ä»¶ç”µè·¯æ§åˆ¶æ¿è®¾è®¡"></a>ä¸‰ã€ç¡¬ä»¶ç”µè·¯æ§åˆ¶æ¿è®¾è®¡</h2><p>åœ¨å°†å›¾åƒæ•°æ®ä¸å®é™…çš„æ§åˆ¶åŠ¨ä½œåŒ¹é…ä»¥åï¼Œé‡‡ç”¨åŠ¨æ€çš„PIDç®—æ³•ï¼Œå¯¹äº”ä¸ªæ‰‹æŒçš„èˆµæœºè¿›è¡Œæ§åˆ¶ã€‚å› æ­¤ï¼Œæœ¬ç»„è®¾è®¡äº†åŸºäºSTM32çš„èˆµæœºæ§åˆ¶å™¨ã€‚</p><p>æ­¤èˆµæœºæ§åˆ¶æ¿æ˜¯å†…ç½®å¤§åŠŸç‡é›†æˆç¨³å‹æ¨¡å—ï¼Œèˆµæœºå£è¾“å‡ºç”µå‹å¯è°ƒï¼›6è·¯å«è¿‡è½½ä¿æŠ¤PWMèˆµæœºå£ï¼›æ”¯æŒUSBä¸€é”®ä¸‹è½½ï¼›æ”¯æŒä½å‹æŠ¥è­¦ã€‚æ­¤æ§åˆ¶å™¨çš„ä¸»è¦ä½œç”¨æ˜¯ä¸²å£æ¥æ”¶ä¸Šä½å™¨ï¼ˆæ ‘è“æ´¾ï¼‰å‘é€çš„æ•°æ®ï¼Œå°†æ•°æ®è§£ææˆå®æ—¶æ§åˆ¶çš„èˆµæœºä½ç½®ä¿¡æ¯ï¼Œå¹¶æ“ä½œèˆµæœºåšå‡ºç›¸åº”çš„åŠ¨ä½œã€‚èˆµæœºæ§åˆ¶ç‰ˆPCBå›¾å¦‚å›¾ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210310104348668.png" alt="æ§åˆ¶å™¨PCBæ¿"></p><p>æœºæ¢°æ‰‹æŒä¸­äº”ä¸ªæ‰‹æŒ‡ç”±äº”ä¸ªé˜²å µè½¬èˆµæœºLFD-01é©±åŠ¨ï¼Œäº‘å°ç”±180åº¦çš„LD-1501æ•°å­—èˆµæœºé©±åŠ¨ï¼Œå…¶åŸç†åŸºäºç›´æµä¼ºæœç”µæœºæ‹–åŠ¨ç³»ç»Ÿã€‚èˆµæœºæ˜¯ä¸€ç§ä½ç½®ä¼ºæœçš„é©±åŠ¨å™¨ï¼Œé€‚ç”¨äºé‚£äº›éœ€è¦è§’åº¦ä¸æ–­å˜åŒ–å¹¶èƒ½å¤Ÿä¿æŒçš„æ§åˆ¶ç³»ç»Ÿã€‚åœ¨æœºæ¢°æ‰‹æŒçš„æ§åˆ¶ç³»ç»Ÿä¸­ï¼Œèˆµæœºæ§åˆ¶æ•ˆæœæ˜¯å½±å“æ€§èƒ½çš„é‡è¦å› ç´ ã€‚å› æ­¤ç»è¿‡ç ”ç©¶åˆ†æï¼Œæœ¬æ¬¡è®¾è®¡å°†å¼•å…¥PIDæ§åˆ¶ç®—æ³•ï¼Œå¤§å¤§åœ°æ”¹å–„ç³»ç»Ÿçš„æ€§èƒ½æŒ‡æ ‡ï¼Œä»è€Œèƒ½å¤Ÿè®©èˆµæœºæ§åˆ¶æœºæ¢°æ‰‹æŒ‡æ›´å¥½ã€æ›´å¿«ã€æ›´ç¨³åœ°å®ŒæˆæŒ‡å®šçš„æ‰‹åŠ¿åŠ¨ä½œã€‚</p><h2 id="å››ã€å¼€å‘ç¯å¢ƒæ­å»º"><a href="#å››ã€å¼€å‘ç¯å¢ƒæ­å»º" class="headerlink" title="å››ã€å¼€å‘ç¯å¢ƒæ­å»º"></a>å››ã€å¼€å‘ç¯å¢ƒæ­å»º</h2><p>é¦–å…ˆéœ€å®‰è£…æ ‘è“æ´¾å®˜æ–¹ç³»ç»Ÿï¼Œæ­å»ºå¥½opencvå’Œtensorflowå¼€å‘ç¯å¢ƒï¼›</p><p>opencvå®‰è£…æ–¹æ³•è¯·å‚è€ƒï¼š<a href="https://blog.csdn.net/leaves_joe/article/details/67656340?utm_source=app">https://blog.csdn.net/leaves_joe/article/details/67656340?utm_source=app</a></p><p>tensorflowå®‰è£…æ–¹æ³•ï¼š</p><p>é¦–å…ˆå®‰è£…pip3ã€‚</p><pre class=" language-shell"><code class="language-shell">sudo apt-get install python3-devsudo apt-get install python-dev</code></pre><p>æŸ¥çœ‹python3çš„ç‰ˆæœ¬ï¼š</p><pre class=" language-shell"><code class="language-shell">python3 -v</code></pre><p>ä¸€èˆ¬æ ‘è“æ´¾4ä½¿ç”¨çš„æ˜¯python3.7ï¼Œå¦‚æœç½‘é€Ÿå¯ä»¥ï¼Œç›´æ¥å®‰è£…ï¼š</p><pre class=" language-shell"><code class="language-shell">sudo pip3 install tensorflow</code></pre><p>å¦‚è‹¥å®‰è£…å¤±è´¥ï¼Œåˆ™è¯·ä¸‹è½½æœ¬åœ°å®‰è£…åŒ…ï¼Œæˆ‘è¿™ä½¿ç”¨çš„æ˜¯tensorflow-1.13.1-cp37-none-linux_armv7l.whlï¼Œåœ¨å­˜æ”¾è¿™ä¸ªæ–‡ä»¶çš„æ–‡ä»¶å¤¹ä¸‹ï¼š</p><pre class=" language-shell"><code class="language-shell">sudo pip3 install tensorflow-1.13.1-cp37-none-linux_armv7l.whl</code></pre><p>å¦‚è‹¥æŠ¥é”™å°‘äº†h5pyï¼Œåˆ™è¯·ä¸‹è½½h5py-2.7.1-cp37-cp37m-linux_armv7l.whlï¼Œå…ˆå®‰è£…h5pyï¼Œå†å®‰è£…tensorflow:</p><pre class=" language-shell"><code class="language-shell">sudo pip3 install h5py-2.7.1-cp37-cp37m-linux_armv7l.whl</code></pre><p>åœ¨å®‰è£…å®Œopencvå’Œtensorflowååœ¨ç»ˆç«¯è¾“å…¥python3åï¼Œé”®å…¥ï¼š</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> cv2<span class="token keyword">import</span> tensorflow <span class="token keyword">as</span> tf<span class="token keyword">print</span><span class="token punctuation">(</span>cv2<span class="token punctuation">.</span>__version__<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>tf<span class="token punctuation">.</span>__version__<span class="token punctuation">)</span></code></pre><p>å¦‚æœæ­£å¸¸æ‰“å°å‡ºç‰ˆæœ¬ä¿¡æ¯ï¼Œåˆ™å®‰è£…æ­£ç¡®ï¼Œä¼šæœ‰è­¦å‘Šï¼Œä½†æ— å¦¨ï¼›</p><p>å®‰è£…å®Œç¯å¢ƒåï¼š</p><hr><p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”********<em><strong><strong><strong><strong>é‡ç‚¹</strong></strong></strong></strong></em>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-</p><hr><p><strong>æºç è¯¦è§ï¼š<a href="https://github.com/Zwyywz/Undergraduate-graduation-project">https://github.com/Zwyywz/Undergraduate-graduation-project</a></strong></p><p>æœ€å¥½å°† æ ‘è“æ´¾4Bä¸Šæ‰‹åŠ¿è¯†åˆ« è¿™ä¸ªæ–‡ä»¶å¤¹é‡å‘½åä¸ºè‹±æ–‡ï¼Œæˆ‘è¿™å‘½åä¸ºï¼šrps ;</p><p>åœ¨rpsæ–‡ä»¶å¤¹ä¸­æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ imagesã€‚è¿è¡Œcam.pyæ–‡ä»¶ï¼Œä¼šè‡ªåŠ¨é‡‡é›†ç…§ç‰‡åˆ°imagesæ–‡ä»¶å¤¹ã€‚æ–‡ä»¶åä¸ºimageX.jpgï¼Œå…¶ä¸­Xä¸ºåºå·ã€‚éœ€é‡‡é›†â€œçŸ³å¤´â€â€œå‰ªåˆ€â€â€œå¸ƒâ€â€œå¹²æ‰°æ‰‹åŠ¿â€ï¼Œåˆ†åˆ«ä¿å­˜åˆ°â€œpaperâ€â€rockâ€â€scissorsâ€â€othersâ€</p><p>model.py: å·ç§¯ç¥ç»ç½‘ç»œæ¨¡å‹</p><p>read_image.py:å°†å›¾ç‰‡è¯»å…¥å†…å­˜</p><p>train.py:è®­ç»ƒæ¨¡å‹</p><p>test.py :æµ‹è¯•æ‰‹åŠ¿å›¾ç‰‡è¯†åˆ«ç»“æœ</p><p>rps.pyï¼šæœ€ç»ˆå®Œæˆ</p><h2 id="äº”ã€STM32èˆµæœºæ§åˆ¶"><a href="#äº”ã€STM32èˆµæœºæ§åˆ¶" class="headerlink" title="äº”ã€STM32èˆµæœºæ§åˆ¶"></a>äº”ã€STM32èˆµæœºæ§åˆ¶</h2><p>ä¸»è¦äº§ç”Ÿäº”è·¯PWMä¿¡å·æ§åˆ¶èˆµæœºï¼Œå¹¶æ¥æ”¶ä¸²å£ä¿¡æ¯ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/%E6%9C%BA%E6%A2%B0%E6%89%8B_%E9%A1%B5%E9%9D%A2_1.jpg" alt="æ§åˆ¶å™¨åŸç†å›¾"></p><p>è®¾è®¡çš„ç›´æµç”µæºæ¨¡å—å¦‚å›¾3.5æ‰€ç¤ºï¼Œç”±JP1æˆ–è€…USB1è¾“å…¥çš„ç»è¿‡ç”±220Vå˜å‹åˆ°12Vï¼Œ50HZçš„äº¤æµç”µã€‚D3å‘å…‰äºŒæç®¡ä¸ºç”µæºæŒ‡ç¤ºç¯ï¼ŒD4å‘å…‰äºŒæç®¡ä¸ºUSBä¾›ç”µæŒ‡ç¤ºç¯ã€‚åæ¥ä¸¤ä¸ªAMS1117æ¨¡å—ï¼Œåˆ†åˆ«å¯¹å¤–è¾“å‡º3.3Vå’Œ5Vï¼ŒLED2ä¸ºä¾›ç”µæ­£å¸¸æŒ‡ç¤ºç¯ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210310104815130.png" alt="ç”µæºæ¨¡å—"></p><p>åœ¨æ­¤ç³»ç»Ÿä¸­ï¼Œå¯¹äºå†…å­˜è¦æ±‚ä¸é«˜ï¼ŒI/Oä½¿ç”¨è¾ƒå°‘ã€‚å› æ­¤æˆ‘ä»¬çš„é€‰æ‹©æœ‰51å•ç‰‡æœºä¸32å•ç‰‡æœºä¸¤ç§æ§åˆ¶å™¨ã€‚ç”±äº51å•ç‰‡æœºçš„éƒ¨åˆ†åŠŸèƒ½é™åˆ¶ä»¥åŠä¸ºäº†ä»¥åå¯ä»¥ç»§ç»­å¼€å‘æ­¤ç³»ç»Ÿï¼Œå› æ­¤é€‰æ‹©STM32ä½œä¸ºä¸»æ§èŠ¯ç‰‡ã€‚åœ¨è€ƒè™‘åˆ°æˆ‘ä»¬æ‰€éœ€è¦ç”¨åˆ°çš„I/Oå£è¾ƒå°‘ï¼Œå› æ­¤å¯ä»¥ä¸ç”¨é€‰æ‹©I/Oè¾ƒå¤šçš„æ§åˆ¶èŠ¯ç‰‡ï¼Œå‡å°‘èµ„æºæµªè´¹ä»¥åŠé™ä½æˆæœ¬ï¼Œå› æ­¤å¯ä»¥é€‰æ‹©STM32ret6ä¸STM32c8t6ã€‚è¿™ä¸¤ç§èŠ¯ç‰‡ï¼ŒåŠŸèƒ½å¼•è„šéƒ½æ˜¯äº’é€šçš„ä¸”ä»·æ ¼ç›¸è¿‘ï¼Œå¯¹æ¯”å›¾å¦‚å›¾3.7æ‰€ç¤ºï¼Œç»å°ç»„è®¨è®ºé€‰æ‹©å·¦è¾¹çš„STM32ret6ä½œä¸ºä¸»æ§åˆ¶å™¨ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210310104927254.png" alt="æ§åˆ¶å™¨"></p><h2 id="å…­ã€ä¸²å£é€šä¿¡"><a href="#å…­ã€ä¸²å£é€šä¿¡" class="headerlink" title="å…­ã€ä¸²å£é€šä¿¡"></a>å…­ã€ä¸²å£é€šä¿¡</h2><p>ç”±äºå›¾åƒåˆ†ç±»ç®—æ³•å¯¹äºç¡¬ä»¶å¹³å°è¦æ±‚è¾ƒé«˜ï¼Œéœ€è¦æœ‰å¼ºå¤§çš„å¹¶è¡Œè®¡ç®—èƒ½åŠ›ã€‚æ•…è€Œæ— æ³•éƒ¨ç½²åœ¨å•ç‰‡æœºä¸Šã€‚å› æ­¤ï¼Œæœ¬è®¾è®¡å°†ä¸Šä¸‹ç«¯åˆ†ç¦»è®¾è®¡æ¨¡å¼ï¼Œä¸Šç«¯æ˜¯å›¾ç‰‡åˆ†ç±»ç®—æ³•éƒ¨ç½²åœ¨æ ‘è“æ´¾4Bä¸Šï¼Œä¸‹ç«¯æ˜¯ä»¥STM32F103ä¸ºæ ¸å¿ƒçš„èˆµæœºæ§åˆ¶å™¨ã€‚è¿™æ ·è®¾è®¡çš„ä¼˜ç‚¹æ˜¯èƒ½æœ€å¤§é™åº¦æé«˜æ•´ä¸ªç³»ç»Ÿçš„æ•ˆç‡ï¼Œä¸Šç«¯å°†å›¾åƒè¯†åˆ«çš„ç»“æœä»¥æŒ‡ä»¤çš„å½¢å¼å‘é€ï¼Œä¸‹ç«¯æ¥æ”¶åˆ°æŒ‡ä»¤åè¿›è¡ŒæŒ‡ä»¤è§£æï¼Œå†æ§åˆ¶èˆµæœºå®Œæˆç›¸åº”æŒ‡ä»¤ã€‚</p><p>ç”±æ­¤å¯ä»¥çœ‹å‡ºè®¾è®¡é«˜æ•ˆç¨³å®šçš„ä¸Šä¸‹ç«¯é€šä¿¡åè®®ï¼ˆæŒ‡ä»¤ï¼‰å°±æ˜¾å¾—å°¤ä¸ºé‡è¦ã€‚ç”±è®¾è®¡è¦æ±‚å¯ä»¥çœ‹å‡ºï¼šæ­¤å¥—é€šä¿¡åè®®å¿…é¡»åŒ…æ‹¬å¸§å¤´ã€æ ¡éªŒã€èˆµæœºä¸ªæ•°ã€æŸä¸ªèˆµæœºIDã€æ§åˆ¶é‡ã€ååº”æ—¶é—´ç­‰ç­‰è¦ç´ ã€‚ä¾‹å¦‚æ§åˆ¶ä¸‰ä¸ªèˆµæœºå’Œæ§åˆ¶äº”ä¸ªèˆµæœºçš„å¸§é•¿åº¦æ˜¯ä¸ä¸€æ ·çš„ã€‚æ•…è€Œéœ€è¦ä½¿ç”¨å¯å˜å¸§é•¿åº¦çš„é€šä¿¡åè®®ã€‚</p><table><thead><tr><th>å¸§å¤´</th><th>æ•°æ®é•¿åº¦</th><th>æŒ‡ä»¤</th><th>å‚æ•°</th></tr></thead><tbody><tr><td>0x550x55</td><td>length</td><td>Cmd</td><td>Prm1 Â·Â·Â·Â·Â·PrmN</td></tr></tbody></table><p>å¸§å¤´ï¼šè¿ç»­æ”¶åˆ°ä¸¤ä¸ª 0x55 ,è¡¨ç¤ºæœ‰æ•°æ®åŒ…åˆ°è¾¾ã€‚</p><p>æ•°æ®é•¿åº¦ï¼šç­‰äºå‚æ•°ä¸ªæ•° N åŠ ä¸€ä¸ªæŒ‡ä»¤åŠ æ•°æ®é•¿åº¦æœ¬èº«å ç”¨çš„ä¸€ä¸ªå­—èŠ‚é•¿åº¦ï¼Œå³æ•°æ®é•¿åº¦ Length ç­‰äºå‚æ•° N + 2, æ•°æ®é•¿åº¦ Length =æ§åˆ¶èˆµæœºçš„ä¸ªæ•°Ã— 3+5ã€‚</p><p>  æŒ‡ä»¤ï¼šå„ç§æ§åˆ¶æŒ‡ä»¤</p><p>  å‚æ•°ï¼šé™¤æŒ‡ä»¤å¤–éœ€è¦è¡¥å……çš„æ§åˆ¶ä¿¡æ¯</p><p>  å‚æ•° 1ï¼šè¦æ§åˆ¶èˆµæœºçš„ä¸ªæ•°<br>         å‚æ•° 2ï¼šæ—¶é—´ä½å…«ä½<br>         å‚æ•° 3ï¼šæ—¶é—´é«˜å…«ä½<br>         å‚æ•° 4ï¼šèˆµæœº ID å·<br>         å‚æ•° 5ï¼šè§’åº¦ä½ç½®ä½å…«ä½<br>         å‚æ•° 6ï¼šè§’åº¦ä½ç½®é«˜å…«ä½<br>      æ¯”å¦‚æ§åˆ¶1å·èˆµæœºåœ¨1000mså†…è½¬åˆ°2000çš„ä½ç½®ï¼Œå¦‚è¡¨3.2æ‰€ç¤ºã€‚</p><table><thead><tr><th>å¸§å¤´</th><th>æ•°æ®é•¿åº¦</th><th>æŒ‡ä»¤</th><th>å‚æ•°</th></tr></thead><tbody><tr><td>0x550x55</td><td>0x08</td><td>0x03</td><td>0x01  0xE8 0x03 0x01 0xD0 0x07</td></tr></tbody></table><p>æ¯”å¦‚æ§åˆ¶2å’Œ9å·èˆµæœº800mså†…2å·è½¬åˆ°1200çš„ä½ç½®ï¼Œ9å·è½¬åˆ°2300çš„ä½ç½®ï¼Œå¦‚è¡¨3.3æ‰€ç¤ºã€‚</p><table><thead><tr><th>å¸§å¤´</th><th>æ•°æ®é•¿åº¦</th><th>æŒ‡ä»¤</th><th>å‚æ•°</th></tr></thead><tbody><tr><td>0x550x55</td><td>0x0B</td><td>0x03</td><td>0x02  0x20 0x03 0x02 0xB0 0x04 0x09 0xFC 0x08</td></tr></tbody></table><p><strong>é‡‡ç”¨æ ‘è“æ´¾çš„ttyAMA0çš„ä¸²å£ï¼Œä½†æ­¤è®¾å¤‡é»˜è®¤ç»™äº†è“ç‰™ï¼Œæ‰€ä»¥éœ€è¦æ”¹å˜æ˜ å°„è§„åˆ™ï¼Œå…·ä½“æ“ä½œï¼Œè¯·ç™¾åº¦ã€‚</strong></p><p>å°† ä¸²å£é€šä¿¡ æ–‡ä»¶å¤¹é‡å‘½åä¸ºserialã€‚åœ¨serialæ–‡ä»¶å¤¹ä¸­makeã€‚ä¼šç”Ÿæˆlibserial.soé™æ€é“¾æ¥åº“ï¼Œé‡Œé¢å®ç°äº†å…·ä½“çš„ä¸²å£é€šä¿¡çš„æ–¹æ³•ï¼Œæºç ä¸­æœ‰æ³¨é‡Šã€‚</p><p>å…³äºå·ç§¯è¿ç®—åˆ†ç±»å›¾åƒè¯·çœ‹æˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« ï¼š<a href="https://codezhou.club/2020/04/07/%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E5%88%86%E7%B1%BB%E5%9B%BE%E7%89%87/">https://codezhou.club/2020/04/07/%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E5%88%86%E7%B1%BB%E5%9B%BE%E7%89%87/</a></p>]]></content>
      
      
      <categories>
          
          <category> ä¸ªäººé¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> STM32 </tag>
            
            <tag> æ ‘è“æ´¾ </tag>
            
            <tag> æœºå™¨è§†è§‰ </tag>
            
            <tag> æ™ºèƒ½æ§åˆ¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‡é™å¼åŒæ—‹ç¿¼é£è¡Œå™¨</title>
      <link href="/2019/09/07/%E5%8F%8C%E6%97%8B%E7%BF%BC%E9%A3%9E%E8%A1%8C%E5%99%A8/"/>
      <url>/2019/09/07/%E5%8F%8C%E6%97%8B%E7%BF%BC%E9%A3%9E%E8%A1%8C%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<p>2018å¹´æ¹–å—çœå¤§å­¦ç”Ÿç”µå­è®¾è®¡ç«èµ›è®¾è®¡â€”â€”</p><h1 id="å‡é™å¼åŒæ—‹ç¿¼é£è¡Œå™¨"><a href="#å‡é™å¼åŒæ—‹ç¿¼é£è¡Œå™¨" class="headerlink" title="å‡é™å¼åŒæ—‹ç¿¼é£è¡Œå™¨"></a><strong>å‡é™å¼åŒæ—‹ç¿¼é£è¡Œå™¨</strong></h1><h2 id="1ã€èµ›é¢˜ç®€ä»‹"><a href="#1ã€èµ›é¢˜ç®€ä»‹" class="headerlink" title="1ã€èµ›é¢˜ç®€ä»‹"></a>1ã€èµ›é¢˜ç®€ä»‹</h2><h3 id="1-1ã€èµ›é¢˜ä»»åŠ¡"><a href="#1-1ã€èµ›é¢˜ä»»åŠ¡" class="headerlink" title="1.1ã€èµ›é¢˜ä»»åŠ¡"></a>1.1ã€èµ›é¢˜ä»»åŠ¡</h3><p>è®¾è®¡å¹¶åˆ¶ä½œä¸€ä¸ªæ²¿ç«–æ†å‡é™çš„åŒæ—‹ç¿¼é£è¡Œå™¨åŠå…¶æ§åˆ¶ç³»ç»Ÿã€‚ç«–æ†é‡‡ç”¨Ï† 12mmçš„åœ†é’¢ï¼Œå¤–å¥—Ï† 17mmä¸é”ˆé’¢ç®¡ï¼Œé•¿(1.4~1.7)m, ä¸‹ç«¯å›ºå®šåœ¨åº•åº§ä¸Šï¼Œæ†ä¸Šåˆ†åˆ«æ ‡æœ‰æ˜æ˜¾çš„Aã€Bã€Cã€Dç‚¹æ ‡è®°ï¼Œå…¶ä¸­: Aç‚¹è·åº•é¢30cm, Bç‚¹è·åº•é¢70cm, Cç‚¹è·åº•é¢100cmï¼ŒDç‚¹è·åº•é¢130cmï¼Œä¸”CDæ®µæœ‰cmé—´éš”çš„æ ‡è®°ï¼Œå¦‚å›¾1æ‰€ç¤ºã€‚åŒæ—‹ç¿¼é£è¡Œå™¨ç”±æ ¹æ¨ªæ¿ å’Œå®‰è£…åœ¨æ¨ªæ¿ä¸¤ç«¯çš„ç›´æµç”µæœºã€èºæ—‹æµ†ç»„æˆï¼Œæ¨ªæ¿é•¿åº¦ä¸º50cmï¼Œä¸­å¿ƒæœ€å®½å¤„å®½åº¦ä¸º10cmï¼Œä¸¤ç›´æµç”µæœºè½´é—´è·ç¦»ä¸º40cm,ä¸”æ¨ªæ¿ä¸­éƒ¨æœ‰ä¸€ä¸ªåœ†å­”( Ï†20)ã€‚ç«–æ†ç©¿è¿‡æ¨ªæ¿ä¸­éƒ¨çš„åœ†å­”ï¼Œèƒ½ä½¿æ¨ªæ¿æ²¿ç«–æ†è‡ªç”±åœ°ä¸Šä¸‹ç§»åŠ¨ï¼Œå¦‚å›¾2æ‰€ç¤ºã€‚æ§åˆ¶ç³»ç»Ÿé€šè¿‡æ§åˆ¶ä¸¤ä¸ªèºæ—‹æµ†çš„è½¬é€Ÿå®ç°åŒæ—‹ç¿¼é£è¡Œå™¨èµ·é£ã€é™è½ä»¥åŠé£è¡Œè¿‡ç¨‹ä¸­çš„é«˜åº¦æ§åˆ¶ã€‚åœ¨é£è¡Œå™¨ä¸Šæœ‰ä¸¤ä¸ªLEDç¯æŒ‡ç¤ºé£è¡Œå™¨çš„çŠ¶æ€ã€‚å…¶ä¸­ç™½è‰²å‘å…‰äºŒæç®¡ä¸º1#æŒ‡ç¤ºç¯ï¼Œçº¢è‰²å‘å…‰äºŒæç®¡ä¸º2#æŒ‡ç¤ºç¯ã€‚æ¨ªæ¿ä¸Šç¦»ä¸­å¿ƒ5cmå¤„éœ€è¦å®‰è£…- - ä¸ªæ‚¬æŒ‚æ³•ç çš„å°é’©ã€‚</p><h3 id="1-2ã€åŸºæœ¬è¦æ±‚"><a href="#1-2ã€åŸºæœ¬è¦æ±‚" class="headerlink" title="1.2ã€åŸºæœ¬è¦æ±‚"></a>1.2ã€åŸºæœ¬è¦æ±‚</h3><p>å½“é£è¡Œå™¨é™æ­¢åœ°åœåœ¨åº•é¢æ—¶ï¼Œé”®å¯åŠ¨æ§åˆ¶ç³»ç»Ÿï¼Œ åˆ†åˆ«å®Œæˆä»¥ä¸‹é£è¡Œè¿‡ç¨‹:</p><p>(1)åœ¨15ç§’å†…ï¼Œé£è¡Œå™¨ç”±åœ°é¢ä¸Šå‡ä¸”é«˜åº¦è¶…è¿‡Aç‚¹3ç§’ä»¥ä¸Šï¼Œå†å¹³ç¨³åœ°é™è½å›åœ°é¢:</p><p>(2)åœ¨ 20ç§’å†…ï¼Œé£è¡Œå™¨ç”±åœ°é¢ä¸Šå‡å¹¶æ‚¬åœåœ¨CDæ®µç»´æŒ3ç§’ä»¥ä¸Šï¼Œå†å¹³ç¨³åœ°é™è½å›åœ°é¢:</p><p>(3) åœ¨30ç§’å†…ï¼Œé£è¡Œå™¨ç”±åœ°é¢ä¸Šå‡å¹¶æ‚¬åœåœ¨ABæ®µç»´æŒ3ç§’ï¼Œå†ä¸Šå‡å¹¶æ‚¬åœåœ¨CDæ®µç»´æŒ3ç§’ï¼Œå†å¹³ç¨³åœ°é™è½å›åœ°é¢:åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œé£è¡Œå™¨æ‚¬åœåœ¨ABæ®µæ—¶äº®1â€œç¯ï¼Œåœ¨CDæ®µæ‚¬åœæ—¶äº®2*ç¯ï¼Œå…¶å®ƒä¸äº®ç¯ã€‚</p><p> (4) åœ¨30ç§’å†…ï¼Œé£è¡Œå™¨ç”±åœ°é¢ä¸Šå‡å¹¶æ‚¬åœåœ¨CDæ®µå†…çš„æŒ‡å®šé«˜åº¦(X)5ç§’ä»¥ä¸Šï¼Œä¸”é«˜åº¦è¯¯å·®ä¸è¶…è¿‡Scm (ä»¥ä¸Šä¸‹æ³¢åŠ¨ä¸­å¿ƒä¸ºå‡†)ã€ä¸Šä¸‹æ³¢åŠ¨èŒƒå›´ä¸è¶…è¿‡5cm, è¾¾åˆ°è¦æ±‚æ—¶åŒæ—¶äº®1â€ã€2*ç¯;</p><p>(5) å°†æ§åˆ¶ç³»ç»Ÿã€ç”µæ± ç­‰å…¨éƒ¨å®‰è£…åœ¨æ¨ªæ¿ä¸Šï¼Œå®ŒæˆåŸºæœ¬éƒ¨åˆ†æ‰€æœ‰è¦æ±‚ï¼Œä¸”é£è¡Œå™¨ä¸å‡ºç°èºæ—‹çŠ¶æ€ã€‚</p><h3 id="1-3ã€å‘æŒ¥éƒ¨åˆ†"><a href="#1-3ã€å‘æŒ¥éƒ¨åˆ†" class="headerlink" title="1.3ã€å‘æŒ¥éƒ¨åˆ†"></a>1.3ã€å‘æŒ¥éƒ¨åˆ†</h3><p>æ§åˆ¶ç³»ç»Ÿã€ç”µæ± ç­‰å…¨éƒ¨å®‰è£…åœ¨æ¨ªæ¿ä¸Šçš„æ¡ä»¶ä¸‹:</p><p>(1) é£è¡Œå™¨ç”±åœ°é¢ä¸Šå‡å¹¶æ‚¬åœåœ¨CDæ®µå†…çš„æŒ‡å®šé«˜åº¦(X) 5ç§’ä»¥ä¸Šæ—¶ï¼Œäººä¸ºå°†é£è¡Œå™¨æ‹‰åˆ°BCæ®µï¼Œé£è¡Œå™¨èƒ½å¤Ÿè‡ªåŠ¨è¿”å›åŸå…ˆçš„é«˜åº¦;</p><p>(2)åœ¨åŸºæœ¬éƒ¨åˆ†(4) çš„åŸºç¡€ä¸Šï¼Œè¿›ä¸€æ­¥æé«˜æ§åˆ¶ç²¾åº¦ï¼Œ å®ç°é£è¡Œå™¨é«˜åº¦è¯¯å·®ä¸è¶…è¿‡3cmã€ä¸Šä¸‹æ³¢åŠ¨èŒƒå›´ä¸è¶…è¿‡3cm,è¯¯å·®åŠæ³¢åŠ¨èŒƒå›´è¶Šå°è¶Šå¥½;</p><p> (3)åœ¨å®Œæˆå‘æŒ¥éƒ¨åˆ†(2) çš„åŸºç¡€ä¸Šï¼Œå®ç°é£è¡Œå™¨é«˜åº¦çš„å¢é‡æ§åˆ¶ï¼Œå³:é€šè¿‡æŒ‰æ­¥è¿›å€¼é”®X)ï¼Œä½¿é£è¡Œå™¨ä¸Šå‡Xcmã€ æˆ–æŒ‰å¦ä¸€ä¸ªé”®ä½¿é£è¡Œå™¨ä¸‹é™Xcm, è¯¯å·®ã€æ³¢åŠ¨èŒƒå›´è¦æ±‚åŒå‘æŒ¥éƒ¨åˆ†(2)</p><p>(4)åœ¨é£è¡Œå™¨ä¸­é—´å°é’©ä¸ŠåŠ æŒ‚10å…‹ä»¥ä¸Šé‡ç‰©ï¼Œå®Œæˆå‘æŒ¥éƒ¨åˆ†(3)</p><p>(5)è‡ªç”±å‘æŒ¥(ä»…é™äºæ›´å¤æ‚çš„é£è¡Œè·¯å¾„å’Œæé«˜å®šä½ç²¾åº¦)</p><h2 id="2ã€åŸç†è®ºè¯"><a href="#2ã€åŸç†è®ºè¯" class="headerlink" title="2ã€åŸç†è®ºè¯"></a>2ã€åŸç†è®ºè¯</h2><blockquote><p>PID æ§åˆ¶å™¨ä»¥å„ç§å½¢å¼ä½¿ç”¨è¶…è¿‡äº† 1 ä¸–çºªï¼Œå¹¿æ³›åº”ç”¨åœ¨æœºæ¢°è®¾å¤‡ã€æ°”åŠ¨è®¾å¤‡ å’Œç”µå­è®¾å¤‡.åœ¨å·¥ä¸šåº”ç”¨ä¸­PIDåŠå…¶è¡ç”Ÿç®—æ³•æ˜¯åº”ç”¨æœ€å¹¿æ³›çš„ç®—æ³•ä¹‹ä¸€ï¼Œæ˜¯å½“ä¹‹æ— æ„§çš„ä¸‡èƒ½ç®—æ³•ã€‚</p></blockquote><p>PID å®æŒ‡â€œæ¯”ä¾‹ proportionalâ€ã€â€œç§¯åˆ† integralâ€ã€â€œå¾®åˆ† derivativeâ€ï¼Œè¿™ä¸‰é¡¹æ„ æˆ PID åŸºæœ¬è¦ç´ ã€‚æ¯ä¸€é¡¹å®Œæˆä¸åŒä»»åŠ¡ï¼Œå¯¹ç³»ç»ŸåŠŸèƒ½äº§ç”Ÿä¸åŒçš„å½±å“ã€‚å®ƒçš„ç»“æ„ç®€å•ï¼Œå‚æ•°æ˜“ äºè°ƒæ•´ï¼Œæ˜¯æ§åˆ¶ç³»ç»Ÿä¸­ç»å¸¸é‡‡ç”¨çš„æ§åˆ¶ç®—æ³•ã€‚</p><p>**u(t)**ä¸ºæ§åˆ¶å™¨è¾“å‡ºçš„æ§åˆ¶é‡ï¼›ï¼ˆè¾“å‡ºï¼‰</p><p>**e(t)**ä¸ºåå·®ä¿¡å·ï¼Œå®ƒç­‰äºç»™å®šé‡ä¸è¾“å‡ºé‡ä¹‹å·®ï¼›ï¼ˆè¾“å…¥ï¼‰</p><p><strong>KP</strong> ä¸ºæ¯”ä¾‹ç³»æ•°ï¼›ï¼ˆå¯¹åº”å‚æ•° Pï¼‰</p><p><strong>TI</strong> ä¸ºç§¯åˆ†æ—¶é—´å¸¸æ•°ï¼›ï¼ˆå¯¹åº”å‚æ•°Iï¼‰</p><p><strong>TD</strong> ä¸ºå¾®åˆ†æ—¶é—´å¸¸æ•°ã€‚(å¯¹åº”å‚æ•° D) </p><p>æ•°å­— PID æ§åˆ¶ç®—æ³•é€šå¸¸åˆ†ä¸ºä½ç½®å¼ PID æ§åˆ¶ç®—æ³•å’Œå¢é‡å¼ PID æ§åˆ¶ç®—æ³•ã€‚  </p><p><strong>ä½ç½®å¼ PID ç®—æ³• :</strong></p><p> e(k): ç”¨æˆ·è®¾å®šçš„å€¼ï¼ˆç›®æ ‡å€¼ï¼‰ -  æ§åˆ¶å¯¹è±¡çš„å½“å‰çš„çŠ¶æ€å€¼ </p><p>æ¯”ä¾‹P :    e(k)</p><p>ç§¯åˆ†I :   âˆ‘e(i)     è¯¯å·®çš„ç´¯åŠ </p><p>å¾®åˆ†D :  e(k) - e(k-1)  è¿™æ¬¡è¯¯å·®-ä¸Šæ¬¡è¯¯å·®</p><p>ä¹Ÿå°±æ˜¯ä½ç½®å¼PIDæ˜¯å½“å‰ç³»ç»Ÿçš„å®é™…ä½ç½®ï¼Œä¸ä½ æƒ³è¦è¾¾åˆ°çš„é¢„æœŸä½ç½®çš„åå·®ï¼Œè¿›è¡ŒPIDæ§åˆ¶</p><p>å› ä¸ºæœ‰è¯¯å·®ç§¯åˆ† âˆ‘e(i)ï¼Œä¸€ç›´ç´¯åŠ ï¼Œä¹Ÿå°±æ˜¯å½“å‰çš„è¾“å‡ºu(k)ä¸è¿‡å»çš„æ‰€æœ‰çŠ¶æ€éƒ½æœ‰å…³ç³»ï¼Œç”¨åˆ°äº†è¯¯å·®çš„ç´¯åŠ å€¼ï¼›ï¼ˆè¯¯å·®eä¼šæœ‰è¯¯å·®ç´¯åŠ ï¼‰ï¼Œè¾“å‡ºçš„u(k)å¯¹åº”çš„æ˜¯æ‰§è¡Œæœºæ„çš„å®é™…ä½ç½®ï¼Œï¼Œä¸€æ—¦æ§åˆ¶è¾“å‡ºå‡ºé”™(æ§åˆ¶å¯¹è±¡çš„å½“å‰çš„çŠ¶æ€å€¼å‡ºç°é—®é¢˜ )ï¼Œu(k)çš„å¤§å¹…å˜åŒ–ä¼šå¼•èµ·ç³»ç»Ÿçš„å¤§å¹…å˜åŒ–</p><p>å¹¶ä¸”ä½ç½®å¼PIDåœ¨ç§¯åˆ†é¡¹è¾¾åˆ°é¥±å’Œæ—¶,è¯¯å·®ä»ç„¶ä¼šåœ¨ç§¯åˆ†ä½œç”¨ä¸‹ç»§ç»­ç´¯ç§¯ï¼Œä¸€æ—¦è¯¯å·®å¼€å§‹åå‘å˜åŒ–ï¼Œç³»ç»Ÿéœ€è¦ä¸€å®šæ—¶é—´ä»é¥±å’ŒåŒºé€€å‡ºï¼Œæ‰€ä»¥åœ¨u(k)è¾¾åˆ°æœ€å¤§å’Œæœ€å°æ—¶ï¼Œè¦åœæ­¢ç§¯åˆ†ä½œç”¨ï¼Œå¹¶ä¸”è¦æœ‰ç§¯åˆ†é™å¹…å’Œè¾“å‡ºé™å¹…ã€‚</p><p><strong>å¢é‡å¼PIDï¼š</strong></p><p>æ¯”ä¾‹P :    e(k)-e(k-1)   è¿™æ¬¡è¯¯å·®-ä¸Šæ¬¡è¯¯å·®</p><p>ç§¯åˆ†I :   e(i)     è¯¯å·®   </p><p>å¾®åˆ†D :  e(k) - 2e(k-1)+e(k-2)   è¿™æ¬¡è¯¯å·®-2*ä¸Šæ¬¡è¯¯å·®+ä¸Šä¸Šæ¬¡è¯¯å·®</p><p> å¢é‡å¼PIDæ ¹æ®å…¬å¼å¯ä»¥å¾ˆå¥½åœ°çœ‹å‡ºï¼Œä¸€æ—¦ç¡®å®šäº† KPã€TI  ã€TDï¼Œåªè¦ä½¿ç”¨å‰åä¸‰æ¬¡æµ‹é‡å€¼çš„åå·®ï¼Œ å³å¯ç”±å…¬å¼æ±‚å‡ºæ§åˆ¶å¢é‡</p><p>è€Œå¾—å‡ºçš„æ§åˆ¶é‡â–²u(k)å¯¹åº”çš„æ˜¯è¿‘å‡ æ¬¡ä½ç½®è¯¯å·®çš„å¢é‡ï¼Œè€Œä¸æ˜¯å¯¹åº”ä¸å®é™…ä½ç½®çš„åå·®     æ²¡æœ‰è¯¯å·®ç´¯åŠ </p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¢é‡å¼PIDä¸­ä¸éœ€è¦ç´¯åŠ ã€‚æ§åˆ¶å¢é‡Î”u(k)çš„ç¡®å®šä»…ä¸æœ€è¿‘3æ¬¡çš„é‡‡æ ·å€¼æœ‰å…³ï¼Œå®¹æ˜“é€šè¿‡åŠ æƒå¤„ç†è·å¾—æ¯”è¾ƒå¥½çš„æ§åˆ¶æ•ˆæœï¼Œå¹¶ä¸”åœ¨ç³»ç»Ÿå‘ç”Ÿé—®é¢˜æ—¶ï¼Œå¢é‡å¼ä¸ä¼šä¸¥é‡å½±å“ç³»ç»Ÿçš„å·¥ä½œ</p><p><strong>æ€»ç»“ï¼šå¢é‡å‹ PIDï¼Œæ˜¯å¯¹ä½ç½®å‹ PID å–å¢é‡ï¼Œè¿™æ—¶æ§åˆ¶å™¨è¾“å‡ºçš„æ˜¯ç›¸é‚»ä¸¤æ¬¡é‡‡æ ·æ—¶åˆ»æ‰€è®¡ç®—çš„ä½ç½®å€¼</strong><br><strong>ä¹‹å·®ï¼Œå¾—åˆ°çš„ç»“æœæ˜¯å¢é‡ï¼Œå³åœ¨ä¸Šä¸€æ¬¡çš„æ§åˆ¶é‡çš„åŸºç¡€ä¸Šéœ€è¦å¢åŠ ï¼ˆè´Ÿå€¼æ„å‘³å‡å°‘ï¼‰æ§åˆ¶é‡ã€‚</strong></p><p><code>***å¢é‡å¼ä¸ä½ç½®å¼åŒºåˆ«ï¼š***</code><br>1å¢é‡å¼ç®—æ³•ä¸éœ€è¦åšç´¯åŠ ï¼Œæ§åˆ¶é‡å¢é‡çš„ç¡®å®šä»…ä¸æœ€è¿‘å‡ æ¬¡åå·®é‡‡æ ·å€¼æœ‰å…³ï¼Œè®¡ç®—è¯¯å·®å¯¹æ§åˆ¶ é‡è®¡ç®—çš„å½±å“è¾ƒå°ã€‚è€Œä½ç½®å¼ç®—æ³•è¦ç”¨åˆ°è¿‡å»åå·®çš„ç´¯åŠ å€¼ï¼Œå®¹æ˜“äº§ç”Ÿè¾ƒå¤§çš„ç´¯åŠ è¯¯å·®ã€‚ </p><p>2å¢é‡å¼ç®—æ³•å¾—å‡ºçš„æ˜¯æ§åˆ¶é‡çš„å¢é‡ï¼Œä¾‹å¦‚åœ¨é˜€é—¨æ§åˆ¶ä¸­ï¼Œåªè¾“å‡ºé˜€é—¨å¼€åº¦çš„å˜åŒ–éƒ¨åˆ†ï¼Œè¯¯åŠ¨ä½œ å½±å“å°ï¼Œå¿…è¦æ—¶è¿˜å¯é€šè¿‡é€»è¾‘åˆ¤æ–­é™åˆ¶æˆ–ç¦æ­¢æœ¬æ¬¡è¾“å‡ºï¼Œä¸ä¼šä¸¥é‡å½±å“ç³»ç»Ÿçš„å·¥ä½œã€‚ è€Œä½ç½®å¼çš„è¾“å‡ºç›´æ¥å¯¹åº”å¯¹è±¡çš„è¾“å‡ºï¼Œå› æ­¤å¯¹ç³»ç»Ÿå½±å“è¾ƒå¤§ã€‚</p><p>3å¢é‡å¼PIDæ§åˆ¶è¾“å‡ºçš„æ˜¯æ§åˆ¶é‡å¢é‡ï¼Œå¹¶æ— ç§¯åˆ†ä½œç”¨ï¼Œå› æ­¤è¯¥æ–¹æ³•é€‚ç”¨äºæ‰§è¡Œæœºæ„å¸¦ç§¯åˆ†éƒ¨ä»¶çš„å¯¹è±¡ï¼Œå¦‚æ­¥è¿›ç”µæœºç­‰ï¼Œè€Œä½ç½®å¼PIDé€‚ç”¨äºæ‰§è¡Œæœºæ„ä¸å¸¦ç§¯åˆ†éƒ¨ä»¶çš„å¯¹è±¡ï¼Œå¦‚ç”µæ¶²ä¼ºæœé˜€ã€‚</p><p>4åœ¨è¿›è¡ŒPIDæ§åˆ¶æ—¶ï¼Œä½ç½®å¼PIDéœ€è¦æœ‰ç§¯åˆ†é™å¹…å’Œè¾“å‡ºé™å¹…ï¼Œè€Œå¢é‡å¼PIDåªéœ€è¾“å‡ºé™å¹…</p><p>ä½ç½®å¼PIDä¼˜ç¼ºç‚¹ï¼š<br>ä¼˜ç‚¹ï¼š<br>â‘ ä½ç½®å¼PIDæ˜¯ä¸€ç§éé€’æ¨å¼ç®—æ³•ï¼Œå¯ç›´æ¥æ§åˆ¶æ‰§è¡Œæœºæ„ï¼ˆå¦‚å¹³è¡¡å°è½¦ï¼‰ï¼Œu(k)çš„å€¼å’Œæ‰§è¡Œæœºæ„çš„å®é™…ä½ç½®ï¼ˆå¦‚å°è½¦å½“å‰è§’åº¦ï¼‰æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œå› æ­¤åœ¨æ‰§è¡Œæœºæ„ä¸å¸¦ç§¯åˆ†éƒ¨ä»¶çš„å¯¹è±¡ä¸­å¯ä»¥å¾ˆå¥½åº”ç”¨</p><p>ç¼ºç‚¹ï¼š<br>â‘ æ¯æ¬¡è¾“å‡ºå‡ä¸è¿‡å»çš„çŠ¶æ€æœ‰å…³ï¼Œè®¡ç®—æ—¶è¦å¯¹e(k)è¿›è¡Œç´¯åŠ ï¼Œè¿ç®—å·¥ä½œé‡å¤§ã€‚</p><p>å¢é‡å¼PIDä¼˜ç¼ºç‚¹ï¼š<br>ä¼˜ç‚¹ï¼š<br>â‘ è¯¯åŠ¨ä½œæ—¶å½±å“å°ï¼Œå¿…è¦æ—¶å¯ç”¨é€»è¾‘åˆ¤æ–­çš„æ–¹æ³•å»æ‰å‡ºé”™æ•°æ®ã€‚<br>â‘¡æ‰‹åŠ¨/è‡ªåŠ¨åˆ‡æ¢æ—¶å†²å‡»å°ï¼Œä¾¿äºå®ç°æ— æ‰°åŠ¨åˆ‡æ¢ã€‚å½“è®¡ç®—æœºæ•…éšœæ—¶ï¼Œä»èƒ½ä¿æŒåŸå€¼ã€‚<br>â‘¢ç®—å¼ä¸­ä¸éœ€è¦ç´¯åŠ ã€‚æ§åˆ¶å¢é‡Î”u(k)çš„ç¡®å®šä»…ä¸æœ€è¿‘3æ¬¡çš„é‡‡æ ·å€¼æœ‰å…³ã€‚</p><p>ç¼ºç‚¹ï¼š<br>â‘ ç§¯åˆ†æˆªæ–­æ•ˆåº”å¤§ï¼Œæœ‰ç¨³æ€è¯¯å·®ï¼›</p><p>â‘¡æº¢å‡ºçš„å½±å“å¤§ã€‚æœ‰çš„è¢«æ§å¯¹è±¡ç”¨å¢é‡å¼åˆ™ä¸å¤ªå¥½ï¼›</p><p>PIDç®—æ³•Cè¯­è¨€å®ç°</p><p>é¦–å…ˆï¼Œå®šä¹‰ä¸€ä¸ªç»“æ„å˜é‡ï¼Œç”¨ä»¥å­˜æ”¾PIDè¿ç®—ä¸­æ‰€éœ€è¦çš„æ•°æ®ã€‚</p><pre class=" language-c"><code class="language-c"><span class="token keyword">typedef</span> <span class="token keyword">struct</span> _pid<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">float</span> Set<span class="token punctuation">;</span>                 <span class="token comment" spellcheck="true">//å®šä¹‰è®¾å®šå€¼</span>    <span class="token keyword">float</span> Actual<span class="token punctuation">;</span>              <span class="token comment" spellcheck="true">//å®šä¹‰å®é™…å€¼</span>    <span class="token keyword">float</span> Kp<span class="token punctuation">,</span>Ki<span class="token punctuation">,</span>Kd<span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//å®šä¹‰æ¯”ä¾‹ã€ç§¯åˆ†ã€å¾®åˆ†ç³»æ•°</span>    <span class="token keyword">float</span> err<span class="token punctuation">;</span>                 <span class="token comment" spellcheck="true">//å®šä¹‰åå·®</span>    <span class="token keyword">float</span> err_last<span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//å®šä¹‰ä¸Šä¸€ä¸ªåå·®</span>    <span class="token keyword">float</span> Sum_err<span class="token punctuation">;</span>             <span class="token comment" spellcheck="true">//å®šä¹‰åå·®ä¹‹å’Œ</span>    <span class="token keyword">float</span> Proportion<span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">//å®šä¹‰è¾“å‡º</span>    <span class="token keyword">float</span> Pout<span class="token punctuation">,</span>Iout<span class="token punctuation">,</span>Dout<span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//å®šä¹‰ä¸ªåˆ†é‡è¾“å‡º</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>PID<span class="token punctuation">;</span></code></pre><p>å…¶æ¬¡ï¼Œåˆå§‹åŒ–ä»»ä¸€PIDç»“æ„ä½“ï¼Œå¹¶ä¸ºå…¶åŠ¨æ€ç”³è¯·å†…å­˜ã€‚</p><pre class=" language-C"><code class="language-C">PID *PID_Init(float S, float Kp, float Ki, float Kd)&#123;    PID *pid_x = malloc(sizeof(PID));    pid_x->Set = S;    pid_x->Kp = Kp;    pid_x->Ki = Ki;    pid_x->Kd = Kd;    pid_x->err_last = 0;    pid_x->Sum_err = 0;    pid_x->Proportion = 0;    pid_x->Pout = 0;    pid_x->Iout = 0;    pid_x->Dout = 0;    return pid_x;&#125;</code></pre><p>åœ¨PIDè¿ç®—è¿‡ç¨‹ï¼›</p><pre class=" language-C"><code class="language-C">void PID_Count(PID *pid_x, float Act)&#123;    pid_x->Actual = Act; //æ›´æ–°å®é™…å€¼    pid_x->err_last = pid_x->err;   //æ›´æ–°ä¸Šæ¬¡åå·®    pid_x->err = pid_x->Set - pid_x->Actual; //æ›´æ–°å½“å‰åå·®    pid_x->Pout = pid_x->Kp * pid_x->err; //æ¯”ä¾‹è¾“å‡º    pid_x->Sum_err += pid_x->err; //è¯¯å·®æ€»å’Œ       pid_x->Iout = (pid_x->Ki) * (pid_x->Sum_err);   //ç§¯åˆ†è¾“å‡º    pid_x->Dout = (pid_x->Kd) * (pid_x->err - pid_x->err_last); //å¾®åˆ†è¾“å‡º    pid_x->Proportion = pid_x->Pout + pid_x->Iout + pid_x->Dout;//æ€»è¾“å‡º&#125;</code></pre><p>æ›´æ”¹PIDå‚æ•°</p><pre class=" language-C"><code class="language-C">void PID_Set_K(PID *pid_x, float Kp, float Ki, float Kd) &#123;    pid_x->Kp = Kp;    pid_x->Ki = Ki;    pid_x->Kd = Kd;&#125;</code></pre><h2 id="3ã€ç¡¬ä»¶è®¾è®¡"><a href="#3ã€ç¡¬ä»¶è®¾è®¡" class="headerlink" title="3ã€ç¡¬ä»¶è®¾è®¡"></a>3ã€ç¡¬ä»¶è®¾è®¡</h2><p>1Â·ä¸»æ§åˆ¶å™¨ä»¶çš„è®ºè¯ä¸é€‰æ‹©</p><p>æ–¹æ¡ˆä¸€ï¼šé‡‡ç”¨ä¼ ç»Ÿçš„51ç³»åˆ—å•ç‰‡æœº</p><p>ä¼ ç»Ÿçš„51å•ç‰‡æœºä¸º8ä½æœºï¼Œä»·æ ¼ä¾¿å®œï¼Œæ§åˆ¶ç®€å•ï¼Œä½†æ˜¯è¿ç®—é€Ÿåº¦æ…¢ï¼Œç‰‡å†…èµ„æºå°‘ï¼Œå­˜å‚¨å®¹é‡å°ï¼Œéš¾ä»¥å­˜å‚¨å¤§ä½“ç§¯çš„ç¨‹åºå’Œå®ç°å¿«é€Ÿç²¾å‡†çš„ååº”æ§åˆ¶ï¼Œå¹¶ä¸”å—æ—¶é’Ÿé™åˆ¶ï¼Œè®¡æ—¶ç²¾åº¦ä¸é«˜ï¼Œå¤–å½¢ä½“ç§¯å¤§å¢åŠ äº†ç³»ç»Ÿçš„æ§åˆ¶éš¾åº¦ã€‚</p><p>æ–¹æ¡ˆäºŒï¼šé‡‡ç”¨32ä½çš„ARMå¾®æ§åˆ¶å™¨</p><p>STM32F103C8T6æ˜¯ä¸€æ¬¾åŸºäºARM Cortex-M å†…æ ¸STM32ç³»åˆ—çš„32ä½çš„å¾®æ§åˆ¶å™¨ï¼Œç¨‹åºå­˜å‚¨å™¨å®¹é‡æ˜¯64KBï¼Œæ—¶é’Ÿé¢‘ç‡é«˜è¾¾72MHZã€‚</p><p>æœ¬ç³»ç»Ÿçš„MCUç”¨äºç”µæœºæ§åˆ¶ä»¥åŠä¸‰ç»´è§’åº¦ä¼ æ„Ÿå™¨çš„ä¿¡å·çš„é‡‡é›†å’Œå¤„ç†ï¼Œå¯¹MCUçš„æ•°æ®å¤„ç†å’Œè®¡ç®—è¦æ±‚è¾ƒé«˜ï¼Œé€šè¿‡æ¯”è¾ƒï¼Œé€‰æ‹©æ–¹æ¡ˆäºŒã€‚</p><p>2Â·é£è¡Œå§¿æ€æ§åˆ¶çš„è®ºè¯ä¸é€‰æ‹©</p><p>é‡‡é›†æ¨¡å—é€‰æ‹©ï¼š</p><p>æ–¹æ¡ˆä¸€ï¼šé‡‡ç”¨MPU-6050æ¨¡å—</p><p>MPU-6050å…­è½´æ¨¡å—é‡‡ç”¨é«˜ç²¾åº¦çš„é™€èºä»ªåŠ é€Ÿè®¡MPU6050ï¼Œå†…éƒ¨é›†æˆäº†å§¿æ€è§£ç®—å™¨ï¼Œé…åˆåŠ¨æ€å¡å°”æ›¼æ»¤æ³¢ç®—æ³•ï¼Œèƒ½å¤Ÿåœ¨åŠ¨æ€ç¯å¢ƒä¸‹å‡†ç¡®è¾“å‡ºæ¨¡å—çš„å½“å‰å§¿æ€ï¼Œå§¿æ€æµ‹é‡ç²¾åº¦0.01åº¦ï¼Œç¨³å®šæ€§æé«˜ã€‚</p><p>æ–¹æ¡ˆäºŒï¼šé‡‡ç”¨ADXL345å€¾è§’ä¼ æ„Ÿå™¨</p><p>ADXL345æ˜¯è¶…ä½åŠŸè€—3è½´åŠ é€Ÿåº¦è®¡ï¼Œåˆ†è¾¨ç‡é«˜ï¼ˆ13ä½ï¼‰ï¼Œæ•°å­—è¾“å‡ºæ•°æ®ä¸º16ä½äºŒè¿›åˆ¶è¡¥ç æ ¼å¼ï¼Œå¯é€šè¿‡SPIæˆ–I2Cæ•°å­—æ¥å£è®¿é—®ã€‚</p><p>ç»¼åˆä»¥ä¸Šä¸¤ç§æ–¹æ¡ˆï¼Œé€‰æ‹©æ–¹æ¡ˆä¸€ã€‚</p><p>3Â·é«˜åº¦é‡‡é›†æ¨¡å—çš„è®ºè¯ä¸é€‰æ‹©</p><p>æ–¹æ¡ˆä¸€ï¼šé‡‡ç”¨çš„US-100 è¶…å£°æ³¢æµ‹è·æ¨¡å—å¯å®ç° 2cm~4.5m çš„éæ¥è§¦æµ‹è·åŠŸèƒ½ï¼Œè‡ªå¸¦æ¸©åº¦ä¼ æ„Ÿå™¨å¯¹æµ‹è·ç»“æœè¿›è¡Œæ ¡æ­£ï¼ŒåŒæ—¶å…·æœ‰ GPIOï¼Œä¸²å£ç­‰å¤šç§é€šä¿¡æ–¹å¼ï¼Œå·¥ä½œç¨³å®šå¯é ã€‚</p><p>æ–¹æ¡ˆäºŒï¼šé‡‡ç”¨MS5611æ°”å‹ä¼ æ„Ÿå™¨ï¼Œå¤§æ°”å‹æ˜¯éšé«˜åº¦å˜åŒ–è€Œå˜åŒ–ï¼Œé€šè¿‡å¤§æ°”å‹çš„å˜åŒ–å°±èƒ½è½¬æ¢æˆé«˜åº¦å˜åŒ–ã€‚</p><p>æ–¹æ¡ˆä¸‰ï¼šé‡‡ç”¨æ¿€å…‰æµ‹è·ã€‚æµ‹é‡è·ç¦»è¿œï¼Œæµ‹é‡ç²¾åº¦é«˜ï¼ŒæŠ—å¹²æ‰°èƒ½åŠ›å¼ºï¼Œä½†ä½“ç§¯è¾ƒå¤§ï¼Œé‡é‡è¾ƒé‡ï¼Œä¸”ä»·æ ¼è¾ƒè´µã€‚</p><p>è€ƒè™‘åˆ°å¯¹å…ƒå™¨ä»¶çš„ç†Ÿæ‚‰ç¨‹åº¦ï¼Œå…ƒä»¶çš„ä»·æ ¼ä»¥åŠç¨‹åºçš„ç¼–å†™ï¼Œé€‰æ‹©æ–¹æ¡ˆä¸€ã€‚</p><p>4Â·é¥æ§å™¨æ¨¡å—çš„è®ºè¯ä¸é€‰æ‹©</p><p>æ–¹æ¡ˆä¸€ï¼šé‡‡ç”¨è“ç‰™ä½œä¸ºé¥æ§å™¨ã€‚è“ç‰™æ˜¯ä¸€ç§æ”¯æŒè®¾å¤‡çŸ­è·ç¦»é€šä¿¡ï¼ˆæœ€å¤§ä¼ è¾“è·ç¦»100ç±³ï¼‰çš„æ— çº¿ç”µæŠ€æœ¯ã€‚å¯åšåˆ°10ç±³å·¦å³çš„å‡†ç¡®æ§åˆ¶ï¼Œå¯ä»¥ä¸å¯¹å‡†ã€‚</p><p>æ–¹æ¡ˆäºŒï¼šé‡‡ç”¨çº¢å¤–ä½œä¸ºé¥æ§å™¨ã€‚çº¢å¤–ä¼ è¾“é€Ÿåº¦å¿«ï¼Œä½†ä¼ è¾“è·ç¦»ä¸º1~2ç±³ï¼Œé¡»å¯¹å‡†ï¼Œä¸ºå•å¯¹å•ä¼ è¾“ã€‚</p><p>ç»¼åˆä»¥ä¸Šä¸¤ç§æ–¹æ¡ˆï¼Œè€ƒè™‘åˆ°å‡†ç¡®æ§åˆ¶é£è¡Œå™¨çš„é£è¡Œï¼Œé€‰æ‹©æ–¹æ¡ˆä¸€ã€‚</p><p>5.ç”µæœºé©±åŠ¨æ¨¡å—</p><p>æ–¹æ¡ˆä¸€ï¼š298Né©±åŠ¨æ¨¡å—ã€‚é‡‡ç”¨L298Næ§åˆ¶èŠ¯ç‰‡ã€‚é€šè¿‡å•ç‰‡æœºæ”¹å˜è¾“å…¥åˆ°ä½¿èƒ½ç«¯çš„ç”µå¹³æ¥æ§åˆ¶ç”µæœºçš„è½¬é€Ÿã€‚ä½†é£è¡Œå™¨é£è¡Œæ—¶ç”µæœºè¾¾åˆ°çš„ç”µæµè¿œè¿œè¶…è¿‡L298Næ¨¡å—æ‰€èƒ½æ‰¿å—çš„ç”µæµã€‚</p><p>æ–¹æ¡ˆäºŒï¼šç©ºæ¨¡æ— åˆ·é©¬è¾¾ç”µå­è°ƒé€Ÿå™¨ï¼ˆESCï¼‰ã€‚å…·æœ‰å¼ºå¤§çš„è€æµèƒ½åŠ›ã€‚å…·å¤‡å‡ºè‰²çš„é©¬è¾¾å…¼å®¹æ€§å’Œå¾ˆé«˜çš„é©±åŠ¨æ•ˆç‡ã€‚æœ€é«˜è½¬é€Ÿå¯ä»¥è¾¾åˆ°210000RPMï¼ˆ2æé©¬è¾¾ï¼‰ï¼Œ70000 RPMï¼ˆ2æé©¬è¾¾ï¼‰ï¼Œ35000ï¼ˆ12æé©¬è¾¾ï¼‰.å…·æœ‰æ™®é€šå¯åŠ¨ï¼ŒæŸ”å’Œå¯åŠ¨ï¼Œè¶…æŸ”å’Œå¯åŠ¨ä¸‰ç§æ¨¡å¼ï¼Œå…¼å®¹å›ºå®šé£æœºåŠç›´å‡æœºã€‚å¯è®¾å®šæ²¹é—¨è¡Œç¨‹ï¼Œå…¼å®¹å„ç§é¥æ§å™¨ã€‚å…·å¤‡è¾“å…¥ç”µå‹å¼‚å¸¸ä¿æŠ¤ï¼Œç”µæ± ä½å‹ä¿æŠ¤ï¼Œæ²¹é—¨ä¿¡å·ä¸¢å¤±ä¿æŠ¤ç­‰å¤šç§ä¿æŠ¤åŠŸèƒ½ã€‚</p><p>ç»¼åˆä»¥ä¸Šä¸¤ç§æ–¹æ¡ˆï¼Œé€‰æ‹©æ–¹æ¡ˆäºŒã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/zhu.png"></p><h2 id=""><a href="#" class="headerlink" title=""></a><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/yao.png"></h2><h2 id="4ã€è½¯ä»¶è®¾è®¡"><a href="#4ã€è½¯ä»¶è®¾è®¡" class="headerlink" title="4ã€è½¯ä»¶è®¾è®¡"></a>4ã€è½¯ä»¶è®¾è®¡</h2><p>å®Œæ•´ä»£ç è¯·è®¿é—®Github:<a href="https://github.com/Zwyywz/Electronic-design">https://github.com/Zwyywz/Electronic-design</a></p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210308211127050.png"></p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210308211152974.png"></p><h2 id="5ã€æµ‹è¯•éªŒæ”¶"><a href="#5ã€æµ‹è¯•éªŒæ”¶" class="headerlink" title="5ã€æµ‹è¯•éªŒæ”¶"></a>5ã€æµ‹è¯•éªŒæ”¶</h2><p>åŸºç¡€éƒ¨åˆ†ï¼š</p><p>ï¼ˆ1ï¼‰ æµ‹è¯•åŸºæœ¬éƒ¨åˆ†ç¬¬ä¸€é¡¹ï¼Œé£è¡Œå™¨èƒ½è¾¾åˆ°Aç‚¹3ç§’ä»¥ä¸Šï¼Œç„¶åå¹³ç¨³é™è½åˆ°åœ°é¢ï¼Œæ•´ä¸ªè¿‡ç¨‹åœ¨15ç§’ä»¥å†…ã€‚è¯´æ˜é£è¡Œå™¨èƒ½é€šè¿‡PIDè¿ç®—è¾¾åˆ°æŒ‡å®šé«˜åº¦ï¼Œè€Œä¸”ä¸”è€—æ—¶çŸ­ã€‚</p><p>ï¼ˆ2ï¼‰ æµ‹è¯•åŸºæœ¬éƒ¨åˆ†ç¬¬äºŒé¡¹ï¼Œé£è¡Œå™¨èƒ½è¾¾åˆ°CDæ®µæ‚¬åœ3ç§’ä»¥ä¸Šï¼Œç„¶åå¹³ç¨³é™è½åˆ°åœ°é¢ï¼Œæ•´ä¸ªè¿‡ç¨‹è€—æ—¶18ç§’ã€‚è¯´æ˜é£è¡Œå™¨èƒ½é€šè¿‡PIDè¿ç®—è¾¾åˆ°æŒ‡å®šé«˜åº¦ï¼Œå¹¶ä¸”èƒ½ç»´æŒåœ¨æŸä¸ªé«˜åº¦ï¼Œè€—æ—¶ä¸æ˜¯å¾ˆå¤§ã€‚</p><p>ï¼ˆ3ï¼‰ æµ‹è¯•åŸºæœ¬éƒ¨åˆ†ç¬¬ä¸‰é¡¹ï¼Œé£è¡Œå™¨èƒ½è¾¾åˆ°ABæ®µæ‚¬åœ3ç§’ä»¥ä¸Šï¼Œå†ä¸Šå‡åˆ°CDæ®µæ‚¬åœ3ç§’ï¼Œå†å¹³ç¨³è½åœ°ã€‚åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œåœ¨ABæ®µæ‚¬åœæ—¶é»„è‰²LED1#ç¯äº®ï¼Œåœ¨CDæ®µæ‚¬åœæ—¶çº¢è‰²LED2#ç¯äº®ã€‚ä½†æ•´ä¸ªè¿‡ç¨‹è€—æ—¶35ç§’ï¼Œè¶…å‡ºäº†è¦æ±‚ã€‚ä¸»è¦åŸå› ä¸ºPIDè¿ç®—è¾“å‡ºçš„ç”µæœºæ²¹é—¨å¯èƒ½å¤ªå°ï¼Œå¯¼è‡´ä¸Šå‡ç¼“æ…¢ã€‚.</p><p>ï¼ˆ4ï¼‰ æµ‹è¯•åŸºæœ¬éƒ¨åˆ†ç¬¬å››é¡¹ï¼Œé£è¡Œå™¨è¾¾åˆ°èƒ½CDæ®µçš„æŒ‡å®šé«˜åº¦5ç§’ä»¥ä¸Šï¼Œä½†æ˜¯è¯¯å·®è¶…è¿‡5cmï¼Œä¸Šä¸‹æ³¢åŠ¨èŒƒå›´ä¸è¶…è¿‡5cm,è¾¾åˆ°è¦æ±‚çš„åŒæ—¶çº¢ç¯ï¼Œé»„ç¯ä¸€èµ·äº®ï¼Œä¸»è¦æ˜¯å› ä¸ºPIDè¿ç®—çš„ç§¯åˆ†ä½œç”¨å¤ªå¤§ï¼Œä»è€Œä½¿å…¶è¶…è°ƒã€‚</p><p>ï¼ˆ5ï¼‰ å°†æ§åˆ¶ç³»ç»Ÿï¼Œç”µæ± å…¨éƒ¨å®‰è£…åœ¨æ¨ªæ¿ä¸Šï¼Œå®Œæˆä¸Šè¿°æ“ä½œåï¼ŒåŒæ—‹ç¿¼å‡ºç°è‡ªæ—‹ï¼Œä¸»è¦åŸå› æ²¡æœ‰ç”¨èˆµæœºæ¥è¿›è¡Œå¯¹é£è¡Œå§¿æ€è¿›è¡Œè°ƒæ•´ï¼Œä»è€Œå‡ºç°è‡ªæ—‹ã€‚</p><p>å‘æŒ¥éƒ¨åˆ†ï¼š</p><p>ï¼ˆ1ï¼‰ å‘æŒ¥éƒ¨åˆ†ç¬¬ä¸€é¡¹ï¼Œé£è¡Œå™¨èƒ½å¤Ÿè¾¾åˆ°CDæ®µå†…çš„100cmå¤„ï¼Œå¹¶ä¸”æ‚¬åœ5ç§’ã€‚ä½†ç¨³å®šéœ€è¦ä¸€å®šæ—¶é—´ï¼Œäººä¸ºæ‹‰åˆ°BCæ®µå†…èƒ½è¾ƒå¿«æ¢å¤åˆ°åŸæ¥çš„ä½ç½®ã€‚ç”±æ­¤å¯ä»¥åˆ†æPIDçš„è°ƒèŠ‚ä½œç”¨è¿˜æ˜¯æœ‰çš„ï¼Œä½†å¼€å§‹åšPIDè¿ç®—æ—¶æœ‰ç‚¹è¶…è°ƒï¼Œå¯¼è‡´æ‚¬åœç¨³å®šæ—¶çš„æ—¶é—´è¾ƒé•¿ã€‚</p><p>ï¼ˆ2ï¼‰ å‘æŒ¥éƒ¨åˆ†ç¬¬äºŒé¡¹ï¼Œåœ¨åŸºç¡€éƒ¨åˆ†ç¬¬å››é¡¹çš„åŸºç¡€ä¸Šï¼Œç²¾åº¦çš„å¢åŠ è¿˜æ˜¯å®Œæˆä¸äº†ã€‚ç”±æ­¤å¯çŸ¥PIDå‚æ•°çš„é€‰å®šè¿˜ä¸å¤Ÿåˆç†ã€‚</p><p>ï¼ˆ3ï¼‰ å‘æŒ¥éƒ¨åˆ†ç¬¬ä¸‰é¡¹ï¼Œåœ¨å®ŒæˆåŸºç¡€éƒ¨åˆ†ç¬¬äºŒé¡¹çš„åŸºç¡€ä¸Šï¼ŒæŒ‰ä¸‹æ­¥è¿›é”®ï¼Œé«˜åº¦å¢åŠ äº†20cmï¼Œ5ç§’åå¹³ç¨³é™è½ã€‚åŸºæœ¬ä¸Šå®Œæˆè¦æ±‚ã€‚</p><p>ï¼ˆ4ï¼‰ å‘æŒ¥éƒ¨åˆ†ç¬¬å››é¡¹ï¼Œåœ¨é£è¡Œå™¨ä¸ŠæŒ‚ä¸Š30gçš„ç ç ï¼Œèƒ½å®Œæˆå‘æŒ¥éƒ¨åˆ†ç¬¬ä¸‰é¡¹ã€‚ç”±æ­¤å¯ä»¥å¾—çŸ¥é€šè¿‡é™€èºä»ªæµ‹å¾—Zè½´çš„è§’åº¦ä½œä¸ºPIDçš„åé¦ˆï¼Œè°ƒæ•´ä¸¤ä¸ªç”µæœºçš„è½¬é€Ÿï¼Œä»è€Œä½¿é£è¡Œå™¨è¾¾åˆ°å¹³è¡¡å¹¶ä¸”å®Œæˆç›¸åº”åŠ¨ä½œã€‚</p><p>ï¼ˆ5ï¼‰ å‘æŒ¥éƒ¨åˆ†ç¬¬äº”é¡¹ä¸ºè‡ªç”±å‘æŒ¥ï¼Œé£è¡Œå™¨åˆ†åˆ«å‡åˆ°Aç‚¹ï¼ŒBç‚¹ï¼ŒCç‚¹ï¼Œç„¶åé™åˆ°50cmå¤„ï¼Œç„¶åå¹³ç¼“é™è½ï¼Œæ¯ä¸ªç‚¹æ‚¬åœçš„æ—¶é—´å‡ä¸ºäº”ç§’ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ä¸ªäººé¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> STM32 </tag>
            
            <tag> æ™ºèƒ½æ§åˆ¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ ‘è“æ´¾æ­å»º ã€ä¼˜é›…ã®åšå®¢ã€‘</title>
      <link href="/2019/09/07/%E6%A0%91%E8%8E%93%E6%B4%BE%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/"/>
      <url>/2019/09/07/%E6%A0%91%E8%8E%93%E6%B4%BE%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/</url>
      
        <content type="html"><![CDATA[<h1 id="æ ‘è“æ´¾æ­å»º-ã€ä¼˜é›…ã®åšå®¢ã€‘"><a href="#æ ‘è“æ´¾æ­å»º-ã€ä¼˜é›…ã®åšå®¢ã€‘" class="headerlink" title="æ ‘è“æ´¾æ­å»º ã€ä¼˜é›…ã®åšå®¢ã€‘"></a>æ ‘è“æ´¾æ­å»º ã€ä¼˜é›…ã®åšå®¢ã€‘</h1><h2 id="ä¸€ã€å®‰è£…åŸºæœ¬ç¯å¢ƒ"><a href="#ä¸€ã€å®‰è£…åŸºæœ¬ç¯å¢ƒ" class="headerlink" title="ä¸€ã€å®‰è£…åŸºæœ¬ç¯å¢ƒ"></a>ä¸€ã€å®‰è£…åŸºæœ¬ç¯å¢ƒ</h2><h3 id="1-1-å®‰è£…æ ‘è“æ´¾ç³»ç»Ÿï¼ˆè¿™é‡Œæ¨èRaspberryï¼‰"><a href="#1-1-å®‰è£…æ ‘è“æ´¾ç³»ç»Ÿï¼ˆè¿™é‡Œæ¨èRaspberryï¼‰" class="headerlink" title="1.1 å®‰è£…æ ‘è“æ´¾ç³»ç»Ÿï¼ˆè¿™é‡Œæ¨èRaspberryï¼‰"></a>1.1 å®‰è£…æ ‘è“æ´¾ç³»ç»Ÿï¼ˆè¿™é‡Œæ¨èRaspberryï¼‰</h3><p>å®˜ç½‘åœ°å€ï¼š<a href="https://www.raspberrypi.org/software/">https://www.raspberrypi.org/software/</a></p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/2.png"></p><p>æ–°æ‰‹æ¨èè¿™ä¸ªå¸¦æ¡Œé¢çš„ç‰ˆæœ¬ã€‚</p><p>ç”±äºæŸäº›ä¼—æ‰€å‘¨çŸ¥çš„åŸå› ï¼Œå¦‚æœä¸èƒ½ç§‘å­¦ä¸Šç½‘ï¼Œé‚£ä¹ˆä¸‹è½½é€Ÿåº¦æ˜¯è¿™æ ·çš„ï¼š</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/3.png"></p><p>è¿™é‡Œæ¨èå‡ ä¸ªå›½å†…ä¸‹è½½æºï¼š</p><ul><li>TUNA é•œåƒç«™ï¼ˆä½äºåŒ—äº¬ï¼‰ï¼š<a href="https://mirrors.tuna.tsinghua.edu.cn/raspberry-pi-os-images/">https://mirrors.tuna.tsinghua.edu.cn/raspberry-pi-os-images/</a></li><li>SJTUG é•œåƒç«™ï¼ˆä½äºä¸Šæµ·ï¼‰ï¼š<a href="https://mirrors.sjtug.sjtu.edu.cn/raspberry-pi-os-images/">https://mirrors.sjtug.sjtu.edu.cn/raspberry-pi-os-images/</a></li></ul><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/4.png"></p><p>å†™ç›˜å·¥å…·æœ‰å¾ˆå¤šï¼Œè¿™é‡Œæ¨è<a href="https://www.balena.io/etcher/">Etcher</a>,æ¯”è¾ƒé è°±ã€‚targetä¸€å®šè¦é€‰æ‹©SDå¡ï¼Œåƒä¸‡åˆ«é€‰é”™ï¼ï¼ï¼</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/6.png"></p><p>å¦‚æœæƒ³é‡‡ç”¨sshè¿æ¥æ ‘è“æ´¾ï¼Œè¿˜éœ€åœ¨å†™åˆ¶ä½œå¥½çš„SDå¡ï¼ˆ<strong>å³å†™ç›˜å®Œæˆåç”µè„‘ä¸Šä¼šå‡ºç°çš„bootåˆ†åŒºï¼Œå¦‚æœæ²¡æœ‰ï¼Œæ‹”ä¸‹è¯»å¡å™¨é‡æ’ä¸€ä¸‹</strong>ï¼‰ä¸­åŠ å…¥ä¸¤ä¸ªæ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯ç©ºç™½çš„sshæ–‡ä»¶ï¼ˆå³æ–°å»ºæ–‡æœ¬æ–‡æ¡£ï¼Œå°†æ–‡ä»¶åæ”¹ä¸ºsshï¼Œ<strong>å»æ‰åç¼€å</strong>ï¼Œ<strong>å»æ‰åç¼€å</strong>ï¼Œ<strong>å»æ‰åç¼€å</strong>ï¼‰ï¼Œå†æœ‰å°±æ˜¯wifié…ç½®æ–‡ä»¶ï¼Œæ–‡ä»¶åä¸ºwpa_supplicant.confã€‚å†…å®¹å¦‚ä¸‹ï¼š</p><pre><code>country=CNctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdevupdate_config=1network=&#123;    ssid=&quot;zwy&quot;          psk=&quot;12345678&quot;    priority=5&#125;network=&#123;    ssid=&quot;YiyaYiya&quot;    psk=&quot;lsluhiiin6103&quot;    priority=4&#125;</code></pre><p>ssid:wifiåç§°</p><p>psk:wifiå¯†ç </p><p>priority:è¿æ¥ä¼˜å…ˆçº§</p><p>ç„¶åï¼Œå°†SDå¡æ’å›æ ‘è“æ´¾ä¸Šå°±èƒ½æ­£å¸¸å¼€æœºäº†ã€‚ä¸è¿‡è¿™é‡Œæœ‰ä¸ªå·¨å‘ã€‚</p><hr><p><em>æ ‘è“æ´¾4bçš„typeCå£ç”±äºè®¾è®¡é—®é¢˜ï¼Œä½¿ç”¨éå®˜æ–¹çš„å……ç”µå™¨ï¼Œå¾ˆæœ‰å¯èƒ½æ²¡æ³•å¼€æœºï¼Œæ•…è€Œæ¨èå®˜æ–¹å……ç”µå™¨ï¼Œå¦‚æœå®åœ¨æ²¡æœ‰ï¼Œé‡‡ç”¨æ‰‹æœº5V/3Aå……ç”µå™¨åº”è¯¥ä¹Ÿå¯ä»¥ï¼ˆäº²æµ‹åä¸ºmateç³»åˆ—çš„å¯ä»¥ï¼‰</em></p><hr><h3 id="1-2-è¿œç¨‹è¿æ¥ä»¥åŠæ¢æº"><a href="#1-2-è¿œç¨‹è¿æ¥ä»¥åŠæ¢æº" class="headerlink" title="1.2 è¿œç¨‹è¿æ¥ä»¥åŠæ¢æº"></a>1.2 è¿œç¨‹è¿æ¥ä»¥åŠæ¢æº</h3><p>è¿œç¨‹è¿æ¥å·¥å…·æœ‰å¾ˆå¤šï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯xshellå’Œxftpã€‚å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡æ¥è§¦linuxç³»ç»Ÿï¼Œæ¨èä½¿ç”¨è¿œç¨‹æ¡Œé¢å·¥å…·ï¼Œä¸è¿‡ä¹Ÿéœ€å…ˆè¿æ¥è¿œç¨‹ç»ˆç«¯ï¼Œå®‰è£…xrdpå·¥å…·ï¼Œåªéœ€åœ¨å‘½ä»¤è¡Œè¾“å…¥ï¼š</p><pre class=" language-shell"><code class="language-shell">sudo apt-get install xrdp  </code></pre><p>å°±å¯ä»¥æ„‰å¿«æ˜¯ä½¿ç”¨è¿œç¨‹æ¡Œé¢äº†ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/7.png"></p><p>è¾“å…¥é»˜è®¤è´¦å·ï¼špi  é»˜è®¤å¯†ç ï¼šraspberry</p><p>è¿æ¥åï¼Œæ›´æ”¹é…ç½®ï¼Œè¾“å…¥ï¼š</p><pre class=" language-shell"><code class="language-shell">sudo raspi-config</code></pre><p>é€‰æ‹©ç¬¬ä¸€é¡¹ï¼Œæ›´æ”¹å¯†ç ã€‚</p><p>åŸºæœ¬é…ç½®å®Œæˆåï¼Œå¼€å§‹æ¢æºï¼š</p><p>ç¬¬ä¸€æ­¥ï¼Œå…ˆå¤‡ä»½æºæ–‡ä»¶</p><pre class=" language-sh"><code class="language-sh">sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak sudo cp /etc/apt/sources.list.d/raspi.list  etc/apt/sources.list.d/raspi.list.bak</code></pre><p>ç¬¬äºŒæ­¥ï¼Œç¼–è¾‘ç³»ç»Ÿæºæ–‡ä»¶</p><pre class=" language-shell"><code class="language-shell">sudo nano /etc/apt/sources.list</code></pre><p>ç¬¬ä¸‰æ­¥ï¼Œå°†åˆå§‹çš„æºä½¿ç”¨#æ³¨é‡Šæ‰ï¼Œæ·»åŠ å¦‚ä¸‹ä¸¤è¡Œæ¸…åçš„é•œåƒæºã€‚</p><pre><code>deb http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ buster main contrib non-free rpi deb-src http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ buster main contrib non-free rpi</code></pre><p>ç¬¬å››æ­¥ï¼Œä¿å­˜æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ sudo apt-get updateï¼Œå®Œæˆæºçš„æ›´æ–°è½¯ä»¶åŒ…ç´¢å¼•ã€‚</p><pre><code>sudo apt-get update&amp;&amp;sudo apt-get upgrade</code></pre><p>ç¬¬äº”æ­¥ï¼Œè¿˜éœ€è¦æ›´æ”¹ç³»ç»Ÿæº</p><pre class=" language-shell"><code class="language-shell">sudo nano /etc/apt/sources.list.d/raspi.list</code></pre><p>ç”¨#æ³¨é‡Šæ‰åŸæ–‡ä»¶å†…å®¹ï¼Œç”¨ä»¥ä¸‹å†…å®¹å–ä»£ï¼š</p><pre><code>deb http://mirrors.tuna.tsinghua.edu.cn/raspberrypi/ buster main ui</code></pre><p>æ›´æ”¹pipæº<br>æ–°å»º~/.pip/pip.confæ–‡ä»¶ï¼Œå†™å…¥å…¶åœ°å€ã€‚é˜¿é‡Œäº‘ã€ä¸­ç§‘å¤§ã€è±†ç“£ç­‰éƒ½æœ‰pipæºã€‚</p><pre class=" language-shell"><code class="language-shell">[global]index-url = http://pypi.douban.com/simple/</code></pre><h2 id="äºŒã€ç›¸å…³è½¯ä»¶é…ç½®"><a href="#äºŒã€ç›¸å…³è½¯ä»¶é…ç½®" class="headerlink" title="äºŒã€ç›¸å…³è½¯ä»¶é…ç½®"></a>äºŒã€ç›¸å…³è½¯ä»¶é…ç½®</h2><h3 id="2-1-é…ç½®git"><a href="#2-1-é…ç½®git" class="headerlink" title="2.1 é…ç½®git"></a>2.1 é…ç½®git</h3><p>åœ¨æ ‘è“æ´¾ç»ˆç«¯è¾“å…¥ï¼š</p><pre class=" language-shell"><code class="language-shell">sudo apt-get install git</code></pre><p>åœ¨æ ‘è“æ´¾ç»ˆç«¯è¾“å…¥ä¸‹åˆ—å‘½ä»¤ä¿®æ”¹å…¨å±€ç”¨æˆ·åï¼ˆæ³¨æ„å°†å¼•å·å†…æ›¿æ¢ä¸ºä¸ªäººå¸å·ï¼‰ï¼š</p><pre class=" language-shell"><code class="language-shell">git config --global user.name "ä½ çš„GitHub/Giteeç”¨æˆ·å"git config --global user.email "ä½ çš„GitHub/Giteeé‚®ç®±"</code></pre><p>ç„¶åæŸ¥çœ‹æ˜¯å¦å·²ç»å…¨å±€ä¿®æ”¹ç”¨æˆ·åï¼š</p><pre class=" language-shell"><code class="language-shell">git config --list</code></pre><p>é…ç½®å®Œæˆåå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210122174229788.png"></p><h3 id="2-2å®‰è£…Node-js"><a href="#2-2å®‰è£…Node-js" class="headerlink" title="2.2å®‰è£…Node.js"></a>2.2å®‰è£…Node.js</h3><p>é¦–å…ˆæŸ¥çœ‹æ ‘è“æ´¾çš„æ¶æ„ï¼Œæ ‘è“æ´¾ç»ˆç«¯è¾“å…¥å‘½ä»¤:</p><pre class=" language-shell"><code class="language-shell">uname -a</code></pre><p>æˆ‘ä½¿ç”¨çš„æ ‘è“æ´¾4Bæ˜¯åŸºäº<code>armv7</code>æ¶æ„ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210122174511028.png"></p><p>ç„¶åç™»å½•<a href="https://nodejs.org/en/download/">Nood.jså®˜ç½‘</a>ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é•¿æœŸæ”¯æŒç‰ˆæ˜¯<code>14.15.4</code>ï¼Œå¯è‡ªç”±é€‰æ‹©ç‰ˆæœ¬ï¼Œå¦‚ä¸‹å‘½ä»¤æ ¹æ®ç‰ˆæœ¬å˜åŒ–ã€‚</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210122174646072.png"></p><p>åœ¨æ ‘è“æ´¾ç»ˆç«¯è¾“å…¥ï¼š</p><pre class=" language-shell"><code class="language-shell">wget https://nodejs.org/dist/v14.15.4/node-v14.15.4-linux-armv7l.tar.xz</code></pre><p>å¦‚æœå‡ºç°ä¸‹è½½ç¼“æ…¢çš„é—®é¢˜æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨å›½å†…å¼€æºé•œåƒæº(æŸå®æº)ä¸‹è½½ï¼š</p><pre class=" language-shell"><code class="language-shell">wget https://cdn.npm.taobao.org/dist/node/latest-v14.x/node-v14.15.4-linux-armv7l.tar.xz</code></pre><p>è§£å‹äºŒè¿›åˆ¶åŒ…ï¼Œåœ¨æ ‘è“æ´¾ä¸‹è¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š</p><pre><code>xz -d node-v14.15.4-linux-armv7l.tar.xz &amp;&amp; tar -xavf node-v14.15.4-linux-armv7l.tar</code></pre><p>è§£å‹åï¼Œå°†äºŒè¿›åˆ¶åŒ…ç§»åŠ¨åˆ°<code>/usr/local/node</code>ä¸‹ï¼Œåœ¨ç»ˆç«¯è¾“å…¥ï¼š</p><pre class=" language-shell"><code class="language-shell">sudo mv ./node-v10.0.0-linux-armv7l /usr/local/node</code></pre><p>ç„¶åä¸º<code>node</code>å’Œ<code>npm</code>å»ºç«‹è½¯è¿æ¥ï¼Œåœ¨ç»ˆç«¯è¾“å…¥ï¼š</p><pre class=" language-shell"><code class="language-shell">sudo ln -s /usr/local/node/bin/node /usr/bin/nodesudo ln -s /usr/local/node/bin/npm /usr/bin/npm#è¿™ç±»ä¼¼äºWindowsä¸­çš„å¿«æ·æ–¹å¼</code></pre><p>æˆ‘ä»¬é€šè¿‡æŸ¥çœ‹<code>node</code>å’Œ<code>npm</code>ç‰ˆæœ¬çš„æ–¹å¼æ¥æŸ¥çœ‹æ˜¯å¦æˆåŠŸï¼Œåœ¨ç»ˆç«¯è¾“å…¥ï¼š</p><pre class=" language-shell"><code class="language-shell">node -v && npm -v</code></pre><p>è‡³æ­¤æˆ‘ä»¬å®Œæˆäº†<code>hexo</code>åšå®¢ä¸¤å¤§å‡†å¤‡å·¥ä½œ<code>Git</code>å’Œ<code>Node.js</code>çš„é…ç½®ï¼Œæˆ‘ä»¬æ­£å¼è¿›å…¥å®‰è£…<code>hexo</code>åšå®¢æ¡†æ¶ã€‚</p><h2 id="ä¸‰ã€å®‰è£…Hexo"><a href="#ä¸‰ã€å®‰è£…Hexo" class="headerlink" title="ä¸‰ã€å®‰è£…Hexo"></a>ä¸‰ã€å®‰è£…Hexo</h2><p>ç”±äºå›½å†…ç½‘é€Ÿé—®é¢˜<code>npm</code>åŒ…ç®¡ç†å™¨çš„é€Ÿåº¦ä¼šè¾ƒæ…¢ï¼Œæˆ‘ä»¬åˆ©ç”¨<code>npm</code>å®‰è£…<code>cnpm</code>ä¹Ÿå°±æ˜¯å‰æ–‡æåˆ°çš„æŸå®æºï¼Œåœ¨ç»ˆç«¯è¾“å…¥ï¼š</p><pre class=" language-shell"><code class="language-shell">npm install -g cnpm --registry=https://registry.npm.taobao.org</code></pre><p>åŒç†æˆ‘ä»¬ä¸º<code>cnpm</code>å»ºç«‹è½¯è¿æ¥ï¼Œåœ¨ç»ˆç«¯è¾“å…¥ï¼š</p><pre class=" language-shell"><code class="language-shell">sudo ln -s /usr/local/node/bin/cnpm /usr/bin/cnpm</code></pre><p>å®‰è£…Hexoåšå®¢æ¡†æ¶ï¼Œåœ¨ç»ˆç«¯è¾“å…¥ï¼š</p><pre class=" language-shell"><code class="language-shell">cnpm install -g hexo-cli</code></pre><p>ç­‰å¾…æ‰§è¡Œå®Œï¼Œæˆ‘ä»¬é€šè¿‡æŸ¥çœ‹<code>hexo</code>ç‰ˆæœ¬çš„æ–¹å¼æ¥æŸ¥çœ‹æ˜¯å¦æˆåŠŸï¼Œåœ¨ç»ˆç«¯è¾“å…¥ï¼š</p><pre class=" language-shell"><code class="language-shell">hexo -v</code></pre><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210122175725229.png"></p><h2 id="å››ã€ä½¿ç”¨Hexoæ­å»ºåšå®¢"><a href="#å››ã€ä½¿ç”¨Hexoæ­å»ºåšå®¢" class="headerlink" title="å››ã€ä½¿ç”¨Hexoæ­å»ºåšå®¢"></a>å››ã€ä½¿ç”¨Hexoæ­å»ºåšå®¢</h2><p>åˆ›å»ºä¸€ä¸ªç›®å½•ï¼Œä½œä¸ºåšå®¢çš„æ ¹ç›®å½•ï¼Œåå­—ä»»å–ï¼Œè¿™é‡Œå–<code>blog</code>ï¼Œå¹¶è¿›å…¥<code>blog</code>ç›®å½•ï¼Œåœ¨ç»ˆç«¯è¾“å…¥:</p><pre><code>sudo mkdir blogcd blog</code></pre><p>åˆå§‹åŒ–<code>Hexo</code>ï¼Œåœ¨ç»ˆç«¯è¾“å…¥ï¼š</p><pre><code>sudo hexo init</code></pre><p>å¯åŠ¨<code>Hexo</code>ï¼Œåœ¨ç»ˆç«¯è¾“å…¥ï¼š</p><pre><code>sudo hexo s</code></pre><p>å‡ºç°å¦‚ä¸‹å›¾æç¤ºåï¼š</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210122180658511.png"></p><p>åœ¨æµè§ˆå™¨è¾“å…¥ï¼š<code>æ ‘è“æ´¾IP:4000</code></p><p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„åšå®¢å·²ç»æ­å»ºå®Œæˆäº†ï¼Œå¦‚ä¸‹å›¾<code>hexo</code>è‡ªåŠ¨ç”Ÿæˆäº†ä¸€ç¯‡<code>Hello World</code>çš„æ–‡ç« ï¼Œæ–‡ç« å†…ç®€ä»‹äº†<code>hexo</code>çš„ç”¨æ³•ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ï¼Œè¯·ä»”ç»†é˜…è¯»ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Fengweicui1996/CDN/4bnoodjs/11.png"></p><p>ç„¶åæˆ‘ä»¬å›åˆ°å‘½ä»¤è¡ŒæŒ‰ä½<code>Ctrl+C</code>é€€å‡ºã€‚æ‰€æœ‰æ–‡ç« å‡ä»¥<code>.md</code>æ ¼å¼ä¿å­˜åœ¨<code>/source/_posts</code>æˆ‘ä»¬å¯ä»¥åœ¨æ­¤ç›®å½•ä¸‹åˆ é™¤æˆ–æ·»åŠ æ–‡ç« ã€‚</p><h2 id="äº”ã€å°†æœ¬åœ°Hexoåšå®¢éƒ¨ç½²åˆ°è¿œç«¯Github"><a href="#äº”ã€å°†æœ¬åœ°Hexoåšå®¢éƒ¨ç½²åˆ°è¿œç«¯Github" class="headerlink" title="äº”ã€å°†æœ¬åœ°Hexoåšå®¢éƒ¨ç½²åˆ°è¿œç«¯Github"></a>äº”ã€å°†æœ¬åœ°Hexoåšå®¢éƒ¨ç½²åˆ°è¿œç«¯Github</h2><p>æˆ‘ä»¬åœ¨<code>github</code>ä¸Šæ–°å»ºä¸€ä¸ªä»“åº“<code>Create a new repository</code>ï¼Œæ³¨æ„ä»“åº“åå­—å¿…é¡»ä¸ºï¼š</p><p> <strong>ä½ çš„githubè´¦æˆ·å.github.io</strong></p><p>åé¢æˆ‘ä»¬å°†ç”¨æ­¤åå­—ä½œä¸ºåŸŸåè®¿é—®åšå®¢ã€‚</p><p>å›åˆ°æ ‘è“æ´¾ç»ˆç«¯ï¼Œåœ¨åšå®¢æ ¹ç›®å½•ä¸‹ï¼Œè¿™æ˜¯<code>/blog</code>ç›®å½•ä¸‹ï¼Œåœ¨ç»ˆç«¯è¾“å…¥ï¼š</p><pre class=" language-shell"><code class="language-shell">sudo cnpm install --save hexo-deployer-git</code></pre><p>ç„¶åæˆ‘ä»¬éœ€è¦é…ç½®åšå®¢æ ¹ç›®å½•ä¸‹çš„<code>_config.yml</code>æ–‡ä»¶ï¼Œåœ¨ç»ˆç«¯è¾“å…¥ï¼š</p><pre class=" language-shell"><code class="language-shell">sudo nano _config.yml</code></pre><p>è¿›å…¥<code>_config.yml</code>ååˆ°æ–‡ä»¶æœ«ç«¯ï¼Œå¦‚ä¸‹å›¾<br>å°†æ­¤å¤„ä¿®æ”¹ä¸º:</p><pre class=" language-shell"><code class="language-shell"># Deployment## Docs: https://hexo.io/docs/deployment.htmldeploy:  type: git  repo: https://github.com/ä½ çš„è´¦æˆ·å/ä½ çš„è´¦æˆ·å.github.io  branch: master  #æ³¨æ„è¿™é‡Œçš„å†’å·åè¦åŠ ç©ºæ ¼</code></pre><p>æŒ‰<code>Ctrl+X</code>é€€å‡ºï¼ŒæŒ‰<code>Y</code>ä¿å­˜<br>ç„¶åä¾æ¬¡æ‰§è¡Œä¸‹åˆ—ä¸‰æ¡å‘½ä»¤</p><pre class=" language-shell"><code class="language-shell">sudo hexo cleansudo hexo gsudo hexo s</code></pre><p>åœ¨æ ‘è“æ´¾æœ¬åœ°æµè§ˆå™¨è¾“å…¥å¦‚ä¸‹ç«¯å£æŸ¥çœ‹æœ¬åœ°é¢„è§ˆ: <code>localhost:4000</code></p><p>ç„¶åå›åˆ°ç»ˆç«¯<code>Ctrl+C</code>é€€å‡ºï¼Œåœ¨ç»ˆç«¯è¾“å…¥ï¼š</p><pre class=" language-shell"><code class="language-shell">sudo hexo d</code></pre><p>è¾“å…¥è‡ªå·±çš„<code>github</code>ç”¨æˆ·åè·Ÿå¯†ç ï¼Œå³å¯æ¨é€åˆ°<code>github</code>ï¼Œæˆ‘ä»¬å¯ä»¥è¾“å…¥å¦‚ä¸‹åŸŸåæŸ¥çœ‹ä¸ªäººåšå®¢ã€‚</p><pre><code>ä½ çš„ç”¨æˆ·å.github.io</code></pre><p>æ¯æ¬¡å†™å®Œåšå®¢éƒ½è¦é‡å¤è¿™å‡ ä¸ªæ­¥éª¤ã€‚</p><pre><code>sudo hexo dsudo hexo clean &amp;&amp; sudo hexo g &amp;&amp; sudo hexo s</code></pre><h2 id="å…­ã€Typora-PicGo-Githubå›¾åºŠ-ä¼˜é›…ã®åšå®¢"><a href="#å…­ã€Typora-PicGo-Githubå›¾åºŠ-ä¼˜é›…ã®åšå®¢" class="headerlink" title="å…­ã€Typora+PicGo+Githubå›¾åºŠ=ä¼˜é›…ã®åšå®¢"></a>å…­ã€Typora+PicGo+Githubå›¾åºŠ=ä¼˜é›…ã®åšå®¢</h2><blockquote><p>Typora æ˜¯ä¸€æ¬¾<strong>æ”¯æŒå®æ—¶é¢„è§ˆçš„ Markdown æ–‡æœ¬ç¼–è¾‘å™¨</strong>ã€‚å®ƒæœ‰ OS Xã€Windowsã€Linux ä¸‰ä¸ªå¹³å°çš„ç‰ˆæœ¬ï¼Œå¹¶ä¸”ç”±äºä»åœ¨æµ‹è¯•ä¸­ï¼Œæ˜¯<strong>å®Œå…¨å…è´¹</strong>çš„</p><p>Typora ä¸€ç›´æ˜¯æˆ‘è®¤ä¸ºæ¡Œé¢ç«¯ç¬”è®°åº”ç”¨åº”æœ‰çš„ç»ˆæå½¢æ€ã€‚ç”¨æˆ‘ä¹‹å‰ ä¸€ç¯‡æ–‡ç«  ä¸­çš„è¯æ¥è¯´å°±æ˜¯ï¼Œã€Œå®ƒçš„<strong>åŠŸèƒ½ä¹‹å¼ºå¤§ã€è®¾è®¡ä¹‹å†·é™ã€ä½“éªŒä¹‹ç¾å¦™ã€ç†å¿µä¹‹å…ˆè¿›</strong>ï¼Œæˆ‘è®¤ä¸ºå€¼å¾—æ‰€æœ‰ç¬”è®°åº”ç”¨å‚å•†å­¦ä¹ ã€‚</p></blockquote><p>é¦–å…ˆå®‰è£…<a href="https://typora.io/#windows">typora</a>:</p><p>ä¸‹è½½-&gt;next â€¦.. next-&gt; å®Œæˆã€‚:grin:</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210122182557137.png"></p><p>ä¸‹è½½å®Œæˆåå¯ä»¥æ‰“å¼€åå¥½è®¾ç½®ï¼š</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210122182654108.png"></p><p>å›¾ç‰‡-&gt;ä¸Šä¼ å›¾ç‰‡ï¼›ä¸Šä¼ æœåŠ¡-&gt;PicGo,ç„¶åç‚¹å‡»ä¸‹è½½PicGo,ä¼šè·³è½¬åˆ°PicGoçš„å®˜ç½‘</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210122182912371.png"></p><p>ç„¶åç‚¹å‡»å…è´¹ä¸‹è½½ï¼Œè¦æ±‚ç‰ˆæœ¬<code>&gt;=2.2.0</code>ä¸”ä¸æ¨è<code>beta</code>ç‰ˆ,å®‰è£…å®Œæˆåï¼Œå¦‚å›¾ï¼š</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210122183822206.png"></p><p>æ¥ä¸‹æ¥åˆ›å»ºGithubä»“åº“ï¼›</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210122183957578.png"></p><p>ä»“åº“åå­—ï¼šä»»æ„ï¼ˆå¦‚imageã€Imgçš†å¯ï¼‰</p><p>åˆ‡è®°ï¼šé€‰æ‹©å…¬å¼€ï¼ˆPublicï¼‰</p><p>æ¥ä¸‹æ¥ï¼šè·å¾—Tokenså¯†é’¥ï¼Œç½‘å€ä¸ºï¼š<a href="https://github.com/settings/tokens">https://github.com/settings/tokens</a></p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210122184357428.png"></p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210122184558027.png"></p><p>ç„¶åé…ç½®PicGo,å›¾åºŠè®¾ç½®-&gt;GitHubå›¾åºŠ</p><p><img src="https://blog-1300216920.cos.ap-nanjing.myqcloud.com/image-20210122194003722.png"></p><p>è®¾ç½®ä»“åº“åï¼š<code>ä¸ªäººåç§°/åˆšåˆšæ–°å»ºçš„ä»“åº“</code></p><p>è®¾ç½®åˆ†æ”¯åï¼š<code>master</code></p><p>è®¾ç½®Token:<code>åˆšåˆšè·å–çš„Token</code></p><hr><p>ä¸€èµ·è®¾ç½®å®Œæˆåï¼›</p><p>å¤§åŠŸå‘Šæˆï¼ï¼ï¼æ’’èŠ±<em>â˜…,Â°</em>:.â˜†(ï¿£â–½ï¿£)/$:<em>.Â°â˜…</em> ã€‚:happy:</p>]]></content>
      
      
      <categories>
          
          <category> ä¸ªäººåšå®¢ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Typora </tag>
            
            <tag> Markdown </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
